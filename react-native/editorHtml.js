// This file is auto-generated by scripts/build-inline-html.js.
// Do not edit manually.
const editorHtml = "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Fabric.js Image Editor</title>\n<style>.sp-container{position:absolute;top:0;left:0;display:inline-block;z-index:9999994;overflow:hidden}.sp-original-input-container{position:relative;display:inline-flex}.sp-original-input-container input{margin:0!important}.sp-original-input-container .sp-add-on{width:40px;border-top-right-radius:0!important;border-bottom-right-radius:0!important}input.spectrum.with-add-on{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.sp-original-input-container .sp-add-on .sp-colorize{height:100%;width:100%;border-radius:inherit}.sp-colorize-container{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12' fill='%23ccc' fill-opacity='1'%3E%3Crect x='0' y='0' width='6' height='6' /%3E%3Crect x='6' y='6' width='6' height='6' /%3E%3C/svg%3E\")}.sp-container.sp-flat{position:relative}.sp-container,.sp-container *{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}.sp-top{position:relative;width:100%;display:inline-block}.sp-top-inner{position:absolute;top:0;left:0;bottom:0;right:0}.sp-color{position:absolute;top:0;left:0;bottom:0;right:20px!important}.sp-hue{position:absolute;top:0;right:0;bottom:0;width:12px;height:100%;left:initial!important}.sp-clear-enabled .sp-hue{top:15%;height:85%}.sp-fill{padding-top:80%}.sp-sat,.sp-val{position:absolute;top:0;left:0;right:0;bottom:0}.sp-alpha-enabled .sp-top{margin-bottom:28px!important}.sp-alpha-enabled .sp-alpha{display:block}.sp-alpha-handle{position:absolute;top:-3px;cursor:pointer;height:16px;border-radius:50%;width:16px;margin-right:5px;left:-2px;right:0;background:#f9f9f9;box-shadow:0 0 2px 0 #3a3a3a}.sp-alpha{display:none;position:absolute;bottom:-18px;right:0;left:0;height:10px}.sp-alpha-inner{border-radius:4px}.sp-clear{display:none}.sp-clear.sp-clear-display{background-position:center}.sp-clear-enabled .sp-clear{display:block;position:absolute;top:3px;right:0;bottom:0;cursor:pointer;left:initial;height:14px;width:14px}.sp-alpha,.sp-alpha-handle,.sp-clear,.sp-container,.sp-container button,.sp-container.sp-dragging .sp-input,.sp-dragger,.sp-preview,.sp-replacer,.sp-slider{-webkit-user-select:none;-moz-user-select:-moz-none;-o-user-select:none;user-select:none}.sp-container.sp-input-disabled .sp-input-container{display:none}.sp-container.sp-buttons-disabled .sp-button-container{display:none}.sp-container.sp-palette-buttons-disabled .sp-palette-button-container{display:none}.sp-palette-only .sp-picker-container{display:none}.sp-palette-disabled .sp-palette-container{display:none}.sp-initial-disabled .sp-initial{display:none}.sp-sat{background-image:-webkit-gradient(linear,0 0,100% 0,from(#fff),to(rgba(204,154,129,0)));background-image:-webkit-linear-gradient(left,#fff,rgba(204,154,129,0));background-image:-moz-linear-gradient(left,#fff,rgba(204,154,129,0));background-image:-o-linear-gradient(left,#fff,rgba(204,154,129,0));background-image:-ms-linear-gradient(left,#fff,rgba(204,154,129,0));background-image:linear-gradient(to right,#fff,rgba(204,154,129,0))}.sp-val{border-radius:4px;background-image:-webkit-gradient(linear,0 100%,0 0,from(#000),to(rgba(204,154,129,0)));background-image:-webkit-linear-gradient(bottom,#000,rgba(204,154,129,0));background-image:-moz-linear-gradient(bottom,#000,rgba(204,154,129,0));background-image:-o-linear-gradient(bottom,#000,rgba(204,154,129,0));background-image:-ms-linear-gradient(bottom,#000,rgba(204,154,129,0));background-image:linear-gradient(to top,#000,rgba(204,154,129,0))}.sp-hue{background:-moz-linear-gradient(top,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%);background:-ms-linear-gradient(top,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%);background:-o-linear-gradient(top,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%);background:-webkit-gradient(linear,left top,left bottom,from(red),color-stop(.17,#ff0),color-stop(.33,#0f0),color-stop(.5,#0ff),color-stop(.67,#00f),color-stop(.83,#f0f),to(red));background:-webkit-linear-gradient(top,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%);background:linear-gradient(to bottom,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}.sp-1{height:17%}.sp-2{height:16%}.sp-3{height:17%}.sp-4{height:17%}.sp-5{height:16%}.sp-6{height:17%}.sp-hidden{display:none!important}.sp-cf:after,.sp-cf:before{content:\"\";display:table}.sp-cf:after{clear:both}@media (max-device-width:480px){.sp-color{right:40%}.sp-hue{left:63%}.sp-fill{padding-top:60%}}.sp-dragger{border-radius:5px;height:10px;width:10px;border:1px solid #fff;cursor:pointer;position:absolute;top:0;left:0;margin-left:3px;margin-top:3px;box-shadow:0 0 2px 1px rgba(0,0,0,.2)}.sp-slider{position:absolute;top:0;cursor:pointer;height:16px;border-radius:50%;width:16px;left:-2px;background:#f9f9f9;box-shadow:0 0 2px 0 #3a3a3a;margin-top:8px}.sp-container{display:inline-flex;border-radius:0;background-color:#fff;padding:0;border-radius:4px;color:#000;box-shadow:0 0 0 1px rgba(99,114,130,.16),0 8px 16px rgba(27,39,51,.08)}.sp-clear,.sp-color,.sp-container,.sp-container button,.sp-container input,.sp-hue{font-size:12px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box}.sp-top{margin-bottom:10px}.sp-clear,.sp-color,.sp-hue,.sp-sat,.sp-val{border-radius:3px}.sp-input-container{margin-top:-5px}.sp-button-container.sp-cf,.sp-initial.sp-thumb.sp-cf,.sp-input-container.sp-cf{height:25px}.sp-picker-container .sp-cf{margin-bottom:10px}.sp-palette-row-initial>span:first-child{cursor:pointer}.sp-initial-disabled .sp-input-container{width:100%}.sp-input{padding:0 5px!important;margin:0;width:100%;box-shadow:none!important;height:100%!important;background:0 0;color:#3a3a3a;border-radius:2px!important;border:1px solid #e0e0e0!important;text-align:center;font-family:monospace;font-size:inherit!important}.sp-input:focus{border:1px solid orange}.sp-input.sp-validation-error{border:1px solid red;background:#fdd}.sp-palette-container,.sp-picker-container{position:relative;padding:10px}.sp-picker-container{width:200px;padding-bottom:0}.sp-palette-container{border-right:solid 1px #ccc}.sp-palette-only .sp-palette-container{border:0}.sp-palette .sp-thumb-el{display:block;position:relative;float:left;width:24px;height:15px;margin:3px;cursor:pointer;border:solid 2px transparent}.sp-palette .sp-thumb-el.sp-thumb-active,.sp-palette .sp-thumb-el:hover{border-color:orange}.sp-thumb-el{position:relative}.sp-initial{float:left}.sp-initial span{width:30px;height:25px;border:none;display:block;float:left;margin:0}.sp-initial .spe-thumb-el.sp-thumb-active{border-radius:0 5px 5px 0}.sp-initial .spe-thumb-el{border-radius:5px 0 0 5px}.sp-initial .sp-clear-display{background-position:center}.sp-button-container{float:right}.sp-palette-button-container{margin-top:10px}.sp-replacer{position:relative;overflow:hidden;cursor:pointer;display:inline-block;border-radius:3px;border:1px solid #aaa;color:#666;transition:border-color .3s;vertical-align:middle;width:3rem;height:1.5rem;margin:0;padding:0}.sp-replacer.sp-disabled{cursor:default;border-color:silver;color:silver}.sp-dd{position:absolute;font-size:10px;right:0;top:0;bottom:0;padding:0 2px;line-height:1.6rem;background-color:#fff}.sp-preview{position:relative;width:100%;height:100%;float:left;z-index:0}.sp-preview-inner{transition:background-color .2s}.sp-preview-inner.sp-clear-display{display:none}.sp-palette .sp-thumb-el{width:16px;height:16px;margin:3px;border:none;border-radius:3px}.sp-container button{border-radius:3px;border:none;background:0 0;line-height:1;padding:0 8px;height:25px;text-transform:capitalize;text-align:center;vertical-align:middle;cursor:pointer;color:#606c72;font-weight:700}.sp-container button.sp-choose{background-color:#3cab3b;color:#fff;margin-left:5px}.sp-container button:hover{opacity:.8}.sp-container button.sp-palette-toggle{width:100%;background-color:#f3f3f3;margin:0}.sp-palette span.sp-thumb-active,.sp-palette span:hover{border-color:#000}.sp-alpha,.sp-preview,.sp-thumb-el{position:relative;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12' fill='%23ccc' fill-opacity='1'%3E%3Crect x='0' y='0' width='6' height='6' /%3E%3Crect x='6' y='6' width='6' height='6' /%3E%3C/svg%3E\")}.sp-alpha-inner,.sp-preview-inner,.sp-thumb-inner{display:block;position:absolute;top:0;left:0;bottom:0;right:0}.sp-palette .sp-thumb-inner{border-radius:3px;background-position:50% 50%;background-repeat:no-repeat}.sp-palette .sp-thumb-light.sp-thumb-active .sp-thumb-inner{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIVJREFUeNpiYBhsgJFMffxAXABlN5JruT4Q3wfi/0DsT64h8UD8HmpIPCWG/KemIfOJCUB+Aoacx6EGBZyHBqI+WsDCwuQ9mhxeg2A210Ntfo8klk9sOMijaURm7yc1UP2RNCMbKE9ODK1HM6iegYLkfx8pligC9lCD7KmRof0ZhjQACDAAceovrtpVBRkAAAAASUVORK5CYII=);background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='18' height='18'%3E%3Cpath d='M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z' fill='%23000'%3E%3C/path%3E%3C/svg%3E\")}.sp-palette .sp-thumb-dark.sp-thumb-active .sp-thumb-inner{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAMdJREFUOE+tkgsNwzAMRMugEAahEAahEAZhEAqlEAZhEAohEAYh81X2dIm8fKpEspLGvudPOsUYpxE2BIJCroJmEW9qJ+MKaBFhEMNabSy9oIcIPwrB+afvAUFoK4H0tMaQ3XtlrggDhOVVMuT4E5MMG0FBbCEYzjYT7OxLEvIHQLY2zWwQ3D+9luyOQTfKDiFD3iUIfPk8VqrKjgAiSfGFPecrg6HN6m/iBcwiDAo7WiBeawa+Kwh7tZoSCGLMqwlSAzVDhoK+6vH4G0P5wdkAAAAASUVORK5CYII=);background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='18' height='18'%3E%3Cpath d='M9 16.172l10.594-10.594 1.406 1.406-12 12-5.578-5.578 1.406-1.406z' fill='%23fff'%3E%3C/path%3E%3C/svg%3E\")}.sp-clear-display{background-repeat:no-repeat;background-position:center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABe0lEQVQokYXSsUtcQRTF4d8Jj+VhHSxkEQuLsEUKK0nhTBFTmLSSUhBCMCAWsmgIwWrBLk0akfwLCaSQKBJmtrIIISwpRFKIhViETScphGMzysMtvOVwvpm5d0bGNCuGWAOPgYdl6S8wSDn9b+bUhDHEKWAdeAFMANg+l/TV9ofcz6cjMIbYBvaBMds7QCqZ58CmpBNgPuV0DvAAIMyFGugWtJr7eTv38xEwkPRPErY7QDeG2LqFkjrAgu0dSd/KDVqSNmxvAZ8lfbS9AHRuYemnLWkv5XRVBrQMbAI/gTXgEzAJtJuwBVS2L2OIle03QA/4Lmkl5XQBXEqqbFcAVYFDYChpFngiqWf7l6TXKaezMt2Zkhk24THwG+jZriX9AFZvUAyxLbRke2D75O5zPAO+ADXwEtizjaRHwDvbTyUtppwOmicCHAJvbXcl9YA1SQDjtseA97YPRz7ATcUQp2y/kjRdevsjaTfldNrMjcDGBjXA3T96L7yvrgFzP69+0Ao/HAAAAABJRU5ErkJggg==);background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='14' height='14'%3E%3Cpath d='M12 20.016q3.281 0 5.648-2.367t2.367-5.648q0-2.672-1.734-4.922l-11.203 11.203q2.25 1.734 4.922 1.734zM3.984 12q0 2.672 1.734 4.922l11.203-11.203q-2.25-1.734-4.922-1.734-3.281 0-5.648 2.367t-2.367 5.648zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z' fill='%23000'%3E%3C/path%3E%3C/svg%3E\")}\n.grp-wrapper {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==\")\n}\n\n.grp-preview {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  cursor: crosshair\n}\n\n.grp-handler {\n  width: 4px;\n  margin-left: -2px;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  height: 100%\n}\n\n.grp-handler-close {\n  color: rgba(0, 0, 0, 0.4);\n  border-radius: 100%;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.25);\n  background-color: #fff;\n  text-align: center;\n  width: 15px;\n  height: 15px;\n  margin-left: -5px;\n  line-height: 10px;\n  font-size: 21px;\n  cursor: pointer\n}\n\n.grp-handler-close-c {\n  position: absolute;\n  top: -17px\n}\n\n.grp-handler-drag {\n  background-color: rgba(0, 0, 0, 0.5);\n  cursor: col-resize;\n  width: 100%;\n  height: 100%\n}\n\n.grp-handler-selected .grp-handler-drag {\n  background-color: rgba(255, 255, 255, 0.5)\n}\n\n.grp-handler-cp-c {\n  display: none\n}\n\n.grp-handler-selected .grp-handler-cp-c {\n  display: block\n}\n\n.grp-handler-cp-wrap {\n  width: 15px;\n  height: 15px;\n  margin-left: -8px;\n  border: 3px solid #fff;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.25);\n  overflow: hidden;\n  border-radius: 100%;\n  cursor: pointer\n}\n\n.grp-handler-cp-wrap input[type=color] {\n  opacity: 0;\n  cursor: pointer\n}\n/* @import url('https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap'); */\n@import url('https://unicons.iconscout.com/release/v4.0.8/css/line.css');\n\n/* Reset and Global Settings */\n.default-container * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: sans-serif\n}\n\n.default-container {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    background-color: #eaeaea;\n}\n\n\n.default-container button {\n    cursor: pointer;\n}\n\n.default-container .grp-handler-cp-c {\n    margin-left: -20px;\n}\n\n.toolbar {\n    line-height: 0;\n    background-color: #f2f2f2;\n    box-shadow: 0 0 3px 0 rgba(50, 50, 50, .25);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.toolbar button {\n    width: 40px;\n    height: 35px;\n    opacity: .55;\n    clear: both;\n    border: 0;\n    border-radius: unset;\n    outline: none;\n    cursor: pointer;\n}\n\n.toolbar button.active,\n.toolbar button:hover {\n    opacity: 1;\n    border-left: 1px solid #ccc;\n    border-right: 1px solid #ccc;\n    box-shadow: inset 5px 0 10px 0 rgba(50, 50, 50, .1);\n}\n\n.toolbar button img,\n.toolbar button svg {\n    width: 16px;\n    height: 16px;\n}\n\n.default-container.vertical-toolbar-layout {\n    flex-direction: row;\n}\n\n.default-container.vertical-toolbar-layout #toolbar.vertical {\n    flex-direction: column;\n    align-items: stretch;\n    justify-content: flex-start;\n    width: 76px;\n    min-width: 64px;\n    height: 100%;\n    padding: 16px 12px;\n    gap: 16px;\n}\n\n.default-container.vertical-toolbar-layout #toolbar.vertical .main-buttons,\n.default-container.vertical-toolbar-layout #toolbar.vertical .extended-buttons {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.default-container.vertical-toolbar-layout #toolbar.vertical .main-buttons {\n    flex-grow: 1;\n}\n\n.default-container.vertical-toolbar-layout #toolbar.vertical .extended-buttons {\n    margin-top: auto;\n}\n\n.default-container.vertical-toolbar-layout #toolbar.vertical button {\n    width: 100%;\n}\n\n.default-container.vertical-toolbar-layout #toolbar.vertical button.active,\n.default-container.vertical-toolbar-layout #toolbar.vertical button:hover {\n    border-left: 0;\n    border-right: 0;\n    border-top: 1px solid #ccc;\n    border-bottom: 1px solid #ccc;\n    box-shadow: inset 0 5px 10px 0 rgba(50, 50, 50, .1);\n}\n\n.default-container.vertical-toolbar-layout .main-panel {\n    flex: none;\n}\n\n.main-panel {\n    height: 100%;\n    display: flex;\n    position: relative;\n    overflow: hidden;\n}\n\n.default-container.vertical-toolbar-layout .main-panel .canvas-holder.fixed-canvas.canvas-layers {\n    margin: 0 30px;\n    width: calc(100vw - 120px);\n}\n\n#footerbar {\n    background-color: #f2f2f2;\n    box-shadow: 0 0 3px 0 rgba(50, 50, 50, .25);\n    order: 3;\n    position: relative;\n    color: #6d6d6d;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.default-container.vertical-toolbar-layout #footerbar {\n    position: absolute;\n    right: 0;\n    z-index: 10;\n}\n\n.zoom-level-container {\n    margin-left: auto;\n    display: flex;\n    align-content: center;\n    align-items: center;\n}\n\n.zoom-level-container #zoom-value {\n    min-width: 45px;\n    display: inline-block;\n    font-size: 0.8em;\n}\n\n.zoom-level-container #input-zoom-level {\n    accent-color: #6d6d6d;\n}\n\n.canvas-holder {\n    margin: auto;\n    width: calc(100%);\n    height: 100%;\n    overflow: auto;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #eaeaea;\n    position: relative;\n}\n\n.canvas-holder.canvas-layers {\n    margin-right: 200px;\n    width: calc(100% - 200px);\n}\n\n.canvas-holder.fixed-canvas {\n    margin-left: 300px;\n    width: calc(100% - 500px);\n}\n\n.canvas-holder.fixed-canvas.canvas-layers {\n    margin-right: 200px;\n    margin-left: 300px;\n    width: calc(100% - 500px);\n}\n\n.canvas-container {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHUlEQVQ4jWNgYGAQIYAJglEDhoUBg9+FowbQ2gAARjwKARjtnN8AAAAASUVORK5CYII=\");\n    background-size: 30px 30px;\n    border: 1px solid #ccc;\n    margin: auto;\n}\n\n.toolpanel {\n    background-color: #f9f9f9;\n    width: 280px;\n    top: 10px;\n    left: 10px;\n    max-height: calc(100% - 20px);\n    border: 1px solid #ddd;\n    transition: all .4s;\n    box-sizing: border-box;\n    text-align: left;\n    font-size: 13px;\n    color: #777;\n    display: none;\n    position: absolute;\n    z-index: 9999;\n    border-radius: 15px;\n    overflow-y: auto;\n}\n\n.toolpanel h4 {\n    font-size: 14px;\n    font-weight: bold;\n    margin: 10px 0 5px;\n}\n\n.toolpanel.closed {\n    left: -300px;\n}\n\n.toolpanel.visible {\n    display: initial;\n}\n\n.toolpanel.visible:not(.closed)~.canvas-holder {\n    margin-left: 300px;\n    width: calc(100% - 500px);\n}\n\n.toolpanel .content {\n    padding: 10px;\n    position: relative;\n    height: -webkit-fill-available;\n    height: -ms-fill-available;\n    height: fill-available;\n    height: -moz-fill-available;\n    overflow-y: auto;\n    scrollbar-width: thin;\n    /* Para navegadores Firefox */\n    scrollbar-color: rgba(0, 0, 0, 0.5) transparent;\n    /* Para navegadores Firefox */\n    transition: padding 0.2s ease;\n}\n\n.toolpanel .content::-webkit-scrollbar {\n    width: 8px;\n}\n\n.toolpanel .content::-webkit-scrollbar-thumb {\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 4px;\n}\n\n.toolpanel .content::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n.toolpanel .title {\n    font-size: 14px;\n    font-weight: 700;\n    margin: 0;\n    padding-bottom: 10px;\n    width: 100%;\n    border-bottom: 1px solid #ddd;\n    color: #333;\n    text-transform: uppercase;\n}\n\n.toolpanel .hide-show-handler {\n    display: none;\n    position: absolute;\n    top: calc(50% - 40px);\n    right: -42px;\n    width: 40px;\n    height: 80px;\n    background: #f9f9f9;\n    border: 1px solid #ddd;\n    border-top-right-radius: 3px;\n    border-bottom-right-radius: 3px;\n    cursor: pointer;\n\n    /* background-image: url('caret-left.svg'); */\n    background-image: url('data:image/svg+xml,<%3Fxml version=\"1.0\"%3F><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Capa_1\" x=\"0px\" y=\"0px\" width=\"512px\" height=\"512px\" viewBox=\"0 0 292.359 292.359\" style=\"enable-background:new 0 0 292.359 292.359;\" xml:space=\"preserve\"><g transform=\"matrix(-1, -0, 0, 1, 292.359, 0)\"><g><path d=\"M222.979,133.331L95.073,5.424C91.456,1.807,87.178,0,82.226,0c-4.952,0-9.233,1.807-12.85,5.424 c-3.617,3.617-5.424,7.898-5.424,12.847v255.813c0,4.948,1.807,9.232,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428 c4.949,0,9.23-1.811,12.847-5.428l127.906-127.907c3.614-3.613,5.428-7.897,5.428-12.847 C228.407,141.229,226.594,136.948,222.979,133.331z\" data-original=\"%23000000\" class=\"active-path\" fill=\"%23000000\"/></g></g></svg>');\n    background-size: 10px;\n    background-repeat: no-repeat;\n    background-position: center center;\n}\n\n.toolpanel.closed .hide-show-handler {\n    /* background-image: url('caret-right.svg'); */\n    background-image: url('data:image/svg+xml,<svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"292.359px\" height=\"292.359px\" viewBox=\"0 0 292.359 292.359\" style=\"enable-background:new 0 0 292.359 292.359;\" xml:space=\"preserve\"><g><path d=\"M222.979,133.331L95.073,5.424C91.456,1.807,87.178,0,82.226,0c-4.952,0-9.233,1.807-12.85,5.424c-3.617,3.617-5.424,7.898-5.424,12.847v255.813c0,4.948,1.807,9.232,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428c4.949,0,9.23-1.811,12.847-5.428l127.906-127.907c3.614-3.613,5.428-7.897,5.428-12.847C228.407,141.229,226.594,136.948,222.979,133.331z\"/></g></svg>');\n}\n\n.spectrum.with-add-on {\n    width: 40px;\n}\n\n#shapes-panel .button {\n    cursor: pointer;\n    line-height: 0;\n    overflow: hidden;\n    padding: 0;\n    width: 32px;\n    height: 32px;\n    display: inline-block;\n    margin: 8px;\n}\n\n#images-panel .list-images {\n    display: flex;\n    flex-wrap: wrap;\n}\n\n#images-panel .button {\n    cursor: pointer;\n    line-height: 0;\n    overflow: hidden;\n    padding: 0;\n    display: inline-block;\n    margin: 0;\n    width: 25%;\n}\n\n#images-panel .button:hover {\n    opacity: 0.8;\n}\n\n#images-panel .button img {\n    width: 100%;\n    height: 60px;\n    object-fit: cover;\n}\n\n#background-panel .canvas-size-setting input {\n    width: 60px;\n    background-color: #fff;\n    border-radius: 6px;\n    border: 2px solid #e4e4e4;\n    padding: 4px 10px;\n    line-height: 18px;\n    font-size: 13px;\n}\n\n#select-panel .text-section .style button,\n#select-panel .alignment-section button,\n#select-panel .object-options button {\n    padding: 0;\n    width: 32px;\n    height: 32px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    text-align: center;\n    outline: none;\n}\n\n#select-panel .text-section .style button:hover,\n#select-panel .alignment-section button:hover,\n#select-panel .object-options button:hover {\n    background-color: #d6d6d6;\n}\n\n#select-panel button svg {\n    opacity: .7;\n    width: 18px;\n    height: 18px;\n    vertical-align: middle;\n}\n\n#select-panel .text-section .style,\n#select-panel .text-section .family,\n#select-panel .text-section .sizes,\n#select-panel .text-section .align,\n#select-panel .text-section .color {\n    margin-bottom: 20px;\n}\n\n#select-panel .text-section .sizes input {\n    width: 50px;\n}\n\n.toolpanel#select-panel .text-section,\n.toolpanel#select-panel .effect-section {\n    display: none;\n}\n\n.toolpanel#select-panel.type-group .border-section {\n    display: none;\n}\n\n.toolpanel#select-panel.type-group .fill-section {\n    display: none;\n}\n\n.toolpanel#select-panel.type-textbox .text-section,\n.toolpanel#select-panel.type-i-text .text-section {\n    display: block;\n}\n\n.toolpanel#select-panel.type-textbox .fill-section,\n.toolpanel#select-panel.type-i-text .fill-section {\n    display: none;\n}\n\n.toolpanel#select-panel.type-image .effect-section {\n    display: block;\n}\n\n.toolpanel#select-panel.type-image .fill-section {\n    display: none;\n}\n\n.custom-modal-container {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    background: #3333;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.custom-modal-content {\n    background: white;\n    width: max-content;\n    padding: 20px;\n}\n\n.custom-modal-content .button-download {\n    border: 1px solid #ccc;\n    padding: 10px;\n    cursor: pointer;\n    margin: 5px;\n    border-radius: 3px;\n}\n\n.custom-modal-content .button-download:hover {\n    background: #ccc;\n    transition: 0.3s;\n}\n\n.image-editor-confirm {\n    position: fixed;\n    inset: 0;\n    z-index: 1000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 16px;\n    background: rgba(0, 0, 0, 0.4);\n}\n\n.image-editor-confirm__content {\n    width: 100%;\n    max-width: 360px;\n    padding: 24px;\n    border-radius: 12px;\n    background: #ffffff;\n    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    text-align: center;\n}\n\n.image-editor-confirm__message {\n    margin: 0;\n    font-size: 16px;\n    line-height: 1.4;\n    color: #333333;\n}\n\n.image-editor-confirm__actions {\n    display: flex;\n    justify-content: center;\n    gap: 12px;\n    flex-wrap: wrap;\n}\n\n.image-editor-confirm__button {\n    min-width: 110px;\n    padding: 10px 16px;\n    border-radius: 6px;\n    border: none;\n    font-weight: 600;\n    cursor: pointer;\n    transition: background-color 0.2s ease, transform 0.15s ease;\n    background: #f1f1f1;\n    color: #333333;\n}\n\n.image-editor-confirm__button:focus {\n    outline: 2px solid #0b74ff;\n    outline-offset: 2px;\n}\n\n.image-editor-confirm__button:hover {\n    transform: translateY(-1px);\n}\n\n.image-editor-confirm__button--confirm {\n    background: #0b74ff;\n    color: #ffffff;\n}\n\n.image-editor-confirm__button--confirm:hover {\n    background: #0858c7;\n}\n\n.image-editor-confirm__button--cancel:hover {\n    background: #e3e3e3;\n}\n\n.toolpanel .input-container {\n    display: flex;\n    align-items: center;\n    padding-top: 5px;\n    padding-bottom: 5px;\n}\n\n.toolpanel .input-container label {\n    width: 50%;\n}\n\n.toolpanel .input-container select {\n    width: 50%;\n    height: 29px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    outline: none;\n}\n\n.toolpanel .tab-content .sp-replacer {\n    width: 100%;\n}\n\n.toolpanel .input-container .sp-replacer {\n    width: 50%;\n}\n\n.toolpanel .input-container .custom-number-input {\n    background: #ebebeb;\n    display: flex;\n    align-items: center;\n    padding: 1px;\n    height: 30px;\n    background-color: #e4e4e4;\n    border-radius: 6px;\n    text-align: center;\n}\n\n.toolpanel .input-container .custom-number-input button {\n    width: 36px !important;\n    height: 30px !important;\n    background-color: #fff;\n    background-clip: padding-box;\n    border-radius: 6px;\n    color: #333;\n    border: 1px solid transparent;\n    font-size: 16px;\n    cursor: pointer;\n    outline: none;\n}\n\n.toolpanel .input-container .custom-number-input input {\n    height: 30px !important;\n    width: 60px !important;\n    background: transparent !important;\n    border: none;\n    outline: none;\n    text-align: center;\n}\n\n.toolpanel .input-container .custom-number-input input::-webkit-outer-spin-button,\n.toolpanel .input-container .custom-number-input input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n}\n\n/* Firefox */\n.toolpanel .input-container .custom-number-input input[type=number] {\n    -moz-appearance: textfield;\n}\n\n.tab-container .tabs {\n    display: flex;\n    justify-content: space-between;\n}\n\n.tab-container .tabs .tab-label {\n    font-size: 16px;\n    cursor: pointer;\n}\n\n.tab-container .tabs .tab-label.active {\n    color: black\n}\n\n.gradient-orientation-container {\n    padding-top: 40px;\n}\n\n.drag-drop-input {\n    background-color: #fff;\n    width: 100%;\n    box-sizing: border-box;\n    border: 2px dashed #ccc;\n    border-radius: 6px;\n    text-align: center;\n    padding: 120px;\n}\n\n.drag-drop-input.dragging {\n    border-color: #4368a9;\n}\n\n.toolpanel#images-panel .content .drag-drop-input {\n    padding: 20px;\n    margin: 10px 0;\n}\n\n#tip-container {\n    padding: 10px;\n    text-align: center;\n    touch-action: none;\n    cursor: default;\n    color: #888;\n    font-size: 0.8em;\n}\n\n\n.main-panel .toolpanel .tab-container button {\n    height: 30px !important;\n    background-color: #fff;\n    background-clip: padding-box;\n    border-radius: 4px;\n    color: #333;\n    border: 1px solid #ddd;\n    text-align: center;\n    cursor: pointer;\n    outline: none;\n    font-size: 13px;\n}\n\n.toast-notification {\n    min-width: 200px;\n    height: 50px;\n    background-color: white;\n    border-radius: 10px;\n    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n    top: 20px;\n    right: 20px;\n    margin-bottom: 20px;\n    margin-left: 0;\n    position: absolute;\n    z-index: 1;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 10px;\n}\n\n.toast-notification .message-container {\n    width: 80%;\n    color: white;\n    font-size: 0.8rem;\n    padding: 10px 10px 10px 15px;\n}\n\n.toast-notification .close-notification {\n    width: 20%;\n    text-align: center;\n}\n\n.toast-notification .close-notification>svg {\n\n    font-weight: 900;\n    color: white;\n    cursor: pointer;\n\n    width: 16px;\n    height: 16px;\n\n}\n\n/* Estilos para Réguas e Guias */\n.ruler {\n    position: absolute;\n    background-color: #f0f0f0;\n    z-index: 100;\n}\n\n.horizontal-ruler {\n    top: 0;\n    left: 20px;\n    right: 0;\n    height: 20px;\n    cursor: row-resize;\n}\n\n.vertical-ruler {\n    top: 20px;\n    left: 0;\n    width: 20px;\n    bottom: 0;\n    cursor: col-resize;\n}\n\n.ruler-corner {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 20px;\n    height: 20px;\n    background-color: #f0f0f0;\n    border-right: 1px solid #ccc;\n    border-bottom: 1px solid #ccc;\n    z-index: 101;\n    cursor: pointer;\n}\n\n.ruler-corner:hover {\n    background-color: #e0e0e0;\n}\n\n.ruler-menu {\n    position: absolute;\n    top: 25px;\n    left: 25px;\n    padding: 5px;\n    background-color: #fff;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);\n    z-index: 1000;\n}\n\n.ruler-menu button {\n    display: block;\n    margin: 5px 0;\n    padding: 5px 10px;\n    width: 100%;\n    text-align: left;\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 12px;\n    color: #333;\n}\n\n.ruler-menu button:hover {\n    background-color: #f0f0f0;\n}\n\n.guide-tooltip {\n    position: absolute;\n    background-color: rgba(0, 0, 0, 0.7);\n    color: #fff;\n    padding: 5px;\n    border-radius: 3px;\n    font-size: 11px;\n    pointer-events: none;\n    z-index: 1000;\n}\n\n.canvas-holder .content.with-rulers {\n    padding-top: 20px;\n    padding-left: 20px;\n    transition: padding 0.2s ease;\n}\n\n.canvas-holder .content .canvas-container.dragging {\n    border: 2px #4368a9 dashed;\n    border-radius: 10px;\n}\n\n.ContextMenu {\n    display: none;\n    list-style: none;\n    margin: 0;\n    max-width: 250px;\n    min-width: 125px;\n    padding: 0;\n    position: absolute;\n    user-select: none;\n    z-index: 99999;\n}\n\n.ContextMenu--theme-default {\n    background-color: #fff;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);\n    font-size: 13px;\n    outline: 0;\n    padding: 2px 0;\n}\n\n.ContextMenu--theme-default .ContextMenu-item {\n    padding: 6px 12px;\n}\n\n.ContextMenu--theme-default .ContextMenu-item:hover,\n.ContextMenu--theme-default .ContextMenu-item:focus {\n    background-color: rgba(0, 0, 0, 0.05);\n}\n\n.ContextMenu--theme-default .ContextMenu-item:focus {\n    outline: 0;\n}\n\n.ContextMenu--theme-default .ContextMenu-divider {\n    background-color: rgba(0, 0, 0, 0.15);\n}\n\n.ContextMenu.is-open {\n    display: block;\n}\n\n.ContextMenu-item {\n    cursor: pointer;\n    display: block;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.ContextMenu-divider {\n    height: 1px;\n    margin: 4px 0;\n}\n\n#templates-panel .list-templates {\n    display: flex;\n    flex-direction: row;\n    gap: 15px;\n    margin: 10px 0;\n    flex-wrap: wrap;\n}\n\n#templates-panel .list-templates-item {\n    text-align: center;\n    cursor: pointer;\n    width: 45%;\n    border: 1px solid #ccc;\n}\n\n#templates-panel .list-templates-item:hover {\n    background-color: #f0f0f0;\n    border: 1px solid #333;\n    opacity: 0.8;\n}\n\n#templates-panel .list-templates-item img {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHUlEQVQ4jWNgYGAQIYAJglEDhoUBg9+FowbQ2gAARjwKARjtnN8AAAAASUVORK5CYII=);\n    background-size: 10px 10px;\n    max-width: 100%;\n}\n\n#templates-panel .btn {\n    margin-top: 10px;\n}\n\n.default-container .btn {\n    height: 30px !important;\n    background-color: #fff;\n    background-clip: padding-box;\n    border-radius: 4px;\n    color: #333;\n    border: 1px solid #ddd;\n    text-align: center;\n    cursor: pointer;\n    outline: none;\n    font-size: 13px;\n}\n\n.default-container .btn:hover {\n    background-color: #d6d6d6;\n}\n\n/* Estilos para o botão EyeDropper (conta-gotas) */\n.color-picker-container {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    width: 50%;\n}\n\n.eyedropper-btn {\n    padding: 6px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s ease;\n    min-width: 32px;\n    height: 32px;\n}\n\n.eyedropper-btn:hover {\n    background-color: #f0f0f0;\n    border-color: #999;\n}\n\n.eyedropper-btn:active {\n    background-color: #e0e0e0;\n    transform: scale(0.95);\n}\n\n.eyedropper-btn svg {\n    width: 16px;\n    height: 16px;\n    color: #4c4c4c;\n}\n\n.eyedropper-btn:hover svg {\n    color: #333;\n}\n\n/* Ajuste para o spectrum quando dentro do container */\n.color-picker-container .sp-replacer {\n    flex: 1;\n    width: auto !important;\n}\n\n/* Estilos específicos para diferentes seções */\n.text-section .color-picker-container,\n.fill-section .color-picker-container,\n.border-section .color-picker-container {\n    width: 50%;\n}\n\n/* Estilo específico para o background panel */\n#background-panel .color-picker-container {\n    width: 100%;\n    margin-bottom: 10px;\n}\n\n#background-panel .color-picker-container .sp-replacer {\n    flex: 1;\n    width: auto !important;\n}\n\n/* Responsividade para telas menores */\n@media (max-width: 768px) {\n    .color-picker-container {\n        gap: 4px;\n    }\n\n    .eyedropper-btn {\n        min-width: 28px;\n        height: 28px;\n        padding: 4px;\n    }\n\n    .eyedropper-btn svg {\n        width: 14px;\n        height: 14px;\n    }\n}\n\n/* Indicador visual quando EyeDropper está ativo */\n.eyedropper-btn.active {\n    background-color: #6d6d6d !important;\n    border-color: #6d6d6d !important;\n}\n\n.eyedropper-btn.active svg {\n    color: white !important;\n}\n\n/* Tooltip melhorado para o botão */\n.eyedropper-btn[title] {\n    position: relative;\n}\n\n.eyedropper-btn[title]:hover::after {\n    content: attr(title);\n    position: absolute;\n    bottom: -35px;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: #333;\n    color: white;\n    padding: 4px 8px;\n    border-radius: 4px;\n    font-size: 12px;\n    white-space: nowrap;\n    z-index: 1000;\n    opacity: 0.9;\n}\n\n/* Mensagem de aviso para navegadores não suportados */\n.eyedropper-not-supported {\n    color: #888;\n    font-size: 11px;\n    font-style: italic;\n    margin-top: 4px;\n    display: none;\n}\n\n/* Ajustes para melhor alinhamento em diferentes seções */\n.toolpanel .input-container:has(.color-picker-container) {\n    align-items: stretch;\n}\n\n.toolpanel .input-container:has(.color-picker-container) label {\n    align-self: center;\n}\n\n/* Layers */\n.image-editor-layers {\n    position: absolute;\n    right: 10px;\n    top: 10px;\n    width: 180px;\n    max-height: calc(100% - 20px);\n    background: #f2f2f2;\n    box-shadow: 0 0 3px 0 rgba(50, 50, 50, .25);\n    color: #333;\n    box-sizing: border-box;\n    overflow-x: hidden;\n    overflow-y: auto;\n    border-radius: 10px;\n}\n\n.image-editor-layers[closed] .layers-list {\n    display: none;\n}\n\n.image-editor-layers>div.layers-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    border-bottom: 1px solid #ddd;\n    padding: 10px;\n    gap: 10px;\n}\n\n.image-editor-layers>div.layers-header>p {\n    font-size: 14px;\n    font-weight: 700;\n    margin: 0;\n    color: #333;\n    text-transform: uppercase;\n    width: 100%;\n}\n\n.image-editor-layers>div.layers-header>button {\n    border: none;\n    margin: 0;\n    padding: 0;\n    width: auto;\n}\n\n.image-editor-layers .layers-list .layer-item {\n    padding: 5px 8px;\n    margin: 2px 0;\n    background: #f2f2f2;\n    cursor: move;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    /* border: 2px solid transparent; */\n    transition: all 0.2s ease;\n    user-select: none;\n}\n\n.image-editor-layers .layers-list .layer-item:hover {\n    /* outline: 1px solid #ccc; */\n    box-shadow: inset 5px 0 10px 0 rgba(50, 50, 50, .1);\n}\n\n.image-editor-layers .layers-list .layer-item .layer-controls button {\n    cursor: pointer;\n    background: none;\n    border: none;\n    font-size: 1rem;\n\n}\n\n.image-editor-layers .layers-list .layer-item .layer-info .layer-name {\n    font-size: 0.75rem;\n    text-transform: uppercase;\n}\n\n.image-editor-layers .layers-list .layer-item .layer-controls .layer-visibility {\n    opacity: 1;\n}\n\n.image-editor-layers .layers-list .layer-item-placeholder {\n    padding: 0;\n    margin: 0;\n    background: #f2f2f2;\n    outline: 1px dashed #6d6d6d;\n    box-shadow: inset 5px 0 10px 0 rgba(50, 50, 50, .1);\n    margin: 1px 3px;\n}\n\n.image-editor-layers .layers-list .layer-item .layer-controls .layer-lock:hover {\n    color: #fab403;\n}\n\n.image-editor-layers .layers-list .layer-item .layer-controls .layer-visibility:hover {\n    color: #2403fa;\n}\n\n.image-editor-layers .layers-list .layer-item .layer-controls .layer-delete:hover {\n    color: #fa0303;\n}\n\n\n\n\n\n\n\n/* Main Actions Menu */\n#obj-menu {\n    width: fit-content;\n    border-radius: 20px;\n    background: #fff;\n    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1);\n    position: relative;\n    display: none;\n    color: #4c4c4c;\n}\n\n#obj-menu .actions {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0px;\n    position: relative;\n}\n\n/* Menu Action Items */\n#obj-menu .actions-item {\n    padding: 5px;\n    cursor: pointer;\n    border-radius: 20px;\n    font-size: 20px;\n    position: relative;\n    line-height: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n#obj-menu .actions-item:hover {\n    background: #e0e0e0;\n}\n\n#obj-menu .actions-item span {\n    font-size: 12px;\n    line-height: 1;\n    display: inline-block;\n    padding: 0 5px;\n    font-weight: 600;\n}\n\n\n\n/* Dropdown Menu Wrapper */\n.menu-wrapper {\n    visibility: hidden;\n    position: absolute;\n    min-width: 250px;\n    max-width: 300px;\n    border-radius: 10px;\n    background: #fff;\n    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1);\n    overflow: visible;\n    color: #4c4c4c;\n    box-sizing: border-box;\n    font-family: sans-serif;\n    z-index: 99999;\n}\n\n.menu-wrapper * {\n    box-sizing: border-box;\n    font-family: sans-serif\n}\n\n/* Scrollbar Styling */\n.menu-wrapper .content::-webkit-scrollbar {\n    width: 16px;\n}\n\n.menu-wrapper .content::-webkit-scrollbar-thumb {\n    background-color: #888;\n    border: 4px solid transparent;\n    border-radius: 20px;\n    background-clip: padding-box;\n}\n\n/* Menu Content */\n.menu-wrapper .menu {\n    padding: 10px 0;\n    margin: 0;\n}\n\n.menu-wrapper .content .item {\n    list-style: none;\n    font-size: 20px;\n    height: 30px;\n    display: flex;\n    width: 100%;\n    cursor: pointer;\n    align-items: center;\n    border-radius: 5px;\n    margin-bottom: 2px;\n    padding: 0 12px;\n}\n\n.menu-wrapper .content .item:hover {\n    background: #e0e0e0;\n}\n\n.menu-wrapper .content .item>div {\n    display: flex;\n    align-items: center;\n}\n\n.menu-wrapper .content .item span {\n    margin-left: 8px;\n    font-size: 12px;\n    display: flex;\n    margin-right: 10px;\n}\n\n/* Keyboard Shortcuts */\n.menu-wrapper .content .item .shortcutkey {\n    font-size: 10px;\n    background: #e0e0e0;\n    padding: 2px 4px;\n    border-radius: 4px;\n    margin-left: auto;\n    margin-right: 0;\n    font-family: monospace;\n}\n\n/* Dividers */\n.menu-wrapper .content .divisor {\n    border-top: 1px solid #ccc;\n    margin: 5px 0;\n}\n\n/* Submenu */\n.menu-wrapper .sub-nivel {\n    position: relative;\n    justify-content: space-between;\n}\n\n.menu-wrapper .sub-nivel .sub-nivel-menu {\n    position: absolute;\n    background: #fff;\n    width: 250px;\n    top: 0;\n    padding: 13px 0;\n    opacity: 0;\n    pointer-events: none;\n    border-radius: 10px;\n    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.08);\n    transition: 0.1s ease;\n}\n\n.menu-wrapper .sub-nivel.active .sub-nivel-menu {\n    opacity: 1;\n    pointer-events: auto;\n}\n#tinyartist-logo {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: sans-serif;\n    display: flex;\n    align-items: center;\n}\n#tinyartist-logo > img {\n    width: 40px;\n    height: 35px;\n    padding-right: 5px;\n}\n#tinyartist-logo > span {}\n\n.default-container.vertical-toolbar-layout {\n    align-items: flex-end;\n}\n.default-container.vertical-toolbar-layout #tip-container {\n    visibility: hidden;\n}\n.default-container.vertical-toolbar-layout #toolbar.vertical #tinyartist-logo {\n    order: -1;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    gap: 8px;\n    width: 100%;\n}\n\n.default-container.vertical-toolbar-layout #toolbar.vertical #tinyartist-logo > img {\n    padding-right: 0;\n}\n</style>\n</head>\n<body>\n<div id=\"image-editor-container\"></div>\n<script>/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.5.1\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=v.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",B=new RegExp(M+\"+\",\"g\"),$=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!v||!v.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace($,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id='\"+S+\"'></a><select id='\"+S+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&v.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||v.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||v.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||v.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||v.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||v.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),v.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&v.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&v.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&v.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),v.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!='']:x\"),s.push(\"!=\",F)}),v=v.length&&new RegExp(v.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(B,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,v){var y=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace($,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(D).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener(\"DOMContentLoaded\",B),C.removeEventListener(\"load\",B),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",B),C.addEventListener(\"load\",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,he=/^$|^module$|\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option></option>\",y.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ve(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),\"script\"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function ke(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Ae(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\\s*(?:[^=]|=\\s*.checked.)/i,je=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function qe(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function Le(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function He(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,\"script\"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(je,\"\"),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,\"script\")).length&&ye(a,!f&&ve(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join(\"|\"),\"i\");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px\",t.style.height=\"1px\",n.style.height=\"9px\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=[\"Webkit\",\"Moz\",\"ms\"],ze=E.createElement(\"div\").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Qe={letterSpacing:\"0\",fontWeight:\"400\"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Ke(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=Be(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a=\"auto\"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),y.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),\"normal\"===i&&t in Qe&&(i=Qe[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,\"marginLeft\"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=Y.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt(\"show\"),slideUp:lt(\"hide\"),slideToggle:lt(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement(\"input\"),it=E.createElement(\"select\").appendChild(E.createElement(\"option\")),rt.type=\"checkbox\",y.checkOn=\"\"!==rt.value,y.optSelected=it.selected,(rt=E.createElement(\"input\")).value=\"t\",rt.type=\"radio\",y.radioValue=\"t\"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&\"radio\"===t&&A(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(\" \")}function yt(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function mt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\"tabindex\");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])r.indexOf(\" \"+o+\" \")<0&&(r+=o+\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&\" \"+vt(i)+\" \"){a=0;while(o=e[a++])while(-1<r.indexOf(\" \"+o+\" \"))r=r.replace(\" \"+o+\" \",\" \");i!==(s=vt(r))&&n.setAttribute(\"class\",s)}return this},toggleClass:function(i,t){var o=typeof i,a=\"string\"===o||Array.isArray(i);return\"boolean\"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&\"boolean\"!==o||((e=yt(this))&&Y.set(this,\"__className__\",e),this.setAttribute&&this.setAttribute(\"class\",e||!1===i?\"\":Y.get(this,\"__className__\")||\"\"))})},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+vt(yt(n))+\" \").indexOf(t))return!0;return!1}});var xt=/\\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?\"\":e+\"\"})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(xt,\"\"):null==e?\"\":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\"value\");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,\"optgroup\"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each([\"radio\",\"checkbox\"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),y.focusin=\"onfocusin\"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,\"type\")?e.type:e,h=v.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[S.expando]?e:new S.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,\"events\")||Object.create(null))[e.type]&&Y.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:\"focusin\",blur:\"focusout\"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\\?/;S.parseXML=function(e){var t;if(!e||\"string\"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,\"text/xml\")}catch(e){t=void 0}return t&&!t.getElementsByTagName(\"parsererror\").length||S.error(\"Invalid XML: \"+e),t};var St=/\\[\\]$/,kt=/\\r?\\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==w(e))i(n,e);else for(t in e)Dt(n+\"[\"+t+\"]\",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join(\"&\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,\"elements\");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(\":disabled\")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,\"\\r\\n\")}}):{name:t.name,value:n.replace(kt,\"\\r\\n\")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\\/\\//,Rt={},Mt={},It=\"*/\".concat(\"*\"),Wt=E.createElement(\"a\");function Ft(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":It,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+\"\").replace(Pt,Tt.protocol+\"//\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(P)||[\"\"],null==v.crossDomain){r=E.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+\"//\"+Wt.host!=r.protocol+\"//\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(v.data=v.data.replace(jt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(Et.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,\"$1\"),o=(Et.test(f)?\"&\":\"?\")+\"_=\"+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",S.lastModified[f]),S.etag[f]&&T.setRequestHeader(\"If-None-Match\",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+It+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray(\"script\",v.dataTypes)&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(S.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(S.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--S.active||S.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,\"json\")},getScript:function(e,t){return S.get(e,void 0,t,\"script\")}}),S.each([\"get\",\"post\"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&\"withCredentials\"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),S.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\\?(?=&|$)|\\?\\?/;S.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=Xt.pop()||S.expando+\"_\"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Vt.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,\"$1\"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||S.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),\"script\"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&S.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?S(\"<div>\").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,\"position\"),c=S(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=S.css(e,\"top\"),u=S.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):(\"number\"==typeof f.top&&(f.top+=\"px\"),\"number\"==typeof f.left&&(f.left+=\"px\"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===S.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===S.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,\"borderTopWidth\",!0),i.left+=S.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-S.css(r,\"marginTop\",!0),left:t.left-i.left-S.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===S.css(e,\"position\"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each([\"top\",\"left\"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+\"px\":t})}),S.each({Height:\"height\",Width:\"width\"},function(a,s){S.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\"\":(e+\"\").replace(Gt,\"\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},\"undefined\"==typeof e&&(C.jQuery=C.$=S),S});</script>\n<script>;(function(){\n  if (typeof jQuery !== 'undefined') {\n    jQuery.fn.outerHTML = function () {\n      return jQuery('<div />').append(this.eq(0).clone()).html();\n    };\n  }\n  Number.prototype.countDecimals = function () {\n    if (Math.floor(this.valueOf()) === this.valueOf()) return 0;\n    const parts = this.toString().split('.');\n    return parts[1] ? parts[1].length : 0;\n  };\n})();</script>\n<script>var jsdom,virtualWindow,fabric=fabric||{version:\"5.3.0\"};function resizeCanvasIfNeeded(t){var e=t.targetCanvas,i=e.width,r=e.height,n=t.destinationWidth,t=t.destinationHeight;i===n&&r===t||(e.width=n,e.height=t)}function copyGLTo2DDrawImage(t,e){var t=t.canvas,e=e.targetCanvas,i=e.getContext(\"2d\"),r=(i.translate(0,e.height),i.scale(1,-1),t.height-e.height);i.drawImage(t,0,r,e.width,e.height,0,0,e.width,e.height)}function copyGLTo2DPutImageData(t,e){var i=e.targetCanvas.getContext(\"2d\"),r=e.destinationWidth,e=e.destinationHeight,n=r*e*4,s=new Uint8Array(this.imageBuffer,0,n),n=new Uint8ClampedArray(this.imageBuffer,0,n),t=(t.readPixels(0,0,r,e,t.RGBA,t.UNSIGNED_BYTE,s),new ImageData(n,r,e));i.putImageData(t,0,0)}\"undefined\"!=typeof exports?exports.fabric=fabric:\"function\"==typeof define&&define.amd&&define([],function(){return fabric}),\"undefined\"!=typeof document&&\"undefined\"!=typeof window?(document instanceof(\"undefined\"!=typeof HTMLDocument?HTMLDocument:Document)?fabric.document=document:fabric.document=document.implementation.createHTMLDocument(\"\"),fabric.window=window):(jsdom=require(\"jsdom\"),virtualWindow=new jsdom.JSDOM(decodeURIComponent(\"%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E\"),{features:{FetchExternalResources:[\"img\"]},resources:\"usable\"}).window,fabric.document=virtualWindow.document,fabric.jsdomImplForWrapper=require(\"jsdom/lib/jsdom/living/generated/utils\").implForWrapper,fabric.nodeCanvas=require(\"jsdom/lib/jsdom/utils\").Canvas,fabric.window=virtualWindow,DOMParser=fabric.window.DOMParser),fabric.isTouchSupported=\"ontouchstart\"in fabric.window||\"ontouchstart\"in fabric.document||fabric.window&&fabric.window.navigator&&0<fabric.window.navigator.maxTouchPoints,fabric.isLikelyNode=\"undefined\"!=typeof Buffer&&\"undefined\"==typeof window,fabric.SHARED_ATTRIBUTES=[\"display\",\"transform\",\"fill\",\"fill-opacity\",\"fill-rule\",\"opacity\",\"stroke\",\"stroke-dasharray\",\"stroke-linecap\",\"stroke-dashoffset\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke-width\",\"id\",\"paint-order\",\"vector-effect\",\"instantiated_by_use\",\"clip-path\"],fabric.DPI=96,fabric.reNum=\"(?:[-+]?(?:\\\\d+|\\\\d*\\\\.\\\\d+)(?:[eE][-+]?\\\\d+)?)\",fabric.commaWsp=\"(?:\\\\s+,?\\\\s*|,\\\\s*)\",fabric.rePathCommand=/([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:[eE][-+]?\\d+)?)/gi,fabric.reNonWord=/[ \\n\\.,;!\\?\\-]/,fabric.fontPaths={},fabric.iMatrix=[1,0,0,1,0,0],fabric.svgNS=\"http://www.w3.org/2000/svg\",fabric.perfLimitSizeTotal=2097152,fabric.maxCacheSideLimit=4096,fabric.minCacheSideLimit=256,fabric.charWidthsCache={},fabric.textureSize=2048,fabric.disableStyleCopyPaste=!1,fabric.enableGLFiltering=!0,fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,fabric.browserShadowBlurConstant=1,fabric.arcToSegmentsCache={},fabric.boundsOfCurveCache={},fabric.cachesBoundsOfCurve=!0,fabric.forceGLPutImageData=!1,fabric.initFilterBackend=function(){return fabric.enableGLFiltering&&fabric.isWebglSupported&&fabric.isWebglSupported(fabric.textureSize)?(console.log(\"max texture size: \"+fabric.maxTextureSize),new fabric.WebglFilterBackend({tileSize:fabric.textureSize})):fabric.Canvas2dFilterBackend?new fabric.Canvas2dFilterBackend:void 0},\"undefined\"!=typeof document&&\"undefined\"!=typeof window&&(window.fabric=fabric),function(){function r(t,e){this.__eventListeners[t]&&(t=this.__eventListeners[t],e?t[t.indexOf(e)]=!1:fabric.util.array.fill(t,!1))}function n(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);this.on(t,i)}fabric.Observable={fire:function(t,e){if(!this.__eventListeners)return this;var i=this.__eventListeners[t];if(!i)return this;for(var r=0,n=i.length;r<n;r++)i[r]&&i[r].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return!1!==t}),this},on:function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},once:function(t,e){if(1===arguments.length)for(var i in t)n.call(this,i,t[i]);else n.call(this,t,e);return this},off:function(t,e){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)r.call(this,t);else if(1===arguments.length&&\"object\"==typeof arguments[0])for(var i in t)r.call(this,i,t[i]);else r.call(this,t,e);return this}}}(),fabric.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,i){var r=this._objects;return i?r[e]=t:r.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,i=!1,r=0,n=arguments.length;r<n;r++)-1!==(t=e.indexOf(arguments[r]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),r=0,n=i.length;r<n;r++)t.call(e,i[r],r,i);return this},getObjects:function(e){return void 0===e?this._objects.concat():this._objects.filter(function(t){return t.type===e})},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,t){return-1<this._objects.indexOf(e)||!!t&&this._objects.some(function(t){return\"function\"==typeof t.contains&&t.contains(e,!0)})},complexity:function(){return this._objects.reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},fabric.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof fabric.Gradient||this.set(e,new fabric.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof fabric.Pattern?i&&i():this.set(e,new fabric.Pattern(t,i))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return\"object\"==typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return\"boolean\"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(s){var o=Math.sqrt,a=Math.atan2,c=Math.pow,h=Math.PI/180,i=Math.PI/2;fabric.util={cos:function(t){if(0===t)return 1;switch((t=t<0?-t:t)/i){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=t<0?-1:1;switch(t/i){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){e=t.indexOf(e);return-1!==e&&t.splice(e,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*h},radiansToDegrees:function(t){return t/h},rotatePoint:function(t,e,i){t=new fabric.Point(t.x-e.x,t.y-e.y),t=fabric.util.rotateVector(t,i);return new fabric.Point(t.x,t.y).addEquals(e)},rotateVector:function(t,e){var i=fabric.util.sin(e),e=fabric.util.cos(e);return{x:t.x*e-t.y*i,y:t.x*i+t.y*e}},createVector:function(t,e){return new fabric.Point(e.x-t.x,e.y-t.y)},calcAngleBetweenVectors:function(t,e){return Math.acos((t.x*e.x+t.y*e.y)/(Math.hypot(t.x,t.y)*Math.hypot(e.x,e.y)))},getHatVector:function(t){return new fabric.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,e,i){e=fabric.util.createVector(t,e),t=fabric.util.createVector(t,i),i=fabric.util.calcAngleBetweenVectors(e,t),t=fabric.util.calcAngleBetweenVectors(fabric.util.rotateVector(e,i),t);return{vector:fabric.util.getHatVector(fabric.util.rotateVector(e,i*(0===t?1:-1)/2)),angle:i}},projectStrokeOnPoints:function(o,a,c){function h(t){var e=u/Math.hypot(t.x,t.y);return new fabric.Point(t.x*e*f.x,t.y*e*f.y)}var l=[],u=a.strokeWidth/2,f=a.strokeUniform?new fabric.Point(1/a.scaleX,1/a.scaleY):new fabric.Point(1,1);return o.length<=1||o.forEach(function(t,e){var i,r,t=new fabric.Point(t.x,t.y),e=(0===e?(s=o[e+1],n=c?h(fabric.util.createVector(s,t)).addEquals(t):o[o.length-1]):s=e===o.length-1?(n=o[e-1],c?h(fabric.util.createVector(n,t)).addEquals(t):o[0]):(n=o[e-1],o[e+1]),fabric.util.getBisector(t,n,s)),n=e.vector,s=e.angle;if(\"miter\"===a.strokeLineJoin&&(i=-u/Math.sin(s/2),r=new fabric.Point(n.x*i*f.x,n.y*i*f.y),Math.hypot(r.x,r.y)/u<=a.strokeMiterLimit))return l.push(t.add(r)),void l.push(t.subtract(r));i=-u*Math.SQRT2,r=new fabric.Point(n.x*i*f.x,n.y*i*f.y),l.push(t.add(r)),l.push(t.subtract(r))}),l},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var i=0;i<t.length;i++)t[i]=fabric.util.transformPoint(t[i],e);var r=[t[0].x,t[1].x,t[2].x,t[3].x],n=fabric.util.array.min(r),r=fabric.util.array.max(r)-n,s=[t[0].y,t[1].y,t[2].y,t[3].y],o=fabric.util.array.min(s);return{left:n,top:o,width:r,height:fabric.util.array.max(s)-o}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),e=[e*t[3],-e*t[1],-e*t[2],e*t[0]],t=fabric.util.transformPoint({x:t[4],y:t[5]},e,!0);return e[4]=-t.x,e[5]=-t.y,e},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\\D{0,2}$/.exec(t),r=parseFloat(t);switch(e=e||fabric.Text.DEFAULT_SVG_FONT_SIZE,i[0]){case\"mm\":return r*fabric.DPI/25.4;case\"cm\":return r*fabric.DPI/2.54;case\"in\":return r*fabric.DPI;case\"pt\":return r*fabric.DPI/72;case\"pc\":return r*fabric.DPI/72*12;case\"em\":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=[\"instantiated_by_use\",\"style\",\"id\",\"class\"];switch(t){case\"linearGradient\":e=e.concat([\"x1\",\"y1\",\"x2\",\"y2\",\"gradientUnits\",\"gradientTransform\"]);break;case\"radialGradient\":e=e.concat([\"gradientUnits\",\"gradientTransform\",\"cx\",\"cy\",\"r\",\"fx\",\"fy\",\"fr\"]);break;case\"stop\":e=e.concat([\"offset\",\"stop-color\",\"stop-opacity\"])}return e},resolveNamespace:function(t){if(!t)return fabric;for(var e=t.split(\".\"),i=e.length,r=s||fabric.window,n=0;n<i;++n)r=r[e[n]];return r},loadImage:function(t,e,i,r){var n,s;t?((n=fabric.util.createImage()).onload=s=function(){e&&e.call(i,n,!1),n=n.onload=n.onerror=null},n.onerror=function(){fabric.log(\"Error loading \"+n.src),e&&e.call(i,null,!0),n=n.onload=n.onerror=null},0!==t.indexOf(\"data\")&&null!=r&&(n.crossOrigin=r),\"data:image/svg\"===t.substring(0,14)&&(n.onload=null,fabric.util.loadImageInDom(n,s)),n.src=t):e&&e.call(i,t)},loadImageInDom:function(t,e){var i=fabric.document.createElement(\"div\");i.style.width=i.style.height=\"1px\",i.style.left=i.style.top=\"-100%\",i.style.position=\"absolute\",i.appendChild(t),fabric.document.querySelector(\"body\").appendChild(i),t.onload=function(){e(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(t,e,n,s){var o=[],i=0,r=(t=t||[]).length;function a(){++i===r&&e&&e(o.filter(function(t){return t}))}r?t.forEach(function(i,r){i&&i.type?fabric.util.getKlass(i.type,n).fromObject(i,function(t,e){e||(o[r]=t),s&&s(i,t,e),a()}):a()}):e&&e(o)},enlivenObjectEnlivables:function(e,n,t){var s=fabric.Object.ENLIVEN_PROPS.filter(function(t){return!!e[t]});fabric.util.enlivenObjects(s.map(function(t){return e[t]}),function(i){var r={};s.forEach(function(t,e){r[t]=i[e],n&&(n[t]=i[e])}),t&&t(r)})},enlivenPatterns:function(t,e){function i(){++n===s&&e&&e(r)}var r=[],n=0,s=(t=t||[]).length;s?t.forEach(function(t,e){t&&t.source?new fabric.Pattern(t,function(t){r[e]=t,i()}):(r[e]=t,i())}):e&&e(r)},groupSVGElements:function(t,e,i){return t&&1===t.length?(void 0!==i&&(t[0].sourcePath=i),t[0]):(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),t=new fabric.Group(t,e),void 0!==i&&(t.sourcePath=i),t)},populateWithProperties:function(t,e,i){if(i&&Array.isArray(i))for(var r=0,n=i.length;r<n;r++)i[r]in t&&(e[i[r]]=t[i[r]])},createCanvasElement:function(){return fabric.document.createElement(\"canvas\")},copyCanvasElement:function(t){var e=fabric.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext(\"2d\").drawImage(t,0,0),e},toDataURL:function(t,e,i){return t.toDataURL(\"image/\"+e,i)},createImage:function(){return fabric.document.createElement(\"img\")},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=a(t[1],t[0]),i=c(t[0],2)+c(t[1],2),r=o(i),n=(t[0]*t[3]-t[2]*t[1])/r,i=a(t[0]*t[2]+t[1]*t[3],i);return{angle:e/h,scaleX:r,scaleY:n,skewX:i/h,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return fabric.iMatrix.concat();var t=fabric.util.degreesToRadians(t.angle),e=fabric.util.cos(t),t=fabric.util.sin(t);return[e,t,-t,e,0,0]},calcDimensionsMatrix:function(t){var e=void 0===t.scaleX?1:t.scaleX,i=void 0===t.scaleY?1:t.scaleY,e=[t.flipX?-e:e,0,0,t.flipY?-i:i,0,0],i=fabric.util.multiplyTransformMatrices,r=fabric.util.degreesToRadians;return t.skewX&&(e=i(e,[1,0,Math.tan(r(t.skewX)),1],!0)),e=t.skewY?i(e,[1,Math.tan(r(t.skewY)),0,1],!0):e},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],i=fabric.util.multiplyTransformMatrices;return t.angle&&(e=i(e,fabric.util.calcRotateMatrix(t))),e=1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY?i(e,fabric.util.calcDimensionsMatrix(t)):e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,i,r){0<r&&(r<e?e-=r:e=0,r<i?i-=r:i=0);for(var n=!0,s=t.getImageData(e,i,2*r||1,2*r||1),o=s.data.length,a=3;a<o&&!1!=(n=s.data[a]<=0);a+=4);return s=null,n},parsePreserveAspectRatioAttribute:function(t){var e,i=\"meet\",t=t.split(\" \");return t&&t.length&&(\"meet\"!==(i=t.pop())&&\"slice\"!==i?(e=i,i=\"meet\"):t.length&&(e=t.pop())),{meetOrSlice:i,alignX:\"none\"!==e?e.slice(1,4):\"none\",alignY:\"none\"!==e?e.slice(5,8):\"none\"}},clearFabricFontCache:function(t){(t=(t||\"\").toLowerCase())?fabric.charWidthsCache[t]&&delete fabric.charWidthsCache[t]:fabric.charWidthsCache={}},limitDimsByArea:function(t,e){t=Math.sqrt(e*t),e=Math.floor(e/t);return{x:Math.floor(t),y:e}},capValue:function(t,e,i){return Math.max(t,Math.min(e,i))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return\"matrix(\"+t.map(function(t){return fabric.util.toFixed(t,fabric.Object.NUM_FRACTION_DIGITS)}).join(\" \")+\")\"},removeTransformFromObject:function(t,e){e=fabric.util.invertTransform(e),e=fabric.util.multiplyTransformMatrices(e,t.calcOwnMatrix());fabric.util.applyTransformToObject(t,e)},addTransformToObject:function(t,e){fabric.util.applyTransformToObject(t,fabric.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var e=fabric.util.qrDecompose(e),i=new fabric.Point(e.translateX,e.translateY);t.flipX=!1,t.flipY=!1,t.set(\"scaleX\",e.scaleX),t.set(\"scaleY\",e.scaleY),t.skewX=e.skewX,t.skewY=e.skewY,t.angle=e.angle,t.setPositionByOrigin(i,\"center\",\"center\")},sizeAfterTransform:function(t,e,i){t/=2,e/=2,t=[{x:-t,y:-e},{x:t,y:-e},{x:-t,y:e},{x:t,y:e}],e=fabric.util.calcDimensionsMatrix(i),i=fabric.util.makeBoundingBoxFromPoints(t,e);return{x:i.width,y:i.height}},mergeClipPaths:function(t,e){var i=t,r=e,e=(i.inverted&&!r.inverted&&(i=e,r=t),fabric.util.applyTransformToObject(r,fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(i.calcTransformMatrix()),r.calcTransformMatrix())),i.inverted&&r.inverted);return e&&(i.inverted=r.inverted=!1),new fabric.Group([i],{clipPath:r,inverted:e})},hasStyleChanged:function(t,e,i){return i=i||!1,t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||i&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},stylesToArray:function(t,e){for(var t=fabric.util.object.clone(t,!0),i=e.split(\"\\n\"),r=-1,n={},s=[],o=0;o<i.length;o++)if(t[o])for(var a=0;a<i[o].length;a++){r++;var c=t[o][a];c&&0<Object.keys(c).length&&(fabric.util.hasStyleChanged(n,c,!0)?s.push({start:r,end:r+1,style:c}):s[s.length-1].end++),n=c||{}}else r+=i[o].length;return s},stylesFromArray:function(t,e){if(!Array.isArray(t))return t;for(var i=e.split(\"\\n\"),r=-1,n=0,s={},o=0;o<i.length;o++)for(var a=0;a<i[o].length;a++)r++,t[n]&&t[n].start<=r&&r<t[n].end&&(s[o]=s[o]||{},s[o][a]=Object.assign({},t[n].style),r===t[n].end-1&&n++);return s}}}(\"undefined\"!=typeof exports?exports:this),function(){var w=Array.prototype.join,T={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},O={m:\"l\",M:\"L\"};function d(t,e,i,r,n,s,o){for(var a,c,h,l,u,f,d,g,p,m,v,b,y,_=Math.PI,o=o*_/180,x=fabric.util.sin(o),C=fabric.util.cos(o),S=0,T=0,o=-C*t*.5-x*e*.5,w=-C*e*.5+x*t*.5,O=(i=Math.abs(i))*i,P=(r=Math.abs(r))*r,L=w*w,R=o*o,k=O*P-O*L-P*R,E=0,j=(k<0?(i*=j=Math.sqrt(1-k/(O*P)),r*=j):E=(n===s?-1:1)*Math.sqrt(k/(O*L+P*R)),E*i*w/r),n=-E*r*o/i,B=C*j-x*n+.5*t,X=x*j+C*n+.5*e,A=H(1,0,(o-j)/i,(w-n)/r),k=H((o-j)/i,(w-n)/r,(-o-j)/i,(-w-n)/r),W=(0===s&&0<k?k-=2*_:1===s&&k<0&&(k+=2*_),Math.ceil(Math.abs(k/_*2))),D=[],M=k/W,Y=8/3*Math.sin(M/4)*Math.sin(M/4)/Math.sin(M/2),F=A+M,I=0;I<W;I++)D[I]=(a=A,c=F,h=C,l=x,u=i,f=r,d=B,g=X,p=Y,m=S,v=T,y=b=void 0,b=fabric.util.cos(a),a=fabric.util.sin(a),y=fabric.util.cos(c),c=fabric.util.sin(c),[\"C\",m+p*(-h*u*a-l*f*b),v+p*(-l*u*a+h*f*b),(d=h*u*y-l*f*c+d)+p*(h*u*c+l*f*y),(g=l*u*y+h*f*c+g)+p*(l*u*c-h*f*y),d,g]),S=D[I][5],T=D[I][6],A=F,F+=M;return D}function H(t,e,i,r){e=Math.atan2(e,t),t=Math.atan2(r,i);return e<=t?t-e:2*Math.PI-(e-t)}function g(t,e,i,r){return Math.sqrt((i-t)*(i-t)+(r-e)*(r-e))}function p(t,e,i){for(var r,n={x:e,y:i},s=0,o=1;o<=100;o+=1)r=t(o/100),s+=g(n.x,n.y,r.x,r.y),n=r;return s}function h(t,e){for(var i,r,n,s=0,o=0,a=t.iterator,c={x:t.x,y:t.y},h=.01,t=t.angleFinder;o<e&&1e-4<h;)i=a(s),n=s,e<(r=g(c.x,c.y,i.x,i.y))+o?(s-=h,h/=2):(c=i,s+=h,o+=r);return i.angle=t(n),i}function l(t){for(var e,i,r,n,s=0,o=t.length,a=0,c=0,h=0,l=0,u=[],f=0;f<o;f++){switch(r={x:a,y:c,command:(e=t[f])[0]},e[0]){case\"M\":r.length=0,h=a=e[1],l=c=e[2];break;case\"L\":r.length=g(a,c,e[1],e[2]),a=e[1],c=e[2];break;case\"C\":i=function(n,s,o,a,c,h,l,u){return function(t){var e=t*t*t,i=3*t*t*(1-t),r=3*t*(1-t)*(1-t),t=(1-t)*(1-t)*(1-t);return{x:l*e+c*i+o*r+n*t,y:u*e+h*i+a*r+s*t}}}(a,c,e[1],e[2],e[3],e[4],e[5],e[6]),n=function(i,r,n,s,o,a,c,h){return function(t){var e=1-t;return Math.atan2(3*e*e*(s-r)+6*e*t*(a-s)+3*t*t*(h-a),3*e*e*(n-i)+6*e*t*(o-n)+3*t*t*(c-o))}}(a,c,e[1],e[2],e[3],e[4],e[5],e[6]),r.iterator=i,r.angleFinder=n,r.length=p(i,a,c),a=e[5],c=e[6];break;case\"Q\":i=function(r,n,s,o,a,c){return function(t){var e=t*t,i=2*t*(1-t),t=(1-t)*(1-t);return{x:a*e+s*i+r*t,y:c*e+o*i+n*t}}}(a,c,e[1],e[2],e[3],e[4]),n=function(i,r,n,s,o,a){return function(t){var e=1-t;return Math.atan2(2*e*(s-r)+2*t*(a-s),2*e*(n-i)+2*t*(o-n))}}(a,c,e[1],e[2],e[3],e[4]),r.iterator=i,r.angleFinder=n,r.length=p(i,a,c),a=e[3],c=e[4];break;case\"Z\":case\"z\":r.destX=h,r.destY=l,r.length=g(a,c,h,l),a=h,c=l}s+=r.length,u.push(r)}return u.push({length:s,x:a,y:c}),u}fabric.util.joinPath=function(t){return t.map(function(t){return t.join(\" \")}).join(\" \")},fabric.util.parsePath=function(t){var e,i,r,n,s=[],o=[],a=fabric.rePathCommand,c=\"[-+]?(?:\\\\d*\\\\.\\\\d+|\\\\d+\\\\.?)(?:[eE][-+]?\\\\d+)?\\\\s*\",h=\"(\"+c+\")\"+fabric.commaWsp,l=\"([01])\"+fabric.commaWsp+\"?\",u=new RegExp(h+\"?\"+h+\"?\"+h+l+l+h+\"?(\"+c+\")\",\"g\");if(!t||!t.match)return s;for(var f,d=0,g=(f=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;d<g;d++){n=(e=f[d]).slice(1).trim(),o.length=0;var p,m=e.charAt(0),v=[m];if(\"a\"===m.toLowerCase())for(;p=u.exec(n);)for(var b=1;b<p.length;b++)o.push(p[b]);else for(;r=a.exec(n);)o.push(r[0]);for(var b=0,y=o.length;b<y;b++)i=parseFloat(o[b]),isNaN(i)||v.push(i);var _=T[m.toLowerCase()],x=O[m]||m;if(v.length-1>_)for(var C=1,S=v.length;C<S;C+=_)s.push([m].concat(v.slice(C,C+_))),m=x;else s.push(v)}return s},fabric.util.makePathSimpler=function(t){for(var e,i,r,n,s,o=0,a=0,c=t.length,h=0,l=0,u=[],f=0;f<c;++f){switch(i=!1,(e=t[f].slice(0))[0]){case\"l\":e[0]=\"L\",e[1]+=o,e[2]+=a;case\"L\":o=e[1],a=e[2];break;case\"h\":e[1]+=o;case\"H\":e[0]=\"L\",e[2]=a,o=e[1];break;case\"v\":e[1]+=a;case\"V\":e[0]=\"L\",a=e[1],e[1]=o,e[2]=a;break;case\"m\":e[0]=\"M\",e[1]+=o,e[2]+=a;case\"M\":o=e[1],a=e[2],h=e[1],l=e[2];break;case\"c\":e[0]=\"C\",e[1]+=o,e[2]+=a,e[3]+=o,e[4]+=a,e[5]+=o,e[6]+=a;case\"C\":n=e[3],s=e[4],o=e[5],a=e[6];break;case\"s\":e[0]=\"S\",e[1]+=o,e[2]+=a,e[3]+=o,e[4]+=a;case\"S\":s=\"C\"===r?(n=2*o-n,2*a-s):(n=o,a),o=e[3],a=e[4],e[0]=\"C\",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=n,e[2]=s,n=e[3],s=e[4];break;case\"q\":e[0]=\"Q\",e[1]+=o,e[2]+=a,e[3]+=o,e[4]+=a;case\"Q\":n=e[1],s=e[2],o=e[3],a=e[4];break;case\"t\":e[0]=\"T\",e[1]+=o,e[2]+=a;case\"T\":s=\"Q\"===r?(n=2*o-n,2*a-s):(n=o,a),e[0]=\"Q\",o=e[1],a=e[2],e[1]=n,e[2]=s,e[3]=o,e[4]=a;break;case\"a\":e[0]=\"A\",e[6]+=o,e[7]+=a;case\"A\":i=!0,u=u.concat(function(t,e,i){for(var r=i[1],n=i[2],s=i[3],o=i[4],a=i[5],c=d(i[6]-t,i[7]-e,r,n,o,a,s),h=0,l=c.length;h<l;h++)c[h][1]+=t,c[h][2]+=e,c[h][3]+=t,c[h][4]+=e,c[h][5]+=t,c[h][6]+=e;return c}(o,a,e)),o=e[6],a=e[7];break;case\"z\":case\"Z\":o=h,a=l}i||u.push(e),r=e[0]}return u},fabric.util.getSmoothPathFromPoints=function(t,e){var i,r,n=[],s=new fabric.Point(t[0].x,t[0].y),o=new fabric.Point(t[1].x,t[1].y),a=t.length,c=1,h=0,l=2<a;for(l&&(c=t[2].x<o.x?-1:t[2].x===o.x?0:1,h=t[2].y<o.y?-1:t[2].y===o.y?0:1),n.push([\"M\",s.x-c*(e=e||0),s.y-h*e]),i=1;i<a;i++)s.eq(o)||(r=s.midPointFrom(o),n.push([\"Q\",s.x,s.y,r.x,r.y])),s=t[i],i+1<t.length&&(o=t[i+1]);return l&&(c=s.x>t[i-2].x?1:s.x===t[i-2].x?0:-1,h=s.y>t[i-2].y?1:s.y===t[i-2].y?0:-1),n.push([\"L\",s.x+c*e,s.y+h*e]),n},fabric.util.getPathSegmentsInfo=l,fabric.util.getBoundsOfCurve=function(t,e,i,r,n,s,o,a){var c;if(fabric.cachesBoundsOfCurve&&(c=w.call(arguments),fabric.boundsOfCurveCache[c]))return fabric.boundsOfCurveCache[c];for(var h,l,u,f=Math.sqrt,d=Math.min,g=Math.max,p=Math.abs,m=[],v=[[],[]],b=6*t-12*i+6*n,y=-3*t+9*i-9*n+3*o,_=3*i-3*t,x=0;x<2;++x)0<x&&(b=6*e-12*r+6*s,y=-3*e+9*r-9*s+3*a,_=3*r-3*e),p(y)<1e-12?p(b)<1e-12||0<(h=-_/b)&&h<1&&m.push(h):(u=b*b-4*_*y)<0||(0<(l=(-b+(u=f(u)))/(2*y))&&l<1&&m.push(l),0<(l=(-b-u)/(2*y))&&l<1&&m.push(l));for(var C,S=m.length,T=S;S--;)h=m[S],v[0][S]=(C=1-h)*C*C*t+3*C*C*h*i+3*C*h*h*n+h*h*h*o,v[1][S]=C*C*C*e+3*C*C*h*r+3*C*h*h*s+h*h*h*a;return v[0][T]=t,v[1][T]=e,v[0][T+1]=o,v[1][T+1]=a,T=[{x:d.apply(null,v[0]),y:d.apply(null,v[1])},{x:g.apply(null,v[0]),y:g.apply(null,v[1])}],fabric.cachesBoundsOfCurve&&(fabric.boundsOfCurveCache[c]=T),T},fabric.util.getPointOnPath=function(t,e,i){i=i||l(t);for(var r=0;0<e-i[r].length&&r<i.length-2;)e-=i[r].length,r++;var n,s=i[r],o=e/s.length,a=s.command,c=t[r];switch(a){case\"M\":return{x:s.x,y:s.y,angle:0};case\"Z\":case\"z\":return(n=new fabric.Point(s.x,s.y).lerp(new fabric.Point(s.destX,s.destY),o)).angle=Math.atan2(s.destY-s.y,s.destX-s.x),n;case\"L\":return(n=new fabric.Point(s.x,s.y).lerp(new fabric.Point(c[1],c[2]),o)).angle=Math.atan2(c[2]-s.y,c[1]-s.x),n;case\"C\":case\"Q\":return h(s,e)}},fabric.util.transformPath=function(t,n,e){return e&&(n=fabric.util.multiplyTransformMatrices(n,[1,0,0,1,-e.x,-e.y])),t.map(function(t){for(var e=t.slice(0),i={},r=1;r<t.length-1;r+=2)i.x=t[r],i.y=t[r+1],i=fabric.util.transformPoint(i,n),e[r]=i.x,e[r+1]=i.y;return e})}}(),function(){var o=Array.prototype.slice;function i(t,e,i){if(t&&0!==t.length){var r=t.length-1,n=e?t[r][e]:t[r];if(e)for(;r--;)i(t[r][e],n)&&(n=t[r][e]);else for(;r--;)i(t[r],n)&&(n=t[r]);return n}}fabric.util.array={fill:function(t,e){for(var i=t.length;i--;)t[i]=e;return t},invoke:function(t,e){for(var i=o.call(arguments,2),r=[],n=0,s=t.length;n<s;n++)r[n]=i.length?t[n][e].apply(t[n],i):t[n][e].call(t[n]);return r},min:function(t,e){return i(t,e,function(t,e){return t<e})},max:function(t,e){return i(t,e,function(t,e){return e<=t})}}}(),function(){function o(t,e,i){if(i)if(!fabric.isLikelyNode&&e instanceof Element)t=e;else if(e instanceof Array){t=[];for(var r=0,n=e.length;r<n;r++)t[r]=o({},e[r],i)}else if(e&&\"object\"==typeof e)for(var s in e)\"canvas\"===s||\"group\"===s?t[s]=null:e.hasOwnProperty(s)&&(t[s]=o({},e[s],i));else t=e;else for(var s in e)t[s]=e[s];return t}fabric.util.object={extend:o,clone:function(t,e){return o({},t,e)}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),fabric.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():\"\"})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&apos;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")},graphemeSplit:function(t){for(var e,i=0,r=[],i=0;i<t.length;i++)!1!==(e=function(t,e){var i=t.charCodeAt(e);if(isNaN(i))return\"\";if(i<55296||57343<i)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw\"High surrogate without following low surrogate\";i=t.charCodeAt(e+1);if(i<56320||57343<i)throw\"High surrogate without following low surrogate\";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw\"Low surrogate without preceding high surrogate\";i=t.charCodeAt(e-1);if(i<55296||56319<i)throw\"Low surrogate without preceding high surrogate\";return!1}(t,i))&&r.push(e);return r}},function(){function s(){}var o=Array.prototype.slice,a=function(){for(var t in{toString:1})if(\"toString\"===t)return!1;return!0}();function c(){}function h(t){for(var e=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[t];if(i[t]!==r){e=r;break}i=i.constructor.superclass.prototype}return e?1<arguments.length?e.apply(this,o.call(arguments,1)):e.call(this):console.log(\"tried to callSuper \"+t+\", method not found in prototype chain\",this)}fabric.util.createClass=function(){var t=null,e=o.call(arguments,0);function i(){this.initialize.apply(this,arguments)}\"function\"==typeof e[0]&&(t=e.shift()),i.superclass=t,i.subclasses=[],t&&(c.prototype=t.prototype,i.prototype=new c,t.subclasses.push(i));for(var r=0,n=e.length;r<n;r++)!function(t,r,n){for(var e in r)e in t.prototype&&\"function\"==typeof t.prototype[e]&&-1<(r[e]+\"\").indexOf(\"callSuper\")?t.prototype[e]=function(i){return function(){var t=this.constructor.superclass,e=(this.constructor.superclass=n,r[i].apply(this,arguments));if(this.constructor.superclass=t,\"initialize\"!==i)return e}}(e):t.prototype[e]=r[e],a&&(r.toString!==Object.prototype.toString&&(t.prototype.toString=r.toString),r.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=r.valueOf))}(i,e[r],t);return i.prototype.initialize||(i.prototype.initialize=s),(i.prototype.constructor=i).prototype.callSuper=h,i}}(),function(){var n=!!fabric.document.createElement(\"div\").attachEvent,e=[\"touchstart\",\"touchmove\",\"touchend\"];fabric.util.addListener=function(t,e,i,r){t&&t.addEventListener(e,i,!n&&r)},fabric.util.removeListener=function(t,e,i,r){t&&t.removeEventListener(e,i,!n&&r)},fabric.util.getPointer=function(t){var e=t.target,e=fabric.util.getScrollLeftTop(e),i=(i=(t=t).changedTouches)&&i[0]?i[0]:t;return{x:i.clientX+e.left,y:i.clientY+e.top}},fabric.util.isTouchEvent=function(t){return-1<e.indexOf(t.type)||\"touch\"===t.pointerType}}(),function(){var t=fabric.document.createElement(\"div\"),e=\"string\"==typeof t.style.opacity,t=\"string\"==typeof t.style.filter,r=/alpha\\s*\\(\\s*opacity\\s*=\\s*([^\\)]+)\\)/,s=function(t){return t};e?s=function(t,e){return t.style.opacity=e,t}:t&&(s=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),r.test(i.filter)?i.filter=i.filter.replace(r,e=.9999<=e?\"\":\"alpha(opacity=\"+100*e+\")\"):i.filter+=\" alpha(opacity=\"+100*e+\")\",t}),fabric.util.setStyle=function(t,e){var i,r,n=t.style;if(!n)return t;if(\"string\"==typeof e)return t.style.cssText+=\";\"+e,-1<e.indexOf(\"opacity\")?s(t,e.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1]):t;for(i in e)\"opacity\"===i?s(t,e[i]):(r=\"float\"===i||\"cssFloat\"===i?void 0===n.styleFloat?\"cssFloat\":\"styleFloat\":i,n.setProperty(r,e[i]));return t}}(),function(){var e=Array.prototype.slice;var a,t,i,r=function(t){return e.call(t,0)};try{t=r(fabric.document.childNodes)instanceof Array}catch(t){}function n(t,e){var i,r=fabric.document.createElement(t);for(i in e)\"class\"===i?r.className=e[i]:\"for\"===i?r.htmlFor=e[i]:r.setAttribute(i,e[i]);return r}function c(t){for(var e=0,i=0,r=fabric.document.documentElement,n=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===fabric.document?(e=n.scrollLeft||r.scrollLeft||0,i=n.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||\"fixed\"!==t.style.position););return{left:e,top:i}}t||(r=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),a=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){t=fabric.document.defaultView.getComputedStyle(t,null);return t?t[e]:void 0}:function(t,e){var i=t.style[e];return i=!i&&t.currentStyle?t.currentStyle[e]:i},t=fabric.document.documentElement.style,i=\"userSelect\"in t?\"userSelect\":\"MozUserSelect\"in t?\"MozUserSelect\":\"WebkitUserSelect\"in t?\"WebkitUserSelect\":\"KhtmlUserSelect\"in t?\"KhtmlUserSelect\":\"\",fabric.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),i?t.style[i]=\"none\":\"string\"==typeof t.unselectable&&(t.unselectable=\"on\"),t},fabric.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),i?t.style[i]=\"\":\"string\"==typeof t.unselectable&&(t.unselectable=\"\"),t},fabric.util.setImageSmoothing=function(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e},fabric.util.getById=function(t){return\"string\"==typeof t?fabric.document.getElementById(t):t},fabric.util.toArray=r,fabric.util.addClass=function(t,e){t&&-1===(\" \"+t.className+\" \").indexOf(\" \"+e+\" \")&&(t.className+=(t.className?\" \":\"\")+e)},fabric.util.makeElement=n,fabric.util.wrapElement=function(t,e,i){return\"string\"==typeof e&&(e=n(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},fabric.util.getScrollLeftTop=c,fabric.util.getElementOffset=function(t){var e,i,r=t&&t.ownerDocument,n={left:0,top:0},s={left:0,top:0},o={borderLeftWidth:\"left\",borderTopWidth:\"top\",paddingLeft:\"left\",paddingTop:\"top\"};if(!r)return s;for(i in o)s[o[i]]+=parseInt(a(t,i),10)||0;return r=r.documentElement,void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),e=c(t),{left:n.left+e.left-(r.clientLeft||0)+s.left,top:n.top+e.top-(r.clientTop||0)+s.top}},fabric.util.getNodeCanvas=function(t){return(t=fabric.jsdomImplForWrapper(t))._canvas||t._image},fabric.util.cleanUpJsdomNode=function(t){!fabric.isLikelyNode||(t=fabric.jsdomImplForWrapper(t))&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}(),function(){function a(){}fabric.util.request=function(t,e){var i,r=(e=e||{}).method?e.method.toUpperCase():\"GET\",n=e.onComplete||function(){},s=new fabric.window.XMLHttpRequest,o=e.body||e.parameters;return s.onreadystatechange=function(){4===s.readyState&&(n(s),s.onreadystatechange=a)},\"GET\"===r&&(o=null,\"string\"==typeof e.parameters&&(i=t,e=e.parameters,t=i+(/\\?/.test(i)?\"&\":\"?\")+e)),s.open(r,t,!0),\"POST\"!==r&&\"PUT\"!==r||s.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"),s.send(o),s}}(),fabric.log=console.log,fabric.warn=console.warn,function(){var t=fabric.util.object.extend,i=fabric.util.object.clone,e=[];function r(){return!1}function n(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e}fabric.util.object.extend(e,{cancelAll:function(){var t=this.splice(0);return t.forEach(function(t){t.cancel()}),t},cancelByCanvas:function(e){if(!e)return[];var t=this.filter(function(t){return\"object\"==typeof t.target&&t.target.canvas===e});return t.forEach(function(t){t.cancel()}),t},cancelByTarget:function(t){t=this.findAnimationsByTarget(t);return t.forEach(function(t){t.cancel()}),t},findAnimationIndex:function(t){return this.indexOf(this.findAnimation(t))},findAnimation:function(e){return this.find(function(t){return t.cancel===e})},findAnimationsByTarget:function(e){return e?this.filter(function(t){return t.target===e}):[]}});var s=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){return fabric.window.setTimeout(t,1e3/60)},o=fabric.window.cancelAnimationFrame||fabric.window.clearTimeout;function _(){return s.apply(fabric.window,arguments)}fabric.util.animate=function(e){function v(){var t=fabric.runningAnimations.indexOf(y);return-1<t&&fabric.runningAnimations.splice(t,1)[0]}var b=!1,y=t(i(e=e||{}),{cancel:function(){return b=!0,v()},currentValue:\"startValue\"in e?e.startValue:0,completionRate:0,durationRate:0});return fabric.runningAnimations.push(y),_(function(t){var s,o=t||+new Date,a=e.duration||500,c=o+a,h=e.onChange||r,l=e.abort||r,u=e.onComplete||r,f=e.easing||n,d=\"startValue\"in e&&0<e.startValue.length,g=\"startValue\"in e?e.startValue:0,p=\"endValue\"in e?e.endValue:100,m=e.byValue||(d?g.map(function(t,e){return p[e]-g[e]}):p-g);e.onStart&&e.onStart(),function t(e){s=e||+new Date;var i=c<s?a:s-o,e=i/a,r=d?g.map(function(t,e){return f(i,g[e],m[e],a)}):f(i,g,m,a),n=d?Math.abs((r[0]-g[0])/m[0]):Math.abs((r-g)/m);y.currentValue=d?r.slice():r,y.completionRate=n,y.durationRate=e,b||(l(r,n,e)?v():c<s?(y.currentValue=d?p.slice():p,y.completionRate=1,y.durationRate=1,h(d?p.slice():p,1,1),u(p,1,1),v()):(h(r,n,e),_(t)))}(o)}),y.cancel},fabric.util.requestAnimFrame=_,fabric.util.cancelAnimFrame=function(){return o.apply(fabric.window,arguments)},fabric.runningAnimations=e}(),function(){function a(t,e,i){var r=\"rgba(\"+parseInt(t[0]+i*(e[0]-t[0]),10)+\",\"+parseInt(t[1]+i*(e[1]-t[1]),10)+\",\"+parseInt(t[2]+i*(e[2]-t[2]),10);return r+(\",\"+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1))+\")\"}fabric.util.animateColor=function(t,e,i,n){var t=new fabric.Color(t).getSource(),r=new fabric.Color(e).getSource(),s=n.onComplete,o=n.onChange;return n=n||{},fabric.util.animate(fabric.util.object.extend(n,{duration:i||500,startValue:t,endValue:r,byValue:r,easing:function(t,e,i,r){return a(e,i,n.colorEasing?n.colorEasing(t,r):1-Math.cos(t/r*(Math.PI/2)))},onComplete:function(t,e,i){if(s)return s(a(r,r,0),e,i)},onChange:function(t,e,i){if(o){if(Array.isArray(t))return o(a(t,t,0),e,i);o(t,e,i)}}}))}}(),function(){function s(t,e,i,r){return r=t<Math.abs(e)?(t=e,i/4):0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function o(t,e,i){return t.a*Math.pow(2,10*--e)*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function n(t,e,i,r){return i-a(r-t,0,i,r)+e}function a(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return 0===t?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var n=0;return 0===t?e:1===(t/=r)?e+i:-o(s(i,i,n=n||.3*r,1.70158),t,r)+e},easeOutElastic:function(t,e,i,r){return 0===t?e:1===(t/=r)?e+i:(i=s(i,i,0||.3*r,1.70158)).a*Math.pow(2,-10*t)*Math.sin((t*r-i.s)*(2*Math.PI)/i.p)+i.c+e},easeInOutElastic:function(t,e,i,r){return 0===t?e:2===(t/=r/2)?e+i:(i=s(i,i,0||r*(.3*1.5),1.70158),t<1?-.5*o(i,t,r)+e:i.a*Math.pow(2,-10*--t)*Math.sin((t*r-i.s)*(2*Math.PI)/i.p)*.5+i.c+e)},easeInBack:function(t,e,i,r,n){return i*(t/=r)*t*(((n=void 0===n?1.70158:n)+1)*t-n)+e},easeOutBack:function(t,e,i,r,n){return i*((t=t/r-1)*t*(((n=void 0===n?1.70158:n)+1)*t+n)+1)+e},easeInOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:n,easeOutBounce:a,easeInOutBounce:function(t,e,i,r){return t<r/2?.5*n(2*t,0,i,r)+e:.5*a(2*t-r,0,i,r)+.5*i+e}}}(),function(t){\"use strict\";var u,e,f,i,r,y=t.fabric||(t.fabric={}),g=y.util.object.extend,d=y.util.object.clone,p=y.util.toFixed,_=y.util.parseUnit,m=y.util.multiplyTransformMatrices,v={cx:\"left\",x:\"left\",r:\"radius\",cy:\"top\",y:\"top\",display:\"visible\",visibility:\"visible\",transform:\"transformMatrix\",\"fill-opacity\":\"fillOpacity\",\"fill-rule\":\"fillRule\",\"font-family\":\"fontFamily\",\"font-size\":\"fontSize\",\"font-style\":\"fontStyle\",\"font-weight\":\"fontWeight\",\"letter-spacing\":\"charSpacing\",\"paint-order\":\"paintFirst\",\"stroke-dasharray\":\"strokeDashArray\",\"stroke-dashoffset\":\"strokeDashOffset\",\"stroke-linecap\":\"strokeLineCap\",\"stroke-linejoin\":\"strokeLineJoin\",\"stroke-miterlimit\":\"strokeMiterLimit\",\"stroke-opacity\":\"strokeOpacity\",\"stroke-width\":\"strokeWidth\",\"text-decoration\":\"textDecoration\",\"text-anchor\":\"textAnchor\",opacity:\"opacity\",\"clip-path\":\"clipPath\",\"clip-rule\":\"clipRule\",\"vector-effect\":\"strokeUniform\",\"image-rendering\":\"imageSmoothing\"},b={stroke:\"strokeOpacity\",fill:\"fillOpacity\"},x=\"font-size\",C=\"clip-path\";function n(t){return new RegExp(\"^(\"+t.join(\"|\")+\")\\\\b\",\"i\")}function S(t,e){for(var i,r=[],n=0,s=e.length;n<s;n++)i=e[n],i=t.getElementsByTagName(i),r=r.concat(Array.prototype.slice.call(i));return r}function T(t,e,i){t[i]=Math.tan(y.util.degreesToRadians(e[0]))}function w(t,e){var i,r={};for(i in y.cssRules[e])if(function(t,e){var i,r=!0;(i=s(t,e.pop()))&&e.length&&(r=function(t,e){var i,r=!0;for(;t.parentNode&&1===t.parentNode.nodeType&&e.length;)r&&(i=e.pop()),t=t.parentNode,r=s(t,i);return 0===e.length}(t,e));return i&&r&&0===e.length}(t,i.split(\" \")))for(var n in y.cssRules[e][i])r[n]=y.cssRules[e][i][n];return r}function s(t,e){var i,r=t.nodeName,n=t.getAttribute(\"class\"),t=t.getAttribute(\"id\"),s=new RegExp(\"^\"+r,\"i\");if(e=e.replace(s,\"\"),t&&e.length&&(s=new RegExp(\"#\"+t+\"(?![a-zA-Z\\\\-]+)\",\"i\"),e=e.replace(s,\"\")),n&&e.length)for(i=(n=n.split(\" \")).length;i--;)s=new RegExp(\"\\\\.\"+n[i]+\"(?![a-zA-Z\\\\-]+)\",\"i\"),e=e.replace(s,\"\");return 0===e.length}function O(t,e){var i;if(i=t.getElementById?t.getElementById(e):i)return i;for(var r,n=t.getElementsByTagName(\"*\"),s=0,o=n.length;s<o;s++)if(e===(r=n[s]).getAttribute(\"id\"))return r}y.svgValidTagNamesRegEx=n([\"path\",\"circle\",\"polygon\",\"polyline\",\"ellipse\",\"rect\",\"line\",\"image\",\"text\"]),y.svgViewBoxElementsRegEx=n([\"symbol\",\"image\",\"marker\",\"pattern\",\"view\",\"svg\"]),y.svgInvalidAncestorsRegEx=n([\"pattern\",\"defs\",\"symbol\",\"metadata\",\"clipPath\",\"mask\",\"desc\"]),y.svgValidParentsRegEx=n([\"symbol\",\"g\",\"a\",\"svg\",\"clipPath\",\"defs\"]),y.cssRules={},y.gradientDefs={},y.clipPaths={},y.parseTransformAttribute=(u=y.iMatrix,t=y.reNum,e=y.commaWsp,f=\"(?:\"+(\"(?:(matrix)\\\\s*\\\\(\\\\s*(\"+t+\")\"+e+\"(\"+t+\")\"+e+\"(\"+t+\")\"+e+\"(\"+t+\")\"+e+\"(\"+t+\")\"+e+\"(\"+t+\")\\\\s*\\\\))\")+\"|\"+(\"(?:(translate)\\\\s*\\\\(\\\\s*(\"+t+\")(?:\"+e+\"(\"+t+\"))?\\\\s*\\\\))\")+\"|\"+(\"(?:(scale)\\\\s*\\\\(\\\\s*(\"+t+\")(?:\"+e+\"(\"+t+\"))?\\\\s*\\\\))\")+\"|\"+(\"(?:(rotate)\\\\s*\\\\(\\\\s*(\"+t+\")(?:\"+e+\"(\"+t+\")\"+e+\"(\"+t+\"))?\\\\s*\\\\))\")+\"|\"+(\"(?:(skewX)\\\\s*\\\\(\\\\s*(\"+t+\")\\\\s*\\\\))\")+\"|\"+(\"(?:(skewY)\\\\s*\\\\(\\\\s*(\"+t+\")\\\\s*\\\\))\")+\")\",i=new RegExp(\"^\\\\s*(?:\"+(\"(?:\"+f+\"(?:\"+e+\"*\"+f+\")*)\")+\"?)\\\\s*$\"),r=new RegExp(f,\"g\"),function(t){var h=u.concat(),l=[];if(!t||!i.test(t))return h;t.replace(r,function(t){var e,i,r,n,s,o,t=new RegExp(f).exec(t).filter(function(t){return!!t}),a=t[1],c=t.slice(2).map(parseFloat);switch(a){case\"translate\":o=c,(s=h)[4]=o[0],2===o.length&&(s[5]=o[1]);break;case\"rotate\":c[0]=y.util.degreesToRadians(c[0]),s=h,o=c,e=y.util.cos(o[0]),i=y.util.sin(o[0]),n=r=0,3===o.length&&(r=o[1],n=o[2]),s[0]=e,s[1]=i,s[2]=-i,s[3]=e,s[4]=r-(e*r-i*n),s[5]=n-(i*r+e*n);break;case\"scale\":i=h,e=(r=c)[0],r=2===r.length?r[1]:r[0],i[0]=e,i[3]=r;break;case\"skewX\":T(h,c,2);break;case\"skewY\":T(h,c,1);break;case\"matrix\":h=c}l.push(h.concat()),h=u.concat()});for(var e=l[0];1<l.length;)l.shift(),e=y.util.multiplyTransformMatrices(e,l[0]);return e});var P=new RegExp(\"^\\\\s*(\"+y.reNum+\"+)\\\\s*,?\\\\s*(\"+y.reNum+\"+)\\\\s*,?\\\\s*(\"+y.reNum+\"+)\\\\s*,?\\\\s*(\"+y.reNum+\"+)\\\\s*$\");function k(t){if(!y.svgViewBoxElementsRegEx.test(t.nodeName))return{};var e,i,r,n=t.getAttribute(\"viewBox\"),s=1,o=1,a=t.getAttribute(\"width\"),c=t.getAttribute(\"height\"),h=t.getAttribute(\"x\")||0,l=t.getAttribute(\"y\")||0,u=t.getAttribute(\"preserveAspectRatio\")||\"\",f=!n||!(n=n.match(P)),d=!a||!c||\"100%\"===a||\"100%\"===c,g=f&&d,p={},m=\"\",v=0,b=0;if(p.width=0,p.height=0,p.toBeParsed=g,f&&(h||l)&&t.parentNode&&\"#document\"!==t.parentNode.nodeName&&(m=\" translate(\"+_(h)+\" \"+_(l)+\") \",i=(t.getAttribute(\"transform\")||\"\")+m,t.setAttribute(\"transform\",i),t.removeAttribute(\"x\"),t.removeAttribute(\"y\")),g)return p;if(f)return p.width=_(a),p.height=_(c),p;if(g=-parseFloat(n[1]),f=-parseFloat(n[2]),e=parseFloat(n[3]),n=parseFloat(n[4]),p.minX=g,p.minY=f,p.viewBoxWidth=e,p.viewBoxHeight=n,d?(p.width=e,p.height=n):(p.width=_(a),p.height=_(c),s=p.width/e,o=p.height/n),\"none\"!==(u=y.util.parsePreserveAspectRatioAttribute(u)).alignX&&(\"meet\"===u.meetOrSlice&&(o=s=o<s?o:s),\"slice\"===u.meetOrSlice&&(o=s=o<s?s:o),v=p.width-e*s,b=p.height-n*s,\"Mid\"===u.alignX&&(v/=2),\"Mid\"===u.alignY&&(b/=2),\"Min\"===u.alignX&&(v=0),\"Min\"===u.alignY&&(b=0)),1===s&&1===o&&0==g&&0==f&&0===h&&0===l)return p;if(i=(m=(h||l)&&\"#document\"!==t.parentNode.nodeName?\" translate(\"+_(h)+\" \"+_(l)+\") \":m)+\" matrix(\"+s+\" 0 0 \"+o+\" \"+(g*s+v)+\" \"+(f*o+b)+\") \",\"svg\"===t.nodeName){for(r=t.ownerDocument.createElementNS(y.svgNS,\"g\");t.firstChild;)r.appendChild(t.firstChild);t.appendChild(r)}else(r=t).removeAttribute(\"x\"),r.removeAttribute(\"y\"),i=r.getAttribute(\"transform\")+i;return r.setAttribute(\"transform\",i),p}y.parseSVGDocument=function(t,i,e,r){if(t){!function(t){for(var e=S(t,[\"use\",\"svg:use\"]),i=0;e.length&&i<e.length;){var r=e[i],n=r.getAttribute(\"xlink:href\")||r.getAttribute(\"href\");if(null===n)return;var s,n=n.slice(1),o=r.getAttribute(\"x\")||0,a=r.getAttribute(\"y\")||0,c=O(t,n).cloneNode(!0),h=(c.getAttribute(\"transform\")||\"\")+\" translate(\"+o+\", \"+a+\")\",n=e.length,l=y.svgNS;if(k(c),/^svg$/i.test(c.nodeName)){for(var u,f=c.ownerDocument.createElementNS(l,\"g\"),d=0,g=(u=c.attributes).length;d<g;d++)s=u.item(d),f.setAttributeNS(l,s.nodeName,s.nodeValue);for(;c.firstChild;)f.appendChild(c.firstChild);c=f}for(d=0,g=(u=r.attributes).length;d<g;d++)\"x\"!==(s=u.item(d)).nodeName&&\"y\"!==s.nodeName&&\"xlink:href\"!==s.nodeName&&\"href\"!==s.nodeName&&(\"transform\"===s.nodeName?h=s.nodeValue+\" \"+h:c.setAttribute(s.nodeName,s.nodeValue));c.setAttribute(\"transform\",h),c.setAttribute(\"instantiated_by_use\",\"1\"),c.removeAttribute(\"id\"),r.parentNode.replaceChild(c,r),e.length===n&&i++}}(t);var n=y.Object.__uid++,s=k(t),o=y.util.toArray(t.getElementsByTagName(\"*\"));if(s.crossOrigin=r&&r.crossOrigin,s.svgUid=n,0===o.length&&y.isLikelyNode){for(var a=[],c=0,h=(o=t.selectNodes('//*[name(.)!=\"svg\"]')).length;c<h;c++)a[c]=o[c];o=a}var l,u=o.filter(function(t){return k(t),y.svgValidTagNamesRegEx.test(t.nodeName.replace(\"svg:\",\"\"))&&!function(t,e){for(;t=t&&t.parentNode;)if(t.nodeName&&e.test(t.nodeName.replace(\"svg:\",\"\"))&&!t.getAttribute(\"instantiated_by_use\"))return 1}(t,y.svgInvalidAncestorsRegEx)});u&&u.length?(l={},o.filter(function(t){return\"clipPath\"===t.nodeName.replace(\"svg:\",\"\")}).forEach(function(t){var e=t.getAttribute(\"id\");l[e]=y.util.toArray(t.getElementsByTagName(\"*\")).filter(function(t){return y.svgValidTagNamesRegEx.test(t.nodeName.replace(\"svg:\",\"\"))})}),y.gradientDefs[n]=y.getGradientDefs(t),y.cssRules[n]=y.getCSSRules(t),y.clipPaths[n]=l,y.parseElements(u,function(t,e){i&&(i(t,s,e,o),delete y.gradientDefs[n],delete y.cssRules[n],delete y.clipPaths[n])},d(s),e,r)):i&&i([],{})}};var o=new RegExp(\"(normal|italic)?\\\\s*(normal|small-caps)?\\\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\\\s*(\"+y.reNum+\"(?:px|cm|mm|em|pt|pc|in)*)(?:\\\\/(normal|\"+y.reNum+\"))?\\\\s+(.*)\");g(y,{parseFontDeclaration:function(t,e){var i,r,n,s,t=t.match(o);t&&(i=t[1],r=t[3],n=t[4],s=t[5],t=t[6],i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),n&&(e.fontSize=_(n)),t&&(e.fontFamily=t),s&&(e.lineHeight=\"normal\"===s?1:s))},getGradientDefs:function(t){for(var e,i=S(t,[\"linearGradient\",\"radialGradient\",\"svg:linearGradient\",\"svg:radialGradient\"]),r=0,n={},r=i.length;r--;)(e=i[r]).getAttribute(\"xlink:href\")&&!function t(e,i){var r=\"xlink:href\",n=O(e,i.getAttribute(r).slice(1));if(n&&n.getAttribute(r)&&t(e,n),[\"gradientTransform\",\"x1\",\"x2\",\"y1\",\"y2\",\"gradientUnits\",\"cx\",\"cy\",\"r\",\"fx\",\"fy\"].forEach(function(t){n&&!i.hasAttribute(t)&&n.hasAttribute(t)&&i.setAttribute(t,n.getAttribute(t))}),!i.children.length)for(var s=n.cloneNode(!0);s.firstChild;)i.appendChild(s.firstChild);i.removeAttribute(r)}(t,e),n[e.getAttribute(\"id\")]=e;return n},parseAttributes:function(i,t,e){if(i){var r,n,s={},o=(void 0===e&&(e=i.getAttribute(\"svgUid\")),i.parentNode&&y.svgValidParentsRegEx.test(i.parentNode.nodeName)&&(s=y.parseAttributes(i.parentNode,t,e)),t.reduce(function(t,e){return(r=i.getAttribute(e))&&(t[e]=r),t},{})),t=g(w(i,e),y.parseStyleAttribute(i)),o=g(o,t);t[C]&&i.setAttribute(C,t[C]),n=e=s.fontSize||y.Text.DEFAULT_SVG_FONT_SIZE,o[x]&&(o[x]=n=_(o[x],e));var a,c,h,l={};for(c in o)a=function(t,e,i,r){var n,s=Array.isArray(e);if(\"fill\"!==t&&\"stroke\"!==t||\"none\"!==e){if(\"strokeUniform\"===t)return\"non-scaling-stroke\"===e;if(\"strokeDashArray\"===t)e=\"none\"===e?null:e.replace(/,/g,\" \").split(/\\s+/).map(parseFloat);else if(\"transformMatrix\"===t)e=i&&i.transformMatrix?m(i.transformMatrix,y.parseTransformAttribute(e)):y.parseTransformAttribute(e);else if(\"visible\"===t)e=\"none\"!==e&&\"hidden\"!==e,i&&!1===i.visible&&(e=!1);else if(\"opacity\"===t)e=parseFloat(e),i&&void 0!==i.opacity&&(e*=i.opacity);else if(\"textAnchor\"===t)e=\"start\"===e?\"left\":\"end\"===e?\"right\":\"center\";else if(\"charSpacing\"===t)n=_(e,r)/r*1e3;else if(\"paintFirst\"===t){var i=e.indexOf(\"fill\"),o=e.indexOf(\"stroke\"),e=\"fill\";(-1<i&&-1<o&&o<i||-1===i&&-1<o)&&(e=\"stroke\")}else{if(\"href\"===t||\"xlink:href\"===t||\"font\"===t)return e;if(\"imageSmoothing\"===t)return\"optimizeQuality\"===e;n=s?e.map(_):_(e,r)}}else e=\"\";return!s&&isNaN(n)?e:n}(h=(h=c)in v?v[h]:h,o[c],s,n),l[h]=a;l&&l.font&&y.parseFontDeclaration(l.font,l);var u,t=g(s,l);if(y.svgValidParentsRegEx.test(i.nodeName))return t;var f,d=t;for(f in b)if(void 0!==d[b[f]]&&\"\"!==d[f]){if(void 0===d[f]){if(!y.Object.prototype[f])continue;d[f]=y.Object.prototype[f]}0!==d[f].indexOf(\"url(\")&&(u=new y.Color(d[f]),d[f]=u.setAlpha(p(u.getAlpha()*d[b[f]],2)).toRgba())}return d}},parseElements:function(t,e,i,r,n){new y.ElementsParser(t,e,i,r,n).parse()},parseStyleAttribute:function(t){var e,i,r,n={},t=t.getAttribute(\"style\");if(!t)return n;if(\"string\"==typeof t)e=n,t.replace(/;\\s*$/,\"\").split(\";\").forEach(function(t){t=t.split(\":\");i=t[0].trim().toLowerCase(),r=t[1].trim(),e[i]=r});else{var s,o,a,c=t,h=n;for(a in c)void 0!==c[a]&&(s=a.toLowerCase(),o=c[a],h[s]=o)}return n},parsePointsAttribute:function(t){if(!t)return null;for(var e=[],i=0,r=(t=(t=t.replace(/,/g,\" \").trim()).split(/\\s+/)).length;i<r;i+=2)e.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return e},getCSSRules:function(t){for(var e=t.getElementsByTagName(\"style\"),o={},a=0,c=e.length;a<c;a++){var i=e[a].textContent;\"\"!==(i=i.replace(/\\/\\*[\\s\\S]*?\\*\\//g,\"\")).trim()&&i.split(\"}\").filter(function(t){return t.trim()}).forEach(function(t){var e=t.split(\"{\"),i={},r=e[1].trim().split(\";\").filter(function(t){return t.trim()});for(a=0,c=r.length;a<c;a++){var n=r[a].split(\":\"),s=n[0].trim(),n=n[1].trim();i[s]=n}(t=e[0].trim()).split(\",\").forEach(function(t){\"\"!==(t=t.replace(/^svg/i,\"\").trim())&&(o[t]?y.util.object.extend(o[t],i):o[t]=y.util.object.clone(i))})})}return o},loadSVGFromURL:function(t,n,e,i){t=t.replace(/^\\n\\s*/,\"\").trim(),new y.util.request(t,{method:\"get\",onComplete:function(t){t=t.responseXML;if(!t||!t.documentElement)return n&&n(null),!1;y.parseSVGDocument(t.documentElement,function(t,e,i,r){n&&n(t,e,i,r)},e,i)}})},loadSVGFromString:function(t,n,e,i){t=(new y.window.DOMParser).parseFromString(t.trim(),\"text/xml\");y.parseSVGDocument(t.documentElement,function(t,e,i,r){n(t,e,i,r)},e,i)}})}(\"undefined\"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,r,n,s){this.elements=t,this.callback=e,this.options=i,this.reviver=r,this.svgUid=i&&i.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\\(['\"]?#([^'\"]+)['\"]?\\)/g,this.doc=s},function(t){t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},t.createObjects=function(){var i=this;this.elements.forEach(function(t,e){t.setAttribute(\"svgUid\",i.svgUid),i.createObject(t,e)})},t.findTag=function(t){return fabric[fabric.util.string.capitalize(t.tagName.replace(\"svg:\",\"\"))]},t.createObject=function(t,e){var i=this.findTag(t);if(i&&i.fromElement)try{i.fromElement(t,this.createCallback(e,t),this.options)}catch(t){fabric.log(t)}else this.checkIfDone()},t.createCallback=function(i,r){var n=this;return function(t){var e;n.resolveGradient(t,r,\"fill\"),n.resolveGradient(t,r,\"stroke\"),t instanceof fabric.Image&&t._originalElement&&(e=t.parsePreserveAspectRatioAttribute(r)),t._removeTransformMatrix(e),n.resolveClipPath(t,r),n.reviver&&n.reviver(r,t),n.instances[i]=t,n.checkIfDone()}},t.extractPropertyDefinition=function(t,e,i){var t=t[e],e=this.regexUrl;if(e.test(t))return e.lastIndex=0,t=e.exec(t)[1],e.lastIndex=0,fabric[i][this.svgUid][t]},t.resolveGradient=function(t,e,i){var r=this.extractPropertyDefinition(t,i,\"gradientDefs\");r&&(e=e.getAttribute(i+\"-opacity\"),r=fabric.Gradient.fromElement(r,t,e,this.options),t.set(i,r))},t.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},t.resolveClipPath=function(t,e){var i,r=this.extractPropertyDefinition(t,\"clipPath\",\"clipPaths\");if(r){for(var n=[],s=fabric.util.invertTransform(t.calcTransformMatrix()),o=r[0].parentNode,a=e;a.parentNode&&a.getAttribute(\"clip-path\")!==t.clipPath;)a=a.parentNode;a.parentNode.appendChild(o);for(var c=0;c<r.length;c++)i=r[c],this.findTag(i).fromElement(i,this.createClipPathCallback(t,n),this.options);r=1===n.length?n[0]:new fabric.Group(n),e=fabric.util.multiplyTransformMatrices(s,r.calcTransformMatrix()),r.clipPath&&this.resolveClipPath(r,a);o=fabric.util.qrDecompose(e);r.flipX=!1,r.flipY=!1,r.set(\"scaleX\",o.scaleX),r.set(\"scaleY\",o.scaleY),r.angle=o.angle,r.skewX=o.skewX,r.skewY=0,r.setPositionByOrigin({x:o.translateX,y:o.translateY},\"center\",\"center\"),t.clipPath=r}else delete t.clipPath},t.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances,this.elements))}}(fabric.ElementsParser.prototype),function(t){\"use strict\";t=t.fabric||(t.fabric={});function i(t,e){this.x=t,this.y=e}t.Point?t.warn(\"fabric.Point is already defined\"):(t.Point=i).prototype={type:\"point\",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,t=this.y-t.y;return Math.sqrt(e*e+t*t)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+\",\"+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}}}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var a=t.fabric||(t.fabric={});function c(t){this.status=t,this.points=[]}a.Intersection?a.warn(\"fabric.Intersection is already defined\"):(a.Intersection=c,a.Intersection.prototype={constructor:c,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},a.Intersection.intersectLineLine=function(t,e,i,r){var n,s=(r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x),o=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),r=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);return 0!=r?(i=o/r,0<=(r=s/r)&&r<=1&&0<=i&&i<=1?(n=new c(\"Intersection\")).appendPoint(new a.Point(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y))):n=new c):n=new c(0==s||0==o?\"Coincident\":\"Parallel\"),n},a.Intersection.intersectLinePolygon=function(t,e,i){for(var r,n,s=new c,o=i.length,a=0;a<o;a++)n=i[a],r=i[(a+1)%o],n=c.intersectLineLine(t,e,n,r),s.appendPoints(n.points);return 0<s.points.length&&(s.status=\"Intersection\"),s},a.Intersection.intersectPolygonPolygon=function(t,e){for(var i=new c,r=t.length,n=0;n<r;n++){var s=t[n],o=t[(n+1)%r],s=c.intersectLinePolygon(s,o,e);i.appendPoints(s.points)}return 0<i.points.length&&(i.status=\"Intersection\"),i},a.Intersection.intersectPolygonRectangle=function(t,e,i){var r=e.min(i),e=e.max(i),i=new a.Point(e.x,r.y),n=new a.Point(r.x,e.y),s=c.intersectLinePolygon(r,i,t),i=c.intersectLinePolygon(i,e,t),e=c.intersectLinePolygon(e,n,t),n=c.intersectLinePolygon(n,r,t),r=new c;return r.appendPoints(s.points),r.appendPoints(i.points),r.appendPoints(e.points),r.appendPoints(n.points),0<r.points.length&&(r.status=\"Intersection\"),r})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var h=t.fabric||(t.fabric={});function a(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function c(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}h.Color?h.warn(\"fabric.Color is already defined.\"):(h.Color=a,h.Color.prototype={_tryParsingColor:function(t){var e;(e=(e=(e=(e=(e=\"transparent\"===(t=t in a.colorNameMap?a.colorNameMap[t]:t)?[255,255,255,0]:e)||a.sourceFromHex(t))||a.sourceFromRgb(t))||a.sourceFromHsl(t))||[0,0,0,1])&&this.setSource(e)},_rgbToHsl:function(t,e,i){var r,n=h.util.array.max([t/=255,e/=255,i/=255]),s=h.util.array.min([t,e,i]),o=(n+s)/2;if(n===s)r=c=0;else{var a=n-s,c=.5<o?a/(2-n-s):a/(n+s);switch(n){case t:r=(e-i)/a+(e<i?6:0);break;case e:r=(i-t)/a+2;break;case i:r=(t-e)/a+4}r/=6}return[Math.round(360*r),Math.round(100*c),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return\"rgb(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\")\"},toRgba:function(){var t=this.getSource();return\"rgba(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\",\"+t[3]+\")\"},toHsl:function(){var t=this.getSource(),t=this._rgbToHsl(t[0],t[1],t[2]);return\"hsl(\"+t[0]+\",\"+t[1]+\"%,\"+t[2]+\"%)\"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return\"hsla(\"+e[0]+\",\"+e[1]+\"%,\"+e[2]+\"%,\"+t[3]+\")\"},toHex:function(){var t,e=this.getSource(),i=e[0].toString(16);return i=1===i.length?\"0\"+i:i,t=1===(t=e[1].toString(16)).length?\"0\"+t:t,e=1===(e=e[2].toString(16)).length?\"0\"+e:e,i.toUpperCase()+t.toUpperCase()+e.toUpperCase()},toHexa:function(){var t=this.getSource(),t=Math.round(255*t[3]);return t=1===(t=t.toString(16)).length?\"0\"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),t=t[3];return this.setSource([e,e,e,t]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),e=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,e]),this},overlayWith:function(t){t instanceof a||(t=new a(t));for(var e=[],i=this.getAlpha(),r=this.getSource(),n=t.getSource(),s=0;s<3;s++)e.push(Math.round(.5*r[s]+.5*n[s]));return e[3]=i,this.setSource(e),this}},h.Color.reRGBa=/^rgba?\\(\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*(?:\\s*,\\s*((?:\\d*\\.?\\d+)?)\\s*)?\\)$/i,h.Color.reHSLa=/^hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/i,h.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,h.Color.colorNameMap={aliceblue:\"#F0F8FF\",antiquewhite:\"#FAEBD7\",aqua:\"#00FFFF\",aquamarine:\"#7FFFD4\",azure:\"#F0FFFF\",beige:\"#F5F5DC\",bisque:\"#FFE4C4\",black:\"#000000\",blanchedalmond:\"#FFEBCD\",blue:\"#0000FF\",blueviolet:\"#8A2BE2\",brown:\"#A52A2A\",burlywood:\"#DEB887\",cadetblue:\"#5F9EA0\",chartreuse:\"#7FFF00\",chocolate:\"#D2691E\",coral:\"#FF7F50\",cornflowerblue:\"#6495ED\",cornsilk:\"#FFF8DC\",crimson:\"#DC143C\",cyan:\"#00FFFF\",darkblue:\"#00008B\",darkcyan:\"#008B8B\",darkgoldenrod:\"#B8860B\",darkgray:\"#A9A9A9\",darkgrey:\"#A9A9A9\",darkgreen:\"#006400\",darkkhaki:\"#BDB76B\",darkmagenta:\"#8B008B\",darkolivegreen:\"#556B2F\",darkorange:\"#FF8C00\",darkorchid:\"#9932CC\",darkred:\"#8B0000\",darksalmon:\"#E9967A\",darkseagreen:\"#8FBC8F\",darkslateblue:\"#483D8B\",darkslategray:\"#2F4F4F\",darkslategrey:\"#2F4F4F\",darkturquoise:\"#00CED1\",darkviolet:\"#9400D3\",deeppink:\"#FF1493\",deepskyblue:\"#00BFFF\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1E90FF\",firebrick:\"#B22222\",floralwhite:\"#FFFAF0\",forestgreen:\"#228B22\",fuchsia:\"#FF00FF\",gainsboro:\"#DCDCDC\",ghostwhite:\"#F8F8FF\",gold:\"#FFD700\",goldenrod:\"#DAA520\",gray:\"#808080\",grey:\"#808080\",green:\"#008000\",greenyellow:\"#ADFF2F\",honeydew:\"#F0FFF0\",hotpink:\"#FF69B4\",indianred:\"#CD5C5C\",indigo:\"#4B0082\",ivory:\"#FFFFF0\",khaki:\"#F0E68C\",lavender:\"#E6E6FA\",lavenderblush:\"#FFF0F5\",lawngreen:\"#7CFC00\",lemonchiffon:\"#FFFACD\",lightblue:\"#ADD8E6\",lightcoral:\"#F08080\",lightcyan:\"#E0FFFF\",lightgoldenrodyellow:\"#FAFAD2\",lightgray:\"#D3D3D3\",lightgrey:\"#D3D3D3\",lightgreen:\"#90EE90\",lightpink:\"#FFB6C1\",lightsalmon:\"#FFA07A\",lightseagreen:\"#20B2AA\",lightskyblue:\"#87CEFA\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#B0C4DE\",lightyellow:\"#FFFFE0\",lime:\"#00FF00\",limegreen:\"#32CD32\",linen:\"#FAF0E6\",magenta:\"#FF00FF\",maroon:\"#800000\",mediumaquamarine:\"#66CDAA\",mediumblue:\"#0000CD\",mediumorchid:\"#BA55D3\",mediumpurple:\"#9370DB\",mediumseagreen:\"#3CB371\",mediumslateblue:\"#7B68EE\",mediumspringgreen:\"#00FA9A\",mediumturquoise:\"#48D1CC\",mediumvioletred:\"#C71585\",midnightblue:\"#191970\",mintcream:\"#F5FFFA\",mistyrose:\"#FFE4E1\",moccasin:\"#FFE4B5\",navajowhite:\"#FFDEAD\",navy:\"#000080\",oldlace:\"#FDF5E6\",olive:\"#808000\",olivedrab:\"#6B8E23\",orange:\"#FFA500\",orangered:\"#FF4500\",orchid:\"#DA70D6\",palegoldenrod:\"#EEE8AA\",palegreen:\"#98FB98\",paleturquoise:\"#AFEEEE\",palevioletred:\"#DB7093\",papayawhip:\"#FFEFD5\",peachpuff:\"#FFDAB9\",peru:\"#CD853F\",pink:\"#FFC0CB\",plum:\"#DDA0DD\",powderblue:\"#B0E0E6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#FF0000\",rosybrown:\"#BC8F8F\",royalblue:\"#4169E1\",saddlebrown:\"#8B4513\",salmon:\"#FA8072\",sandybrown:\"#F4A460\",seagreen:\"#2E8B57\",seashell:\"#FFF5EE\",sienna:\"#A0522D\",silver:\"#C0C0C0\",skyblue:\"#87CEEB\",slateblue:\"#6A5ACD\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#FFFAFA\",springgreen:\"#00FF7F\",steelblue:\"#4682B4\",tan:\"#D2B48C\",teal:\"#008080\",thistle:\"#D8BFD8\",tomato:\"#FF6347\",turquoise:\"#40E0D0\",violet:\"#EE82EE\",wheat:\"#F5DEB3\",white:\"#FFFFFF\",whitesmoke:\"#F5F5F5\",yellow:\"#FFFF00\",yellowgreen:\"#9ACD32\"},h.Color.fromRgb=function(t){return a.fromSource(a.sourceFromRgb(t))},h.Color.sourceFromRgb=function(t){var e,i,r,t=t.match(a.reRGBa);if(t)return e=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),i=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),r=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1),[parseInt(e,10),parseInt(i,10),parseInt(r,10),t[4]?parseFloat(t[4]):1]},h.Color.fromRgba=a.fromRgb,h.Color.fromHsl=function(t){return a.fromSource(a.sourceFromHsl(t))},h.Color.sourceFromHsl=function(t){var e,i,r,n,s,o,t=t.match(a.reHSLa);if(t)return e=(parseFloat(t[1])%360+360)%360/360,r=parseFloat(t[2])/(/%$/.test(t[2])?100:1),i=parseFloat(t[3])/(/%$/.test(t[3])?100:1),0==r?n=s=o=i:(n=c(r=2*i-(i=i<=.5?i*(1+r):i+r-i*r),i,e+1/3),s=c(r,i,e),o=c(r,i,e-1/3)),[Math.round(255*n),Math.round(255*s),Math.round(255*o),t[4]?parseFloat(t[4]):1]},h.Color.fromHsla=a.fromHsl,h.Color.fromHex=function(t){return a.fromSource(a.sourceFromHex(t))},h.Color.sourceFromHex=function(t){var e,i,r,n,s;if(t.match(a.reHex))return e=3===(t=t.slice(t.indexOf(\"#\")+1)).length||4===t.length,s=8===t.length||4===t.length,i=e?t.charAt(0)+t.charAt(0):t.substring(0,2),r=e?t.charAt(1)+t.charAt(1):t.substring(2,4),n=e?t.charAt(2)+t.charAt(2):t.substring(4,6),s=s?e?t.charAt(3)+t.charAt(3):t.substring(6,8):\"FF\",[parseInt(i,16),parseInt(r,16),parseInt(n,16),parseFloat((parseInt(s,16)/255).toFixed(2))]},h.Color.fromSource=function(t){var e=new a;return e.setSource(t),e})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var a=t.fabric||(t.fabric={}),n=[\"e\",\"se\",\"s\",\"sw\",\"w\",\"nw\",\"n\",\"ne\",\"e\"],s=[\"ns\",\"nesw\",\"ew\",\"nwse\"],o={},c=\"left\",h=\"top\",l=\"right\",u=\"bottom\",f=\"center\",d={top:u,bottom:h,left:l,right:c,center:f},g=a.util.radiansToDegrees,p=Math.sign||function(t){return(0<t)-(t<0)||+t};function m(t,e){t=t.angle+g(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function v(t,e){var i=e.transform.target,r=i.canvas,n=a.util.object.clone(e);n.target=i,r&&r.fire(\"object:\"+t,n),i.fire(t,e)}function b(t,e){e=e.canvas,t=t[e.uniScaleKey];return e.uniformScaling&&!t||!e.uniformScaling&&t}function y(t){return t.originX===f&&t.originY===f}function _(t,e,i){var r=t.lockScalingX,t=t.lockScalingY;return!(!r||!t)||(!(e||!r&&!t||!i)||(!(!r||\"x\"!==e)||!(!t||\"y\"!==e)))}function x(t,e,i,r){return{e:t,transform:e,pointer:{x:i,y:r}}}function C(o){return function(t,e,i,r){var n=e.target,s=n.getCenterPoint(),s=n.translateToOriginPoint(s,e.originX,e.originY),t=o(t,e,i,r);return n.setPositionByOrigin(s,e.originX,e.originY),t}}function S(s,o){return function(t,e,i,r){var n=o(t,e,i,r);return n&&v(s,x(t,e,i,r)),n}}function T(t,e,i,r,n){var s=t.target,t=s.controls[t.corner],o=s.canvas.getZoom(),o=s.padding/o,s=s.toLocalPoint(new a.Point(r,n),e,i);return s.x>=o&&(s.x-=o),s.x<=-o&&(s.x+=o),s.y>=o&&(s.y-=o),s.y<=o&&(s.y+=o),s.x-=t.offsetX,s.y-=t.offsetY,s}function w(t){return t.flipX!==t.flipY}function O(t,e,i,r,n){0!==t[e]&&(e=n/t._getTransformedDimensions()[r]*t[i],t.set(i,e))}function P(t,e,i,r){var n,s=e.target,o=s._getTransformedDimensions(0,s.skewY),i=T(e,e.originX,e.originY,i,r),r=Math.abs(2*i.x)-o.x,i=s.skewX,r=(r<2?n=0:(n=g(Math.atan2(r/s.scaleX,o.y/s.scaleY)),e.originX===c&&e.originY===u&&(n=-n),e.originX===l&&e.originY===h&&(n=-n),w(s)&&(n=-n)),i!==n);return r&&(o=s._getTransformedDimensions().y,s.set(\"skewX\",n),O(s,\"skewY\",\"scaleY\",\"y\",o)),r}function k(t,e,i,r){var n,s=e.target,o=s._getTransformedDimensions(s.skewX,0),i=T(e,e.originX,e.originY,i,r),r=Math.abs(2*i.y)-o.y,i=s.skewY,r=(r<2?n=0:(n=g(Math.atan2(r/s.scaleY,o.x/s.scaleX)),e.originX===c&&e.originY===u&&(n=-n),e.originX===l&&e.originY===h&&(n=-n),w(s)&&(n=-n)),i!==n);return r&&(o=s._getTransformedDimensions().x,s.set(\"skewY\",n),O(s,\"skewX\",\"scaleX\",\"x\",o)),r}function E(t,e,i,r,n){var s=e.target,o=s.lockScalingX,a=s.lockScalingY,n=(n=n||{}).by,t=b(t,s),c=_(s,n,t),h=e.gestureScale;if(c)return!1;if(h)l=e.scaleX*h,u=e.scaleY*h;else{if(c=T(e,e.originX,e.originY,i,r),h=\"y\"!==n?p(c.x):1,i=\"x\"!==n?p(c.y):1,e.signX||(e.signX=h),e.signY||(e.signY=i),s.lockScalingFlip&&(e.signX!==h||e.signY!==i))return!1;var l,u,r=s._getTransformedDimensions();u=t&&!n?(t=Math.abs(c.x)+Math.abs(c.y),f=e.original,t=t/(Math.abs(r.x*f.scaleX/s.scaleX)+Math.abs(r.y*f.scaleY/s.scaleY)),l=f.scaleX*t,f.scaleY*t):(l=Math.abs(c.x*s.scaleX/r.x),Math.abs(c.y*s.scaleY/r.y)),y(e)&&(l*=2,u*=2),e.signX!==h&&\"y\"!==n&&(e.originX=d[e.originX],l*=-1,e.signX=h),e.signY!==i&&\"x\"!==n&&(e.originY=d[e.originY],u*=-1,e.signY=i)}var f=s.scaleX,t=s.scaleY;return n?(\"x\"===n&&s.set(\"scaleX\",l),\"y\"===n&&s.set(\"scaleY\",u)):(o||s.set(\"scaleX\",l),a||s.set(\"scaleY\",u)),f!==s.scaleX||t!==s.scaleY}o.scaleCursorStyleHandler=function(t,e,i){var t=b(t,i),r=\"\";return 0!==e.x&&0===e.y?r=\"x\":0===e.x&&0!==e.y&&(r=\"y\"),_(i,r,t)?\"not-allowed\":(r=m(i,e),n[r]+\"-resize\")},o.skewCursorStyleHandler=function(t,e,i){var r=\"not-allowed\";return 0!==e.x&&i.lockSkewingY||0!==e.y&&i.lockSkewingX?r:(r=m(i,e)%4,s[r]+\"-resize\")},o.scaleSkewCursorStyleHandler=function(t,e,i){return t[i.canvas.altActionKey]?o.skewCursorStyleHandler(t,e,i):o.scaleCursorStyleHandler(t,e,i)},o.rotationWithSnapping=S(\"rotating\",C(function(t,e,i,r){var n=e.target,s=n.translateToOriginPoint(n.getCenterPoint(),e.originX,e.originY);if(n.lockRotation)return!1;var o=Math.atan2(e.ey-s.y,e.ex-s.x),r=Math.atan2(r-s.y,i-s.x),i=g(r-o+e.theta);return 0<n.snapAngle&&(s=n.snapAngle,r=n.snapThreshold||s,o=Math.ceil(i/s)*s,e=Math.floor(i/s)*s,Math.abs(i-e)<r?i=e:Math.abs(i-o)<r&&(i=o)),i<0&&(i=360+i),s=n.angle!==(i%=360),n.angle=i,s})),o.scalingEqually=S(\"scaling\",C(function(t,e,i,r){return E(t,e,i,r)})),o.scalingX=S(\"scaling\",C(function(t,e,i,r){return E(t,e,i,r,{by:\"x\"})})),o.scalingY=S(\"scaling\",C(function(t,e,i,r){return E(t,e,i,r,{by:\"y\"})})),o.scalingYOrSkewingX=function(t,e,i,r){return t[e.target.canvas.altActionKey]?o.skewHandlerX(t,e,i,r):o.scalingY(t,e,i,r)},o.scalingXOrSkewingY=function(t,e,i,r){return t[e.target.canvas.altActionKey]?o.skewHandlerY(t,e,i,r):o.scalingX(t,e,i,r)},o.changeWidth=S(\"resizing\",C(function(t,e,i,r){var n=e.target,i=T(e,e.originX,e.originY,i,r),r=n.strokeWidth/(n.strokeUniform?n.scaleX:1),e=y(e)?2:1,s=n.width,i=Math.abs(i.x*e/n.scaleX)-r;return n.set(\"width\",Math.max(i,0)),s!==i})),o.skewHandlerX=function(t,e,i,r){var n,s=e.target,o=s.skewX,a=e.originY;return!s.lockSkewingX&&(0===o?n=0<T(e,f,f,i,r).x?c:l:(0<o&&(n=a===h?c:l),o<0&&(n=a===h?l:c),w(s)&&(n=n===c?l:c)),e.originX=n,S(\"skewing\",C(P))(t,e,i,r))},o.skewHandlerY=function(t,e,i,r){var n,s=e.target,o=s.skewY,a=e.originX;return!s.lockSkewingY&&(0===o?n=0<T(e,f,f,i,r).y?h:u:(0<o&&(n=a===c?h:u),o<0&&(n=a===c?u:h),w(s)&&(n=n===h?u:h)),e.originY=n,S(\"skewing\",C(k))(t,e,i,r))},o.dragHandler=function(t,e,i,r){var n=e.target,s=i-e.offsetX,o=r-e.offsetY,a=!n.get(\"lockMovementX\")&&n.left!==s,c=!n.get(\"lockMovementY\")&&n.top!==o;return a&&n.set(\"left\",s),c&&n.set(\"top\",o),(a||c)&&v(\"moving\",x(t,e,i,r)),a||c},o.scaleOrSkewActionName=function(t,e,i){return t=t[i.canvas.altActionKey],0===e.x?t?\"skewX\":\"scaleY\":0===e.y?t?\"skewY\":\"scaleX\":void 0},o.rotationStyleHandler=function(t,e,i){return i.lockRotation?\"not-allowed\":e.cursorStyle},o.fireEvent=v,o.wrapWithFixedAnchor=C,o.wrapWithFireEvent=S,o.getLocalPoint=T,a.controlsUtils=o}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),u=t.util.degreesToRadians,t=t.controlsUtils;t.renderCircleControl=function(t,e,i,r,n){r=r||{};var s,o=this.sizeX||r.cornerSize||n.cornerSize,a=this.sizeY||r.cornerSize||n.cornerSize,c=(h=(void 0!==r.transparentCorners?r:n).transparentCorners)?\"stroke\":\"fill\",h=!h&&(r.cornerStrokeColor||n.cornerStrokeColor),l=e,u=i;t.save(),t.fillStyle=r.cornerColor||n.cornerColor,t.strokeStyle=r.cornerStrokeColor||n.cornerStrokeColor,a<o?(t.scale(1,a/(s=o)),u=i*o/a):o<a?(t.scale(o/(s=a),1),l=e*a/o):s=o,t.lineWidth=1,t.beginPath(),t.arc(l,u,s/2,0,2*Math.PI,!1),t[c](),h&&t.stroke(),t.restore()},t.renderSquareControl=function(t,e,i,r,n){r=r||{};var s=this.sizeX||r.cornerSize||n.cornerSize,o=this.sizeY||r.cornerSize||n.cornerSize,a=(c=(void 0!==r.transparentCorners?r:n).transparentCorners)?\"stroke\":\"fill\",c=!c&&(r.cornerStrokeColor||n.cornerStrokeColor),h=s/2,l=o/2;t.save(),t.fillStyle=r.cornerColor||n.cornerColor,t.strokeStyle=r.cornerStrokeColor||n.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(u(n.angle)),t[a+\"Rect\"](-h,-l,s,o),c&&t.strokeRect(-h,-l,s,o),t.restore()}}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var f=t.fabric||(t.fabric={});f.Control=function(t){for(var e in t)this[e]=t[e]},f.Control.prototype={visible:!0,actionName:\"scale\",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:\"crosshair\",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){t=t._controlsVisibility;return t&&void 0!==t[e]?t[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,e){return f.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},e)},calcCornerCoords:function(t,e,i,r,n){var s,o,a,c,h,l,u=n?this.touchSizeX:this.sizeX,n=n?this.touchSizeY:this.sizeY;return u&&n&&u!==n?(c=Math.atan2(n,u),h=Math.sqrt(u*u+n*n)/2,l=c-f.util.degreesToRadians(t),c=Math.PI/2-c-f.util.degreesToRadians(t),s=h*f.util.cos(l),o=h*f.util.sin(l),a=h*f.util.cos(c),c=h*f.util.sin(c)):(h=.7071067812*(u&&n?u:e),l=f.util.degreesToRadians(45-t),s=a=h*f.util.cos(l),o=c=h*f.util.sin(l)),{tl:{x:i-c,y:r-a},tr:{x:i+s,y:r-o},bl:{x:i-s,y:r+o},br:{x:i+c,y:r+a}}},render:function(t,e,i,r,n){(\"circle\"===((r=r||{}).cornerStyle||n.cornerStyle)?f.controlsUtils.renderCircleControl:f.controlsUtils.renderSquareControl).call(this,t,e,i,r,n)}}}(\"undefined\"!=typeof exports?exports:this),function(){var p=fabric.util.object.clone;fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:\"pixels\",type:\"linear\",initialize:function(e){(e=e||{}).coords||(e.coords={});var t,i=this;Object.keys(e).forEach(function(t){i[t]=e[t]}),this.id?this.id+=\"_\"+fabric.Object.__uid++:this.id=fabric.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},\"radial\"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform&&this.gradientTransform.concat()};return fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t,e){var i,r=p(this.coords,!0),e=e||{},n=p(this.colorStops,!0),s=r.r1>r.r2,o=(this.gradientTransform||fabric.iMatrix).concat(),a=-this.offsetX,c=-this.offsetY,h=!!e.additionalTransform,l=\"pixels\"===this.gradientUnits?\"userSpaceOnUse\":\"objectBoundingBox\";if(n.sort(function(t,e){return t.offset-e.offset}),\"objectBoundingBox\"==l?(a/=t.width,c/=t.height):(a+=t.width/2,c+=t.height/2),\"path\"===t.type&&\"percentage\"!==this.gradientUnits&&(a-=t.pathOffset.x,c-=t.pathOffset.y),o[4]-=a,o[5]-=c,t='id=\"SVGID_'+this.id+'\" gradientUnits=\"'+l+'\"',t+=' gradientTransform=\"'+(h?e.additionalTransform+\" \":\"\")+fabric.util.matrixToSVG(o)+'\" ',\"linear\"===this.type?i=[\"<linearGradient \",t,' x1=\"',r.x1,'\" y1=\"',r.y1,'\" x2=\"',r.x2,'\" y2=\"',r.y2,'\">\\n']:\"radial\"===this.type&&(i=[\"<radialGradient \",t,' cx=\"',s?r.x1:r.x2,'\" cy=\"',s?r.y1:r.y2,'\" r=\"',s?r.r1:r.r2,'\" fx=\"',s?r.x2:r.x1,'\" fy=\"',s?r.y2:r.y1,'\">\\n']),\"radial\"===this.type){if(s)for((n=n.concat()).reverse(),f=0,d=n.length;f<d;f++)n[f].offset=1-n[f].offset;a=Math.min(r.r1,r.r2);if(0<a)for(var u=a/Math.max(r.r1,r.r2),f=0,d=n.length;f<d;f++)n[f].offset+=u*(1-n[f].offset)}for(f=0,d=n.length;f<d;f++){var g=n[f];i.push(\"<stop \",'offset=\"',100*g.offset+\"%\",'\" style=\"stop-color:',g.color,void 0!==g.opacity?\";stop-opacity: \"+g.opacity:\";\",'\"/>\\n')}return i.push(\"linear\"===this.type?\"</linearGradient>\\n\":\"</radialGradient>\\n\"),i.join(\"\")},toLive:function(t){var e,i,r,n=fabric.util.object.clone(this.coords);if(this.type){for(\"linear\"===this.type?e=t.createLinearGradient(n.x1,n.y1,n.x2,n.y2):\"radial\"===this.type&&(e=t.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2)),i=0,r=this.colorStops.length;i<r;i++){var s=this.colorStops[i].color,o=this.colorStops[i].opacity,a=this.colorStops[i].offset;void 0!==o&&(s=new fabric.Color(s).setAlpha(o).toRgba()),e.addColorStop(a,s)}return e}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(t,e,i,r){for(var n,s,o,a,c,h,l,u=(u=parseFloat(i)/(/%$/.test(i)?100:1))<0?0:1<u?1:u,f=(isNaN(u)&&(u=1),t.getElementsByTagName(\"stop\")),i=\"userSpaceOnUse\"===t.getAttribute(\"gradientUnits\")?\"pixels\":\"percentage\",d=t.getAttribute(\"gradientTransform\")||\"\",g=[],p=0,m=0,v=\"linearGradient\"===t.nodeName||\"LINEARGRADIENT\"===t.nodeName?(n=\"linear\",{x1:(s=t).getAttribute(\"x1\")||0,y1:s.getAttribute(\"y1\")||0,x2:s.getAttribute(\"x2\")||\"100%\",y2:s.getAttribute(\"y2\")||0}):(n=\"radial\",{x1:(s=t).getAttribute(\"fx\")||s.getAttribute(\"cx\")||\"50%\",y1:s.getAttribute(\"fy\")||s.getAttribute(\"cy\")||\"50%\",r1:0,x2:s.getAttribute(\"cx\")||\"50%\",y2:s.getAttribute(\"cy\")||\"50%\",r2:s.getAttribute(\"r\")||\"50%\"}),b=f.length;b--;)g.push(function(t,e){var i,r,n,s=t.getAttribute(\"style\"),o=t.getAttribute(\"offset\")||0;if(o=(o=parseFloat(o)/(/%$/.test(o)?100:1))<0?0:1<o?1:o,s){var a=s.split(/\\s*;\\s*/);for(\"\"===a[a.length-1]&&a.pop(),n=a.length;n--;){var c=a[n].split(/\\s*:\\s*/),h=c[0].trim(),c=c[1].trim();\"stop-color\"===h?i=c:\"stop-opacity\"===h&&(r=c)}}return i=i||t.getAttribute(\"stop-color\")||\"rgb(0,0,0)\",r=r||t.getAttribute(\"stop-opacity\"),s=(i=new fabric.Color(i)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=s*e,{offset:o,color:i.toRgb(),opacity:r}}(f[b],u));return d=fabric.parseTransformAttribute(d),o=v,a=r,c=i,Object.keys(o).forEach(function(t){\"Infinity\"===(h=o[t])?l=1:\"-Infinity\"===h?l=0:(l=parseFloat(o[t],10),\"string\"==typeof h&&/^(\\d+\\.\\d+)%|(\\d+)%$/.test(h)&&(l*=.01,\"pixels\"===c&&(\"x1\"!==t&&\"x2\"!==t&&\"r2\"!==t||(l*=a.viewBoxWidth||a.width),\"y1\"!==t&&\"y2\"!==t||(l*=a.viewBoxHeight||a.height)))),o[t]=l}),\"pixels\"==i&&(p=-e.left,m=-e.top),new fabric.Gradient({id:t.getAttribute(\"id\"),type:n,coords:v,colorStops:g,gradientUnits:i,gradientTransform:d,offsetX:p,offsetY:m})}})}(),function(){\"use strict\";var r=fabric.util.toFixed;fabric.Pattern=fabric.util.createClass({repeat:\"repeat\",offsetX:0,offsetY:0,crossOrigin:\"\",patternTransform:null,initialize:function(t,i){var r;t=t||{},this.id=fabric.Object.__uid++,this.setOptions(t),!t.source||t.source&&\"string\"!=typeof t.source?i&&i(this):((r=this).source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t,e){r.source=t,i&&i(r,e)},null,this.crossOrigin))},toObject:function(t){var e,i=fabric.Object.NUM_FRACTION_DIGITS;return\"string\"==typeof this.source.src?e=this.source.src:\"object\"==typeof this.source&&this.source.toDataURL&&(e=this.source.toDataURL()),e={type:\"pattern\",source:e,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:r(this.offsetX,i),offsetY:r(this.offsetY,i),patternTransform:this.patternTransform?this.patternTransform.concat():null},fabric.util.populateWithProperties(this,e,t),e},toSVG:function(t){var e=\"function\"==typeof this.source?this.source():this.source,i=e.width/t.width,r=e.height/t.height,n=this.offsetX/t.width,t=this.offsetY/t.height,s=\"\";return\"repeat-x\"!==this.repeat&&\"no-repeat\"!==this.repeat||(r=1,t&&(r+=Math.abs(t))),\"repeat-y\"!==this.repeat&&\"no-repeat\"!==this.repeat||(i=1,n&&(i+=Math.abs(n))),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id=\"SVGID_'+this.id+'\" x=\"'+n+'\" y=\"'+t+'\" width=\"'+i+'\" height=\"'+r+'\">\\n<image x=\"0\" y=\"0\" width=\"'+e.width+'\" height=\"'+e.height+'\" xlink:href=\"'+s+'\"></image>\\n</pattern>\\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return\"\";if(void 0!==e.src){if(!e.complete)return\"\";if(0===e.naturalWidth||0===e.naturalHeight)return\"\"}return t.createPattern(e,this.repeat)}})}(),function(t){\"use strict\";var o=t.fabric||(t.fabric={}),a=o.util.toFixed;o.Shadow?o.warn(\"fabric.Shadow is already defined.\"):(o.Shadow=o.util.createClass({color:\"rgb(0,0,0)\",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var e in t=\"string\"==typeof t?this._parseShadow(t):t)this[e]=t[e];this.id=o.Object.__uid++},_parseShadow:function(t){var t=t.trim(),e=o.Shadow.reOffsetsAndBlur.exec(t)||[];return{color:(t.replace(o.Shadow.reOffsetsAndBlur,\"\")||\"rgb(0,0,0)\").trim(),offsetX:parseFloat(e[1],10)||0,offsetY:parseFloat(e[2],10)||0,blur:parseFloat(e[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join(\"px \")},toSVG:function(t){var e=40,i=40,r=o.Object.NUM_FRACTION_DIGITS,n=o.util.rotateVector({x:this.offsetX,y:this.offsetY},o.util.degreesToRadians(-t.angle)),s=new o.Color(this.color);return t.width&&t.height&&(e=100*a((Math.abs(n.x)+this.blur)/t.width,r)+20,i=100*a((Math.abs(n.y)+this.blur)/t.height,r)+20),t.flipX&&(n.x*=-1),t.flipY&&(n.y*=-1),'<filter id=\"SVGID_'+this.id+'\" y=\"-'+i+'%\" height=\"'+(100+2*i)+'%\" x=\"-'+e+'%\" width=\"'+(100+2*e)+'%\" >\\n\\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"'+a(this.blur?this.blur/2:0,r)+'\"></feGaussianBlur>\\n\\t<feOffset dx=\"'+a(n.x,r)+'\" dy=\"'+a(n.y,r)+'\" result=\"oBlur\" ></feOffset>\\n\\t<feFlood flood-color=\"'+s.toRgb()+'\" flood-opacity=\"'+s.getAlpha()+'\"/>\\n\\t<feComposite in2=\"oBlur\" operator=\"in\" />\\n\\t<feMerge>\\n\\t\\t<feMergeNode></feMergeNode>\\n\\t\\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\\n\\t</feMerge>\\n</filter>\\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},i=o.Shadow.prototype;return[\"color\",\"blur\",\"offsetX\",\"offsetY\",\"affectStroke\",\"nonScaling\"].forEach(function(t){this[t]!==i[t]&&(e[t]=this[t])},this),e}}),o.Shadow.reOffsetsAndBlur=/(?:\\s|^)(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?(\\d+(?:\\.\\d*)?(?:px)?)?(?:\\s?|$)(?:$|\\s)/)}(\"undefined\"!=typeof exports?exports:this),function(){\"use strict\";var n,t,h,a,s,o,i,r,e;fabric.StaticCanvas?fabric.warn(\"fabric.StaticCanvas is already defined.\"):(n=fabric.util.object.extend,t=fabric.util.getElementOffset,h=fabric.util.removeFromArray,a=fabric.util.toFixed,s=fabric.util.transformPoint,o=fabric.util.invertTransform,i=fabric.util.getNodeCanvas,r=fabric.util.createCanvasElement,e=new Error(\"Could not initialize `canvas` element\"),fabric.StaticCanvas=fabric.util.createClass(fabric.CommonMethods,{initialize:function(t,e){e=e||{},this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:\"\",backgroundImage:null,overlayColor:\"\",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:fabric.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1<fabric.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,fabric.devicePixelRatio):1},_initRetinaScaling:function(){var t;this._isRetinaScaling()&&(t=fabric.devicePixelRatio,this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop))},__initRetinaScaling:function(t,e,i){e.setAttribute(\"width\",this.width*t),e.setAttribute(\"height\",this.height*t),i.scale(t,t)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage(\"overlayImage\",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage(\"backgroundImage\",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor(\"overlayColor\",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor(\"backgroundColor\",t,e)},__setBgOverlayImage:function(r,t,n,s){return\"string\"==typeof t?fabric.util.loadImage(t,function(t,e){var i;t&&(i=new fabric.Image(t,s),(this[r]=i).canvas=this),n&&n(t,e)},this,s&&s.crossOrigin):(s&&t.setOptions(s),(this[r]=t)&&(t.canvas=this),n&&n(t,!1)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(){var t=r();if(!t)throw e;if(t.style||(t.style={}),void 0===t.getContext)throw e;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+\"px\",e.style.height=this.height+\"px\",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),fabric.util.addClass(this.lowerCanvasEl,\"lower-canvas\"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext(\"2d\")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i,r;for(r in e=e||{},t)i=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),i+=\"px\",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(r,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i,r,n=this._activeObject,s=this.backgroundImage,o=this.overlayImage;for(this.viewportTransform=t,i=0,r=this._objects.length;i<r;i++)(e=this._objects[i]).group||e.setCoords(!0);return n&&n.setCoords(),s&&s.setCoords(!0),o&&o.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var i=t,r=this.viewportTransform.slice(0),e=(t=s(t,o(this.viewportTransform)),r[0]=e,r[3]=e,s(t,r));return r[4]+=i.x-e.x,r[5]+=i.y-e.y,this.setViewportTransform(r)},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set(\"canvas\",this),t.setCoords(),this.fire(\"object:added\",{target:t}),t.fire(\"added\")},_onObjectRemoved:function(t){this.fire(\"object:removed\",{target:t}),t.fire(\"removed\"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor=\"\",this.overlayColor=\"\",this._hasITextHandlers&&(this.off(\"mouse:up\",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire(\"canvas:cleared\"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=fabric.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,i=this.height,r=o(this.viewportTransform);return t.tl=s({x:0,y:0},r),t.br=s({x:e,y:i},r),t.tr=new fabric.Point(t.br.x,t.tl.y),t.bl=new fabric.Point(t.tl.x,t.br.y),this.vptCoords=t},cancelRequestedRender:function(){this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var i=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),fabric.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire(\"before:render\",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire(\"after:render\",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,i=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation=\"destination-in\",i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},_renderObjects:function(t,e){for(var i=0,r=e.length;i<r;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+\"Color\"],r=this[e+\"Image\"],n=this.viewportTransform,e=this[e+\"Vpt\"];(i||r)&&(i&&(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=i.toLive?i.toLive(t,this):i,e&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0),(i=i.gradientTransform||i.patternTransform)&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t.fill(),t.restore()),r&&(t.save(),e&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),r.render(t),t.restore()))},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,\"background\")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,\"overlay\")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new fabric.Point(this.width/2,this.height/2)},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenterPoint().x,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(t){var e=this.getCenterPoint();return this._centerObject(t,e)},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenterPoint(),e=o(this.viewportTransform);return s(t,e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,\"center\",\"center\"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod(\"toObject\",t)},toDatalessObject:function(t){return this._toObjectMethod(\"toDatalessObject\",t)},_toObjectMethod:function(t,e){var i=this.clipPath,r={version:fabric.version,objects:this._toObjects(t,e)};return i&&!i.excludeFromExport&&(r.clipPath=this._toObject(this.clipPath,t,e)),n(r,this.__serializeBgOverlay(t,e)),fabric.util.populateWithProperties(this,r,e),r},_toObjects:function(e,i){return this._objects.filter(function(t){return!t.excludeFromExport}).map(function(t){return this._toObject(t,e,i)},this)},_toObject:function(t,e,i){this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);var r,e=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=r),e},__serializeBgOverlay:function(t,e){var i={},r=this.backgroundImage,n=this.overlayImage,s=this.backgroundColor,o=this.overlayColor;return s&&s.toObject?s.excludeFromExport||(i.background=s.toObject(e)):s&&(i.background=s),o&&o.toObject?o.excludeFromExport||(i.overlay=o.toObject(e)):o&&(i.overlay=o),r&&!r.excludeFromExport&&(i.backgroundImage=this._toObject(r,t,e)),n&&!n.excludeFromExport&&(i.overlayImage=this._toObject(n,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){(t=t||{}).reviver=e;var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path=\"url(#'+this.clipPath.clipPathId+')\" >\\n'),this._setSVGBgOverlayColor(i,\"background\"),this._setSVGBgOverlayImage(i,\"backgroundImage\",e),this._setSVGObjects(i,e),this.clipPath&&i.push(\"</g>\\n\"),this._setSVGBgOverlayColor(i,\"overlay\"),this._setSVGBgOverlayImage(i,\"overlayImage\",e),i.push(\"</svg>\"),i.join(\"\")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version=\"1.0\" encoding=\"',e.encoding||\"UTF-8\",'\" standalone=\"no\" ?>\\n','<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" ','\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n')},_setSVGHeader:function(t,e){var i,r=e.width||this.width,n=e.height||this.height,s='viewBox=\"0 0 '+this.width+\" \"+this.height+'\" ',o=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?s='viewBox=\"'+e.viewBox.x+\" \"+e.viewBox.y+\" \"+e.viewBox.width+\" \"+e.viewBox.height+'\" ':this.svgViewportTransformation&&(i=this.viewportTransform,s='viewBox=\"'+a(-i[4]/i[0],o)+\" \"+a(-i[5]/i[3],o)+\" \"+a(this.width/i[0],o)+\" \"+a(this.height/i[3],o)+'\" '),t.push(\"<svg \",'xmlns=\"http://www.w3.org/2000/svg\" ','xmlns:xlink=\"http://www.w3.org/1999/xlink\" ','version=\"1.1\" ','width=\"',r,'\" ','height=\"',n,'\" ',s,'xml:space=\"preserve\">\\n',\"<desc>Created with Fabric.js \",fabric.version,\"</desc>\\n\",\"<defs>\\n\",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),\"</defs>\\n\")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId=\"CLIPPATH_\"+fabric.Object.__uid++,'<clipPath id=\"'+e.clipPathId+'\" >\\n'+this.clipPath.toClipPathSVG(t.reviver)+\"</clipPath>\\n\"):\"\"},createSVGRefElementsMarkup:function(){var n=this;return[\"background\",\"overlay\"].map(function(t){var e,i,r=n[t+\"Color\"];if(r&&r.toLive)return t=n[t+\"Vpt\"],e=n.viewportTransform,i={width:n.width/(t?e[0]:1),height:n.height/(t?e[3]:1)},r.toSVG(i,{additionalTransform:t?fabric.util.matrixToSVG(e):\"\"})}).join(\"\")},createSVGFontFacesMarkup:function(){var t,e,i,r,n,s,o,a,c,h=\"\",l={},u=fabric.fontPaths,f=[];for(this._objects.forEach(function t(e){f.push(e),e._objects&&e._objects.forEach(t)}),o=0,a=f.length;o<a;o++)if(e=(t=f[o]).fontFamily,-1!==t.type.indexOf(\"text\")&&!l[e]&&u[e]&&(l[e]=!0,t.styles))for(n in i=t.styles)for(s in r=i[n])!l[e=r[s].fontFamily]&&u[e]&&(l[e]=!0);for(c in l)h+=[\"\\t\\t@font-face {\\n\",\"\\t\\t\\tfont-family: '\",c,\"';\\n\",\"\\t\\t\\tsrc: url('\",u[c],\"');\\n\",\"\\t\\t}\\n\"].join(\"\");return h=h&&['\\t<style type=\"text/css\">',\"<![CDATA[\\n\",h,\"]]>\",\"</style>\\n\"].join(\"\")},_setSVGObjects:function(t,e){for(var i,r=this._objects,n=0,s=r.length;n<s;n++)(i=r[n]).excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i,r=this[e+\"Color\"],n=this.viewportTransform,s=this.width,o=this.height;r&&(r.toLive?(i=r.repeat,n=fabric.util.invertTransform(n),e=this[e+\"Vpt\"]?fabric.util.matrixToSVG(n):\"\",t.push('<rect transform=\"'+e+\" translate(\",s/2,\",\",o/2,')\"',' x=\"',r.offsetX-s/2,'\" y=\"',r.offsetY-o/2,'\" ','width=\"',\"repeat-y\"===i||\"no-repeat\"===i?r.source.width:s,'\" height=\"',\"repeat-x\"===i||\"no-repeat\"===i?r.source.height:o,'\" fill=\"url(#SVGID_'+r.id+')\"',\"></rect>\\n\")):t.push('<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" ','fill=\"',r,'\"',\"></rect>\\n\"))},sendToBack:function(t){if(!t)return this;var e,i,r,n=this._activeObject;if(t===n&&\"activeSelection\"===t.type)for(e=(r=n._objects).length;e--;)i=r[e],h(this._objects,i),this._objects.unshift(i);else h(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,n=this._activeObject;if(t===n&&\"activeSelection\"===t.type)for(r=n._objects,e=0;e<r.length;e++)i=r[e],h(this._objects,i),this._objects.push(i);else h(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,n,s,o,a=this._activeObject,c=0;if(t===a&&\"activeSelection\"===t.type)for(o=a._objects,i=0;i<o.length;i++)r=o[i],0+c<(n=this._objects.indexOf(r))&&(s=n-1,h(this._objects,r),this._objects.splice(s,0,r)),c++;else 0!==(n=this._objects.indexOf(t))&&(s=this._findNewLowerIndex(t,n,e),h(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,i){var r,n;if(i){for(n=(r=e)-1;0<=n;--n)if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e-1;return r},bringForward:function(t,e){if(!t)return this;var i,r,n,s,o,a=this._activeObject,c=0;if(t===a&&\"activeSelection\"===t.type)for(i=(o=a._objects).length;i--;)r=o[i],(n=this._objects.indexOf(r))<this._objects.length-1-c&&(s=n+1,h(this._objects,r),this._objects.splice(s,0,r)),c++;else(n=this._objects.indexOf(t))!==this._objects.length-1&&(s=this._findNewUpperIndex(t,n,e),h(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,i){var r,n,s;if(i){for(n=(r=e)+1,s=this._objects.length;n<s;++n)if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e+1;return r},moveTo:function(t,e){return h(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(fabric.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove(\"lower-canvas\"),fabric.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute(\"width\",this.width),this.lowerCanvasEl.setAttribute(\"height\",this.height),fabric.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return\"#<fabric.Canvas (\"+this.complexity()+\"): { objects: \"+this._objects.length+\" }>\"}}),n(fabric.StaticCanvas.prototype,fabric.Observable),n(fabric.StaticCanvas.prototype,fabric.Collection),n(fabric.StaticCanvas.prototype,fabric.DataURLExporter),n(fabric.StaticCanvas,{EMPTY_JSON:'{\"objects\": [], \"background\": \"white\"}',supports:function(t){var e=r();if(!e||!e.getContext)return null;e=e.getContext(\"2d\");return!e||\"setLineDash\"!==t?null:void 0!==e.setLineDash}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject,fabric.isLikelyNode&&(fabric.StaticCanvas.prototype.createPNGStream=function(){var t=i(this.lowerCanvasEl);return t&&t.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){var e=i(this.lowerCanvasEl);return e&&e.createJPEGStream(t)}))}(),fabric.BaseBrush=fabric.util.createClass({color:\"rgb(0, 0, 0)\",width:1,shadow:null,strokeLineCap:\"round\",strokeLineJoin:\"round\",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){var t,e,i,r;this.shadow&&(t=this.canvas,e=this.shadow,i=t.contextTop,r=t.getZoom(),t&&t._isRetinaScaling()&&(r*=fabric.devicePixelRatio),i.shadowColor=e.color,i.shadowBlur=e.blur*r,i.shadowOffsetX=e.offsetX*r,i.shadowOffsetY=e.offsetY*r)},needsFullRender:function(){return new fabric.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor=\"\",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:\"shiftKey\",initialize:function(t){this.canvas=t,this._points=[]},needsFullRender:function(){return this.callSuper(\"needsFullRender\")||this._hasStraightLine},_drawSegment:function(t,e,i){i=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){var i;this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||this._captureDrawingPath(t)&&1<this._points.length&&(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this._render()):(t=(e=this._points).length,i=this.canvas.contextTop,this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,e[t-2],e[t-1],!0),i.stroke(),i.restore())))},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){t=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(t){return!(1<this._points.length&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&1<this._points.length&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(t){t=new fabric.Point(t.x,t.y);return this._addPoint(t)},_render:function(t){var e,i,r,n=this._points[0],s=this._points[1];for(t=t||this.canvas.contextTop,this._saveAndTransform(t),t.beginPath(),2===this._points.length&&n.x===s.x&&n.y===s.y&&(r=this.width/1e3,n=new fabric.Point(n.x,n.y),s=new fabric.Point(s.x,s.y),n.x-=r,s.x+=r),t.moveTo(n.x,n.y),e=1,i=this._points.length;e<i;e++)this._drawSegment(t,n,s),n=this._points[e],s=this._points[e+1];t.lineTo(n.x,n.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return fabric.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){return\"M 0 0 Q 0 0 0 0 L 0 0\"===fabric.util.joinPath(t)},createPath:function(t){t=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new fabric.Shadow(this.shadow)),t},decimatePoints:function(t,e){if(t.length<=2)return t;for(var i=this.canvas.getZoom(),r=Math.pow(e/i,2),n=t.length-1,s=t[0],o=[s],a=1;a<n-1;a++)r<=Math.pow(s.x-t[a].x,2)+Math.pow(s.y-t[a].y,2)&&(s=t[a],o.push(s));return o.push(t[n]),o},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points);this._isEmptySVGPath(t)?this.canvas.requestRenderAll():(t=this.createPath(t),this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire(\"before:path:created\",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire(\"path:created\",{path:t}))}}),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var t=this.addPoint(t),e=this.canvas.contextTop;this._saveAndTransform(e),this.dot(e,t),e.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,i=this.canvas.contextTop,r=this.points;for(this._saveAndTransform(i),t=0,e=r.length;t<e;t++)this.dot(i,r[t]);i.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){for(var t=this.canvas.renderOnAddRemove,e=(this.canvas.renderOnAddRemove=!1,[]),i=0,r=this.points.length;i<r;i++){var n=this.points[i],n=new fabric.Circle({radius:n.radius,left:n.x,top:n.y,originX:\"center\",originY:\"center\",fill:n.fill});this.shadow&&(n.shadow=new fabric.Shadow(this.shadow)),e.push(n)}var s=new fabric.Group(e);s.canvas=this.canvas,this.canvas.fire(\"before:path:created\",{path:s}),this.canvas.add(s),this.canvas.fire(\"path:created\",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},addPoint:function(t){var t=new fabric.Point(t.x,t.y),e=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return t.radius=e,t.fill=i,this.points.push(t),t}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){for(var t=this.canvas.renderOnAddRemove,e=(this.canvas.renderOnAddRemove=!1,[]),i=0,r=this.sprayChunks.length;i<r;i++)for(var n=this.sprayChunks[i],s=0,o=n.length;s<o;s++){var a=new fabric.Rect({width:n[s].width,height:n[s].width,left:n[s].x+1,top:n[s].y+1,originX:\"center\",originY:\"center\",fill:this.color});e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var c=new fabric.Group(e);this.shadow&&c.set(\"shadow\",new fabric.Shadow(this.shadow)),this.canvas.fire(\"before:path:created\",{path:c}),this.canvas.add(c),this.canvas.fire(\"path:created\",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){for(var e,i={},r=0,n=t.length;r<n;r++)i[e=t[r].left+\"\"+t[r].top]||(i[e]=t[r]);var s=[];for(e in i)s.push(i[e]);return s},render:function(t){var e,i,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),e=0,i=t.length;e<i;e++){var n=t[e];void 0!==n.opacity&&(r.globalAlpha=n.opacity),r.fillRect(n.x,n.y,n.width,n.width)}r.restore()},_render:function(){var t,e,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);i.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e=this.width/2,i=0;i<this.density;i++){var r=fabric.util.getRandomInt(t.x-e,t.x+e),n=fabric.util.getRandomInt(t.y-e,t.y+e),s=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,r=new fabric.Point(r,n);r.width=s,this.randomOpacity&&(r.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.util.createCanvasElement(),e=t.getContext(\"2d\");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace(\"this.color\",'\"'+this.color+'\"')},getPattern:function(t){return t.createPattern(this.source||this.getPatternSrc(),\"repeat\")},_setBrushStyles:function(t){this.callSuper(\"_setBrushStyles\",t),t.strokeStyle=this.getPattern(t)},createPath:function(t){var t=this.callSuper(\"createPath\",t),e=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-e.x,offsetY:-e.y}),t}}),function(){var t,o=fabric.util.getPointer,c=fabric.util.degreesToRadians,h=fabric.util.isTouchEvent;for(t in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e=e||{},this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:\"shiftKey\",centeredScaling:!1,centeredRotation:!1,centeredKey:\"altKey\",altActionKey:\"shiftKey\",interactive:!0,selection:!0,selectionKey:\"shiftKey\",altSelectionKey:null,selectionColor:\"rgba(100, 100, 255, 0.3)\",selectionDashArray:[],selectionBorderColor:\"rgba(255, 255, 255, 0.3)\",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:\"move\",moveCursor:\"move\",defaultCursor:\"default\",freeDrawingCursor:\"crosshair\",notAllowedCursor:\"not-allowed\",containerClass:\"canvas-container\",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e=this.getActiveObjects();if(0<e.length&&!this.preserveObjectStacking){for(var i=[],r=[],n=0,s=this._objects.length;n<s;n++)t=this._objects[n],(-1===e.indexOf(t)?i:r).push(t);1<e.length&&(this._activeObject._objects=r),i.push.apply(i,r)}else i=this._objects;return i},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire(\"after:render\"),this},_normalizePointer:function(t,e){t=t.calcTransformMatrix(),t=fabric.util.invertTransform(t),e=this.restorePointerVpt(e);return fabric.util.transformPoint(e,t)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject)return n=this._normalizePointer(t,{x:e,y:i}),r=Math.max(t.cacheTranslationX+n.x*t.zoomX,0),n=Math.max(t.cacheTranslationY+n.y*t.zoomY,0),fabric.util.isTransparent(t._cacheContext,Math.round(r),Math.round(n),this.targetFindTolerance);var r=this.contextCache,n=t.selectionBackgroundColor,s=this.viewportTransform;return t.selectionBackgroundColor=\"\",this.clearContext(r),r.save(),r.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.render(r),r.restore(),t.selectionBackgroundColor=n,fabric.util.isTransparent(r,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(t){return!0===e[t]}):e[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),r=this._activeObject;return!e||r&&1<i.length&&-1===i.indexOf(e)&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t,e,i){var r;if(t)return\"scale\"===e||\"scaleX\"===e||\"scaleY\"===e||\"resizing\"===e?r=this.centeredScaling||t.centeredScaling:\"rotate\"===e&&(r=this.centeredRotation||t.centeredRotation),r?!i:i},_getOriginFromCorner:function(t,e){t={x:t.originX,y:t.originY};return\"ml\"===e||\"tl\"===e||\"bl\"===e?t.x=\"right\":\"mr\"!==e&&\"tr\"!==e&&\"br\"!==e||(t.x=\"left\"),\"tl\"===e||\"mt\"===e||\"tr\"===e?t.y=\"bottom\":\"bl\"!==e&&\"mb\"!==e&&\"br\"!==e||(t.y=\"top\"),t},_getActionFromCorner:function(t,e,i,r){if(!e||!t)return\"drag\";t=r.controls[e];return t.getActionName(i,t,r)},_setupCurrentTransform:function(t,e,i){var r,n,s,o,a;e&&(r=this.getPointer(t),n=e.__corner,a=e.controls[n],a=i&&n?a.getActionHandler(t,e,a):fabric.controlsUtils.dragHandler,i=this._getActionFromCorner(i,n,t,e),s=this._getOriginFromCorner(e,n),o=t[this.centeredKey],a={target:e,action:i,actionHandler:a,corner:n,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:r.x-e.left,offsetY:r.y-e.top,originX:s.x,originY:s.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:c(e.angle),width:e.width*e.scaleX,shiftKey:t.shiftKey,altKey:o,original:fabric.util.saveObjectTransform(e)},this._shouldCenterTransform(e,i,o)&&(a.originX=\"center\",a.originY=\"center\"),a.original.originX=s.x,a.original.originY=s.y,this._currentTransform=a,this._beforeTransform(t))},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new fabric.Point(e.ex,e.ey),i=fabric.util.transformPoint(i,this.viewportTransform),e=new fabric.Point(e.ex+e.left,e.ey+e.top),e=fabric.util.transformPoint(e,this.viewportTransform),r=Math.min(i.x,e.x),n=Math.min(i.y,e.y),s=Math.max(i.x,e.x),i=Math.max(i.y,e.y),e=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(r,n,s-r,i-n)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,r+=e,n+=e,s-=e,i-=e,fabric.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(r,n,s-r,i-n))},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,n=this.getPointer(t,!0),s=this._activeObject,o=this.getActiveObjects(),a=h(t),c=1<o.length&&!e||1===o.length;if(this.targets=[],c&&s._findTargetCorner(n,a))return s;if(1<o.length&&!e&&s===this._searchPossibleTargets([s],n))return s;if(1===o.length&&s===this._searchPossibleTargets([s],n)){if(!this.preserveObjectStacking)return s;i=s,r=this.targets,this.targets=[]}c=this._searchPossibleTargets(this._objects,n);return t[this.altSelectionKey]&&c&&i&&c!==i&&(c=i,this.targets=r),c}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t))return!((this.perPixelTargetFind||e.perPixelTargetFind)&&!e.isEditing)||(!this.isTargetTransparent(e,i.x,i.y)||void 0)},_searchPossibleTargets:function(t,e){for(var i,r=t.length;r--;){var n=t[r],s=n.group?this._normalizePointer(n.group,e):e;if(this._checkTarget(s,n,e)){(i=t[r]).subTargetCheck&&i instanceof fabric.Group&&(s=this._searchPossibleTargets(i._objects,e))&&this.targets.push(s);break}}return i},restorePointerVpt:function(t){return fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform))},getPointer:function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var t=o(t),i=this.upperCanvasEl,r=i.getBoundingClientRect(),n=r.width||0,s=r.height||0,r=(n&&s||(\"top\"in r&&\"bottom\"in r&&(s=Math.abs(r.top-r.bottom)),\"right\"in r&&\"left\"in r&&(n=Math.abs(r.right-r.left))),this.calcOffset(),t.x=t.x-this._offset.left,t.y=t.y-this._offset.top,e||(t=this.restorePointerVpt(t)),this.getRetinaScaling());return 1!==r&&(t.x/=r,t.y/=r),e=0===n||0===s?{width:1,height:1}:{width:i.width/n,height:i.height/s},{x:t.x*e.width,y:t.y*e.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\\s*lower-canvas\\s*/,\"\"),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className=\"\":(i=this._createCanvasElement(),this.upperCanvasEl=i),fabric.util.addClass(i,\"upper-canvas \"+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext(\"2d\")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute(\"width\",this.width),this.cacheCanvasEl.setAttribute(\"height\",this.height),this.contextCache=this.cacheCanvasEl.getContext(\"2d\")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,\"div\",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.width+\"px\",height:this.height+\"px\",position:\"relative\"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;fabric.util.setStyle(t,{position:\"absolute\",width:e+\"px\",height:i+\"px\",left:0,top:0,\"touch-action\":this.allowTouchScrolling?\"manipulation\":\"none\",\"-ms-touch-action\":this.allowTouchScrolling?\"manipulation\":\"none\"}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?\"activeSelection\"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire(\"before:selection:cleared\",{target:t}),this._discardActiveObject(),this.fire(\"selection:cleared\",{target:t}),t.fire(\"deselected\")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper(\"_onObjectRemoved\",t)},_fireSelectionEvents:function(e,i){var r=!1,n=this.getActiveObjects(),s=[],o=[];e.forEach(function(t){-1===n.indexOf(t)&&(r=!0,t.fire(\"deselected\",{e:i,target:t}),o.push(t))}),n.forEach(function(t){-1===e.indexOf(t)&&(r=!0,t.fire(\"selected\",{e:i,target:t}),s.push(t))}),0<e.length&&0<n.length?r&&this.fire(\"selection:updated\",{e:i,selected:s,deselected:o}):0<n.length?this.fire(\"selection:created\",{e:i,selected:s}):0<e.length&&this.fire(\"selection:cleared\",{e:i,deselected:o})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire(\"before:selection:cleared\",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,[\"upperCanvasEl\",\"cacheCanvasEl\"].forEach(function(t){fabric.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,fabric.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper(\"clear\")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(t),e=this.callSuper(\"_toObject\",t,e,i);return this._unwindGroupTransformOnObject(t,r),e},_realizeGroupTransformOnObject:function(e){var i;return e.group&&\"activeSelection\"===e.group.type&&this._activeObject===e.group?(i={},[\"angle\",\"flipX\",\"flipY\",\"left\",\"scaleX\",\"scaleY\",\"skewX\",\"skewY\",\"top\"].forEach(function(t){i[t]=e[t]}),fabric.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),i):null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(e);this.callSuper(\"_setSVGObject\",t,e,i),this._unwindGroupTransformOnObject(e,r)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),fabric.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),fabric.StaticCanvas)\"prototype\"!==t&&(fabric.Canvas[t]=fabric.StaticCanvas[t])}(),function(){var r=fabric.util.addListener,n=fabric.util.removeListener,s={passive:!1};function h(t,e){return t.button&&t.button===e-1}fabric.util.object.extend(fabric.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(r,\"add\")},_getEventPrefix:function(){return this.enablePointerEvents?\"pointer\":\"mouse\"},addOrRemove:function(t,e){var i=this.upperCanvasEl,r=this._getEventPrefix();t(fabric.window,\"resize\",this._onResize),t(i,r+\"down\",this._onMouseDown),t(i,r+\"move\",this._onMouseMove,s),t(i,r+\"out\",this._onMouseOut),t(i,r+\"enter\",this._onMouseEnter),t(i,\"wheel\",this._onMouseWheel),t(i,\"contextmenu\",this._onContextMenu),t(i,\"dblclick\",this._onDoubleClick),t(i,\"dragover\",this._onDragOver),t(i,\"dragenter\",this._onDragEnter),t(i,\"dragleave\",this._onDragLeave),t(i,\"drop\",this._onDrop),this.enablePointerEvents||t(i,\"touchstart\",this._onTouchStart,s),\"undefined\"!=typeof eventjs&&e in eventjs&&(eventjs[e](i,\"gesture\",this._onGesture),eventjs[e](i,\"drag\",this._onDrag),eventjs[e](i,\"orientation\",this._onOrientationChange),eventjs[e](i,\"shake\",this._onShake),eventjs[e](i,\"longpress\",this._onLongPress))},removeListeners:function(){this.addOrRemove(n,\"remove\");var t=this._getEventPrefix();n(fabric.document,t+\"up\",this._onMouseUp),n(fabric.document,\"touchend\",this._onTouchEnd,s),n(fabric.document,t+\"move\",this._onMouseMove,s),n(fabric.document,\"touchmove\",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,\"dragenter\"),this._onDragLeave=this._simpleEventHandler.bind(this,\"dragleave\"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(e){var i=this._hoveredTarget,r=(this.fire(\"mouse:out\",{target:i,e:e}),this._hoveredTarget=null,i&&i.fire(\"mouseout\",{e:e}),this);this._hoveredTargets.forEach(function(t){r.fire(\"mouse:out\",{target:i,e:e}),t&&i.fire(\"mouseout\",{e:e})}),this._hoveredTargets=[]},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire(\"mouse:over\",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler(\"dragover\",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler(\"drop:before\",t),this._simpleEventHandler(\"drop\",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"dblclick\"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&(\"touchend\"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(t){t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var t=this.upperCanvasEl,e=this._getEventPrefix();r(fabric.document,\"touchend\",this._onTouchEnd,s),r(fabric.document,\"touchmove\",this._onMouseMove,s),n(t,e+\"down\",this._onMouseDown)},_onMouseDown:function(t){this.__onMouseDown(t),this._resetTransformEventData();var t=this.upperCanvasEl,e=this._getEventPrefix();n(t,e+\"move\",this._onMouseMove,s),r(fabric.document,e+\"up\",this._onMouseUp),r(fabric.document,e+\"move\",this._onMouseMove,s)},_onTouchEnd:function(t){var e,i;0<t.touches.length||(this.__onMouseUp(t),this._resetTransformEventData(),this.mainTouchId=null,e=this._getEventPrefix(),n(fabric.document,\"touchend\",this._onTouchEnd,s),n(fabric.document,\"touchmove\",this._onMouseMove,s),(i=this)._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){r(i.upperCanvasEl,e+\"down\",i._onMouseDown),i._willAddMouseDown=0},400))},_onMouseUp:function(t){this.__onMouseUp(t),this._resetTransformEventData();var e=this.upperCanvasEl,i=this._getEventPrefix();this._isMainEvent(t)&&(n(fabric.document,i+\"up\",this._onMouseUp),n(fabric.document,i+\"move\",this._onMouseMove,s),r(e,i+\"move\",this._onMouseMove,s))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,i,r,n,s,o=this._currentTransform,a=this._groupSelector,c=!1,a=!a||0===a.left&&0===a.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,\"up:before\"),h(t,3))this.fireRightClick&&this._handleEvent(t,\"up\",3,a);else{if(h(t,2))return this.fireMiddleClick&&this._handleEvent(t,\"up\",2,a),void this._resetTransformEventData();this.isDrawingMode&&this._isCurrentlyDrawing?this._onMouseUpInDrawingMode(t):this._isMainEvent(t)&&(o&&(this._finalizeCurrentTransform(t),c=o.actionPerformed),a||(r=e===this._activeObject,this._maybeGroupObjects(t),c=c||this._shouldRender(e)||!r&&e===this._activeObject),e&&(n=e._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&\"up\"===e.activeOn?(this.setActiveObject(e,t),c=!0):(r=(i=e.controls[n])&&i.getMouseUpHandler(t,e,i))&&r(t,o,(s=this.getPointer(t)).x,s.y),e.isMoving=!1),!o||o.target===e&&o.corner===n||(n=(r=o.target&&o.target.controls[o.corner])&&r.getMouseUpHandler(t,e,i),s=s||this.getPointer(t),n&&n(t,o,s.x,s.y)),this._setCursorFromEvent(t,e),this._handleEvent(t,\"up\",1,a),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),c?this.requestRenderAll():a||this.renderTop())}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),r=this.targets,n={e:e,target:i,subTargets:r};if(this.fire(t,n),i&&i.fire(t,n),!r)return i;for(var s=0;s<r.length;s++)r[s].fire(t,n);return i},_handleEvent:function(t,e,i,r){var n=this._target,s=this.targets||[],o={e:t,target:n,subTargets:s,button:i||1,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};\"up\"===e&&(o.currentTarget=this.findTarget(t),o.currentSubTargets=this.targets),this.fire(\"mouse:\"+e,o),n&&n.fire(\"mouse\"+e,o);for(var a=0;a<s.length;a++)s[a].fire(\"mouse\"+e,o)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target,t={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire(\"modified\",t)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,\"down\")},_onMouseMoveInDrawingMode:function(t){var e;this._isCurrentlyDrawing&&(e=this.getPointer(t),this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})),this.setCursor(this.freeDrawingCursor),this._handleEvent(t,\"move\")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,\"up\")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"down:before\");var e,i,r,n,s,o=this._target;h(t,3)?this.fireRightClick&&this._handleEvent(t,\"down\",3):h(t,2)?this.fireMiddleClick&&this._handleEvent(t,\"down\",2):this.isDrawingMode?this._onMouseDownInDrawingMode(t):this._isMainEvent(t)&&!this._currentTransform&&(n=this._pointer,this._previousPointer=n,e=this._shouldRender(o),i=this._shouldGroup(t,o),this._shouldClearSelection(t,o)?this.discardActiveObject(t):i&&(this._handleGrouping(t,o),o=this._activeObject),!this.selection||o&&(o.selectable||o.isEditing||o===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),o&&(r=o===this._activeObject,o.selectable&&\"down\"===o.activeOn&&this.setActiveObject(o,t),s=o._findTargetCorner(this.getPointer(t,!0),fabric.util.isTouchEvent(t)),o.__corner=s,o!==this._activeObject||!s&&i||(this._setupCurrentTransform(t,o,r),r=o.controls[s],n=this.getPointer(t),(s=r&&r.getMouseDownHandler(t,o,r))&&s(t,this._currentTransform,n.x,n.y))),this._handleEvent(t,\"down\"),(e||i)&&this.requestRenderAll())},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire(\"before:transform\",{e:t,transform:e})},__onMouseMove:function(t){var e,i;this._handleEvent(t,\"move:before\"),this._cacheTransformEventData(t),this.isDrawingMode?this._onMouseMoveInDrawingMode(t):this._isMainEvent(t)&&((i=this._groupSelector)?(e=this._absolutePointer,i.left=e.x-i.ex,i.top=e.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,\"move\"),this._resetTransformEventData())},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,r=this._hoveredTargets,n=this.targets,s=Math.max(r.length,n.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:\"mouseout\",canvasEvtOut:\"mouse:out\",evtIn:\"mouseover\",canvasEvtIn:\"mouse:over\"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(n[o],e,{oldTarget:r[o],evtOut:\"mouseout\",evtIn:\"mouseover\"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,r=this._hoveredTargets,n=this.targets,s=Math.max(r.length,n.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:\"dragleave\",evtIn:\"dragenter\"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(n[o],e,{oldTarget:r[o],evtOut:\"dragleave\",evtIn:\"dragenter\"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var r,n,s=i.oldTarget,o=s!==t,a=i.canvasEvtIn,c=i.canvasEvtOut;o&&(r={e:e,target:t,previousTarget:s},n={e:e,target:s,nextTarget:t}),e=t&&o,s&&o&&(c&&this.fire(c,n),s.fire(i.evtOut,n)),e&&(a&&this.fire(a,r),t.fire(i.evtIn,r))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"wheel\"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var r=i.x,i=i.y,n=e.action,s=!1,o=e.actionHandler;o&&(s=o(t,e,r,i)),\"drag\"===n&&s&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:fabric.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,r=this._activeObject&&\"activeSelection\"===this._activeObject.type?this._activeObject:null,r=(!r||!r.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map(function(t){i=t.hoverCursor||i}),this.setCursor(i))},getCornerCursor:function(t,e,i){t=e.controls[t];return t.cursorStyleHandler(i,t,e)}})}(),function(){var f=Math.min,d=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this._activeObject;return i&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(i!==e||\"activeSelection\"===i.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var i=this._activeObject;i.__corner||(e!==i||(e=this.findTarget(t,!0))&&e.selectable)&&(i&&\"activeSelection\"===i.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var i=this._activeObject,r=i._objects.slice(0);i.contains(t)?(i.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===i.size()&&this._setActiveObject(i.item(0),e)):(i.addWithUpdate(t),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,e)},_createActiveSelection:function(t,e){var i=this.getActiveObjects(),t=this._createGroup(t);this._hoveredTarget=t,this._setActiveObject(t,e),this._fireSelectionEvents(i,e)},_createGroup:function(t){var e=this._objects,e=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.ActiveSelection(e,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects(t);1===e.length?this.setActiveObject(e[0],t):1<e.length&&(e=new fabric.ActiveSelection(e.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(e){for(var t,i=[],r=this._groupSelector.ex,n=this._groupSelector.ey,s=r+this._groupSelector.left,o=n+this._groupSelector.top,a=new fabric.Point(f(r,s),f(n,o)),c=new fabric.Point(d(r,s),d(n,o)),h=!this.selectionFullyContained,l=r===s&&n===o,u=this._objects.length;u--&&!((t=this._objects[u])&&t.selectable&&t.visible&&(h&&t.intersectsWithRect(a,c,!0)||t.isContainedWithinRect(a,c,!0)||h&&t.containsPoint(a,null,!0)||h&&t.containsPoint(c,null,!0))&&(i.push(t),l)););return i=1<i.length?i.filter(function(t){return!t.onSelect({e:e})}):i},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){var e=(t=t||{}).format||\"png\",i=t.quality||1,r=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(r,t);return fabric.util.toDataURL(r,e,i)},toCanvasElement:function(t,e){var i=((e=e||{}).width||this.width)*(t=t||1),r=(e.height||this.height)*t,n=this.getZoom(),s=this.width,o=this.height,n=n*t,a=this.viewportTransform,c=(a[4]-(e.left||0))*t,e=(a[5]-(e.top||0))*t,t=this.interactive,n=[n,0,0,n,c,e],c=this.enableRetinaScaling,e=fabric.util.createCanvasElement(),h=this.contextTop;return e.width=i,e.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=n,this.width=i,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(e.getContext(\"2d\"),this._objects),this.viewportTransform=a,this.width=s,this.height=o,this.calcViewportBoundaries(),this.interactive=t,this.enableRetinaScaling=c,this.contextTop=h,e}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromJSON:function(t,i,e){var r,n,s,o;if(t)return r=\"string\"==typeof t?JSON.parse(t):fabric.util.object.clone(t),n=this,s=r.clipPath,o=this.renderOnAddRemove,this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,function(e){n.clear(),n._setBgOverlay(r,function(){s?n._enlivenObjects([s],function(t){n.clipPath=t[0],n.__setupCanvas.call(n,r,e,o,i)}):n.__setupCanvas.call(n,r,e,o,i)})},e),this},__setupCanvas:function(t,e,i,r){var n=this;e.forEach(function(t,e){n.insertAt(t,e)}),this.renderOnAddRemove=i,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),r&&r()},_setBgOverlay:function(t,e){var i,r={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};t.backgroundImage||t.overlayImage||t.background||t.overlay?(this.__setBgOverlay(\"backgroundImage\",t.backgroundImage,r,i=function(){r.backgroundImage&&r.overlayImage&&r.backgroundColor&&r.overlayColor&&e&&e()}),this.__setBgOverlay(\"overlayImage\",t.overlayImage,r,i),this.__setBgOverlay(\"backgroundColor\",t.background,r,i),this.__setBgOverlay(\"overlayColor\",t.overlay,r,i)):e&&e()},__setBgOverlay:function(e,t,i,r){var n=this;if(!t)return i[e]=!0,void(r&&r());\"backgroundImage\"===e||\"overlayImage\"===e?fabric.util.enlivenObjects([t],function(t){n[e]=t[0],i[e]=!0,r&&r()}):this[\"set\"+fabric.util.string.capitalize(e,!0)](t,function(){i[e]=!0,r&&r()})},_enlivenObjects:function(t,e,i){t&&0!==t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},null,i):e&&e([])},_toDataURL:function(e,i){this.clone(function(t){i(t.toDataURL(e))})},_toDataURLWithMultiplier:function(e,i,r){this.clone(function(t){r(t.toDataURLWithMultiplier(e,i))})},clone:function(e,t){var i=JSON.stringify(this.toJSON(t));this.cloneWithoutData(function(t){t.loadFromJSON(i,function(){e&&e(t)})})},cloneWithoutData:function(t){var e=fabric.util.createCanvasElement(),i=(e.width=this.width,e.height=this.height,new fabric.Canvas(e));this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){\"use strict\";var g=t.fabric||(t.fabric={}),t=g.util.object.extend,s=g.util.object.clone,i=g.util.toFixed,e=g.util.string.capitalize,o=g.util.degreesToRadians,r=!g.isLikelyNode;g.Object||(g.Object=g.util.createClass(g.CommonMethods,{type:\"object\",originX:\"left\",originY:\"top\",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:\"rgb(178,204,255)\",borderDashArray:null,cornerColor:\"rgb(178,204,255)\",cornerStrokeColor:null,cornerStyle:\"rect\",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:\"rgb(0,0,0)\",fillRule:\"nonzero\",globalCompositeOperation:\"source-over\",backgroundColor:\"\",selectionBackgroundColor:\"\",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:\"butt\",strokeLineJoin:\"miter\",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:r,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:\"fill\",activeOn:\"down\",stateProperties:\"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform\".split(\" \"),cacheProperties:\"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath\".split(\" \"),colorProperties:\"fill stroke backgroundColor\".split(\" \"),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=g.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext(\"2d\"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var e=g.perfLimitSizeTotal,i=t.width,r=t.height,n=g.maxCacheSideLimit,s=g.minCacheSideLimit;if(i<=n&&r<=n&&i*r<=e)return i<s&&(t.width=s),r<s&&(t.height=s),t;var e=g.util.limitDimsByArea(i/r,e),o=g.util.capValue,a=o(s,e.x,n),o=o(s,e.y,n);return a<i&&(t.zoomX/=i/a,t.width=a,t.capped=!0),o<r&&(t.zoomY/=r/o,t.height=o,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),i=e.x*t.scaleX/this.scaleX,e=e.y*t.scaleY/this.scaleY;return{width:2+i,height:2+e,zoomX:t.scaleX,zoomY:t.scaleY,x:i,y:e}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var e=t._currentTransform.target,t=t._currentTransform.action;if(this===e&&t.slice&&\"scale\"===t.slice(0,5))return!1}var i,r,e=this._cacheCanvas,t=this._limitCacheSize(this._getCacheCanvasDimensions()),n=g.minCacheSideLimit,s=t.width,o=t.height,a=t.zoomX,c=t.zoomY,h=s!==this.cacheWidth||o!==this.cacheHeight,l=this.zoomX!==a||this.zoomY!==c,l=h||l,u=0,f=0,d=!1;return h&&(h=this._cacheCanvas.width,i=this._cacheCanvas.height,d=(r=h<s||i<o)||(s<.9*h||o<.9*i)&&n<h&&n<i,r&&!t.capped&&(n<s||n<o)&&(u=.1*s,f=.1*o)),this instanceof g.Text&&this.path&&(d=l=!0,u+=this.getHeightOfLine(0)*this.zoomX,f+=this.getHeightOfLine(0)*this.zoomY),!!l&&(d?(e.width=Math.ceil(s+u),e.height=Math.ceil(o+f)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,e.width,e.height)),h=t.x/2,i=t.y/2,this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-i)+i,this.cacheWidth=s,this.cacheHeight=o,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(a,c),this.zoomX=a,this.zoomY=c,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,\"fill\"),this._initGradient(t.stroke,\"stroke\"),this._initPattern(t.fill,\"fill\"),this._initPattern(t.stroke,\"stroke\")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,e=this.calcTransformMatrix(!e);t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},toObject:function(t){var e=g.Object.NUM_FRACTION_DIGITS,e={type:this.type,version:g.version,originX:this.originX,originY:this.originY,left:i(this.left,e),top:i(this.top,e),width:i(this.width,e),height:i(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,e),strokeDashArray:this.strokeDashArray&&this.strokeDashArray.concat(),strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,e),scaleX:i(this.scaleX,e),scaleY:i(this.scaleY,e),angle:i(this.angle,e),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,e),skewY:i(this.skewY,e)};return this.clipPath&&!this.clipPath.excludeFromExport&&(e.clipPath=this.clipPath.toObject(t),e.clipPath.inverted=this.clipPath.inverted,e.clipPath.absolutePositioned=this.clipPath.absolutePositioned),g.util.populateWithProperties(this,e,t),e=this.includeDefaultValues?e:this._removeDefaultValues(e)},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(e){var i=g.util.getKlass(e.type).prototype;return i.stateProperties.forEach(function(t){\"left\"!==t&&\"top\"!==t&&(e[t]===i[t]&&delete e[t],Array.isArray(e[t])&&Array.isArray(i[t])&&0===e[t].length&&0===i[t].length&&delete e[t])}),e},toString:function(){return\"#<fabric.\"+e(this.type)+\">\"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=g.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t,e,i=this.getObjectScaling(),r=i.scaleX,i=i.scaleY;return this.canvas&&(r*=(t=this.canvas.getZoom())*(e=this.canvas.getRetinaScaling()),i*=t*e),{scaleX:r,scaleY:i}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,e){var i=this[t]!==e;return(\"scaleX\"===t||\"scaleY\"===t)&&(e=this._constrainScale(e)),\"scaleX\"===t&&e<0?(this.flipX=!this.flipX,e*=-1):\"scaleY\"===t&&e<0?(this.flipY=!this.flipY,e*=-1):\"shadow\"!==t||!e||e instanceof g.Shadow?\"dirty\"===t&&this.group&&this.group.set(\"dirty\",e):e=new g.Shadow(e),this[t]=e,i&&(e=this.group&&this.group.isOnACache(),-1<this.cacheProperties.indexOf(t)?(this.dirty=!0,e&&this.group.set(\"dirty\",!0)):e&&-1<this.stateProperties.indexOf(t)&&this.group.set(\"dirty\",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:g.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:\"cacheProperties\"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:\"cacheProperties\"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&\"transparent\"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&\"transparent\"!==this.fill},needsItsOwnCache:function(){return!(\"stroke\"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||\"object\"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t,e){var i;t.save(),e.inverted?t.globalCompositeOperation=\"destination-out\":t.globalCompositeOperation=\"destination-in\",e.absolutePositioned&&(i=g.util.invertTransform(this.calcTransformMatrix()),t.transform(i[0],i[1],i[2],i[3],i[4],i[5])),e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()},drawObject:function(t,e){var i=this.fill,r=this.stroke;e?(this.fill=\"black\",this.stroke=\"\",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=i,this.stroke=r},_drawClipPath:function(t,e){e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){return!this.isNotVisible()&&(!(!this._cacheCanvas||!this._cacheContext||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged(\"cacheProperties\"))&&(this._cacheCanvas&&this._cacheContext&&!t&&(t=this.cacheWidth/this.zoomX,e=this.cacheHeight/this.zoomY,this._cacheContext.clearRect(-t/2,-e/2,t,e)),!0));var e},_renderBackground:function(t){var e;this.backgroundColor&&(e=this._getNonTransformedDimensions(),t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t))},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,i.toLive?\"percentage\"===i.gradientUnits||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var i=e.fill;i&&(i.toLive?(t.fillStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=i)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle=\"transparent\",t.fillStyle=\"#000000\"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,e){var i=this.getViewportTransform(),r=this.calcTransformMatrix(),n=(void 0!==(e=e||{}).hasBorders?e:this).hasBorders,s=(void 0!==e.hasControls?e:this).hasControls,r=g.util.multiplyTransformMatrices(i,r),i=g.util.qrDecompose(r);t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=+this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(i.angle-=180),t.rotate(o((this.group?i:this).angle)),e.forActiveSelection||this.group?n&&this.drawBordersInGroup(t,i,e):n&&this.drawBorders(t,e),s&&this.drawControls(t,e),t.restore()},_setShadow:function(t){var e,i,r,n,s;this.shadow&&(e=this.shadow,r=(i=this.canvas)&&i.viewportTransform[0]||1,n=i&&i.viewportTransform[3]||1,s=e.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),i&&i._isRetinaScaling()&&(r*=g.devicePixelRatio,n*=g.devicePixelRatio),t.shadowColor=e.color,t.shadowBlur=e.blur*g.browserShadowBlurConstant*(r+n)*(s.scaleX+s.scaleY)/4,t.shadowOffsetX=e.offsetX*r*s.scaleX,t.shadowOffsetY=e.offsetY*n*s.scaleY)},_removeShadow:function(t){this.shadow&&(t.shadowColor=\"\",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var i=e.gradientTransform||e.patternTransform,r=-this.width/2+e.offsetX||0,n=-this.height/2+e.offsetY||0;return\"percentage\"===e.gradientUnits?t.transform(this.width,0,0,this.height,r,n):t.transform(1,0,0,1,r,n),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:r,offsetY:n}},_renderPaintInOrder:function(t){\"stroke\"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),\"evenodd\"===this.fillRule?t.fill(\"evenodd\"):t.fill(),t.restore())},_renderStroke:function(t){var e;this.stroke&&0!==this.strokeWidth&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group?(e=this.getObjectScaling(),t.scale(1/e.scaleX,1/e.scaleY)):this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY),this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore())},_applyPatternForTransformedGradient:function(t,e){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),n=g.util.createCanvasElement(),s=this.canvas.getRetinaScaling(),o=r.x/this.scaleX/s,a=r.y/this.scaleY/s;n.width=o,n.height=a,(i=n.getContext(\"2d\")).beginPath(),i.moveTo(0,0),i.lineTo(o,0),i.lineTo(o,a),i.lineTo(0,a),i.closePath(),i.translate(o/2,a/2),i.scale(r.zoomX/this.scaleX/s,r.zoomY/this.scaleY/s),this._applyPatternGradientTransform(i,e),i.fillStyle=e.toLive(t),i.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/r.zoomX,s*this.scaleY/r.zoomY),t.strokeStyle=i.createPattern(n,\"no-repeat\")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){var t;this.transformMatrix&&(t=g.util.qrDecompose(this.transformMatrix),this.flipX=!1,this.flipY=!1,this.set(\"scaleX\",t.scaleX),this.set(\"scaleY\",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0)},_removeTransformMatrix:function(t){var e=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),e=g.util.transformPoint(e,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(e,\"center\",\"center\")},clone:function(t,e){e=this.toObject(e);this.constructor.fromObject?this.constructor.fromObject(e,t):g.Object._fromObject(\"Object\",e,t)},cloneAsImage:function(t,e){e=this.toCanvasElement(e);return t&&t(new g.Image(e)),this},toCanvasElement:function(t){t=t||{};var e,i=g.util,r=i.saveObjectTransform(this),n=this.group,s=this.shadow,o=Math.abs,a=(t.multiplier||1)*(t.enableRetinaScaling?g.devicePixelRatio:1),i=(delete this.group,t.withoutTransform&&i.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null),g.util.createCanvasElement()),c=this.getBoundingRect(!0,!0),h=this.shadow,l={x:0,y:0},o=(h&&(e=h.blur,u=h.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),l.x=2*Math.round(o(h.offsetX)+e)*o(u.scaleX),l.y=2*Math.round(o(h.offsetY)+e)*o(u.scaleY)),h=c.width+l.x,e=c.height+l.y,i.width=Math.ceil(h),i.height=Math.ceil(e),new g.StaticCanvas(i,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1})),u=(\"jpeg\"===t.format&&(o.backgroundColor=\"#fff\"),this.setPositionByOrigin(new g.Point(o.width/2,o.height/2),\"center\",\"center\"),this.canvas),c=(o.add(this),o.toCanvasElement(a||1,t));return this.shadow=s,this.set(\"canvas\",u),n&&(this.group=n),this.set(r).setCoords(),o._objects=[],o.dispose(),o=null,c},toDataURL:function(t){return g.util.toDataURL(this.toCanvasElement(t=t||{}),t.format||\"png\",t.quality||1)},isType:function(t){return 1<arguments.length?Array.from(arguments).includes(this.type):this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=(\"center\"!==this.originX||\"center\"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set(\"angle\",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);t=new g.Point(e.x,e.y),e=this._getLeftTopCoords();return{x:(t=this.angle?g.util.rotatePoint(t,e,o(-this.angle)):t).x-e.x,y:t.y-e.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){g.runningAnimations&&g.runningAnimations.cancelByTarget(this)}}),g.util.createAccessors&&g.util.createAccessors(g.Object),t(g.Object.prototype,g.Observable),g.Object.NUM_FRACTION_DIGITS=2,g.Object.ENLIVEN_PROPS=[\"clipPath\"],g.Object._fromObject=function(t,e,i,r){var n=g[t];e=s(e,!0),g.util.enlivenPatterns([e.fill,e.stroke],function(t){void 0!==t[0]&&(e.fill=t[0]),void 0!==t[1]&&(e.stroke=t[1]),g.util.enlivenObjectEnlivables(e,e,function(){var t=r?new n(e[r],e):new n(e);i&&i(t)})})},g.Object.__uid=0)}(\"undefined\"!=typeof exports?exports:this),function(){var s=fabric.util.degreesToRadians,a={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,e,i,r,n){var s=t.x,o=t.y;return\"string\"==typeof e?e=a[e]:e-=.5,\"string\"==typeof r?r=a[r]:r-=.5,\"string\"==typeof i?i=c[i]:i-=.5,\"string\"==typeof n?n=c[n]:n-=.5,n=n-i,((i=r-e)||n)&&(r=this._getTransformedDimensions(),s=t.x+i*r.x,o=t.y+n*r.y),new fabric.Point(s,o)},translateToCenterPoint:function(t,e,i){e=this.translateToGivenOrigin(t,e,i,\"center\",\"center\");return this.angle?fabric.util.rotatePoint(e,t,s(this.angle)):e},translateToOriginPoint:function(t,e,i){e=this.translateToGivenOrigin(t,\"center\",\"center\",e,i);return this.angle?fabric.util.rotatePoint(e,t,s(this.angle)):e},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(t,e,i){var r=this.getCenterPoint(),e=void 0!==e&&void 0!==i?this.translateToGivenOrigin(r,\"center\",\"center\",e,i):new fabric.Point(this.left,this.top),i=new fabric.Point(t.x,t.y);return(i=this.angle?fabric.util.rotatePoint(i,r,-s(this.angle)):i).subtractEquals(e)},setPositionByOrigin:function(t,e,i){t=this.translateToCenterPoint(t,e,i),e=this.translateToOriginPoint(t,this.originX,this.originY);this.set(\"left\",e.x),this.set(\"top\",e.y)},adjustPosition:function(t){var e=s(this.angle),i=this.getScaledWidth(),r=fabric.util.cos(e)*i,e=fabric.util.sin(e)*i,i=\"string\"==typeof this.originX?a[this.originX]:this.originX-.5,n=\"string\"==typeof t?a[t]:t-.5;this.left+=r*(n-i),this.top+=e*(n-i),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX=\"center\",this.originY=\"center\",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),\"left\",\"top\")}})}(),function(){var s=fabric.util,o=s.degreesToRadians,a=s.multiplyTransformMatrices,c=s.transformPoint;s.object.extend(fabric.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return t=this._getCoords(t,e),[new fabric.Point(t.tl.x,t.tl.y),new fabric.Point(t.tr.x,t.tr.y),new fabric.Point(t.br.x,t.br.y),new fabric.Point(t.bl.x,t.bl.y)]},intersectsWithRect:function(t,e,i,r){i=this.getCoords(i,r);return\"Intersection\"===fabric.Intersection.intersectPolygonRectangle(i,t,e).status},intersectsWithObject:function(t,e,i){return\"Intersection\"===fabric.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var r=this.getCoords(e,i),i=e?t.aCoords:t.lineCoords,n=0,s=t._getImageLines(i);n<4;n++)if(!t.containsPoint(r[n],s))return!1;return!0},isContainedWithinRect:function(t,e,i,r){i=this.getBoundingRect(i,r);return i.left>=t.x&&i.left+i.width<=e.x&&i.top>=t.y&&i.top+i.height<=e.y},containsPoint:function(t,e,i,r){i=this._getCoords(i,r),e=e||this._getImageLines(i),r=this._findCrossPoints(t,e);return 0!==r&&r%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some(function(t){return t.x<=i.x&&t.x>=e.x&&t.y<=i.y&&t.y>=e.y})||(!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t))},_containsCenterOfCanvas:function(t,e,i){t={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(t,null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this.getCoords(!0,t).every(function(t){return(t.x>=i.x||t.x<=e.x)&&(t.y>=i.y||t.y<=e.y)})&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,n,s=0;for(n in e)if(!((r=e[n]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||((r.o.x===r.d.x&&r.o.x>=t.x?r.o.x:(i=(r.d.y-r.o.y)/(r.d.x-r.o.x),-(t.y-0*t.x-(r.o.y-i*r.o.x))/(0-i)))>=t.x&&(s+=1),2!==s)))break;return s},getBoundingRect:function(t,e){t=this.getCoords(t,e);return s.makeBoundingBoxFromPoints(t)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set(\"scaleX\",t),this._set(\"scaleY\",t),this.setCoords()},scaleToWidth:function(t,e){e=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t,e){e=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/e)},calcLineCoords:function(){var t=this.getViewportTransform(),e=this.padding,i=o(this.angle),r=s.cos(i)*e,i=s.sin(i)*e,n=r+i,r=r-i,i=this.calcACoords(),i={tl:c(i.tl,t),tr:c(i.tr,t),bl:c(i.bl,t),br:c(i.br,t)};return e&&(i.tl.x-=r,i.tl.y-=n,i.tr.x+=n,i.tr.y-=r,i.bl.x-=n,i.bl.y+=r,i.br.x+=r,i.br.y+=n),i},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),e=a(i,e),r=a(e,t),r=a(r,[1/i[0],0,0,1/i[3],0,0]),n=this._calculateCurrentDimensions(),s={};return this.forEachControl(function(t,e,i){s[e]=t.positionHandler(n,r,i)}),s},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),e=a(e,t),t=this._getTransformedDimensions(),i=t.x/2,t=t.y/2;return{tl:c({x:-i,y:-t},e),tr:c({x:i,y:-t},e),bl:c({x:-i,y:t},e),br:c({x:i,y:t},e)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e=\"_\",i=\"\";return(i=!t&&this.group?this.group.transformMatrixKey(t)+e:i)+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var t=this.transformMatrixKey(t),i=this.matrixCache||(this.matrixCache={});return i.key===t?i.value:(this.group&&(e=a(this.group.calcTransformMatrix(!1),e)),i.key=t,i.value=e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),e=this.ownMatrixCache||(this.ownMatrixCache={});if(e.key===t)return e.value;var i=this._calcTranslateMatrix(),i={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return e.key=t,e.value=s.composeMatrix(i),e.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(t,e){void 0===t&&(t=this.skewX),void 0===e&&(e=this.skewY);var i,r=0===t&&0===e,n=this.strokeUniform?(i=this.width,this.height):(i=(n=this._getNonTransformedDimensions()).x,n.y);if(r)return this._finalizeDimensions(i*this.scaleX,n*this.scaleY);r=s.sizeAfterTransform(i,n,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:e});return this._finalizeDimensions(r.x,r.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return c(e,t,!0).scalarAdd(2*this.padding)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&\"activeSelection\"!==this.group.type?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function u(t,e){var i;return e?e.toLive?t+\": url(#SVGID_\"+e.id+\"); \":(i=t+\": \"+(e=new fabric.Color(e)).toRgb()+\"; \",1!==(e=e.getAlpha())&&(i+=t+\"-opacity: \"+e.toString()+\"; \"),i):t+\": none; \"}var i=fabric.util.toFixed;fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(t){var e=this.fillRule||\"nonzero\",i=this.strokeWidth||\"0\",r=this.strokeDashArray?this.strokeDashArray.join(\" \"):\"none\",n=this.strokeDashOffset||\"0\",s=this.strokeLineCap||\"butt\",o=this.strokeLineJoin||\"miter\",a=this.strokeMiterLimit||\"4\",c=void 0!==this.opacity?this.opacity:\"1\",h=this.visible?\"\":\" visibility: hidden;\",t=t?\"\":this.getSvgFilter(),l=u(\"fill\",this.fill);return[u(\"stroke\",this.stroke),\"stroke-width: \",i,\"; \",\"stroke-dasharray: \",r,\"; \",\"stroke-linecap: \",s,\"; \",\"stroke-dashoffset: \",n,\"; \",\"stroke-linejoin: \",o,\"; \",\"stroke-miterlimit: \",a,\"; \",l,\"fill-rule: \",e,\"; \",\"opacity: \",c,\";\",t,h].join(\"\")},getSvgSpanStyles:function(t,e){var i=\"; \",r=t.fontFamily?\"font-family: \"+(-1===t.fontFamily.indexOf(\"'\")&&-1===t.fontFamily.indexOf('\"')?\"'\"+t.fontFamily+\"'\":t.fontFamily)+i:\"\",n=t.strokeWidth?\"stroke-width: \"+t.strokeWidth+i:\"\",s=t.fontSize?\"font-size: \"+t.fontSize+\"px\"+i:\"\",o=t.fontStyle?\"font-style: \"+t.fontStyle+i:\"\",a=t.fontWeight?\"font-weight: \"+t.fontWeight+i:\"\",c=t.fill?u(\"fill\",t.fill):\"\",h=t.stroke?u(\"stroke\",t.stroke):\"\",l=this.getSvgTextDecoration(t);return[h,n,r,s,o,a,l=l&&\"text-decoration: \"+l+i,c,t.deltaY?\"baseline-shift: \"+-t.deltaY+\"; \":\"\",e?\"white-space: pre; \":\"\"].join(\"\")},getSvgTextDecoration:function(e){return[\"overline\",\"underline\",\"line-through\"].filter(function(t){return e[t.replace(\"-\",\"\")]}).join(\" \")},getSvgFilter:function(){return this.shadow?\"filter: url(#SVGID_\"+this.shadow.id+\");\":\"\"},getSvgCommons:function(){return[this.id?'id=\"'+this.id+'\" ':\"\",this.clipPath?'clip-path=\"url(#'+this.clipPath.clipPathId+')\" ':\"\"].join(\"\")},getSvgTransform:function(t,e){t=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform=\"'+fabric.util.matrixToSVG(t)+(e||\"\")+'\" '},_setSVGBg:function(t){var e;this.backgroundColor&&(e=fabric.Object.NUM_FRACTION_DIGITS,t.push(\"\\t\\t<rect \",this._getFillAttributes(this.backgroundColor),' x=\"',i(-this.width/2,e),'\" y=\"',i(-this.height/2,e),'\" width=\"',i(this.width,e),'\" height=\"',i(this.height,e),'\"></rect>\\n'))},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return\"\\t\"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var i=(e=e||{}).reviver,e=e.additionalTransform||\"\",e=[this.getSvgTransform(!0,e),this.getSvgCommons()].join(\"\"),r=t.indexOf(\"COMMON_PARTS\");return t[r]=e,i?i(t.join(\"\")):t.join(\"\")},_createBaseSVGMarkup:function(t,e){var i,r=(e=e||{}).noStyle,n=e.reviver,s=r?\"\":'style=\"'+this.getSvgStyles()+'\" ',o=e.withShadow?'style=\"'+this.getSvgFilter()+'\" ':\"\",a=this.clipPath,c=this.strokeUniform?'vector-effect=\"non-scaling-stroke\" ':\"\",h=a&&a.absolutePositioned,l=this.stroke,u=this.fill,f=this.shadow,d=[],g=t.indexOf(\"COMMON_PARTS\"),e=e.additionalTransform;return a&&(a.clipPathId=\"CLIPPATH_\"+fabric.Object.__uid++,i='<clipPath id=\"'+a.clipPathId+'\" >\\n'+a.toClipPathSVG(n)+\"</clipPath>\\n\"),h&&d.push(\"<g \",o,this.getSvgCommons(),\" >\\n\"),d.push(\"<g \",this.getSvgTransform(!1),h?\"\":o+this.getSvgCommons(),\" >\\n\"),o=[s,c,r?\"\":this.addPaintOrder(),\" \",e?'transform=\"'+e+'\" ':\"\"].join(\"\"),t[g]=o,u&&u.toLive&&d.push(u.toSVG(this)),l&&l.toLive&&d.push(l.toSVG(this)),f&&d.push(f.toSVG(this)),a&&d.push(i),d.push(t.join(\"\")),d.push(\"</g>\\n\"),h&&d.push(\"</g>\\n\"),n?n(d.join(\"\")):d.join(\"\")},addPaintOrder:function(){return\"fill\"!==this.paintFirst?' paint-order=\"'+this.paintFirst+'\" ':\"\"}})}(),function(){var n=fabric.util.object.extend,r=\"stateProperties\";function s(e,t,i){var r={};i.forEach(function(t){r[t]=e[t]}),n(e[t],r,!0)}fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(t){var e=\"_\"+(t=t||r);return Object.keys(this[e]).length<this[t].length||!function t(e,i,r){if(e===i)return 1;if(Array.isArray(e)){if(Array.isArray(i)&&e.length===i.length){for(var n=0,s=e.length;n<s;n++)if(!t(e[n],i[n]))return;return 1}}else if(e&&\"object\"==typeof e){var o,a=Object.keys(e);if(i&&\"object\"==typeof i&&(r||a.length===Object.keys(i).length)){for(n=0,s=a.length;n<s;n++)if(\"canvas\"!==(o=a[n])&&\"group\"!==o&&!t(e[o],i[o]))return;return 1}}}(this[e],this,!0)},saveState:function(t){var e=t&&t.propertySet||r,i=\"_\"+e;return this[i]?(s(this,i,this[e]),t&&t.stateProperties&&s(this,i,t.stateProperties),this):this.setupState(t)},setupState:function(t){var e=(t=t||{}).propertySet||r;return this[\"_\"+(t.propertySet=e)]={},this.saveState(t),this}})}(),function(){var n=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var i,r,n=t.x,s=t.y,o=Object.keys(this.oCoords),a=o.length-1;for(this.__corner=0;0<=a;a--)if(r=o[a],this.isControlVisible(r)&&(i=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(i=this._findCrossPoints({x:n,y:s},i))&&i%2==1))return this.__corner=r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t,e=this.oCoords;for(t in e){var i=this.controls[t];e[t].corner=i.calcCornerCoords(this.angle,this.cornerSize,e[t].x,e[t].y,!1),e[t].touchCorner=i.calcCornerCoords(this.angle,this.touchCornerSize,e[t].x,e[t].y,!0)}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var e=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return t.translate(e.x,e.y),t.scale(1/r[0],1/r[3]),t.rotate(n(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore(),this},drawBorders:function(r,t){t=t||{};var e=this._calculateCurrentDimensions(),i=this.borderScaleFactor,n=e.x+i,s=e.y+i,e=(void 0!==t.hasControls?t:this).hasControls,o=!1;return r.save(),r.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(r,t.borderDashArray||this.borderDashArray),r.strokeRect(-n/2,-s/2,n,s),e&&(r.beginPath(),this.forEachControl(function(t,e,i){t.withConnection&&t.getVisibility(i,e)&&(o=!0,r.moveTo(t.x*n,t.y*s),r.lineTo(t.x*n+t.offsetX,t.y*s+t.offsetY))}),o&&r.stroke()),r.restore(),this},drawBordersInGroup:function(t,e,i){i=i||{};var r=fabric.util.sizeAfterTransform(this.width,this.height,e),n=this.strokeWidth,s=this.strokeUniform,o=this.borderScaleFactor,a=r.x+n*(s?this.canvas.getZoom():e.scaleX)+o,r=r.y+n*(s?this.canvas.getZoom():e.scaleY)+o;return t.save(),this._setLineDash(t,i.borderDashArray||this.borderDashArray),t.strokeStyle=i.borderColor||this.borderColor,t.strokeRect(-a/2,-r/2,a,r),t.restore(),this},drawControls:function(r,n){n=n||{},r.save();var s,o,t=this.canvas.getRetinaScaling();return r.setTransform(t,0,0,t,0,0),r.strokeStyle=r.fillStyle=n.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=n.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,n.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(s=this.group.calcTransformMatrix()),this.forEachControl(function(t,e,i){o=i.oCoords[e],t.getVisibility(i,e)&&(s&&(o=fabric.util.transformPoint(o,s)),t.render(r,o.x,o.y,n,i))}),r.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t=t||{})this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){function i(){}var r=(t=t||{}).onComplete||i,n=t.onChange||i,s=this;return fabric.util.animate({target:this,startValue:e.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){e.set(\"left\",t),s.requestRenderAll(),n()},onComplete:function(){e.setCoords(),r()}})},fxCenterObjectV:function(e,t){function i(){}var r=(t=t||{}).onComplete||i,n=t.onChange||i,s=this;return fabric.util.animate({target:this,startValue:e.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){e.set(\"top\",t),s.requestRenderAll(),n()},onComplete:function(){e.setCoords(),r()}})},fxRemove:function(e,t){function i(){}var r=(t=t||{}).onComplete||i,n=t.onChange||i,s=this;return fabric.util.animate({target:this,startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set(\"opacity\",t),s.requestRenderAll(),n()},onComplete:function(){s.remove(e),r()}})}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&\"object\"==typeof arguments[0]){var t,e,i=[],r=[];for(t in arguments[0])i.push(t);for(var n=0,s=i.length;n<s;n++)t=i[n],e=n!==s-1,r.push(this._animate(t,arguments[0][t],arguments[1],e));return r}return this._animate.apply(this,arguments)},_animate:function(r,t,n,s){var o,a=this,e=(t=t.toString(),n=n?fabric.util.object.clone(n):{},~r.indexOf(\".\")&&(o=r.split(\".\")),-1<a.colorProperties.indexOf(r)||o&&-1<a.colorProperties.indexOf(o[1])),i=o?this.get(o[0])[o[1]]:this.get(r),i=(\"from\"in n||(n.from=i),e||(t=~t.indexOf(\"=\")?i+parseFloat(t.replace(\"=\",\"\")):parseFloat(t)),{target:this,startValue:n.from,endValue:t,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(t,e,i){return n.abort.call(a,t,e,i)},onChange:function(t,e,i){o?a[o[0]][o[1]]=t:a.set(r,t),s||n.onChange&&n.onChange(t,e,i)},onComplete:function(t,e,i){s||(a.setCoords(),n.onComplete&&n.onComplete(t,e,i))}});return e?fabric.util.animateColor(i.startValue,i.endValue,i.duration,i):fabric.util.animate(i)}}),function(t){\"use strict\";var n=t.fabric||(t.fabric={}),s=n.util.object.extend,r=n.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};function e(t,e){var i=t.origin,r=t.axis1,n=t.axis2,s=t.dimension,o=e.nearest,a=e.center,c=e.farthest;return function(){switch(this.get(i)){case o:return Math.min(this.get(r),this.get(n));case a:return Math.min(this.get(r),this.get(n))+.5*this.get(s);case c:return Math.max(this.get(r),this.get(n))}}}n.Line?n.warn(\"fabric.Line is already defined\"):(n.Line=n.util.createClass(n.Object,{type:\"line\",x1:0,y1:0,x2:0,y2:0,cacheProperties:n.Object.prototype.cacheProperties.concat(\"x1\",\"x2\",\"y1\",\"y2\"),initialize:function(t,e){t=t||[0,0,0,0],this.callSuper(\"initialize\",e),this.set(\"x1\",t[0]),this.set(\"y1\",t[1]),this.set(\"x2\",t[2]),this.set(\"y2\",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t=t||{},this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left=\"left\"in t?t.left:this._getLeftToOriginX(),this.top=\"top\"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper(\"_set\",t,e),void 0!==i[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:\"originX\",axis1:\"x1\",axis2:\"x2\",dimension:\"width\"},{nearest:\"left\",center:\"center\",farthest:\"right\"}),_getTopToOriginY:e({origin:\"originY\",axis1:\"y1\",axis2:\"y2\",dimension:\"height\"},{nearest:\"top\",center:\"center\",farthest:\"bottom\"}),_render:function(t){t.beginPath();var e=this.calcLinePoints(),e=(t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth,t.strokeStyle);t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=e},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return s(this.callSuper(\"toObject\",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper(\"_getNonTransformedDimensions\");return\"butt\"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,r=e*this.height*.5;return{x1:i,x2:t*this.width*-.5,y1:r,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return[\"<line \",\"COMMON_PARTS\",'x1=\"',t.x1,'\" y1=\"',t.y1,'\" x2=\"',t.x2,'\" y2=\"',t.y2,'\" />\\n']}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(\"x1 y1 x2 y2\".split(\" \")),n.Line.fromElement=function(t,e,i){i=i||{};var t=n.parseAttributes(t,n.Line.ATTRIBUTE_NAMES),r=[t.x1||0,t.y1||0,t.x2||0,t.y2||0];e(new n.Line(r,s(t,i)))},n.Line.fromObject=function(t,e){var i=r(t,!0);i.points=[t.x1,t.y1,t.x2,t.y2],n.Object._fromObject(\"Line\",i,function(t){delete t.points,e&&e(t)},\"points\")})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var n=t.fabric||(t.fabric={}),s=n.util.degreesToRadians;n.Circle?n.warn(\"fabric.Circle is already defined.\"):(n.Circle=n.util.createClass(n.Object,{type:\"circle\",radius:0,startAngle:0,endAngle:360,cacheProperties:n.Object.prototype.cacheProperties.concat(\"radius\",\"startAngle\",\"endAngle\"),_set:function(t,e){return this.callSuper(\"_set\",t,e),\"radius\"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper(\"toObject\",[\"radius\",\"startAngle\",\"endAngle\"].concat(t))},_toSVG:function(){var t,e,i,r=(this.endAngle-this.startAngle)%360;return 0==r?[\"<circle \",\"COMMON_PARTS\",'cx=\"0\" cy=\"0\" ','r=\"',this.radius,'\" />\\n']:(t=s(this.startAngle),e=s(this.endAngle),i=this.radius,['<path d=\"M '+n.util.cos(t)*i+\" \"+n.util.sin(t)*i,\" A \"+i+\" \"+i,\" 0 \",+(180<r?\"1\":\"0\")+\" 1\",\" \"+n.util.cos(e)*i+\" \"+n.util.sin(e)*i,'\" ',\"COMMON_PARTS\",\" />\\n\"])},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,s(this.startAngle),s(this.endAngle),!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get(\"radius\")*this.get(\"scaleX\")},getRadiusY:function(){return this.get(\"radius\")*this.get(\"scaleY\")},setRadius:function(t){return this.radius=t,this.set(\"width\",2*t).set(\"height\",2*t)}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat(\"cx cy r\".split(\" \")),n.Circle.fromElement=function(t,e){var i,t=n.parseAttributes(t,n.Circle.ATTRIBUTE_NAMES);if(!(\"radius\"in(i=t)&&0<=i.radius))throw new Error(\"value of `r` attribute is required and can not be negative\");t.left=(t.left||0)-t.radius,t.top=(t.top||0)-t.radius,e(new n.Circle(t))},n.Circle.fromObject=function(t,e){n.Object._fromObject(\"Circle\",t,e)})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var i=t.fabric||(t.fabric={});i.Triangle?i.warn(\"fabric.Triangle is already defined\"):(i.Triangle=i.util.createClass(i.Object,{type:\"triangle\",width:100,height:100,_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2;return[\"<polygon \",\"COMMON_PARTS\",'points=\"',[-t+\" \"+e,\"0 \"+-e,t+\" \"+e].join(\",\"),'\" />']}}),i.Triangle.fromObject=function(t,e){return i.Object._fromObject(\"Triangle\",t,e)})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var i=t.fabric||(t.fabric={}),e=2*Math.PI;i.Ellipse?i.warn(\"fabric.Ellipse is already defined.\"):(i.Ellipse=i.util.createClass(i.Object,{type:\"ellipse\",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat(\"rx\",\"ry\"),initialize:function(t){this.callSuper(\"initialize\",t),this.set(\"rx\",t&&t.rx||0),this.set(\"ry\",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper(\"_set\",t,e),t){case\"rx\":this.rx=e,this.set(\"width\",2*e);break;case\"ry\":this.ry=e,this.set(\"height\",2*e)}return this},getRx:function(){return this.get(\"rx\")*this.get(\"scaleX\")},getRy:function(){return this.get(\"ry\")*this.get(\"scaleY\")},toObject:function(t){return this.callSuper(\"toObject\",[\"rx\",\"ry\"].concat(t))},_toSVG:function(){return[\"<ellipse \",\"COMMON_PARTS\",'cx=\"0\" cy=\"0\" ','rx=\"',this.rx,'\" ry=\"',this.ry,'\" />\\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,e,!1),t.restore(),this._renderPaintInOrder(t)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(\"cx cy rx ry\".split(\" \")),i.Ellipse.fromElement=function(t,e){t=i.parseAttributes(t,i.Ellipse.ATTRIBUTE_NAMES);t.left=(t.left||0)-t.rx,t.top=(t.top||0)-t.ry,e(new i.Ellipse(t))},i.Ellipse.fromObject=function(t,e){i.Object._fromObject(\"Ellipse\",t,e)})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var r=t.fabric||(t.fabric={}),n=r.util.object.extend;r.Rect?r.warn(\"fabric.Rect is already defined\"):(r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat(\"rx\",\"ry\"),type:\"rect\",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat(\"rx\",\"ry\"),initialize:function(t){this.callSuper(\"initialize\",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,n=this.height,s=-this.width/2,o=-this.height/2,a=0!==e||0!==i,c=.4477152502;t.beginPath(),t.moveTo(s+e,o),t.lineTo(s+r-e,o),a&&t.bezierCurveTo(s+r-c*e,o,s+r,o+c*i,s+r,o+i),t.lineTo(s+r,o+n-i),a&&t.bezierCurveTo(s+r,o+n-c*i,s+r-c*e,o+n,s+r-e,o+n),t.lineTo(s+e,o+n),a&&t.bezierCurveTo(s+c*e,o+n,s,o+n-c*i,s,o+n-i),t.lineTo(s,o+i),a&&t.bezierCurveTo(s,o+c*i,s+c*e,o,s+e,o),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper(\"toObject\",[\"rx\",\"ry\"].concat(t))},_toSVG:function(){return[\"<rect \",\"COMMON_PARTS\",'x=\"',-this.width/2,'\" y=\"',-this.height/2,'\" rx=\"',this.rx,'\" ry=\"',this.ry,'\" width=\"',this.width,'\" height=\"',this.height,'\" />\\n']}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(\"x y rx ry width height\".split(\" \")),r.Rect.fromElement=function(t,e,i){if(!t)return e(null);i=i||{};t=r.parseAttributes(t,r.Rect.ATTRIBUTE_NAMES),t.left=t.left||0,t.top=t.top||0,t.height=t.height||0,t.width=t.width||0,i=new r.Rect(n(i?r.util.object.clone(i):{},t));i.visible=i.visible&&0<i.width&&0<i.height,e(i)},r.Rect.fromObject=function(t,e){return r.Object._fromObject(\"Rect\",t,e)})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var o=t.fabric||(t.fabric={}),s=o.util.object.extend,r=o.util.array.min,n=o.util.array.max,a=o.util.toFixed,e=o.util.projectStrokeOnPoints;o.Polyline?o.warn(\"fabric.Polyline is already defined\"):(o.Polyline=o.util.createClass(o.Object,{type:\"polyline\",points:null,exactBoundingBox:!1,cacheProperties:o.Object.prototype.cacheProperties.concat(\"points\"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper(\"initialize\",e),this._setPositionDimensions(e)},_projectStrokeOnPoints:function(){return e(this.points,this,!0)},_setPositionDimensions:function(t){var e,i=this._calcDimensions(t),r=this.exactBoundingBox?this.strokeWidth:0;this.width=i.width-r,this.height=i.height-r,t.fromSVG||(e=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2+r/2,y:i.top-this.strokeWidth/2+r/2},\"left\",\"top\",this.originX,this.originY)),void 0===t.left&&(this.left=t.fromSVG?i.left:e.x),void 0===t.top&&(this.top=t.fromSVG?i.top:e.y),this.pathOffset={x:i.left+this.width/2+r/2,y:i.top+this.height/2+r/2}},_calcDimensions:function(){var t=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,e=r(t,\"x\")||0,i=r(t,\"y\")||0;return{left:e,top:i,width:(n(t,\"x\")||0)-e,height:(n(t,\"y\")||0)-i}},toObject:function(t){return s(this.callSuper(\"toObject\",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],e=this.pathOffset.x,i=this.pathOffset.y,r=o.Object.NUM_FRACTION_DIGITS,n=0,s=this.points.length;n<s;n++)t.push(a(this.points[n].x-e,r),\",\",a(this.points[n].y-i,r),\" \");return[\"<\"+this.type+\" \",\"COMMON_PARTS\",'points=\"',t.join(\"\"),'\" />\\n']},commonRender:function(t){var e,i=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-n);for(var s=0;s<i;s++)e=this.points[s],t.lineTo(e.x-r,e.y-n);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get(\"points\").length}}),o.Polyline.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(),o.Polyline.fromElementGenerator=function(n){return function(t,e,i){if(!t)return e(null);i=i||{};var r=o.parsePointsAttribute(t.getAttribute(\"points\")),t=o.parseAttributes(t,o[n].ATTRIBUTE_NAMES);t.fromSVG=!0,e(new o[n](r,s(t,i)))}},o.Polyline.fromElement=o.Polyline.fromElementGenerator(\"Polyline\"),o.Polyline.fromObject=function(t,e){return o.Object._fromObject(\"Polyline\",t,e,\"points\")})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var i=t.fabric||(t.fabric={}),e=i.util.projectStrokeOnPoints;i.Polygon?i.warn(\"fabric.Polygon is already defined\"):(i.Polygon=i.util.createClass(i.Polyline,{type:\"polygon\",_projectStrokeOnPoints:function(){return e(this.points,this)},_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator(\"Polygon\"),i.Polygon.fromObject=function(t,e){i.Object._fromObject(\"Polygon\",t,e,\"points\")})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var f=t.fabric||(t.fabric={}),d=f.util.array.min,g=f.util.array.max,r=f.util.object.extend,i=f.util.object.clone,e=f.util.toFixed;f.Path?f.warn(\"fabric.Path is already defined\"):(f.Path=f.util.createClass(f.Object,{type:\"path\",path:null,cacheProperties:f.Object.prototype.cacheProperties.concat(\"path\",\"fillRule\"),stateProperties:f.Object.prototype.stateProperties.concat(\"path\"),initialize:function(t,e){delete(e=i(e||{})).path,this.callSuper(\"initialize\",e),this._setPath(t||[],e)},_setPath:function(t,e){this.path=f.util.makePathSimpler(Array.isArray(t)?t:f.util.parsePath(t)),f.Polyline.prototype._setPositionDimensions.call(this,e||{})},_renderPathCommands:function(t){var e,i=0,r=0,n=0,s=0,o=0,a=0,c=-this.pathOffset.x,h=-this.pathOffset.y;t.beginPath();for(var l=0,u=this.path.length;l<u;++l)switch((e=this.path[l])[0]){case\"L\":n=e[1],s=e[2],t.lineTo(n+c,s+h);break;case\"M\":i=n=e[1],r=s=e[2],t.moveTo(n+c,s+h);break;case\"C\":n=e[5],s=e[6],o=e[3],a=e[4],t.bezierCurveTo(e[1]+c,e[2]+h,o+c,a+h,n+c,s+h);break;case\"Q\":t.quadraticCurveTo(e[1]+c,e[2]+h,e[3]+c,e[4]+h),n=e[3],s=e[4],o=e[1],a=e[2];break;case\"z\":case\"Z\":n=i,s=r,t.closePath()}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return\"#<fabric.Path (\"+this.complexity()+'): { \"top\": '+this.top+', \"left\": '+this.left+\" }>\"},toObject:function(t){return r(this.callSuper(\"toObject\",t),{path:this.path.map(function(t){return t.slice()})})},toDatalessObject:function(t){t=this.toObject([\"sourcePath\"].concat(t));return t.sourcePath&&delete t.path,t},_toSVG:function(){return[\"<path \",\"COMMON_PARTS\",'d=\"',f.util.joinPath(this.path),'\" stroke-linecap=\"round\" ',\"/>\\n\"]},_getOffsetTransform:function(){var t=f.Object.NUM_FRACTION_DIGITS;return\" translate(\"+e(-this.pathOffset.x,t)+\", \"+e(-this.pathOffset.y,t)+\")\"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return\"\\t\"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,e,i=[],r=[],n=0,s=0,o=0,a=0,c=0,h=this.path.length;c<h;++c){switch((t=this.path[c])[0]){case\"L\":o=t[1],a=t[2],e=[];break;case\"M\":n=o=t[1],s=a=t[2],e=[];break;case\"C\":e=f.util.getBoundsOfCurve(o,a,t[1],t[2],t[3],t[4],t[5],t[6]),o=t[5],a=t[6];break;case\"Q\":e=f.util.getBoundsOfCurve(o,a,t[1],t[2],t[1],t[2],t[3],t[4]),o=t[3],a=t[4];break;case\"z\":case\"Z\":o=n,a=s}e.forEach(function(t){i.push(t.x),r.push(t.y)}),i.push(o),r.push(a)}var l=d(i)||0,u=d(r)||0;return{left:l,top:u,width:(g(i)||0)-l,height:(g(r)||0)-u}}}),f.Path.fromObject=function(i,r){var t;\"string\"==typeof i.sourcePath?(t=i.sourcePath,f.loadSVGFromURL(t,function(t){var e=t[0];e.setOptions(i),i.clipPath?f.util.enlivenObjects([i.clipPath],function(t){e.clipPath=t[0],r&&r(e)}):r&&r(e)})):f.Object._fromObject(\"Path\",i,r,\"path\")},f.Path.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat([\"d\"]),f.Path.fromElement=function(t,e,i){t=f.parseAttributes(t,f.Path.ATTRIBUTE_NAMES);t.fromSVG=!0,e(new f.Path(t.d,r(t,i)))})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var o=t.fabric||(t.fabric={}),a=o.util.array.min,c=o.util.array.max;o.Group||(o.Group=o.util.createClass(o.Object,o.Collection,{type:\"group\",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper(\"initialize\",e),this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;i?this._updateObjectsACoords():(t=e&&e.centerPoint,void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),t||this._calcBounds(),this._updateObjectsCoords(t),delete e.centerPoint,this.callSuper(\"initialize\",e)),this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){for(var t=t||this.getCenterPoint(),e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var i=t.left,r=t.top;t.set({left:i-e.x,top:r-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return\"#<fabric.Group: (\"+this.complexity()+\")>\"},addWithUpdate:function(t){var e=!!this.group;return this._restoreObjectsState(),o.util.resetObjectTransform(this),t&&(e&&o.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set(\"canvas\",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,e?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),o.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set(\"canvas\",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,e){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,e);if(\"canvas\"===t)for(;i--;)this._objects[i]._set(t,e);o.Object.prototype._set.call(this,t,e)},toObject:function(r){var n=this.includeDefaultValues,t=this._objects.filter(function(t){return!t.excludeFromExport}).map(function(t){var e=t.includeDefaultValues,i=(t.includeDefaultValues=n,t.toObject(r));return t.includeDefaultValues=e,i}),e=o.Object.prototype.toObject.call(this,r);return e.objects=t,e},toDatalessObject:function(r){var n,t=this.sourcePath,e=(t=t||(n=this.includeDefaultValues,this._objects.map(function(t){var e=t.includeDefaultValues,i=(t.includeDefaultValues=n,t.toDatalessObject(r));return t.includeDefaultValues=e,i})),o.Object.prototype.toDatalessObject.call(this,r));return e.objects=t,e},render:function(t){this._transformDone=!0,this.callSuper(\"render\",t),this._transformDone=!1},shouldCache:function(){var t=o.Object.prototype.shouldCache.call(this);if(t)for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1;return t},willDrawShadow:function(){if(o.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,e=this._objects.length;t<e;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper(\"isCacheDirty\",t))return!0;if(!this.statefullCache)return!1;for(var e,i,r=0,n=this._objects.length;r<n;r++)if(this._objects[r].isCacheDirty(!0))return this._cacheCanvas&&(e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY,this._cacheContext.clearRect(-e/2,-i/2,e,i)),!0;return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach(function(t){o.util.addTransformToObject(t,e),delete t.group,t.setCoords()}),this},destroy:function(){return this._objects.forEach(function(t){t.set(\"dirty\",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper(\"dispose\"),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[]},toActiveSelection:function(){var t,e,i,r;if(this.canvas)return t=this._objects,e=this.canvas,this._objects=[],i=this.toObject(),delete i.objects,r=new o.ActiveSelection([]),r.set(i),r.type=\"activeSelection\",e.remove(this),t.forEach(function(t){t.group=r,t.dirty=!0,e.add(t)}),r.canvas=e,r._objects=t,(e._activeObject=r).setCoords(),r},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0)}),this},_calcBounds:function(t){for(var e,i,r,n,s=[],o=[],a=[\"tr\",\"br\",\"bl\",\"tl\"],c=0,h=this._objects.length,l=a.length;c<h;++c){for(r=(e=this._objects[c]).calcACoords(),n=0;n<l;n++)s.push(r[i=a[n]].x),o.push(r[i].y);e.aCoords=r}this._getBounds(s,o,t)},_getBounds:function(t,e,i){var r=new o.Point(a(t),a(e)),t=new o.Point(c(t),c(e)),e=r.y||0,n=r.x||0,s=t.x-r.x||0,t=t.y-r.y||0;this.width=s,this.height=t,i||this.setPositionByOrigin({x:n,y:e},\"left\",\"top\")},_toSVG:function(t){for(var e=[\"<g \",\"COMMON_PARTS\",\" >\\n\"],i=0,r=this._objects.length;i<r;i++)e.push(\"\\t\\t\",this._objects[i].toSVG(t));return e.push(\"</g>\\n\"),e},getSvgStyles:function(){var t=void 0!==this.opacity&&1!==this.opacity?\"opacity: \"+this.opacity+\";\":\"\",e=this.visible?\"\":\" visibility: hidden;\";return[t,this.getSvgFilter(),e].join(\"\")},toClipPathSVG:function(t){for(var e=[],i=0,r=this._objects.length;i<r;i++)e.push(\"\\t\",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),o.Group.fromObject=function(i,r){var n=i.objects,s=o.util.object.clone(i,!0);delete s.objects,\"string\"==typeof n?o.loadSVGFromURL(n,function(t){var e=o.util.groupSVGElements(t,i,n),t=s.clipPath;delete s.clipPath,e.set(s),t?o.util.enlivenObjects([t],function(t){e.clipPath=t[0],r&&r(e)}):r&&r(e)}):o.util.enlivenObjects(n,function(t){o.util.enlivenObjectEnlivables(i,s,function(){r&&r(new o.Group(t,s,!0))})})})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var r=t.fabric||(t.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:\"activeSelection\",initialize:function(t,e){e=e||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,e),this.setCoords()},toGroup:function(){var t=this._objects.concat(),e=(this._objects=[],r.Object.prototype.toObject.call(this)),i=new r.Group([]);if(delete e.type,i.set(e),t.forEach(function(t){t.canvas.remove(t),t.group=i}),i._objects=t,!this.canvas)return i;e=this.canvas;return e.add(i),(e._activeObject=i).setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return\"#<fabric.ActiveSelection: (\"+this.complexity()+\")>\"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper(\"_renderControls\",t,e),void 0===(i=i||{}).hasControls&&(i.hasControls=!1),i.forActiveSelection=!0;for(var r=0,n=this._objects.length;r<n;r++)this._objects[r]._renderControls(t,i);t.restore()}}),r.ActiveSelection.fromObject=function(e,i){r.util.enlivenObjects(e.objects,function(t){delete e.objects,i&&i(new r.ActiveSelection(t,e,!0))})})}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var r=fabric.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?fabric.warn(\"fabric.Image is already defined.\"):(fabric.Image=fabric.util.createClass(fabric.Object,{type:\"image\",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:fabric.Object.prototype.stateProperties.concat(\"cropX\",\"cropY\"),cacheProperties:fabric.Object.prototype.cacheProperties.concat(\"cropX\",\"cropY\"),cacheKey:\"\",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e=e||{},this.filters=[],this.cacheKey=\"texture\"+fabric.Object.__uid++,this.callSuper(\"initialize\",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+\"_filtered\"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=fabric.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.callSuper(\"dispose\"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+\"_filtered\"),this._cacheContext=void 0,[\"_originalElement\",\"_element\",\"_filteredEl\",\"_cacheCanvas\"].forEach(function(t){fabric.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){var e,i;this.stroke&&0!==this.strokeWidth&&(e=this.width/2,i=this.height/2,t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath())},toObject:function(t){var e=[],t=(this.filters.forEach(function(t){t&&e.push(t.toObject())}),r(this.callSuper(\"toObject\",[\"cropX\",\"cropY\"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e}));return this.resizeFilter&&(t.resizeFilter=this.resizeFilter.toObject()),t},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e,i=[],r=[],n=this._element,s=-this.width/2,o=-this.height/2,a=\"\",c=\"\";return n?(this.hasCrop()&&(e=fabric.Object.__uid++,i.push('<clipPath id=\"imageCrop_'+e+'\">\\n','\\t<rect x=\"'+s+'\" y=\"'+o+'\" width=\"'+this.width+'\" height=\"'+this.height+'\" />\\n',\"</clipPath>\\n\"),a=' clip-path=\"url(#imageCrop_'+e+')\" '),this.imageSmoothing||(c='\" image-rendering=\"optimizeSpeed'),r.push(\"\\t<image \",\"COMMON_PARTS\",'xlink:href=\"',this.getSvgSrc(!0),'\" x=\"',s-this.cropX,'\" y=\"',o-this.cropY,'\" width=\"',n.width||n.naturalWidth,'\" height=\"',n.height||n.height,c,'\"',a,\"></image>\\n\"),(this.stroke||this.strokeDashArray)&&(e=this.fill,this.fill=null,t=[\"\\t<rect \",'x=\"',s,'\" y=\"',o,'\" width=\"',this.width,'\" height=\"',this.height,'\" style=\"',this.getSvgStyles(),'\"/>\\n'],this.fill=e),\"fill\"!==this.paintFirst?i.concat(t,r):i.concat(r,t)):[]},getSrc:function(t){t=t?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute(\"src\"):t.src:this.src||\"\"},setSrc:function(t,i,r){return fabric.util.loadImage(t,function(t,e){this.setElement(t,r),this._setWidthHeight(),i&&i(this,e)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: \"'+this.getSrc()+'\" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.scaleX,i=i.scaleY,n=this._filteredEl||this._originalElement;if(this.group&&this.set(\"dirty\",!0),!t||e<r&&e<i)return this._element=n,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=i);fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend());var e=fabric.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+\"_filtered\":this.cacheKey,o=n.width,a=n.height;e.width=o,e.height=a,this._element=e,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=i,fabric.filterBackend.applyFilters([t],n,o,a,this._element,s),this._filterScalingX=e.width/this._originalElement.width,this._filterScalingY=e.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter(function(t){return t&&!t.isNeutralState()}),this.set(\"dirty\",!0),this.removeTexture(this.cacheKey+\"_filtered\"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e,i=this._originalElement,r=i.naturalWidth||i.width,i=i.naturalHeight||i.height;return this._element===this._originalElement?((e=fabric.util.createCanvasElement()).width=r,e.height=i,this._element=e,this._filteredEl=e):(this._element=this._filteredEl,this._filteredEl.getContext(\"2d\").clearRect(0,0,r,i),this._lastScaleX=1,this._lastScaleY=1),fabric.filterBackend||(fabric.filterBackend=fabric.initFilterBackend()),fabric.filterBackend.applyFilters(t,this._originalElement,r,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){fabric.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){fabric.util.setImageSmoothing(t,this.imageSmoothing),fabric.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e,i,r,n,s,o,a,c,h,l,u,f,d,g,p,m=this._element;m&&(e=this._filterScalingX,i=this._filterScalingY,g=this.width,r=this.height,n=Math.min,s=(o=Math.max)(this.cropX,0),o=o(this.cropY,0),p=m.naturalWidth||m.width,a=m.naturalHeight||m.height,h=o*i,l=n(g*e,p-(c=s*e)),u=n(r*i,a-h),f=-g/2,d=-r/2,g=n(g,p/e-s),p=n(r,a/i-o),m&&t.drawImage(m,c,h,l,u,f,d,g,p))},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(fabric.util.getById(t),e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){this.setOptions(t=t||{}),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},\"fabric.Image.filters\"):e&&e()},_setWidthHeight:function(t){t=t||{};var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||\"\"),i=this._element.width,r=this._element.height,n=1,s=1,o=0,a=0,c=0,h=0,l=this.width,u=this.height,f={width:l,height:u};return!e||\"none\"===e.alignX&&\"none\"===e.alignY?(n=l/i,s=u/r):(\"meet\"===e.meetOrSlice&&(t=(l-i*(n=s=fabric.util.findScaleToFit(this._element,f)))/2,\"Min\"===e.alignX&&(o=-t),\"Max\"===e.alignX&&(o=t),t=(u-r*s)/2,\"Min\"===e.alignY&&(a=-t),\"Max\"===e.alignY&&(a=t)),\"slice\"===e.meetOrSlice&&(t=i-l/(n=s=fabric.util.findScaleToCover(this._element,f)),\"Mid\"===e.alignX&&(c=t/2),\"Max\"===e.alignX&&(c=t),t=r-u/s,\"Mid\"===e.alignY&&(h=t/2),\"Max\"===e.alignY&&(h=t),i=l/n,r=u/s)),{width:i,height:r,scaleX:n,scaleY:s,offsetLeft:o,offsetTop:a,cropX:c,cropY:h}}}),fabric.Image.CSS_CANVAS=\"canvas-img\",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,i){var r=fabric.util.object.clone(t);fabric.util.loadImage(r.src,function(e,t){t?i&&i(null,!0):fabric.Image.prototype._initFilters.call(r,r.filters,function(t){r.filters=t||[],fabric.Image.prototype._initFilters.call(r,[r.resizeFilter],function(t){r.resizeFilter=t[0],fabric.util.enlivenObjectEnlivables(r,r,function(){var t=new fabric.Image(e,r);i(t,!1)})})})},null,r.crossOrigin)},fabric.Image.fromURL=function(t,i,r){fabric.util.loadImage(t,function(t,e){i&&i(new fabric.Image(t,r),e)},null,r&&r.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat(\"x y width height preserveAspectRatio xlink:href crossOrigin image-rendering\".split(\" \")),fabric.Image.fromElement=function(t,e,i){t=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(t[\"xlink:href\"],e,r(i?fabric.util.object.clone(i):{},t))})}(\"undefined\"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return 0<t?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(t){function e(){}var i=(t=t||{}).onComplete||e,r=t.onChange||e,n=this;return fabric.util.animate({target:this,startValue:this.get(\"angle\"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){n.rotate(t),r()},onComplete:function(){n.setCoords(),i()}})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){\"use strict\";function t(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}fabric.isWebglSupported=function(t){if(fabric.isLikelyNode)return!1;t=t||fabric.WebglFilterBackend.prototype.tileSize;var e,i,r,n=document.createElement(\"canvas\"),s=n.getContext(\"webgl\")||n.getContext(\"experimental-webgl\"),n=!1;if(s){fabric.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE);for(var n=fabric.maxTextureSize>=t,o=[\"highp\",\"mediump\",\"lowp\"],a=0;a<3;a++)if(r=void 0,i=\"precision \"+(i=o[a])+\" float;\\nvoid main(){}\",r=(e=s).createShader(e.FRAGMENT_SHADER),e.shaderSource(r,i),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS)){fabric.webGlPrecision=o[a];break}}return this.isSupported=n},(fabric.WebglFilterBackend=t).prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var i=void 0!==window.performance;try{new ImageData(1,1),s=!0}catch(t){s=!1}var r=\"undefined\"!=typeof ArrayBuffer,n=\"undefined\"!=typeof Uint8ClampedArray;if(i&&s&&r&&n){var i=fabric.util.createCanvasElement(),s=new ArrayBuffer(t*e*4);if(fabric.forceGLPutImageData)return this.imageBuffer=s,void(this.copyGLTo2D=copyGLTo2DPutImageData);r={imageBuffer:s,destinationWidth:t,destinationHeight:e,targetCanvas:i};i.width=t,i.height=e,n=window.performance.now(),copyGLTo2DDrawImage.call(r,this.gl,r),t=window.performance.now()-n,n=window.performance.now(),copyGLTo2DPutImageData.call(r,this.gl,r),window.performance.now()-n<t?(this.imageBuffer=s,this.copyGLTo2D=copyGLTo2DPutImageData):this.copyGLTo2D=copyGLTo2DDrawImage}},createWebGLCanvas:function(t,e){var i=fabric.util.createCanvasElement(),t=(i.width=t,i.height=e,{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1}),e=i.getContext(\"webgl\",t);(e=e||i.getContext(\"experimental-webgl\",t))&&(e.clearColor(0,0,0,0),this.canvas=i,this.gl=e)},applyFilters:function(t,e,i,r,n,s){var o,a=this.gl,c=(s&&(o=this.getCachedTexture(s,e)),{originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:a,sourceTexture:this.createTexture(a,i,r,!o&&e),targetTexture:this.createTexture(a,i,r),originalTexture:o||this.createTexture(a,i,r,!o&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n}),s=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,s),t.forEach(function(t){t&&t.applyTo(c)}),resizeCanvasIfNeeded(c),this.copyGLTo2D(a,c),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(s),n.getContext(\"2d\").setTransform(1,0,0,1,0,0),c},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,i,r,n){var s=t.createTexture();return t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n||t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),s},getCachedTexture:function(t,e){return this.textureCache[t]||(e=this.createTexture(this.gl,e.width,e.height,e),this.textureCache[t]=e)},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:copyGLTo2DDrawImage,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:\"\",vendor:\"\"};if(!t)return e;var i,r=t.getExtension(\"WEBGL_debug_renderer_info\");return r&&(i=t.getParameter(r.UNMASKED_RENDERER_WEBGL),t=t.getParameter(r.UNMASKED_VENDOR_WEBGL),i&&(e.renderer=i.toLowerCase()),t&&(e.vendor=t.toLowerCase())),this.gpuInfo=e}}}(),function(){\"use strict\";function t(){}function e(){}(fabric.Canvas2dFilterBackend=e).prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,i,r,n){var s=n.getContext(\"2d\");s.drawImage(e,0,0,i,r);var o={sourceWidth:i,sourceHeight:r,imageData:s.getImageData(0,0,i,r),originalEl:e,originalImageData:s.getImageData(0,0,i,r),canvasEl:n,ctx:s,filterBackend:this};return t.forEach(function(t){t.applyTo(o)}),o.imageData.width===i&&o.imageData.height===r||(n.width=o.imageData.width,n.height=o.imageData.height),s.putImageData(o.imageData,0,0),o}}}(),fabric.Image=fabric.Image||{},fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:\"BaseFilter\",vertexSource:\"attribute vec2 aPosition;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvTexCoord = aPosition;\\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n}\",fragmentSource:\"precision highp float;\\nvarying vec2 vTexCoord;\\nuniform sampler2D uTexture;\\nvoid main() {\\ngl_FragColor = texture2D(uTexture, vTexCoord);\\n}\",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,i){e=e||this.fragmentSource,i=i||this.vertexSource,\"highp\"!==fabric.webGlPrecision&&(e=e.replace(/precision highp float/g,\"precision \"+fabric.webGlPrecision+\" float\"));var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(\"Vertex shader compile error for \"+this.type+\": \"+t.getShaderInfoLog(r));i=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error(\"Fragment shader compile error for \"+this.type+\": \"+t.getShaderInfoLog(i));e=t.createProgram();if(t.attachShader(e,r),t.attachShader(e,i),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw new Error('Shader link error for \"${this.type}\" '+t.getProgramInfoLog(e));r=this.getAttributeLocations(t,e),i=this.getUniformLocations(t,e)||{};return i.uStepW=t.getUniformLocation(e,\"uStepW\"),i.uStepH=t.getUniformLocation(e,\"uStepH\"),{program:e,attributeLocations:r,uniformLocations:i}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,\"aPosition\")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,i){var e=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,i,r=t.context;1<t.passes?(e=t.destinationWidth,i=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===i||(r.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(r,e,i)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=fabric.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var i=e[t].length;i--;)if(this[t][i]!==e[t][i])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){var e;t.helpLayer||((e=document.createElement(\"canvas\")).width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e)},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),fabric.Image.filters.BaseFilter.fromObject=function(t,e){t=new fabric.Image.filters[t.type](t);return e&&e(t),t},function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.ColorMatrix=i(e.BaseFilter,{type:\"ColorMatrix\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nvarying vec2 vTexCoord;\\nuniform mat4 uColorMatrix;\\nuniform vec4 uConstants;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor *= uColorMatrix;\\ncolor += uConstants;\\ngl_FragColor = color;\\n}\",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:\"matrix\",colorsOnly:!0,initialize:function(t){this.callSuper(\"initialize\",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){for(var e,i,r,n,s=t.imageData.data,o=s.length,a=this.matrix,c=this.colorsOnly,h=0;h<o;h+=4)e=s[h],i=s[h+1],r=s[h+2],c?(s[h]=e*a[0]+i*a[1]+r*a[2]+255*a[4],s[h+1]=e*a[5]+i*a[6]+r*a[7]+255*a[9],s[h+2]=e*a[10]+i*a[11]+r*a[12]+255*a[14]):(n=s[h+3],s[h]=e*a[0]+i*a[1]+r*a[2]+n*a[3]+255*a[4],s[h+1]=e*a[5]+i*a[6]+r*a[7]+n*a[8]+255*a[9],s[h+2]=e*a[10]+i*a[11]+r*a[12]+n*a[13]+255*a[14],s[h+3]=e*a[15]+i*a[16]+r*a[17]+n*a[18]+255*a[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,\"uColorMatrix\"),uConstants:t.getUniformLocation(e,\"uConstants\")}},sendUniformData:function(t,e){var i=this.matrix,r=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],i=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,r),t.uniform4fv(e.uConstants,i)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Brightness=i(e.BaseFilter,{type:\"Brightness\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uBrightness;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor.rgb += uBrightness;\\ngl_FragColor = color;\\n}\",brightness:0,mainParameter:\"brightness\",applyTo2d:function(t){if(0!==this.brightness)for(var e=t.imageData.data,i=e.length,r=Math.round(255*this.brightness),n=0;n<i;n+=4)e[n]=e[n]+r,e[n+1]=e[n+1]+r,e[n+2]=e[n+2]+r},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,\"uBrightness\")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.util.object.extend,i=t.Image.filters,r=t.util.createClass;i.Convolute=r(i.BaseFilter,{type:\"Convolute\",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[9];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 3.0; h+=1.0) {\\nfor (float w = 0.0; w < 3.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_3_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[9];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 3.0; h+=1.0) {\\nfor (float w = 0.0; w < 3.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_5_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[25];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 5.0; h+=1.0) {\\nfor (float w = 0.0; w < 5.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_5_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[25];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 5.0; h+=1.0) {\\nfor (float w = 0.0; w < 5.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_7_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[49];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 7.0; h+=1.0) {\\nfor (float w = 0.0; w < 7.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_7_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[49];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 7.0; h+=1.0) {\\nfor (float w = 0.0; w < 7.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_9_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[81];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 9.0; h+=1.0) {\\nfor (float w = 0.0; w < 9.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_9_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[81];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 9.0; h+=1.0) {\\nfor (float w = 0.0; w < 9.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),e=this.type+\"_\"+e+\"_\"+(this.opaque?1:0),i=this.fragmentSource[e];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyTo2d:function(t){for(var e,i,r,n,s,o,a,c,h,l,u,f=t.imageData,d=f.data,g=this.matrix,p=Math.round(Math.sqrt(g.length)),m=Math.floor(p/2),v=f.width,b=f.height,f=t.ctx.createImageData(v,b),y=f.data,_=this.opaque?1:0,x=0;x<b;x++)for(h=0;h<v;h++){for(s=4*(x*v+h),u=n=r=i=e=0;u<p;u++)for(l=0;l<p;l++)o=h+l-m,(a=x+u-m)<0||b<=a||o<0||v<=o||(c=g[u*p+l],e+=d[a=4*(a*v+o)]*c,i+=d[1+a]*c,r+=d[2+a]*c,_||(n+=d[3+a]*c));y[s]=e,y[1+s]=i,y[2+s]=r,y[3+s]=_?d[3+s]:n}t.imageData=f},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,\"uMatrix\"),uOpaque:t.getUniformLocation(e,\"uOpaque\"),uHalfSize:t.getUniformLocation(e,\"uHalfSize\"),uSize:t.getUniformLocation(e,\"uSize\")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return e(this.callSuper(\"toObject\"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Grayscale=i(e.BaseFilter,{type:\"Grayscale\",fragmentSource:{average:\"precision highp float;\\nuniform sampler2D uTexture;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat average = (color.r + color.b + color.g) / 3.0;\\ngl_FragColor = vec4(average, average, average, color.a);\\n}\",lightness:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uMode;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 col = texture2D(uTexture, vTexCoord);\\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\\ngl_FragColor = vec4(average, average, average, col.a);\\n}\",luminosity:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uMode;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 col = texture2D(uTexture, vTexCoord);\\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\\ngl_FragColor = vec4(average, average, average, col.a);\\n}\"},mode:\"average\",mainParameter:\"mode\",applyTo2d:function(t){for(var e,i=t.imageData.data,r=i.length,n=this.mode,s=0;s<r;s+=4)\"average\"===n?e=(i[s]+i[s+1]+i[s+2])/3:\"lightness\"===n?e=(Math.min(i[s],i[s+1],i[s+2])+Math.max(i[s],i[s+1],i[s+2]))/2:\"luminosity\"===n&&(e=.21*i[s]+.72*i[s+1]+.07*i[s+2]),i[s]=e,i[s+1]=e,i[s+2]=e},retrieveShader:function(t){var e,i=this.type+\"_\"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.fragmentSource[this.mode],t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,\"uMode\")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Invert=i(e.BaseFilter,{type:\"Invert\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uInvert;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nif (uInvert == 1) {\\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\\n} else {\\ngl_FragColor = color;\\n}\\n}\",invert:!0,mainParameter:\"invert\",applyTo2d:function(t){for(var e=t.imageData.data,i=e.length,r=0;r<i;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,\"uInvert\")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.util.object.extend,i=t.Image.filters,r=t.util.createClass;i.Noise=r(i.BaseFilter,{type:\"Noise\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uStepH;\\nuniform float uNoise;\\nuniform float uSeed;\\nvarying vec2 vTexCoord;\\nfloat rand(vec2 co, float seed, float vScale) {\\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\\n}\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\\ngl_FragColor = color;\\n}\",mainParameter:\"noise\",noise:0,applyTo2d:function(t){if(0!==this.noise)for(var e,i=t.imageData.data,r=(i.length,this.noise),n=0,s=i.length;n<s;n+=4)e=(.5-Math.random())*r,i[n]+=e,i[n+1]+=e,i[n+2]+=e},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,\"uNoise\"),uSeed:t.getUniformLocation(e,\"uSeed\")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return e(this.callSuper(\"toObject\"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Pixelate=i(e.BaseFilter,{type:\"Pixelate\",blocksize:4,mainParameter:\"blocksize\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uBlocksize;\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nfloat blockW = uBlocksize * uStepW;\\nfloat blockH = uBlocksize * uStepW;\\nint posX = int(vTexCoord.x / blockW);\\nint posY = int(vTexCoord.y / blockH);\\nfloat fposX = float(posX);\\nfloat fposY = float(posY);\\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\\nvec4 color = texture2D(uTexture, squareCoords);\\ngl_FragColor = color;\\n}\",applyTo2d:function(t){for(var e,i,r,n,s,o,a,c,h,l,t=t.imageData,u=t.data,f=t.height,d=t.width,g=0;g<f;g+=this.blocksize)for(i=0;i<d;i+=this.blocksize)for(r=u[e=4*g*d+4*i],n=u[1+e],s=u[2+e],o=u[3+e],h=Math.min(g+this.blocksize,f),l=Math.min(i+this.blocksize,d),a=g;a<h;a++)for(c=i;c<l;c++)u[e=4*a*d+4*c]=r,u[1+e]=n,u[2+e]=s,u[3+e]=o},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,\"uBlocksize\"),uStepW:t.getUniformLocation(e,\"uStepW\"),uStepH:t.getUniformLocation(e,\"uStepH\")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var h=t.fabric||(t.fabric={}),e=h.util.object.extend,t=h.Image.filters,i=h.util.createClass;t.RemoveColor=i(t.BaseFilter,{type:\"RemoveColor\",color:\"#FFFFFF\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec4 uLow;\\nuniform vec4 uHigh;\\nvarying vec2 vTexCoord;\\nvoid main() {\\ngl_FragColor = texture2D(uTexture, vTexCoord);\\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\\ngl_FragColor.a = 0.0;\\n}\\n}\",distance:.02,useAlpha:!1,applyTo2d:function(t){for(var e,i,r,n=t.imageData.data,t=255*this.distance,s=new h.Color(this.color).getSource(),o=[s[0]-t,s[1]-t,s[2]-t],a=[s[0]+t,s[1]+t,s[2]+t],c=0;c<n.length;c+=4)e=n[c],i=n[c+1],r=n[c+2],o[0]<e&&o[1]<i&&o[2]<r&&e<a[0]&&i<a[1]&&r<a[2]&&(n[c+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,\"uLow\"),uHigh:t.getUniformLocation(e,\"uHigh\")}},sendUniformData:function(t,e){var i=new h.Color(this.color).getSource(),r=parseFloat(this.distance),n=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],i=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(e.uLow,n),t.uniform4fv(e.uHigh,i)},toObject:function(){return e(this.callSuper(\"toObject\"),{color:this.color,distance:this.distance})}}),h.Image.filters.RemoveColor.fromObject=h.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var e,i=t.fabric||(t.fabric={}),r=i.Image.filters,n=i.util.createClass,s={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(e in s)r[e]=n(r.ColorMatrix,{type:e,matrix:s[e],mainParameter:!1,colorsOnly:!0}),i.Image.filters[e].fromObject=i.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var u=t.fabric,t=u.Image.filters,e=u.util.createClass;t.BlendColor=e(t.BaseFilter,{type:\"BlendColor\",color:\"#F95C63\",mode:\"multiply\",alpha:1,fragmentSource:{multiply:\"gl_FragColor.rgb *= uColor.rgb;\\n\",screen:\"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\\n\",add:\"gl_FragColor.rgb += uColor.rgb;\\n\",diff:\"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\\n\",subtract:\"gl_FragColor.rgb -= uColor.rgb;\\n\",lighten:\"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\\n\",darken:\"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\\n\",exclusion:\"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\\n\",overlay:\"if (uColor.r < 0.5) {\\ngl_FragColor.r *= 2.0 * uColor.r;\\n} else {\\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\\n}\\nif (uColor.g < 0.5) {\\ngl_FragColor.g *= 2.0 * uColor.g;\\n} else {\\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\\n}\\nif (uColor.b < 0.5) {\\ngl_FragColor.b *= 2.0 * uColor.b;\\n} else {\\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\\n}\\n\",tint:\"gl_FragColor.rgb *= (1.0 - uColor.a);\\ngl_FragColor.rgb += uColor.rgb;\\n\"},buildSource:function(t){return\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ngl_FragColor = color;\\nif (color.a > 0.0) {\\n\"+this.fragmentSource[t]+\"}\\n}\"},retrieveShader:function(t){var e,i=this.type+\"_\"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){for(var e,i,r,n=t.imageData.data,s=n.length,o=1-this.alpha,t=new u.Color(this.color).getSource(),a=t[0]*this.alpha,c=t[1]*this.alpha,h=t[2]*this.alpha,l=0;l<s;l+=4)switch(e=n[l],i=n[l+1],r=n[l+2],this.mode){case\"multiply\":n[l]=e*a/255,n[l+1]=i*c/255,n[l+2]=r*h/255;break;case\"screen\":n[l]=255-(255-e)*(255-a)/255,n[l+1]=255-(255-i)*(255-c)/255,n[l+2]=255-(255-r)*(255-h)/255;break;case\"add\":n[l]=e+a,n[l+1]=i+c,n[l+2]=r+h;break;case\"diff\":case\"difference\":n[l]=Math.abs(e-a),n[l+1]=Math.abs(i-c),n[l+2]=Math.abs(r-h);break;case\"subtract\":n[l]=e-a,n[l+1]=i-c,n[l+2]=r-h;break;case\"darken\":n[l]=Math.min(e,a),n[l+1]=Math.min(i,c),n[l+2]=Math.min(r,h);break;case\"lighten\":n[l]=Math.max(e,a),n[l+1]=Math.max(i,c),n[l+2]=Math.max(r,h);break;case\"overlay\":n[l]=a<128?2*e*a/255:255-2*(255-e)*(255-a)/255,n[l+1]=c<128?2*i*c/255:255-2*(255-i)*(255-c)/255,n[l+2]=h<128?2*r*h/255:255-2*(255-r)*(255-h)/255;break;case\"exclusion\":n[l]=a+e-2*a*e/255,n[l+1]=c+i-2*c*i/255,n[l+2]=h+r-2*h*r/255;break;case\"tint\":n[l]=a+e*o,n[l+1]=c+i*o,n[l+2]=h+r*o}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,\"uColor\")}},sendUniformData:function(t,e){var i=new u.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),u.Image.filters.BlendColor.fromObject=u.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var v=t.fabric,t=v.Image.filters,e=v.util.createClass;t.BlendImage=e(t.BaseFilter,{type:\"BlendImage\",image:null,mode:\"multiply\",alpha:1,vertexSource:\"attribute vec2 aPosition;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nuniform mat3 uTransformMatrix;\\nvoid main() {\\nvTexCoord = aPosition;\\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n}\",fragmentSource:{multiply:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform sampler2D uImage;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec4 color2 = texture2D(uImage, vTexCoord2);\\ncolor.rgba *= color2.rgba;\\ngl_FragColor = color;\\n}\",mask:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform sampler2D uImage;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec4 color2 = texture2D(uImage, vTexCoord2);\\ncolor.a = color2.a;\\ngl_FragColor = color;\\n}\"},retrieveShader:function(t){var e=this.type+\"_\"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper(\"applyToWebGL\",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,i=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]},applyTo2d:function(t){var e,i,r,n,s,o,a,c,h,l=t.imageData,t=t.filterBackend.resources,u=l.data,f=u.length,d=l.width,l=l.height,g=this.image;t.blendImage||(t.blendImage=v.util.createCanvasElement()),h=(t=t.blendImage).getContext(\"2d\"),t.width!==d||t.height!==l?(t.width=d,t.height=l):h.clearRect(0,0,d,l),h.setTransform(g.scaleX,0,0,g.scaleY,g.left,g.top),h.drawImage(g._element,0,0,d,l);for(var p=h.getImageData(0,0,d,l).data,m=0;m<f;m+=4)switch(s=u[m],o=u[m+1],a=u[m+2],c=u[m+3],e=p[m],i=p[m+1],r=p[m+2],n=p[m+3],this.mode){case\"multiply\":u[m]=s*e/255,u[m+1]=o*i/255,u[m+2]=a*r/255,u[m+3]=c*n/255;break;case\"mask\":u[m+3]=n}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,\"uTransformMatrix\"),uImage:t.getUniformLocation(e,\"uImage\")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),v.Image.filters.BlendImage.fromObject=function(i,r){v.Image.fromObject(i.image,function(t){var e=v.util.object.clone(i);e.image=t,r(new v.Image.filters.BlendImage(e))})}}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var m=t.fabric||(t.fabric={}),j=Math.pow,A=Math.floor,D=Math.sqrt,M=Math.abs,o=Math.round,r=Math.sin,F=Math.ceil,t=m.Image.filters,e=m.util.createClass;t.Resize=e(t.BaseFilter,{type:\"Resize\",resizeType:\"hermite\",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,\"uDelta\"),uTaps:t.getUniformLocation(e,\"uTaps\")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),i=this.type+\"_\"+e;return t.programCache.hasOwnProperty(i)||(e=this.generateShader(e),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),r=new Array(i),n=1;n<=i;n++)r[n-1]=t(n*e);return r},generateShader:function(t){for(var e=new Array(t),i=this.fragmentSourceTOP,r=1;r<=t;r++)e[r-1]=r+\".0 * uDelta\";return i=(i=i+(\"uniform float uTaps[\"+t+\"];\\n\")+\"void main() {\\n\")+\"  vec4 color = texture2D(uTexture, vTexCoord);\\n\"+\"  float sum = 1.0;\\n\",e.forEach(function(t,e){i=(i+=\"  color += texture2D(uTexture, vTexCoord + \"+t+\") * uTaps[\"+e+\"];\\n\")+\"  color += texture2D(uTexture, vTexCoord - \"+t+\") * uTaps[\"+e+\"];\\n  sum += 2.0 * uTaps[\"+e+\"];\\n\"}),i=i+\"  gl_FragColor = color / sum;\\n\"+\"}\"},fragmentSourceTOP:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec2 uDelta;\\nvarying vec2 vTexCoord;\\n\",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(i){return function(t){if(i<=t||t<=-i)return 0;if(t<1.1920929e-7&&-1.1920929e-7<t)return 1;var e=(t*=Math.PI)/i;return r(t)/t*r(e)/e}},applyTo2d:function(t){var e,i=t.imageData,r=this.scaleX,n=this.scaleY,s=(this.rcpScaleX=1/r,this.rcpScaleY=1/n,i.width),i=i.height,r=o(s*r),n=o(i*n);\"sliceHack\"===this.resizeType?e=this.sliceByTwo(t,s,i,r,n):\"hermite\"===this.resizeType?e=this.hermiteFastResize(t,s,i,r,n):\"bilinear\"===this.resizeType?e=this.bilinearFiltering(t,s,i,r,n):\"lanczos\"===this.resizeType&&(e=this.lanczosResize(t,s,i,r,n)),t.imageData=e},sliceByTwo:function(t,e,i,r,n){var s,o,t=t.imageData,a=!1,c=!1,h=.5*e,l=.5*i,u=m.filterBackend.resources,f=0,d=0,g=e,p=0;for(u.sliceByTwo||(u.sliceByTwo=document.createElement(\"canvas\")),((s=u.sliceByTwo).width<1.5*e||s.height<i)&&(s.width=1.5*e,s.height=i),(o=s.getContext(\"2d\")).clearRect(0,0,1.5*e,i),o.putImageData(t,0,0),r=A(r),n=A(n);!a||!c;)i=l,r<A(.5*(e=h))?h=A(.5*h):(h=r,a=!0),n<A(.5*l)?l=A(.5*l):(l=n,c=!0),o.drawImage(s,f,d,e,i,g,p,h,l),f=g,d=p,p+=l;return o.getImageData(f,d,r,n)},lanczosResize:function(t,d,g,p,m){var v=t.imageData.data,b=t.ctx.createImageData(p,m),y=b.data,_=this.lanczosCreate(this.lanczosLobes),x=this.rcpScaleX,C=this.rcpScaleY,S=2/this.rcpScaleX,T=2/this.rcpScaleY,w=F(x*this.lanczosLobes/2),O=F(C*this.lanczosLobes/2),P={},k={},E={};return function t(e){var i,r,n,s,o,a,c,h,l,u;for(k.x=(e+.5)*x,E.x=A(k.x),i=0;i<m;i++){for(k.y=(i+.5)*C,E.y=A(k.y),h=c=a=o=s=0,r=E.x-w;r<=E.x+w;r++)if(!(r<0||d<=r)){l=A(1e3*M(r-k.x)),P[l]||(P[l]={});for(var f=E.y-O;f<=E.y+O;f++)f<0||g<=f||(u=A(1e3*M(f-k.y)),P[l][u]||(P[l][u]=_(D(j(l*S,2)+j(u*T,2))/1e3)),0<(u=P[l][u])&&(s+=u,o+=u*v[n=4*(f*d+r)],a+=u*v[n+1],c+=u*v[n+2],h+=u*v[n+3]))}y[n=4*(i*p+e)]=o/s,y[n+1]=a/s,y[n+2]=c/s,y[n+3]=h/s}return++e<p?t(e):b}(0)},bilinearFiltering:function(t,e,i,r,n){for(var s,o,a,c,h,l,u,f,d,g,p,m=0,v=this.rcpScaleX,b=this.rcpScaleY,y=4*(e-1),_=t.imageData.data,t=t.ctx.createImageData(r,n),x=t.data,C=0;C<n;C++)for(u=0;u<r;u++)for(f=v*u-(h=A(v*u)),d=b*C-(l=A(b*C)),p=4*(l*e+h),g=0;g<4;g++)s=_[p+g],o=_[4+p+g],a=_[p+y+g],c=_[p+y+4+g],x[m++]=s*(1-f)*(1-d)+o*f*(1-d)+a*d*(1-f)+c*f*d;return t},hermiteFastResize:function(t,e,i,r,n){for(var s=this.rcpScaleX,o=this.rcpScaleY,a=F(s/2),c=F(o/2),h=t.imageData.data,t=t.ctx.createImageData(r,n),l=t.data,u=0;u<n;u++)for(var f=0;f<r;f++){for(var d=4*(f+u*r),g=0,p=0,m=0,v=0,b=0,y=0,_=0,x=(u+.5)*o,C=A(u*o);C<(u+1)*o;C++)for(var S=M(x-(C+.5))/c,T=(f+.5)*s,w=S*S,O=A(f*s);O<(f+1)*s;O++){var P=M(T-(O+.5))/a,k=D(w+P*P);1<k&&k<-1||0<(g=2*k*k*k-3*k*k+1)&&(_+=g*h[3+(P=4*(O+C*e))],m+=g,v+=(g=h[3+P]<255?g*h[3+P]/250:g)*h[P],b+=g*h[1+P],y+=g*h[2+P],p+=g)}l[d]=v/p,l[1+d]=b/p,l[2+d]=y/p,l[3+d]=_/m}return t},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),m.Image.filters.Resize.fromObject=m.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Contrast=i(e.BaseFilter,{type:\"Contrast\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uContrast;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\\ngl_FragColor = color;\\n}\",contrast:0,mainParameter:\"contrast\",applyTo2d:function(t){if(0!==this.contrast)for(var e=t.imageData.data,i=e.length,t=Math.floor(255*this.contrast),r=259*(t+255)/(255*(259-t)),n=0;n<i;n+=4)e[n]=r*(e[n]-128)+128,e[n+1]=r*(e[n+1]-128)+128,e[n+2]=r*(e[n+2]-128)+128},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,\"uContrast\")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Saturation=i(e.BaseFilter,{type:\"Saturation\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uSaturation;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat rgMax = max(color.r, color.g);\\nfloat rgbMax = max(rgMax, color.b);\\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\\ngl_FragColor = color;\\n}\",saturation:0,mainParameter:\"saturation\",applyTo2d:function(t){if(0!==this.saturation)for(var e,i=t.imageData.data,r=i.length,n=-this.saturation,s=0;s<r;s+=4)e=Math.max(i[s],i[s+1],i[s+2]),i[s]+=e!==i[s]?(e-i[s])*n:0,i[s+1]+=e!==i[s+1]?(e-i[s+1])*n:0,i[s+2]+=e!==i[s+2]?(e-i[s+2])*n:0},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,\"uSaturation\")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Vibrance=i(e.BaseFilter,{type:\"Vibrance\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uVibrance;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat max = max(color.r, max(color.g, color.b));\\nfloat avg = (color.r + color.g + color.b) / 3.0;\\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\\ngl_FragColor = color;\\n}\",vibrance:0,mainParameter:\"vibrance\",applyTo2d:function(t){if(0!==this.vibrance)for(var e,i,r=t.imageData.data,n=r.length,s=-this.vibrance,o=0;o<n;o+=4)e=Math.max(r[o],r[o+1],r[o+2]),i=(r[o]+r[o+1]+r[o+2])/3,i=2*Math.abs(e-i)/255*s,r[o]+=e!==r[o]?(e-r[o])*i:0,r[o+1]+=e!==r[o+1]?(e-r[o+1])*i:0,r[o+2]+=e!==r[o+2]?(e-r[o+2])*i:0},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,\"uVibrance\")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),t.Image.filters.Vibrance.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var d=t.fabric||(t.fabric={}),t=d.Image.filters,e=d.util.createClass;t.Blur=e(t.BaseFilter,{type:\"Blur\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec2 uDelta;\\nvarying vec2 vTexCoord;\\nconst float nSamples = 15.0;\\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\\nfloat random(vec3 scale) {\\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\\n}\\nvoid main() {\\nvec4 color = vec4(0.0);\\nfloat total = 0.0;\\nfloat offset = random(v3offset);\\nfor (float t = -nSamples; t <= nSamples; t++) {\\nfloat percent = (t + offset - 0.5) / nSamples;\\nfloat weight = 1.0 - abs(percent);\\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\\ntotal += weight;\\n}\\ngl_FragColor = color / total;\\n}\",blur:0,mainParameter:\"blur\",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var e,i,r,n,s,o,a=t.filterBackend.resources,c=t.imageData.width,h=t.imageData.height,l=(a.blurLayer1||(a.blurLayer1=d.util.createCanvasElement(),a.blurLayer2=d.util.createCanvasElement()),e=a.blurLayer1,i=a.blurLayer2,e.width===c&&e.height===h||(i.width=e.width=c,i.height=e.height=h),e.getContext(\"2d\")),u=i.getContext(\"2d\"),f=.06*this.blur*.5;for(l.putImageData(t.imageData,0,0),u.clearRect(0,0,c,h),o=-15;o<=15;o++)s=f*(n=o/15)*c+(r=(Math.random()-.5)/4),u.globalAlpha=1-Math.abs(n),u.drawImage(e,s,r),l.drawImage(i,0,0),u.globalAlpha=1,u.clearRect(0,0,i.width,i.height);for(o=-15;o<=15;o++)s=f*(n=o/15)*h+(r=(Math.random()-.5)/4),u.globalAlpha=1-Math.abs(n),u.drawImage(e,r,s),l.drawImage(i,0,0),u.globalAlpha=1,u.clearRect(0,0,i.width,i.height);t.ctx.drawImage(e,0,0);a=t.ctx.getImageData(0,0,e.width,e.height);return l.globalAlpha=1,l.clearRect(0,0,e.width,e.height),a},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,\"uDelta\")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t=1,e=[0,0];return this.horizontal?1<this.aspectRatio&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),t=t*this.blur*.12,this.horizontal?e[0]=t:e[1]=t,e}}),t.Blur.fromObject=d.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var t=t.fabric||(t.fabric={}),e=t.Image.filters,i=t.util.createClass;e.Gamma=i(e.BaseFilter,{type:\"Gamma\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec3 uGamma;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec3 correction = (1.0 / uGamma);\\ncolor.r = pow(color.r, correction.r);\\ncolor.g = pow(color.g, correction.g);\\ncolor.b = pow(color.b, correction.b);\\ngl_FragColor = color;\\ngl_FragColor.rgb *= color.a;\\n}\",gamma:[1,1,1],mainParameter:\"gamma\",initialize:function(t){this.gamma=[1,1,1],e.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData.data,t=this.gamma,r=i.length,n=1/t[0],s=1/t[1],o=1/t[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,n),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,o);for(e=0,r=i.length;e<r;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,\"uGamma\")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var i=t.fabric||(t.fabric={}),t=i.Image.filters,e=i.util.createClass;t.Composed=e(t.BaseFilter,{type:\"Composed\",subFilters:[],initialize:function(t){this.callSuper(\"initialize\",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach(function(t){t.applyTo(e)})},toObject:function(){return i.util.object.extend(this.callSuper(\"toObject\"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(t,e){t=(t.subFilters||[]).map(function(t){return new i.Image.filters[t.type](t)}),t=new i.Image.filters.Composed({subFilters:t});return e&&e(t),t}}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var r=t.fabric||(t.fabric={}),e=r.Image.filters,t=r.util.createClass;e.HueRotation=t(e.ColorMatrix,{type:\"HueRotation\",rotation:0,mainParameter:\"rotation\",calculateMatrix:function(){var t=this.rotation*Math.PI,e=r.util.cos(t),t=r.util.sin(t),t=Math.sqrt(1/3)*t,i=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+i/3,this.matrix[1]=1/3*i-t,this.matrix[2]=1/3*i+t,this.matrix[5]=1/3*i+t,this.matrix[6]=e+1/3*i,this.matrix[7]=1/3*i-t,this.matrix[10]=1/3*i-t,this.matrix[11]=1/3*i+t,this.matrix[12]=e+1/3*i},isNeutralState:function(t){return this.calculateMatrix(),e.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),e.BaseFilter.prototype.applyTo.call(this,t)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(\"undefined\"!=typeof exports?exports:this),function(t){\"use strict\";var e,x=t.fabric||(t.fabric={}),o=x.util.object.clone;x.Text?x.warn(\"fabric.Text is already defined\"):(e=\"fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign\".split(\" \"),x.Text=x.util.createClass(x.Object,{_dimensionAffectingProps:[\"fontSize\",\"fontWeight\",\"fontFamily\",\"fontStyle\",\"lineHeight\",\"text\",\"charSpacing\",\"textAlign\",\"styles\",\"path\",\"pathStartOffset\",\"pathSide\",\"pathAlign\"],_reNewline:/\\r?\\n/,_reSpacesAndTabs:/[ \\t\\r]/g,_reSpaceAndTab:/[ \\t\\r]/,_reWords:/\\S+/g,type:\"text\",fontSize:40,fontWeight:\"normal\",fontFamily:\"Times New Roman\",underline:!1,overline:!1,linethrough:!1,textAlign:\"left\",fontStyle:\"normal\",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:\"\",stateProperties:x.Object.prototype.stateProperties.concat(e),cacheProperties:x.Object.prototype.cacheProperties.concat(e),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:\"left\",pathAlign:\"baseline\",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:\"ltr\",_styleProperties:[\"stroke\",\"strokeWidth\",\"fill\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"fontStyle\",\"underline\",\"overline\",\"linethrough\",\"deltaY\",\"textBackgroundColor\"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper(\"initialize\",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:\"_dimensionAffectingProps\"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=x.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return x._measuringContext||(x._measuringContext=this.canvas&&this.canvas.contextCache||x.util.createCanvasElement().getContext(\"2d\")),x._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf(\"justify\")&&this.enlargeSpaces(),this.saveState({propertySet:\"_dimensionAffectingProps\"}))},enlargeSpaces:function(){for(var t,e,i,r,n,s=0,o=this._textLines.length;s<o;s++)if((\"justify\"===this.textAlign||s!==o-1&&!this.isEndOfWrapping(s))&&(e=0,i=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(n=this.textLines[s].match(this._reSpacesAndTabs))))for(var a=n.length,c=(this.width-t)/a,h=0,l=i.length;h<=l;h++)r=this.__charBounds[s][h],this._reSpaceAndTab.test(i[h])?(r.width+=c,r.kernedWidth+=c,r.left+=e,e+=c):r.left+=e},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return\"#<fabric.Text (\"+this.complexity()+'): { \"text\": \"'+this.text+'\", \"fontFamily\": \"'+this.fontFamily+'\" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper(\"_getCacheCanvasDimensions\"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,\"underline\"),this._renderText(t),this._renderTextDecoration(t,\"overline\"),this._renderTextDecoration(t,\"linethrough\")},_renderText:function(t){\"stroke\"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){if(t.textBaseline=\"alphabetical\",this.path)switch(this.pathAlign){case\"center\":t.textBaseline=\"middle\";break;case\"ascender\":t.textBaseline=\"top\";break;case\"descender\":t.textBaseline=\"bottom\"}t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var r=this.getLineWidth(e);t<r&&(t=r)}return t},_renderTextLine:function(t,e,i,r,n,s){this._renderChars(t,e,i,r,n,s)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas(\"textBackgroundColor\")){for(var e,i,r,n,s=t.fillStyle,o=this._getLeftOffset(),a=this._getTopOffset(),c=0,h=0,l=this.path,u=0,f=this._textLines.length;u<f;u++)if(e=this.getHeightOfLine(u),this.textBackgroundColor||this.styleHas(\"textBackgroundColor\",u)){for(var d=this._textLines[u],g=this._getLineLeftOffset(u),h=0,c=0,p=this.getValueOfPropertyAt(u,0,\"textBackgroundColor\"),m=0,v=d.length;m<v;m++)i=this.__charBounds[u][m],r=this.getValueOfPropertyAt(u,m,\"textBackgroundColor\"),l?(t.save(),t.translate(i.renderLeft,i.renderTop),t.rotate(i.angle),(t.fillStyle=r)&&t.fillRect(-i.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),i.width,e/this.lineHeight),t.restore()):r!==p?(n=o+g+c,\"rtl\"===this.direction&&(n=this.width-n-h),(t.fillStyle=p)&&t.fillRect(n,a,h,e/this.lineHeight),c=i.left,h=i.width,p=r):h+=i.kernedWidth;r&&!l&&(n=o+g+c,\"rtl\"===this.direction&&(n=this.width-n-h),t.fillStyle=r,t.fillRect(n,a,h,e/this.lineHeight)),a+=e}else a+=e;t.fillStyle=s,this._removeShadow(t)}},getFontCache:function(t){var e=t.fontFamily.toLowerCase(),e=(x.charWidthsCache[e]||(x.charWidthsCache[e]={}),x.charWidthsCache[e]),t=t.fontStyle.toLowerCase()+\"_\"+(t.fontWeight+\"\").toLowerCase();return e[t]||(e[t]={}),e[t]},_measureChar:function(t,e,i,r){var n,s,o,a,c,h=this.getFontCache(e),l=i+t,r=this._getFontDeclaration(e)===this._getFontDeclaration(r),u=e.fontSize/this.CACHE_FONT_SIZE;return i&&void 0!==h[i]&&(o=h[i]),void 0!==h[t]&&(a=n=h[t]),r&&void 0!==h[l]&&(a=(s=h[l])-o),void 0!==n&&void 0!==o&&void 0!==s||(c=this.getMeasuringContext(),this._setTextStyles(c,e,!0)),void 0===n&&(a=n=c.measureText(t).width,h[t]=n),void 0===o&&r&&i&&(o=c.measureText(i).width,h[i]=o),r&&void 0===s&&(s=c.measureText(l).width,a=(h[l]=s)-o),{width:n*u,kernedWidth:a*u}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,\"fontSize\")},measureLine:function(t){t=this._measureLine(t);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(t){var e,i,r,n,s,o,a=0,c=this._textLines[t],h=new Array(c.length),l=0,u=this.path,f=\"right\"===this.pathSide;for(this.__charBounds[t]=h,e=0;e<c.length;e++)i=c[e],n=this._getGraphemeBox(i,t,e,r),a+=(h[e]=n).kernedWidth,r=i;if(h[e]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize},u){switch(o=u.segmentsInfo[u.segmentsInfo.length-1].length,(s=x.util.getPointOnPath(u.path,0,u.segmentsInfo)).x+=u.pathOffset.x,s.y+=u.pathOffset.y,this.textAlign){case\"left\":l=f?o-a:0;break;case\"center\":l=(o-a)/2;break;case\"right\":l=f?0:o-a}for(l+=this.pathStartOffset*(f?-1:1),e=f?c.length-1:0;f?0<=e:e<c.length;f?e--:e++)n=h[e],o<l?l%=o:l<0&&(l+=o),this._setGraphemeOnPath(l,n,s),l+=n.kernedWidth}return{width:a,numOfSpaces:0}},_setGraphemeOnPath:function(t,e,i){var t=t+e.kernedWidth/2,r=this.path,t=x.util.getPointOnPath(r.path,t,r.segmentsInfo);e.renderLeft=t.x-i.x,e.renderTop=t.y-i.y,e.angle=t.angle+(\"right\"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,r,n){var s=this.getCompleteStyleDeclaration(e,i),o=r?this.getCompleteStyleDeclaration(e,i-1):{},t=this._measureChar(t,s,r,o),r=t.kernedWidth,o=t.width,a=(0!==this.charSpacing&&(o+=a=this._getWidthOfCharSpacing(),r+=a),{width:o,left:0,height:s.fontSize,kernedWidth:r,deltaY:s.deltaY});return 0<i&&!n&&(o=this.__charBounds[e][i-1],a.left=o.left+o.width+t.kernedWidth-t.width),a},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),r=1,n=e.length;r<n;r++)i=Math.max(this.getHeightOfChar(t,r),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,r=this._textLines.length;i<r;i++)t=this.getHeightOfLine(i),e+=i===r-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return\"ltr\"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,r=this._getLeftOffset(),n=this._getTopOffset(),s=0,o=this._textLines.length;s<o;s++){var a=this.getHeightOfLine(s),c=a/this.lineHeight,h=this._getLineLeftOffset(s);this._renderTextLine(e,t,this._textLines[s],r+h,n+i+c,s),i+=a}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas(\"fill\"))&&this._renderTextCommon(t,\"fillText\")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,\"strokeText\"),t.closePath(),t.restore())},_renderChars:function(t,e,i,r,n,s){var o,a,c,h,l=this.getHeightOfLine(s),u=-1!==this.textAlign.indexOf(\"justify\"),f=\"\",d=0,g=this.path,p=!u&&0===this.charSpacing&&this.isEmptyStyles(s)&&!g,m=\"ltr\"===this.direction,v=\"ltr\"===this.direction?1:-1,b=e.canvas.getAttribute(\"dir\");if(e.save(),b!==this.direction&&(e.canvas.setAttribute(\"dir\",m?\"ltr\":\"rtl\"),e.direction=m?\"ltr\":\"rtl\",e.textAlign=m?\"left\":\"right\"),n-=l*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(t,e,s,0,i.join(\"\"),r,n,l),void e.restore();for(var y=0,_=i.length-1;y<=_;y++)h=y===_||this.charSpacing||g,f+=i[y],c=this.__charBounds[s][y],0===d?(r+=v*(c.kernedWidth-c.width),d+=c.width):d+=c.kernedWidth,(h=u&&!h&&this._reSpaceAndTab.test(i[y])?!0:h)||(o=o||this.getCompleteStyleDeclaration(s,y),a=this.getCompleteStyleDeclaration(s,y+1),h=x.util.hasStyleChanged(o,a,!1)),h&&(g?(e.save(),e.translate(c.renderLeft,c.renderTop),e.rotate(c.angle),this._renderChar(t,e,s,y,f,-d/2,0,l),e.restore()):(h=r,this._renderChar(t,e,s,y,f,h,n,l)),f=\"\",o=a,r+=v*d,d=0);e.restore()},_applyPatternGradientTransformText:function(t){var e,i=x.util.createCanvasElement(),r=this.width+this.strokeWidth,n=this.height+this.strokeWidth;return i.width=r,i.height=n,(e=i.getContext(\"2d\")).beginPath(),e.moveTo(0,0),e.lineTo(r,0),e.lineTo(r,n),e.lineTo(0,n),e.closePath(),e.translate(r/2,n/2),e.fillStyle=t.toLive(e),this._applyPatternGradientTransform(e,t),e.fill(),e.createPattern(i,\"no-repeat\")},handleFiller:function(t,e,i){var r,n;return i.toLive?\"percentage\"===i.gradientUnits||i.gradientTransform||i.patternTransform?(r=-this.width/2,n=-this.height/2,t.translate(r,n),t[e]=this._applyPatternGradientTransformText(i),{offsetX:r,offsetY:n}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,\"strokeStyle\",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,\"fillStyle\",e.fill)},_renderChar:function(t,e,i,r,n,s,o){var a,c,h=this._getStyleDeclaration(i,r),i=this.getCompleteStyleDeclaration(i,r),r=\"fillText\"===t&&i.fill,t=\"strokeText\"===t&&i.stroke&&i.strokeWidth;(t||r)&&(e.save(),r&&(a=this._setFillStyles(e,i)),t&&(c=this._setStrokeStyles(e,i)),e.font=this._getFontDeclaration(i),h&&h.textBackgroundColor&&this._removeShadow(e),h&&h.deltaY&&(o+=h.deltaY),r&&e.fillText(n,s-a.offsetX,o-a.offsetY),t&&e.strokeText(n,s-c.offsetX,o-c.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var r=this.get2DCursorLocation(t,!0),n=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,\"fontSize\"),r=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,\"deltaY\"),r={fontSize:n*i.size,deltaY:r+n*i.baseline};return this.setSelectionStyles(r,t,e),this},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),e=this.width-e,i=this.textAlign,r=this.direction,n=0,t=this.isEndOfWrapping(t);return\"justify\"===i||\"justify-center\"===i&&!t||\"justify-right\"===i&&!t||\"justify-left\"===i&&!t?0:(\"center\"===i&&(n=e/2),\"right\"===i&&(n=e),\"justify-center\"===i&&(n=e/2),\"justify-right\"===i&&(n=e),\"rtl\"===r&&(n-=e),n)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return(t=t||this.hasStateChanged(\"_dimensionAffectingProps\"))&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){t=this._getStyleDeclaration(t,e);return(t&&void 0!==t[i]?t:this)[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,r=this._getLeftOffset(),n=this._getTopOffset(),s=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[e],c=0,h=this._textLines.length;c<h;c++)if(i=this.getHeightOfLine(c),this[e]||this.styleHas(e,c)){for(var l=this._textLines[c],u=i/this.lineHeight,f=this._getLineLeftOffset(c),d=0,g=0,p=this.getValueOfPropertyAt(c,0,e),m=this.getValueOfPropertyAt(c,0,\"fill\"),v=n+u*(1-this._fontSizeFraction),b=this.getHeightOfChar(c,0),y=this.getValueOfPropertyAt(c,0,\"deltaY\"),_=0,x=l.length;_<x;_++){var C=this.__charBounds[c][_],S=this.getValueOfPropertyAt(c,_,e),T=this.getValueOfPropertyAt(c,_,\"fill\"),w=this.getHeightOfChar(c,_),O=this.getValueOfPropertyAt(c,_,\"deltaY\");s&&S&&T?(t.save(),t.fillStyle=m,t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),t.fillRect(-C.kernedWidth/2,a*w+O,C.kernedWidth,this.fontSize/15),t.restore()):(S!==p||T!==m||w!==b||O!==y)&&0<g?(P=r+f+d,\"rtl\"===this.direction&&(P=this.width-P-g),p&&m&&(t.fillStyle=m,t.fillRect(P,v+a*b+y,g,this.fontSize/15)),d=C.left,g=C.width,p=S,m=T,b=w,y=O):g+=C.kernedWidth}var P=r+f+d;\"rtl\"===this.direction&&(P=this.width-P-g),t.fillStyle=T,S&&T&&t.fillRect(P,v+a*b+y,g-o,this.fontSize/15),n+=i}else n+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,e){var t=t||this,i=this.fontFamily,r=-1<x.Text.genericFonts.indexOf(i.toLowerCase()),i=void 0===i||-1<i.indexOf(\"'\")||-1<i.indexOf(\",\")||-1<i.indexOf('\"')||r?t.fontFamily:'\"'+t.fontFamily+'\"';return[x.isLikelyNode?t.fontWeight:t.fontStyle,x.isLikelyNode?t.fontStyle:t.fontWeight,e?this.CACHE_FONT_SIZE+\"px\":t.fontSize+\"px\",i].join(\" \")},render:function(t){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper(\"render\",t))},_splitTextIntoLines:function(t){for(var e=t.split(this._reNewline),i=new Array(e.length),r=[\"\\n\"],n=[],s=0;s<e.length;s++)i[s]=x.util.string.graphemeSplit(e[s]),n=n.concat(i[s],r);return n.pop(),{_unwrappedLines:i,lines:e,graphemeText:n,graphemeLines:i}},toObject:function(t){t=e.concat(t),t=this.callSuper(\"toObject\",t);return t.styles=x.util.stylesToArray(this.styles,this.text),t.path&&(t.path=this.path.toObject()),t},set:function(t,e){this.callSuper(\"set\",t,e);var i=!1,r=!1;if(\"object\"==typeof t)for(var n in t)\"path\"===n&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(n),r=r||\"path\"===n;else i=-1!==this._dimensionAffectingProps.indexOf(t),r=\"path\"===t;return r&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),x.Text.ATTRIBUTE_NAMES=x.SHARED_ATTRIBUTES.concat(\"x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor\".split(\" \")),x.Text.DEFAULT_SVG_FONT_SIZE=16,x.Text.fromElement=function(t,e,i){if(!t)return e(null);var r=x.parseAttributes(t,x.Text.ATTRIBUTE_NAMES),n=r.textAnchor||\"left\",s=((i=x.util.object.extend(i?o(i):{},r)).top=i.top||0,i.left=i.left||0,r.textDecoration&&(-1!==(s=r.textDecoration).indexOf(\"underline\")&&(i.underline=!0),-1!==s.indexOf(\"overline\")&&(i.overline=!0),-1!==s.indexOf(\"line-through\")&&(i.linethrough=!0),delete i.textDecoration),\"dx\"in r&&(i.left+=r.dx),\"dy\"in r&&(i.top+=r.dy),\"fontSize\"in i||(i.fontSize=x.Text.DEFAULT_SVG_FONT_SIZE),\"\"),r=(\"textContent\"in t?s=t.textContent:\"firstChild\"in t&&null!==t.firstChild&&\"data\"in t.firstChild&&null!==t.firstChild.data&&(s=t.firstChild.data),s=s.replace(/^\\s+|\\s+$|\\n+/g,\"\").replace(/\\s+/g,\" \"),i.strokeWidth),t=(i.strokeWidth=0,new x.Text(s,i)),s=t.getScaledHeight()/t.height,i=((t.height+t.strokeWidth)*t.lineHeight-t.height)*s,s=t.getScaledHeight()+i,i=0;\"center\"===n&&(i=t.getScaledWidth()/2),\"right\"===n&&(i=t.getScaledWidth()),t.set({left:t.left-i,top:t.top-(s-t.fontSize*(.07+t._fontSizeFraction))/t.lineHeight,strokeWidth:void 0!==r?r:1}),e(t)},x.Text.fromObject=function(t,i){var e=o(t),r=t.path;return delete e.path,x.Object._fromObject(\"Text\",e,function(e){e.styles=x.util.stylesFromArray(t.styles,t.text),r?x.Object._fromObject(\"Path\",r,function(t){e.set(\"path\",t),i(e)},\"path\"):i(e)},\"text\")},x.Text.genericFonts=[\"sans-serif\",\"serif\",\"cursive\",\"fantasy\",\"monospace\"],x.util.createAccessors&&x.util.createAccessors(x.Text))}(\"undefined\"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e,i=void 0===t?this.styles:{line:this.styles[t]};for(e in i)for(var r in i[e])for(var n in i[e][r])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||\"\"===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var i,r=void 0===e?this.styles:{0:this.styles[e]};for(i in r)for(var n in r[i])if(void 0!==r[i][n][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||\"\"===t)return!1;var e,i,r,n,s=this.styles,o=0,a=!0,c=0;for(r in s){for(var h in e=0,s[r])o++,(n=s[r][h]).hasOwnProperty(t)?(i?n[t]!==i&&(a=!1):i=n[t],n[t]===this[t]&&delete n[t]):a=!1,0!==Object.keys(n).length?e++:delete s[r][h];0===e&&delete s[r]}for(var l=0;l<this._textLines.length;l++)c+=this._textLines[l].length;a&&o===c&&(this[t]=i,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&\"\"!==t){var e,i,r,n=this.styles;for(i in n){for(r in e=n[i])delete e[r][t],0===Object.keys(e[r]).length&&delete e[r];0===Object.keys(e).length&&delete n[i]}}},_extendStyles:function(t,e){t=this.get2DCursorLocation(t);this._getLineStyle(t.lineIndex)||this._setLineStyle(t.lineIndex),this._getStyleDeclaration(t.lineIndex,t.charIndex)||this._setStyleDeclaration(t.lineIndex,t.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(t.lineIndex,t.charIndex),e)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var i=e?this._unwrappedTextLines:this._textLines,r=i.length,n=0;n<r;n++){if(t<=i[n].length)return{lineIndex:n,charIndex:t};t-=i[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:i[n-1].length<t?i[n-1].length:t}},getSelectionStyles:function(t,e,i){void 0===t&&(t=this.selectionStart||0),void 0===e&&(e=this.selectionEnd||t);for(var r=[],n=t;n<e;n++)r.push(this.getStyleAtPosition(n,i));return r},getStyleAtPosition:function(t,e){t=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(t.lineIndex,t.charIndex):this._getStyleDeclaration(t.lineIndex,t.charIndex))||{}},setSelectionStyles:function(t,e,i){void 0===e&&(e=this.selectionStart||0),void 0===i&&(i=this.selectionEnd||e);for(var r=e;r<i;r++)this._extendStyles(r,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){t=this.styles&&this.styles[t];return t?t[e]:null},getCompleteStyleDeclaration:function(t,e){for(var i,r=this._getStyleDeclaration(t,e)||{},n={},s=0;s<this._styleProperties.length;s++)n[i=this._styleProperties[s]]=(void 0===r[i]?this:r)[i];return n},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function o(t){t.textDecoration&&(-1<t.textDecoration.indexOf(\"underline\")&&(t.underline=!0),-1<t.textDecoration.indexOf(\"line-through\")&&(t.linethrough=!0),-1<t.textDecoration.indexOf(\"overline\")&&(t.overline=!0),delete t.textDecoration)}fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:\"i-text\",selectionStart:0,selectionEnd:0,selectionColor:\"rgba(17,119,255,0.3)\",isEditing:!1,editable:!0,editingBorderColor:\"rgba(102,153,255,0.25)\",cursorWidth:2,cursorColor:\"\",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\\s|\\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper(\"initialize\",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire(\"selectionStart\",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire(\"selectionEnd\",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire(\"selection:changed\"),this.canvas&&this.canvas.fire(\"text:selection:changed\",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper(\"initDimensions\")},render:function(t){this.clearContextTop(),this.callSuper(\"render\",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper(\"_render\",t)},clearContextTop:function(t){var e,i;this.isEditing&&this.canvas&&this.canvas.contextTop&&(e=this.canvas.contextTop,i=this.canvas.viewportTransform,e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e),this._clearTextArea(e),t||e.restore())},renderCursorOrSelection:function(){var t,e;this.isEditing&&this.canvas&&this.canvas.contextTop&&(t=this._getCursorBoundaries(),e=this.canvas.contextTop,this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore())},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),i=this._getTopOffset(),t=this._getCursorBoundariesOffsets(t);return{left:e,top:i,leftOffset:t.left,topOffset:t.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&\"top\"in this.cursorOffsetCache)return this.cursorOffsetCache;for(var e=0,i=0,t=this.get2DCursorLocation(t),r=t.charIndex,n=t.lineIndex,s=0;s<n;s++)e+=this.getHeightOfLine(s);var t=this._getLineLeftOffset(n),o=this.__charBounds[n][r];return o&&(i=o.left),0!==this.charSpacing&&r===this._textLines[n].length&&(i-=this._getWidthOfCharSpacing()),o={top:e,left:t+(0<i?i:0)},\"rtl\"===this.direction&&(o.left*=-1),this.cursorOffsetCache=o,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),r=i.lineIndex,i=0<i.charIndex?i.charIndex-1:0,n=this.getValueOfPropertyAt(r,i,\"fontSize\"),s=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/s,o=t.topOffset,a=this.getValueOfPropertyAt(r,i,\"deltaY\");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,i,\"fill\"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-s/2,o+t.top+a,s,n)},renderSelection:function(t,e){for(var i=(this.inCompositionMode?this.hiddenTextarea:this).selectionStart,r=(this.inCompositionMode?this.hiddenTextarea:this).selectionEnd,n=-1!==this.textAlign.indexOf(\"justify\"),i=this.get2DCursorLocation(i),r=this.get2DCursorLocation(r),s=i.lineIndex,o=r.lineIndex,a=i.charIndex<0?0:i.charIndex,c=r.charIndex<0?0:r.charIndex,h=s;h<=o;h++){var l,u=this._getLineLeftOffset(h)||0,f=this.getHeightOfLine(h),d=0,g=0,u=(h===s&&(d=this.__charBounds[s][a].left),s<=h&&h<o?g=n&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5:h===o&&(g=0===c?this.__charBounds[o][c].left:(l=this._getWidthOfCharSpacing(),this.__charBounds[o][c-1].left+this.__charBounds[o][c-1].width-l)),l=f,(this.lineHeight<1||h===o&&1<this.lineHeight)&&(f/=this.lineHeight),t.left+u+d),g=g-d,d=f,p=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||\"black\",d=1,p=f):e.fillStyle=this.selectionColor,\"rtl\"===this.direction&&(u=this.width-u-g),e.fillRect(u,t.top+t.topOffset+p,g,d),t.topOffset+=l}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,\"fontSize\")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,\"fill\")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=0<t.charIndex?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),fabric.IText.fromObject=function(t,e){var i=fabric.util.stylesFromArray(t.styles,t.text),r=Object.assign({},t,{styles:i});if(o(r),r.styles)for(var n in r.styles)for(var s in r.styles[n])o(r.styles[n][s]);fabric.Object._fromObject(\"IText\",r,e,\"text\")}}(),function(){var u=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on(\"added\",function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))})},initRemovedHandler:function(){var e=this;this.on(\"removed\",function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],fabric.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})},t.on(\"mouse:up\",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off(\"mouse:up\",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,\"_onTickComplete\")},_animateCursor:function(t,e,i,r){var n={isAborted:!1,abort:function(){this.isAborted=!0}};return t.animate(\"_currentCursorOpacity\",e,{duration:i,onComplete:function(){n.isAborted||t[r]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,\"_tick\")},100)},initDelayedCursor:function(t){var e=this,t=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},t)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join(\"\")},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\\S/.test(this._text[i])&&-1<i;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\\n/.test(this._text[i])&&-1<i;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},searchWordBoundary:function(t,e){for(var i=this._text,r=this._reSpace.test(i[t])?t-1:t,n=i[r],s=fabric.reNonWord;!s.test(n)&&0<r&&r<i.length;)n=i[r+=e];return s.test(n)&&(r+=1===e?0:1),r},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),t=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=t,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),t=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=t,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire(\"editing:entered\"),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire(\"text:editing:entered\",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll()),this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on(\"mouse:move\",this.mouseMoveHandler)},mouseMoveHandler:function(t){var e,i;this.__isMousedown&&this.isEditing&&(document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus(),t=this.getSelectionStartFromPointer(t.e),e=this.selectionStart,i=this.selectionEnd,(t===this.__selectionStartOnMouseDown&&e!==i||e!==t&&i!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===e&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection())))},_setEditingProps:function(){this.hoverCursor=\"text\",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor=\"text\"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,i){var r=i.slice(0,t),r=fabric.util.string.graphemeSplit(r).length;if(t===e)return{selectionStart:r,selectionEnd:r};i=i.slice(t,e);return{selectionStart:r,selectionEnd:r+fabric.util.string.graphemeSplit(i).length}},fromGraphemeToStringSelection:function(t,e,i){var r=i.slice(0,t).join(\"\").length;return t===e?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+i.slice(t,e).join(\"\").length}},_updateTextarea:function(){var t;this.cursorOffsetCache={},this.hiddenTextarea&&(this.inCompositionMode||(t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text),this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd),this.updateTextareaPosition())},updateFromTextArea:function(){var t;this.hiddenTextarea&&(this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition())},updateTextareaPosition:function(){var t;this.selectionStart===this.selectionEnd&&(t=this._calcTextareaPosition(),this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top)},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),t=this.get2DCursorLocation(t),i=t.lineIndex,t=t.charIndex,i=this.getValueOfPropertyAt(i,t,\"fontSize\")*this.lineHeight,t=e.leftOffset,r=this.calcTransformMatrix(),t={x:e.left+t,y:e.top+e.topOffset+i},e=this.canvas.getRetinaScaling(),n=this.canvas.upperCanvasEl,s=n.width/e,e=n.height/e,o=s-i,a=e-i,s=n.clientWidth/s,n=n.clientHeight/e,t=fabric.util.transformPoint(t,r);return(t=fabric.util.transformPoint(t,this.canvas.viewportTransform)).x*=s,t.y*=n,t.x<0&&(t.x=0),t.x>o&&(t.x=o),t.y<0&&(t.y=0),t.y>a&&(t.y=a),t.x+=this.canvas._offset.left,t.y+=this.canvas._offset.top,{left:t.x+\"px\",top:t.y+\"px\",fontSize:i+\"px\",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire(\"editing:exited\"),t&&this.fire(\"modified\"),this.canvas&&(this.canvas.off(\"mouse:move\",this.mouseMoveHandler),this.canvas.fire(\"text:editing:exited\",{target:this}),t&&this.canvas.fire(\"object:modified\",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var t=this.get2DCursorLocation(t,!0),e=this.get2DCursorLocation(e,!0),i=t.lineIndex,r=t.charIndex,n=e.lineIndex,s=e.charIndex;if(i!==n){if(this.styles[i])for(l=r;l<this._unwrappedTextLines[i].length;l++)delete this.styles[i][l];if(this.styles[n])for(l=s;l<this._unwrappedTextLines[n].length;l++)(c=this.styles[n][l])&&(this.styles[i]||(this.styles[i]={}),this.styles[i][r+l-s]=c);for(l=i+1;l<=n;l++)delete this.styles[l];this.shiftLineStyles(n,i-n)}else if(this.styles[i]){for(var o,a,c=this.styles[i],h=s-r,l=r;l<s;l++)delete c[l];for(a in this.styles[i])s<=(o=parseInt(a,10))&&(c[o-h]=c[a],delete c[a])}},shiftLineStyles:function(t,e){var i,r=u(this.styles);for(i in this.styles){var n=parseInt(i,10);t<n&&(this.styles[n+e]=r[n],r[n-e]||delete this.styles[n])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,i,r){var n,s,o={},a=!1,c=this._unwrappedTextLines[t].length===e;for(s in this.shiftLineStyles(t,i=i||1),this.styles[t]&&(n=this.styles[t][0===e?e:e-1]),this.styles[t]){var h=parseInt(s,10);e<=h&&(a=!0,o[h-e]=this.styles[t][s],c&&0===e||delete this.styles[t][s])}var l=!1;for(a&&!c&&(this.styles[t+i]=o,l=!0),l&&i--;0<i;)r&&r[i-1]?this.styles[t+i]={0:u(r[i-1])}:n?this.styles[t+i]={0:u(n)}:delete this.styles[t+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(t,e,i,r){this.styles||(this.styles={});var n,s=this.styles[t],o=s?u(s):{};for(n in i=i||1,o){var a=parseInt(n,10);e<=a&&(s[a+i]=o[a],o[a-i]||delete s[a])}if(this._forceClearCache=!0,r)for(;i--;)Object.keys(r[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=u(r[i]));else if(s)for(var c=s[e?e-1:1];c&&i--;)this.styles[t][e+i]=u(c)},insertNewStyleBlock:function(t,e,i){for(var r=this.get2DCursorLocation(e,!0),n=[0],s=0,o=0;o<t.length;o++)\"\\n\"===t[o]?n[++s]=0:n[s]++;0<n[0]&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,n[0],i),i=i&&i.slice(n[0]+1)),s&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+n[0],s);for(o=1;o<s;o++)0<n[o]?this.insertCharStyleObject(r.lineIndex+o,0,n[o],i):i&&this.styles[r.lineIndex+o]&&i[0]&&(this.styles[r.lineIndex+o][0]=i[0]),i=i&&i.slice(n[o]+1);0<n[o]&&this.insertCharStyleObject(r.lineIndex+o,0,n[o],i)},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection=\"left\":\"right\"===this._selectionDirection&&(this._selectionDirection=\"left\",this.selectionEnd=t),this.selectionStart=i):t<i&&i<e?\"right\"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection=\"right\":\"left\"===this._selectionDirection&&(this._selectionDirection=\"right\",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on(\"mousedown\",this.onMouseDown)},onMouseDown:function(t){var e;this.canvas&&(this.__newClickTime=+new Date,e=t.pointer,this.isTripleClick(e)&&(this.fire(\"tripleclick\",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected)},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on(\"mousedblclick\",this.doubleClickHandler),this.on(\"tripleclick\",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on(\"mousedown\",this._mouseDownHandler),this.on(\"mousedown:before\",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on(\"mouseup\",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,r=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,r,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e=this.getLocalPointer(t),i=0,r=0,n=0,s=0,o=0,a=0,c=this._textLines.length;a<c&&n<=e.y;a++)n+=this.getHeightOfLine(a)*this.scaleY,0<(o=a)&&(s+=this._textLines[a-1].length+this.missingNewlineOffset(a-1));r=this._getLineLeftOffset(o)*this.scaleX,t=this._textLines[o],\"rtl\"===this.direction&&(e.x=this.width*this.scaleX-e.x+r);for(var h=0,l=t.length;h<l&&(i=r,(r+=this.__charBounds[o][h].kernedWidth*this.scaleX)<=e.x);h++)s++;return this._getNewSelectionStartFromOffset(e,i,r,s,l)},_getNewSelectionStartFromOffset:function(t,e,i,r,n){e=t.x-e,i-=t.x,t=r+(e<i||i<0?0:1);return t=(t=this.flipX?n-t:t)>this._text.length?this._text.length:t}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement(\"textarea\"),this.hiddenTextarea.setAttribute(\"autocapitalize\",\"off\"),this.hiddenTextarea.setAttribute(\"autocorrect\",\"off\"),this.hiddenTextarea.setAttribute(\"autocomplete\",\"off\"),this.hiddenTextarea.setAttribute(\"spellcheck\",\"false\"),this.hiddenTextarea.setAttribute(\"data-fabric-hiddentextarea\",\"\"),this.hiddenTextarea.setAttribute(\"wrap\",\"off\");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText=\"position: absolute; top: \"+t.top+\"; left: \"+t.left+\"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: \"+t.fontSize+\";\",(this.hiddenTextareaContainer||fabric.document.body).appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,\"keydown\",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,\"keyup\",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,\"input\",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,\"copy\",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,\"cut\",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,\"paste\",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,\"compositionstart\",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,\"compositionupdate\",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,\"compositionend\",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,\"click\",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:\"exitEditing\",27:\"exitEditing\",33:\"moveCursorUp\",34:\"moveCursorDown\",35:\"moveCursorRight\",36:\"moveCursorLeft\",37:\"moveCursorLeft\",38:\"moveCursorUp\",39:\"moveCursorRight\",40:\"moveCursorDown\"},keysMapRtl:{9:\"exitEditing\",27:\"exitEditing\",33:\"moveCursorUp\",34:\"moveCursorDown\",35:\"moveCursorLeft\",36:\"moveCursorRight\",37:\"moveCursorRight\",38:\"moveCursorUp\",39:\"moveCursorLeft\",40:\"moveCursorDown\"},ctrlKeysMapUp:{67:\"copy\",88:\"cut\"},ctrlKeysMapDown:{65:\"selectAll\"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e=\"rtl\"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),33<=t.keyCode&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var i,r,n,t=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,o=t.length,a=o-s,c=this.selectionStart,h=this.selectionEnd,l=c!==h;if(\"\"===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire(\"changed\"),void(this.canvas&&(this.canvas.fire(\"text:changed\",{target:this}),this.canvas.requestRenderAll()));var u=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),f=c>u.selectionStart;l?(i=this._text.slice(c,h),a+=h-c):o<s&&(i=f?this._text.slice(h+a,h):this._text.slice(c,c-a)),o=t.slice(u.selectionEnd-a,u.selectionEnd),i&&i.length&&(o.length&&(r=this.getSelectionStyles(c,c+1,!1),r=o.map(function(){return r[0]})),s=l?(n=c,h):f?(n=h-i.length,h):(n=h)+i.length,this.removeStyleFromTo(n,s)),o.length&&(e&&o.join(\"\")===fabric.copiedText&&!fabric.disableStyleCopyPaste&&(r=fabric.copiedTextStyle),this.insertNewStyleBlock(o,c,r)),this.updateFromTextArea(),this.fire(\"changed\"),this.canvas&&(this.canvas.fire(\"text:changed\",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(fabric.copiedText=this.getSelectedText(),fabric.disableStyleCopyPaste?fabric.copiedTextStyle=null:fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},_getWidthBeforeCursor:function(t,e){var i=this._getLineLeftOffset(t);return 0<e&&(i+=(t=this.__charBounds[t][e-1]).left+t.width),i},getDownCursorOffset:function(t,e){var e=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(e),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-e;t=i.charIndex,e=this._getWidthBeforeCursor(r,t),i=this._getIndexOnLine(r+1,e);return this._textLines[r].slice(t).length+i+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var e=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(e),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-e;t=i.charIndex,e=this._getWidthBeforeCursor(r,t),i=this._getIndexOnLine(r-1,e),e=this._textLines[r].slice(0,t),t=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+i-e.length+(1-t)},_getIndexOnLine:function(t,e){for(var i=this._textLines[t],r=this._getLineLeftOffset(t),n=0,s=0,o=i.length;s<o;s++)if(e<(r+=h=this.__charBounds[t][s].width)){var a=!0,c=r,h=Math.abs(r-h-e),n=Math.abs(c-e)<h?s:s-1;break}return n=a?n:i.length-1},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown(\"Down\",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown(\"Up\",t)},_moveCursorUpOrDown:function(t,e){t=this[\"get\"+t+\"CursorOffset\"](e,\"right\"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(t):this.moveCursorWithoutShift(t),0!==t&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e=\"left\"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight(\"Left\",t)},_move:function(t,e,i){var r;if(t.altKey)r=this[\"findWordBoundary\"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+=\"Left\"===i?-1:1,!0;r=this[\"findLineBoundary\"+i](this[e])}if(void 0!==r&&this[e]!==r)return this[e]=r,!0},_moveLeft:function(t,e){return this._move(t,e,\"Left\")},_moveRight:function(t,e){return this._move(t,e,\"Right\")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection=\"left\",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,\"selectionStart\")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return\"right\"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,\"selectionEnd\"):0!==this.selectionStart?(this._selectionDirection=\"left\",this._moveLeft(t,\"selectionStart\")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight(\"Right\",t)},_moveCursorLeftOrRight:function(t,e){t=\"moveCursor\"+t+\"With\";this._currentCursorOpacity=1,e.shiftKey?t+=\"Shift\":t+=\"outShift\",this[t](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return\"left\"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,\"selectionStart\"):this.selectionEnd!==this._text.length?(this._selectionDirection=\"right\",this._moveRight(t,\"selectionEnd\")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection=\"right\",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,\"selectionStart\"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){this.removeStyleFromTo(t,e=void 0===e?t+1:e),this._text.splice(t,e-t),this.text=this._text.join(\"\"),this.set(\"dirty\",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,i,r){i<(r=void 0===r?i:r)&&this.removeStyleFromTo(i,r);t=fabric.util.string.graphemeSplit(t);this.insertNewStyleBlock(t,i,e),this._text=[].concat(this._text.slice(0,i),t,this._text.slice(r)),this.text=this._text.join(\"\"),this.set(\"dirty\",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=fabric.util.toFixed,c=/  +/g;fabric.util.object.extend(fabric.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(\"\"),'\\t\\t<text xml:space=\"preserve\" ',this.fontFamily?'font-family=\"'+this.fontFamily.replace(/\"/g,\"'\")+'\" ':\"\",this.fontSize?'font-size=\"'+this.fontSize+'\" ':\"\",this.fontStyle?'font-style=\"'+this.fontStyle+'\" ':\"\",this.fontWeight?'font-weight=\"'+this.fontWeight+'\" ':\"\",e?'text-decoration=\"'+e+'\" ':\"\",'style=\"',this.getSvgStyles(!0),'\"',this.addPaintOrder(),\" >\",t.textSpans.join(\"\"),\"</text>\\n\"]},_getSVGTextAndBg:function(t,e){var i,r=[],n=[],s=t;this._setSVGBg(n);for(var o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),(this.textBackgroundColor||this.styleHas(\"textBackgroundColor\",o))&&this._setSVGTextLineBg(n,o,e+i,s),this._setSVGTextLineText(r,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:r,textBgRects:n}},_createTextCharSpan:function(t,e,i,r){var n=t!==t.trim()||t.match(c),n=this.getSvgSpanStyles(e,n),n=n?'style=\"'+n+'\"':\"\",e=e.deltaY,s=\"\",o=fabric.Object.NUM_FRACTION_DIGITS;return e&&(s=' dy=\"'+a(e,o)+'\" '),['<tspan x=\"',a(i,o),'\" y=\"',a(r,o),'\" ',s,n,\">\",fabric.util.string.escapeXml(t),\"</tspan>\"].join(\"\")},_setSVGTextLineText:function(t,e,i,r){var n,s,o,a,c=this.getHeightOfLine(e),h=-1!==this.textAlign.indexOf(\"justify\"),l=\"\",u=0,f=this._textLines[e];r+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var d=0,g=f.length-1;d<=g;d++)a=d===g||this.charSpacing,l+=f[d],o=this.__charBounds[e][d],0===u?(i+=o.kernedWidth-o.width,u+=o.width):u+=o.kernedWidth,(a=h&&!a&&this._reSpaceAndTab.test(f[d])?!0:a)||(n=n||this.getCompleteStyleDeclaration(e,d),s=this.getCompleteStyleDeclaration(e,d+1),a=fabric.util.hasStyleChanged(n,s,!0)),a&&(o=this._getStyleDeclaration(e,d)||{},t.push(this._createTextCharSpan(l,o,i,r)),l=\"\",n=s,i+=u,u=0)},_pushTextBgRect:function(t,e,i,r,n,s){var o=fabric.Object.NUM_FRACTION_DIGITS;t.push(\"\\t\\t<rect \",this._getFillAttributes(e),' x=\"',a(i,o),'\" y=\"',a(r,o),'\" width=\"',a(n,o),'\" height=\"',a(s,o),'\"></rect>\\n')},_setSVGTextLineBg:function(t,e,i,r){for(var n,s,o=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,c=0,h=0,l=this.getValueOfPropertyAt(e,0,\"textBackgroundColor\"),u=0,f=o.length;u<f;u++)n=this.__charBounds[e][u],(s=this.getValueOfPropertyAt(e,u,\"textBackgroundColor\"))!==l?(l&&this._pushTextBgRect(t,l,i+h,r,c,a),h=n.left,c=n.width,l=s):c+=n.kernedWidth;s&&this._pushTextBgRect(t,s,i+h,r,c,a)},_getFillAttributes:function(t){var e=t&&\"string\"==typeof t?new fabric.Color(t):\"\";return e&&e.getSource()&&1!==e.getAlpha()?'opacity=\"'+e.getAlpha()+'\" fill=\"'+e.setAlpha(1).toRgb()+'\"':'fill=\"'+t+'\"'},_getSVGLineTopOffset:function(t){for(var e,i=0,r=0;r<t;r++)i+=this.getHeightOfLine(r);return e=this.getHeightOfLine(r),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return fabric.Object.prototype.getSvgStyles.call(this,t)+\" white-space: pre;\"}})}(),function(t){\"use strict\";var b=t.fabric||(t.fabric={});b.Textbox=b.util.createClass(b.IText,b.Observable,{type:\"textbox\",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:b.Text.prototype._dimensionAffectingProps.concat(\"width\"),_wordJoiners:/[ \\t\\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set(\"width\",this.dynamicMinWidth),-1!==this.textAlign.indexOf(\"justify\")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:\"_dimensionAffectingProps\"}))},_generateStyleMap:function(t){for(var e=0,i=0,r=0,n={},s=0;s<t.graphemeLines.length;s++)\"\\n\"===t.graphemeText[r]&&0<s?(i=0,r++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[r])&&0<s&&(i++,r++),n[s]={line:e,offset:i},r+=t.graphemeLines[s].length,i+=t.graphemeLines[s].length;return n},styleHas:function(t,e){var i;return this._styleMap&&!this.isWrapping&&(i=this._styleMap[e])&&(e=i.line),b.Text.prototype.styleHas.call(this,t,e)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,i,r,n=0,s=!1,o=this._styleMap[t],a=this._styleMap[t+1];for(r in o&&(t=o.line,n=o.offset),a&&(s=a.line===t,e=a.offset),i=void 0===t?this.styles:{line:this.styles[t]})for(var c in i[r])if(n<=c&&(!s||c<e))for(var h in i[r][c])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[t];if(!i)return null;t=i.line,e=i.offset+e}return this.callSuper(\"_getStyleDeclaration\",t,e)},_setStyleDeclaration:function(t,e,i){var r=this._styleMap[t];t=r.line,e=r.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){t=this._styleMap[t];return!!this.styles[t.line]},_setLineStyle:function(t){t=this._styleMap[t];this.styles[t.line]={}},_wrapText:function(t,e){var i,r=[];for(this.isWrapping=!0,i=0;i<t.length;i++)r=r.concat(this._wrapLine(t[i],i,e));return this.isWrapping=!1,r},_measureWord:function(t,e,i){var r,n=0;i=i||0;for(var s=0,o=t.length;s<o;s++)n+=this._getGraphemeBox(t[s],e,s+i,r,!0).kernedWidth,r=t[s];return n},_wrapLine:function(t,e,i,r){var n,s,o=0,a=this.splitByGrapheme,c=[],h=[],l=a?b.util.string.graphemeSplit(t):t.split(this._wordJoiners),u=0,f=a?\"\":\" \",d=0,g=0,p=!0,m=this._getWidthOfCharSpacing(),r=r||0;0===l.length&&l.push([]),i-=r;for(var v=0;v<l.length;v++)n=a?l[v]:b.util.string.graphemeSplit(l[v]),s=this._measureWord(n,e,u),u+=n.length,i<(o+=d+s-m)&&!p?(c.push(h),h=[],o=s,p=!0):o+=m,p||a||h.push(f),h=h.concat(n),d=a?0:this._measureWord([f],e,u),u++,p=!1,g<s&&(g=s);return v&&c.push(h),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-m+r),c},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return!this.splitByGrapheme||this.isEndOfWrapping(t)?1:0},_splitTextIntoLines:function(t){for(var t=b.Text.prototype._splitTextIntoLines.call(this,t),e=this._wrapText(t.lines,this.width),i=new Array(e.length),r=0;r<e.length;r++)i[r]=e[r].join(\"\");return t.lines=i,t.graphemeLines=e,t},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t,e={};for(t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(t in this.styles)e[t]||delete this.styles[t]},toObject:function(t){return this.callSuper(\"toObject\",[\"minWidth\",\"splitByGrapheme\"].concat(t))}}),b.Textbox.fromObject=function(t,e){var i=b.util.stylesFromArray(t.styles,t.text),t=Object.assign({},t,{styles:i});return b.Object._fromObject(\"Textbox\",t,e,\"text\")}}(\"undefined\"!=typeof exports?exports:this),function(){var t=fabric.controlsUtils,e=t.scaleSkewCursorStyleHandler,i=t.scaleCursorStyleHandler,r=t.scalingEqually,n=t.scalingYOrSkewingX,s=t.scalingXOrSkewingY,o=t.scaleOrSkewActionName,a=fabric.Object.prototype.controls;a.ml=new fabric.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),a.mr=new fabric.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),a.mb=new fabric.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:n,getActionName:o}),a.mt=new fabric.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:n,getActionName:o}),a.tl=new fabric.Control({x:-.5,y:-.5,cursorStyleHandler:i,actionHandler:r}),a.tr=new fabric.Control({x:.5,y:-.5,cursorStyleHandler:i,actionHandler:r}),a.bl=new fabric.Control({x:-.5,y:.5,cursorStyleHandler:i,actionHandler:r}),a.br=new fabric.Control({x:.5,y:.5,cursorStyleHandler:i,actionHandler:r}),a.mtr=new fabric.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:\"rotate\"}),fabric.Textbox&&((s=fabric.Textbox.prototype.controls={}).mtr=a.mtr,s.tr=a.tr,s.br=a.br,s.tl=a.tl,s.bl=a.bl,s.mt=a.mt,s.mb=a.mb,s.mr=new fabric.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:\"resizing\"}),s.ml=new fabric.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:\"resizing\"}))}();</script>\n<script>!function(e){\"use strict\";\"function\"==typeof define&&define.amd?define([\"jquery\"],e):\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"jquery\")):e(jQuery)}(function(Ne,De){\"use strict\";var e,qe={beforeShow:a,move:a,change:a,show:a,hide:a,color:!1,flat:!1,type:\"\",showInput:!1,allowEmpty:!0,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!0,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:\"body\",maxSelectionSize:8,locale:\"en\",cancelText:\"cancel\",chooseText:\"choose\",togglePaletteMoreText:\"more\",togglePaletteLessText:\"less\",clearText:\"Clear Color Selection\",noColorSelectedText:\"No Color Selected\",preferredFormat:\"name\",className:\"\",containerClassName:\"\",replacerClassName:\"\",showAlpha:!0,theme:\"sp-light\",palette:[[\"#000000\",\"#444444\",\"#5b5b5b\",\"#999999\",\"#bcbcbc\",\"#eeeeee\",\"#f3f6f4\",\"#ffffff\"],[\"#f44336\",\"#744700\",\"#ce7e00\",\"#8fce00\",\"#2986cc\",\"#16537e\",\"#6a329f\",\"#c90076\"],[\"#f4cccc\",\"#fce5cd\",\"#fff2cc\",\"#d9ead3\",\"#d0e0e3\",\"#cfe2f3\",\"#d9d2e9\",\"#ead1dc\"],[\"#ea9999\",\"#f9cb9c\",\"#ffe599\",\"#b6d7a8\",\"#a2c4c9\",\"#9fc5e8\",\"#b4a7d6\",\"#d5a6bd\"],[\"#e06666\",\"#f6b26b\",\"#ffd966\",\"#93c47d\",\"#76a5af\",\"#6fa8dc\",\"#8e7cc3\",\"#c27ba0\"],[\"#cc0000\",\"#e69138\",\"#f1c232\",\"#6aa84f\",\"#45818e\",\"#3d85c6\",\"#674ea7\",\"#a64d79\"],[\"#990000\",\"#b45f06\",\"#bf9000\",\"#38761d\",\"#134f5c\",\"#0b5394\",\"#351c75\",\"#741b47\"],[\"#660000\",\"#783f04\",\"#7f6000\",\"#274e13\",\"#0c343d\",\"#073763\",\"#20124d\",\"#4c1130\"]],selectionPalette:[],disabled:!1,offset:null},Ie=[],Ve=!!/msie/i.exec(window.navigator.userAgent),We=((e=document.createElement(\"div\").style).cssText=\"background-color:rgba(0,0,0,.5)\",t(e.backgroundColor,\"rgba\")||t(e.backgroundColor,\"hsla\")),Be=[\"<button type='button' class='sp-replacer'>\",\"<span class='sp-preview'><span class='sp-preview-inner'></span></span>\",\"<span class='sp-dd'>&#9660;</span>\",\"</button>\"].join(\"\"),Ke=function(){var e=\"\";if(Ve)for(var t=1;t<=6;t++)e+=\"<div class='sp-\"+t+\"'></div>\";return[\"<div class='sp-container sp-hidden'>\",\"<div class='sp-palette-container'>\",\"<div class='sp-palette sp-thumb sp-cf'></div>\",\"<div class='sp-palette-button-container sp-cf'>\",\"<button type='button' class='sp-palette-toggle'></button>\",\"</div>\",\"</div>\",\"<div class='sp-picker-container'>\",\"<div class='sp-top sp-cf'>\",\"<div class='sp-fill'></div>\",\"<div class='sp-top-inner'>\",\"<div class='sp-color'>\",\"<div class='sp-sat'>\",\"<div class='sp-val'>\",\"<div class='sp-dragger' tabindex='0'></div>\",\"</div>\",\"</div>\",\"</div>\",\"<div class='sp-clear sp-clear-display'>\",\"</div>\",\"<div class='sp-hue'>\",\"<div class='sp-slider' tabindex='0'></div>\",e,\"</div>\",\"</div>\",\"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle' tabindex='0'></div></div></div>\",\"</div>\",\"<div class='sp-input-container sp-cf'>\",\"<input class='sp-input' type='text' spellcheck='false'  />\",\"</div>\",\"<div class='sp-initial sp-thumb sp-cf'></div>\",\"<div class='sp-button-container sp-cf'>\",\"<button type='button' class='sp-cancel'></button>\",\"<button type='button' class='sp-choose'></button>\",\"</div>\",\"</div>\",\"</div>\"].join(\"\")}();function t(e,t){return!!~(\"\"+e).indexOf(t)}function $e(e,t,a,o){for(var r=[],n=0;n<e.length;n++){var s=e[n];if(s){var i=tinycolor(s),l=i.toHsl().l<.5?\"sp-thumb-el sp-thumb-dark\":\"sp-thumb-el sp-thumb-light\";l+=tinycolor.equals(t,s)?\" sp-thumb-active\":\"\";var c=i.toString(o.preferredFormat||\"rgb\"),u=We?\"background-color:\"+i.toRgbString():\"filter:\"+i.toFilter();r.push('<span title=\"'+c+'\" data-color=\"'+i.toRgbString()+'\" class=\"'+l+'\" role=\"button\" tabindex=\"0\"><span class=\"sp-thumb-inner\" style=\"'+u+';\"></span></span>')}else r.push('<span class=\"sp-thumb-el sp-clear-display\" role=\"button\" tabindex=\"0\"><span class=\"sp-clear-palette-only\" style=\"background-color: transparent;\"></span></span>')}return\"<div class='sp-cf \"+a+\"'>\"+r.join(\"\")+\"</div>\"}function n(e,t){var a,o,r,n,h=function(e,t){e.locale=e.locale||window.navigator.language,e.locale&&(e.locale=e.locale.split(\"-\")[0].toLowerCase()),\"en\"!=e.locale&&Ne.spectrum.localization[e.locale]&&(e=Ne.extend({},Ne.spectrum.localization[e.locale],e));var a=Ne.extend({},qe,e);return a.callbacks={move:Ye(a.move,t),change:Ye(a.change,t),show:Ye(a.show,t),hide:Ye(a.hide,t),beforeShow:Ye(a.beforeShow,t)},a}(t,e),s=h.type,d=\"flat\"==s,i=h.showSelectionPalette,l=h.localStorageKey,c=h.theme,u=h.callbacks,f=(a=Oe,function(){var e=this,t=arguments;r&&clearTimeout(n),!r&&n||(n=setTimeout(function(){n=null,a.apply(e,t)},o))}),p=!(o=10),g=!1,b=0,m=0,v=0,x=0,y=0,T=0,w=0,_=0,k=0,P=0,C=1,S=[],M=[],z={},j=h.selectionPalette.slice(0),A=h.maxSelectionSize,R=\"sp-dragging\",F=!1,H=null,L=e.ownerDocument,O=(L.body,Ne(e)),Q=!1,E=Ne(Ke,L).addClass(c),N=E.find(\".sp-picker-container\"),D=E.find(\".sp-color\"),q=E.find(\".sp-dragger\"),I=E.find(\".sp-hue\"),V=E.find(\".sp-slider\"),W=E.find(\".sp-alpha-inner\"),B=E.find(\".sp-alpha\"),K=E.find(\".sp-alpha-handle\"),$=E.find(\".sp-input\"),X=E.find(\".sp-palette\"),Y=E.find(\".sp-initial\"),G=E.find(\".sp-cancel\"),U=E.find(\".sp-clear\"),J=E.find(\".sp-choose\"),Z=E.find(\".sp-palette-toggle\"),ee=O.is(\"input\"),te=(ee&&\"color\"===O.attr(\"type\")&&Ue(),ee&&\"color\"==s),ae=te?Ne(Be).addClass(c).addClass(h.className).addClass(h.replacerClassName):Ne([]),oe=te?ae:O,re=ae.find(\".sp-preview-inner\"),ne=h.color||ee&&O.val(),se=!1,ie=h.preferredFormat,le=!h.showButtons||h.clickoutFiresChange,ce=!ne,ue=h.allowEmpty,fe=null,he=null,de=null,pe=null,ge=O.attr(\"id\");if(ge!==De&&0<ge.length){var be=Ne('label[for=\"'+ge+'\"]');be.length&&be.on(\"click\",function(e){return e.preventDefault(),O.spectrum(\"show\"),!1})}function me(){if(h.showPaletteOnly&&(h.showPalette=!0),Z.text(h.showPaletteOnly?h.togglePaletteMoreText:h.togglePaletteLessText),h.palette){S=h.palette.slice(0),M=Array.isArray(S[0])?S:[S],z={};for(var e=0;e<M.length;e++)for(var t=0;t<M[e].length;t++){var a=tinycolor(M[e][t]).toRgbString();z[a]=!0}h.showPaletteOnly&&!ne&&(ne=\"\"===S[0][0]?S[0][0]:Object.keys(z)[0])}E.toggleClass(\"sp-flat\",d),E.toggleClass(\"sp-input-disabled\",!h.showInput),E.toggleClass(\"sp-alpha-enabled\",h.showAlpha),E.toggleClass(\"sp-clear-enabled\",ue),E.toggleClass(\"sp-buttons-disabled\",!h.showButtons),E.toggleClass(\"sp-palette-buttons-disabled\",!h.togglePaletteOnly),E.toggleClass(\"sp-palette-disabled\",!h.showPalette),E.toggleClass(\"sp-palette-only\",h.showPaletteOnly),E.toggleClass(\"sp-initial-disabled\",!h.showInitial),E.addClass(h.className).addClass(h.containerClassName),Oe()}function ve(){if(l){try{var e=window.localStorage,t=e[l].split(\",#\");1<t.length&&(delete e[l],Ne.each(t,function(e,t){xe(t)}))}catch(e){}try{j=window.localStorage[l].split(\";\")}catch(e){}}}function xe(e){if(i){var t=tinycolor(e).toRgbString();if(!z[t]&&-1===Ne.inArray(t,j))for(j.push(t);j.length>A;)j.shift();if(l)try{window.localStorage[l]=j.join(\";\")}catch(e){}}}function ye(){var a=Ae(),e=Ne.map(M,function(e,t){return $e(e,a,\"sp-palette-row sp-palette-row-\"+t,h)});ve(),j&&e.push($e(function(){var e=[];if(h.showPalette)for(var t=0;t<j.length;t++){var a=tinycolor(j[t]).toRgbString();z[a]||e.push(j[t])}return e.reverse().slice(0,h.maxSelectionSize)}(),a,\"sp-palette-row sp-palette-row-selection\",h)),X.html(e.join(\"\"))}function Te(){if(h.showInitial){var e=se,t=Ae();Y.html($e([e,t],t,\"sp-palette-row-initial\",h))}}function we(){(m<=0||b<=0||x<=0)&&Oe(),g=!0,E.addClass(R),H=null,O.trigger(\"dragstart.spectrum\",[Ae()])}function _e(){g=!1,E.removeClass(R),O.trigger(\"dragstop.spectrum\",[Ae()])}function ke(e){if(F)F=!1;else if(null!==e&&\"\"!==e||!ue){var t=tinycolor(e);t.isValid()?(je(t),Re(),Le()):$.addClass(\"sp-validation-error\")}else je(null),Re(),Le()}function Pe(){var e=Ne.Event(\"beforeShow.spectrum\");p?Oe():(O.trigger(e,[Ae()]),!1===u.beforeShow(Ae())||e.isDefaultPrevented()||(function(){for(var e=0;e<Ie.length;e++)Ie[e]&&Ie[e].hide()}(),p=!0,Ne(L).on(\"keydown.spectrum\",Ce),Ne(L).on(\"click.spectrum\",Se),Ne(window).on(\"resize.spectrum\",f),ae.attr(\"aria-expanded\",!0),ae.addClass(\"sp-active\"),E.removeClass(\"sp-hidden\"),Oe(),Fe(),se=Ae(),Te(),u.show(se),O.trigger(\"show.spectrum\",[se])))}function Ce(e){27===e.keyCode&&Me()}function Se(e){2!=e.button&&(g||(le?Le(!0):ze(),Me()))}function Me(){p&&!d&&(p=!1,Ne(L).off(\"keydown.spectrum\",Ce),Ne(L).off(\"click.spectrum\",Se),Ne(window).off(\"resize.spectrum\",f),ae.attr(\"aria-expanded\",!1),ae.removeClass(\"sp-active\"),E.addClass(\"sp-hidden\"),u.hide(Ae()),O.trigger(\"hide.spectrum\",[Ae()]))}function ze(){je(se,!0),Le(!0)}function je(e,t){var a,o;tinycolor.equals(e,Ae())?Fe():(e&&e!==De||!ue?(ce=!1,o=(a=tinycolor(e)).toHsv(),_=o.h%360/360,k=o.s,P=o.v,C=o.a):ce=!0,Fe(),a&&a.isValid()&&!t&&(ie=h.preferredFormat||a.getFormat()))}function Ae(e){return e=e||{},ue&&ce?null:tinycolor.fromRatio({h:_,s:k,v:P,a:Math.round(1e3*C)/1e3},{format:e.format||ie})}function Re(){Fe(),u.move(Ae()),O.trigger(\"move.spectrum\",[Ae()])}function Fe(){$.removeClass(\"sp-validation-error\"),He();var e=tinycolor.fromRatio({h:_,s:1,v:1});D.css(\"background-color\",e.toHexString());var t=ie;C<1&&(0!==C||\"name\"!==t)&&(\"hex\"!==t&&\"hex3\"!==t&&\"hex6\"!==t&&\"name\"!==t||(t=\"rgb\"));var a=Ae({format:t}),o=\"\";if(re.removeClass(\"sp-clear-display\"),re.css(\"background-color\",\"transparent\"),!a&&ue)re.addClass(\"sp-clear-display\");else{var r=a.toHexString(),n=a.toRgbString();if(We||1===a.alpha?re.css(\"background-color\",n):(re.css(\"background-color\",\"transparent\"),re.css(\"filter\",a.toFilter())),h.showAlpha){var s=a.toRgb();s.a=0;var i=tinycolor(s).toRgbString(),l=\"linear-gradient(left, \"+i+\", \"+r+\")\";Ve?W.css(\"filter\",tinycolor(i).toFilter({gradientType:1},r)):(W.css(\"background\",\"-webkit-\"+l),W.css(\"background\",\"-moz-\"+l),W.css(\"background\",\"-ms-\"+l),W.css(\"background\",\"linear-gradient(to right, \"+i+\", \"+r+\")\"))}o=a.toString(t)}if(h.showInput&&$.val(o),O.val(o),\"text\"==h.type||\"component\"==h.type){var c=a;if(c&&he){var u=c.isLight()||c.getAlpha()<.4?\"black\":\"white\";he.css(\"background-color\",c.toRgbString()).css(\"color\",u)}else he.css(\"background-color\",pe).css(\"color\",de)}h.showPalette&&ye(),Te()}function He(){var e=k,t=P;if(ue&&ce)K.hide(),V.hide(),q.hide();else{K.show(),V.show(),q.show();var a=e*b,o=m-t*m;a=Math.max(-v,Math.min(b-v,a-v)),o=Math.max(-v,Math.min(m-v,o-v)),q.css({top:o+\"px\",left:a+\"px\"});var r=C*y;K.css({left:r-T/2+\"px\"});var n=_*x;V.css({top:n-w+\"px\"})}}function Le(e){var t=Ae(),a=!tinycolor.equals(t,se);t&&(t.toString(ie),xe(t)),e&&a&&(u.change(t),F=!0,O.trigger(\"change\",[t]))}function Oe(){var e,t,a,o,r,n,s,i,l,c,u,f;p&&(b=D.width(),m=D.height(),v=q.height(),I.width(),x=I.height(),w=V.height(),y=B.width(),T=K.width(),d||(E.attr(\"aria-haspopup\",!0),E.css(\"position\",\"absolute\"),h.offset?E.offset(h.offset):E.offset((t=oe,a=(e=E).outerWidth(),o=e.outerHeight(),r=t.outerHeight(),n=e[0].ownerDocument,s=n.documentElement,i=s.clientWidth+Ne(n).scrollLeft(),l=s.clientHeight+Ne(n).scrollTop(),c=t.offset(),u=c.left,f=c.top,f+=r,u-=Math.min(u,i<u+a&&a<i?Math.abs(u+a-i):0),{top:f-=Math.min(f,l<f+o&&o<l?Math.abs(+(o+r)):0),bottom:c.bottom,left:u,right:c.right,width:c.width,height:c.height}))),He(),h.showPalette&&ye(),O.trigger(\"reflow.spectrum\"))}function Qe(){Me(),Q=!0,O.attr(\"disabled\",!0),oe.addClass(\"sp-disabled\")}!function(){if(Ve&&E.find(\"*:not(input)\").attr(\"unselectable\",\"on\"),me(),fe=Ne('<span class=\"sp-original-input-container\"></span>'),[\"margin\"].forEach(function(e){fe.css(e,O.css(e))}),\"block\"==O.css(\"display\")&&fe.css(\"display\",\"flex\"),te)O.after(ae).hide();else if(\"text\"==s)fe.addClass(\"sp-colorize-container\"),O.addClass(\"spectrum sp-colorize\").wrap(fe);else if(\"component\"==s){O.addClass(\"spectrum\").wrap(fe);var e=Ne([\"<div class='sp-colorize-container sp-add-on'>\",\"<div class='sp-colorize'></div> \",\"</div>\"].join(\"\"));e.width(O.outerHeight()+\"px\").css(\"border-radius\",O.css(\"border-radius\")).css(\"border\",O.css(\"border\")),O.addClass(\"with-add-on\").before(e)}if(he=O.parent().find(\".sp-colorize\"),de=he.css(\"color\"),pe=he.css(\"background-color\"),ue||U.hide(),d)O.after(E).hide();else{var t=\"parent\"===h.appendTo?O.parent():Ne(h.appendTo);1!==t.length&&(t=Ne(\"body\")),t.append(E)}function a(e){return e.data&&e.data.ignore?(je(Ne(e.target).closest(\".sp-thumb-el\").data(\"color\")),Re()):(je(Ne(e.target).closest(\".sp-thumb-el\").data(\"color\")),Re(),h.hideAfterPaletteSelect?(Le(!0),Me()):Le()),!1}ve(),oe.on(\"click.spectrum touchstart.spectrum\",function(e){Q||Pe(),e.stopPropagation(),Ne(e.target).is(\"input\")||e.preventDefault()}),!O.is(\":disabled\")&&!0!==h.disabled||Qe(),E.on(\"click\",Xe),E.on(\"keydown\",'div[role=\"button\"]',function(e){13==e.keyCode&&(e.preventDefault(),Ne(this).click())}),[$,O].forEach(function(t){t.on(\"change\",function(){ke(t.val())}),t.on(\"paste\",function(){setTimeout(function(){ke(t.val())},1)}),t.on(\"keydown\",function(e){13==e.keyCode&&(ke(Ne(t).val()),t==O&&Me())})}),G.text(h.cancelText),G.on(\"click.spectrum\",function(e){e.stopPropagation(),e.preventDefault(),ze(),Me()}),U.attr(\"title\",h.clearText),U.on(\"click.spectrum\",function(e){e.stopPropagation(),e.preventDefault(),ce=!0,Re(),d&&Le(!0)}),J.text(h.chooseText),J.on(\"click.spectrum\",function(e){e.stopPropagation(),e.preventDefault(),Ve&&$.is(\":focus\")&&$.trigger(\"change\"),$.hasClass(\"sp-validation-error\")||(Le(!0),Me())}),Z.text(h.showPaletteOnly?h.togglePaletteMoreText:h.togglePaletteLessText),Z.on(\"click.spectrum\",function(e){e.stopPropagation(),e.preventDefault(),h.showPaletteOnly=!h.showPaletteOnly,h.showPaletteOnly||d||E.css(\"left\",\"-=\"+(N.outerWidth(!0)+5)),me()}),Ge(B,function(e,t,a){C=e/y,ce=!1,a.shiftKey&&(C=Math.round(10*C)/10),Re()},we,_e),Ge(I,function(e,t){_=parseFloat(t/x),ce=!1,h.showAlpha||(C=1),Re()},we,_e),Ge(D,function(e,t,a){if(a.shiftKey){if(!H){var o=k*b,r=m-P*m,n=Math.abs(e-o)>Math.abs(t-r);H=n?\"x\":\"y\"}}else H=null;var s=!H||\"y\"===H;H&&\"x\"!==H||(k=parseFloat(e/b)),s&&(P=parseFloat((m-t)/m)),ce=!1,h.showAlpha||(C=1),Re()},we,_e),ne?(je(ne),Fe(),ie=tinycolor(ne).format||h.preferredFormat,xe(ne)):(\"\"===ne&&je(ne),Fe()),d&&Pe();var o=Ve?\"mousedown.spectrum\":\"click.spectrum touchstart.spectrum\";X.on(o,\".sp-thumb-el\",a),Y.on(o,\".sp-thumb-el:nth-child(1)\",{ignore:!0},a)}();var Ee={show:Pe,hide:Me,toggle:function(){(p?Me:Pe)()},reflow:Oe,option:function(e,t){return e===De?Ne.extend({},h):t===De?h[e]:(h[e]=t,\"preferredFormat\"===e&&(ie=h.preferredFormat),void me())},enable:function(){Q=!1,O.attr(\"disabled\",!1),oe.removeClass(\"sp-disabled\")},disable:Qe,offset:function(e){h.offset=e,Oe()},set:function(e){je(e),Le()},get:Ae,destroy:function(){O.show().removeClass(\"spectrum with-add-on sp-colorize\"),oe.off(\"click.spectrum touchstart.spectrum\"),E.remove(),ae.remove(),he&&he.css(\"background-color\",pe).css(\"color\",de);var e=O.closest(\".sp-original-input-container\");0<e.length&&e.after(O).remove(),Ie[Ee.id]=null},container:E};return Ee.id=Ie.push(Ee)-1,Ee}function a(){}function Xe(e){e.stopPropagation()}function Ye(e,t){var a=Array.prototype.slice,o=a.call(arguments,2);return function(){return e.apply(t,o.concat(a.call(arguments)))}}function Ge(s,i,t,e){i=i||function(){},t=t||function(){},e=e||function(){};var l=document,c=!1,u={},f=0,h=0,d=\"ontouchstart\"in window,a={};function p(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function o(e){if(c){if(Ve&&l.documentMode<9&&!e.button)return g();var t=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],a=t&&t.pageX||e.pageX,o=t&&t.pageY||e.pageY,r=Math.max(0,Math.min(a-u.left,h)),n=Math.max(0,Math.min(o-u.top,f));d&&p(e),i.apply(s,[r,n,e])}}function g(){c&&(Ne(l).off(a),Ne(l.body).removeClass(\"sp-dragging\"),setTimeout(function(){e.apply(s,arguments)},0)),c=!1}a.selectstart=p,a.dragstart=p,a[\"touchmove mousemove\"]=o,a[\"touchend mouseup\"]=g,Ne(s).on(\"touchstart mousedown\",function(e){(e.which?3==e.which:2==e.button)||c||!1!==t.apply(s,arguments)&&(c=!0,f=Ne(s).height(),h=Ne(s).width(),u=Ne(s).offset(),Ne(l).on(a),Ne(l.body).addClass(\"sp-dragging\"),o(e),p(e))})}function Ue(){return Ne.fn.spectrum.inputTypeColorSupport()}var s=\"spectrum.id\";Ne.fn.spectrum=function(a,e){if(\"string\"!=typeof a)return this.spectrum(\"destroy\").each(function(){var e=Ne.extend({},Ne(this).data(),a);Ne(this).is(\"input\")?e.flat||\"flat\"==e.type?e.type=\"flat\":\"color\"==Ne(this).attr(\"type\")?e.type=\"color\":e.type=e.type||\"component\":e.type=\"noInput\";var t=n(this,e);Ne(this).data(s,t.id)});var o=this,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=Ie[Ne(this).data(s)];if(e){var t=e[a];if(!t)throw new Error(\"Spectrum: no such method: '\"+a+\"'\");\"get\"==a?o=e.get():\"container\"==a?o=e.container:\"option\"==a?o=e.option.apply(e,r):\"destroy\"==a?(e.destroy(),Ne(this).removeData(s)):t.apply(e,r)}}),o},Ne.fn.spectrum.load=!0,Ne.fn.spectrum.loadOpts={},Ne.fn.spectrum.draggable=Ge,Ne.fn.spectrum.defaults=qe,Ne.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var t=Ne(\"<input type='color'/>\")[0];e._cachedResult=\"color\"===t.type&&\"\"!==t.value}return e._cachedResult},Ne.spectrum={},Ne.spectrum.localization={},Ne.spectrum.palettes={},Ne.fn.spectrum.processNativeColorInputs=function(){var e=Ne(\"input[type=color]\");e.length&&!Ue()&&e.spectrum({preferredFormat:\"hex6\"})},function(){var n=/^[\\s,#]+/,s=/\\s+$/,o=0,c=Math,i=c.round,u=c.min,f=c.max,e=c.random,h=function(e,t){if(t=t||{},(e=e||\"\")instanceof h)return e;if(!(this instanceof h))return new h(e,t);var a=function(e){var t={r:0,g:0,b:0},a=1,o=!1,r=!1;\"string\"==typeof e&&(e=function(e){e=e.replace(n,\"\").replace(s,\"\").toLowerCase();var t,a=!1;if(C[e])e=C[e],a=!0;else if(\"transparent\"==e)return{r:0,g:0,b:0,a:0,format:\"name\"};if(t=Q.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=Q.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=Q.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=Q.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=Q.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=Q.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=Q.hex8.exec(e))return{a:function(e){return A(e)/255}(t[1]),r:A(t[2]),g:A(t[3]),b:A(t[4]),format:a?\"name\":\"hex8\"};if(t=Q.hex6.exec(e))return{r:A(t[1]),g:A(t[2]),b:A(t[3]),format:a?\"name\":\"hex\"};if(t=Q.hex3.exec(e))return{r:A(t[1]+\"\"+t[1]),g:A(t[2]+\"\"+t[2]),b:A(t[3]+\"\"+t[3]),format:a?\"name\":\"hex\"};return!1}(e));\"object\"==typeof e&&(e.hasOwnProperty(\"r\")&&e.hasOwnProperty(\"g\")&&e.hasOwnProperty(\"b\")?(t=function(e,t,a){return{r:255*z(e,255),g:255*z(t,255),b:255*z(a,255)}}(e.r,e.g,e.b),o=!0,r=\"%\"===String(e.r).substr(-1)?\"prgb\":\"rgb\"):e.hasOwnProperty(\"h\")&&e.hasOwnProperty(\"s\")&&e.hasOwnProperty(\"v\")?(e.s=F(e.s),e.v=F(e.v),t=function(e,t,a){e=6*z(e,360),t=z(t,100),a=z(a,100);var o=c.floor(e),r=e-o,n=a*(1-t),s=a*(1-r*t),i=a*(1-(1-r)*t),l=o%6;return{r:255*[a,s,n,n,i,a][l],g:255*[i,a,a,s,n,n][l],b:255*[n,n,i,a,a,s][l]}}(e.h,e.s,e.v),o=!0,r=\"hsv\"):e.hasOwnProperty(\"h\")&&e.hasOwnProperty(\"s\")&&e.hasOwnProperty(\"l\")&&(e.s=F(e.s),e.l=F(e.l),t=function(e,t,a){var o,r,n;function s(e,t,a){return a<0&&(a+=1),1<a&&--a,a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}if(e=z(e,360),t=z(t,100),a=z(a,100),0===t)o=r=n=a;else{var i=a<.5?a*(1+t):a+t-a*t,l=2*a-i;o=s(l,i,e+1/3),r=s(l,i,e),n=s(l,i,e-1/3)}return{r:255*o,g:255*r,b:255*n}}(e.h,e.s,e.l),o=!0,r=\"hsl\"),e.hasOwnProperty(\"a\")&&(a=e.a));return a=M(a),{ok:o,format:e.format||r,r:u(255,f(t.r,0)),g:u(255,f(t.g,0)),b:u(255,f(t.b,0)),a:a}}(e);this._originalInput=e,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=i(1e3*this._a)/1e3,this._format=t.format||a.format,this._gradientType=t.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=a.ok,this._tc_id=o++};function r(e,t,a){e=z(e,255),t=z(t,255),a=z(a,255);var o,r,n=f(e,t,a),s=u(e,t,a),i=(n+s)/2;if(n==s)o=r=0;else{var l=n-s;switch(r=.5<i?l/(2-n-s):l/(n+s),n){case e:o=(t-a)/l+(t<a?6:0);break;case t:o=(a-e)/l+2;break;case a:o=(e-t)/l+4}o/=6}return{h:o,s:r,l:i}}function l(e,t,a){e=z(e,255),t=z(t,255),a=z(a,255);var o,r,n=f(e,t,a),s=u(e,t,a),i=n,l=n-s;if(r=0===n?0:l/n,n==s)o=0;else{switch(n){case e:o=(t-a)/l+(t<a?6:0);break;case t:o=(a-e)/l+2;break;case a:o=(e-t)/l+4}o/=6}return{h:o,s:r,v:i}}function t(e,t,a,o){var r=[R(i(e).toString(16)),R(i(t).toString(16)),R(i(a).toString(16))];return o&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join(\"\")}function d(e,t,a,o){var r;return[R((r=o,Math.round(255*parseFloat(r)).toString(16))),R(i(e).toString(16)),R(i(t).toString(16)),R(i(a).toString(16))].join(\"\")}function a(e,t){t=0===t?0:t||10;var a=h(e).toHsl();return a.s-=t/100,a.s=j(a.s),h(a)}function p(e,t){t=0===t?0:t||10;var a=h(e).toHsl();return a.s+=t/100,a.s=j(a.s),h(a)}function g(e){return h(e).desaturate(100)}function b(e,t){t=0===t?0:t||10;var a=h(e).toHsl();return a.l+=t/100,a.l=j(a.l),h(a)}function m(e,t){t=0===t?0:t||10;var a=h(e).toRgb();return a.r=f(0,u(255,a.r-i(-t/100*255))),a.g=f(0,u(255,a.g-i(-t/100*255))),a.b=f(0,u(255,a.b-i(-t/100*255))),h(a)}function v(e,t){t=0===t?0:t||10;var a=h(e).toHsl();return a.l-=t/100,a.l=j(a.l),h(a)}function x(e,t){var a=h(e).toHsl(),o=(i(a.h)+t)%360;return a.h=o<0?360+o:o,h(a)}function y(e){var t=h(e).toHsl();return t.h=(t.h+180)%360,h(t)}function T(e){var t=h(e).toHsl(),a=t.h;return[h(e),h({h:(a+120)%360,s:t.s,l:t.l}),h({h:(a+240)%360,s:t.s,l:t.l})]}function w(e){var t=h(e).toHsl(),a=t.h;return[h(e),h({h:(a+90)%360,s:t.s,l:t.l}),h({h:(a+180)%360,s:t.s,l:t.l}),h({h:(a+270)%360,s:t.s,l:t.l})]}function _(e){var t=h(e).toHsl(),a=t.h;return[h(e),h({h:(a+72)%360,s:t.s,l:t.l}),h({h:(a+216)%360,s:t.s,l:t.l})]}function k(e,t,a){t=t||6,a=a||30;var o=h(e).toHsl(),r=360/a,n=[h(e)];for(o.h=(o.h-(r*t>>1)+720)%360;--t;)o.h=(o.h+r)%360,n.push(h(o));return n}function P(e,t){t=t||6;for(var a=h(e).toHsv(),o=a.h,r=a.s,n=a.v,s=[],i=1/t;t--;)s.push(h({h:o,s:r,v:n})),n=(n+i)%1;return s}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=M(e),this._roundA=i(1e3*this._a)/1e3,this},toHsv:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=l(this._r,this._g,this._b),t=i(360*e.h),a=i(100*e.s),o=i(100*e.v);return 1==this._a?\"hsv(\"+t+\", \"+a+\"%, \"+o+\"%)\":\"hsva(\"+t+\", \"+a+\"%, \"+o+\"%, \"+this._roundA+\")\"},toHsl:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=r(this._r,this._g,this._b),t=i(360*e.h),a=i(100*e.s),o=i(100*e.l);return 1==this._a?\"hsl(\"+t+\", \"+a+\"%, \"+o+\"%)\":\"hsla(\"+t+\", \"+a+\"%, \"+o+\"%, \"+this._roundA+\")\"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return\"#\"+this.toHex(e)},toHex8:function(){return d(this._r,this._g,this._b,this._a)},toHex8String:function(){return\"#\"+this.toHex8()},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return 1==this._a?\"rgb(\"+i(this._r)+\", \"+i(this._g)+\", \"+i(this._b)+\")\":\"rgba(\"+i(this._r)+\", \"+i(this._g)+\", \"+i(this._b)+\", \"+this._roundA+\")\"},toPercentageRgb:function(){return{r:i(100*z(this._r,255))+\"%\",g:i(100*z(this._g,255))+\"%\",b:i(100*z(this._b,255))+\"%\",a:this._a}},toPercentageRgbString:function(){return 1==this._a?\"rgb(\"+i(100*z(this._r,255))+\"%, \"+i(100*z(this._g,255))+\"%, \"+i(100*z(this._b,255))+\"%)\":\"rgba(\"+i(100*z(this._r,255))+\"%, \"+i(100*z(this._g,255))+\"%, \"+i(100*z(this._b,255))+\"%, \"+this._roundA+\")\"},toName:function(){return 0===this._a?\"transparent\":!(this._a<1)&&(S[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t=\"#\"+d(this._r,this._g,this._b,this._a),a=t,o=this._gradientType?\"GradientType = 1, \":\"\";e&&(a=h(e).toHex8String());return\"progid:DXImageTransform.Microsoft.gradient(\"+o+\"startColorstr=\"+t+\",endColorstr=\"+a+\")\"},toString:function(e){var t=!!e;e=e||this._format;var a=!1,o=this._a<1&&0<=this._a;return t||!o||\"hex\"!==e&&\"hex6\"!==e&&\"hex3\"!==e&&\"name\"!==e?(\"rgb\"===e&&(a=this.toRgbString()),\"prgb\"===e&&(a=this.toPercentageRgbString()),\"hex\"!==e&&\"hex6\"!==e||(a=this.toHexString()),\"hex3\"===e&&(a=this.toHexString(!0)),\"hex8\"===e&&(a=this.toHex8String()),\"name\"===e&&(a=this.toName()),\"hsl\"===e&&(a=this.toHslString()),\"hsv\"===e&&(a=this.toHsvString()),a||this.toHexString()):\"name\"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var a=e.apply(null,[this].concat([].slice.call(t)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(a,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},h.fromRatio=function(e,t){if(\"object\"==typeof e){var a={};for(var o in e)e.hasOwnProperty(o)&&(a[o]=\"a\"===o?e[o]:F(e[o]));e=a}return h(e,t)},h.equals=function(e,t){return!(!e||!t)&&h(e).toRgbString()==h(t).toRgbString()},h.random=function(){return h.fromRatio({r:e(),g:e(),b:e()})},h.mix=function(e,t,a){a=0===a?0:a||50;var o,r=h(e).toRgb(),n=h(t).toRgb(),s=a/100,i=2*s-1,l=n.a-r.a,c=1-(o=((o=i*l==-1?i:(i+l)/(1+i*l))+1)/2),u={r:n.r*o+r.r*c,g:n.g*o+r.g*c,b:n.b*o+r.b*c,a:n.a*s+r.a*(1-s)};return h(u)},h.readability=function(e,t){var a=h(e),o=h(t),r=a.toRgb(),n=o.toRgb(),s=a.getBrightness(),i=o.getBrightness(),l=Math.max(r.r,n.r)-Math.min(r.r,n.r)+Math.max(r.g,n.g)-Math.min(r.g,n.g)+Math.max(r.b,n.b)-Math.min(r.b,n.b);return{brightness:Math.abs(s-i),color:l}},h.isReadable=function(e,t){var a=h.readability(e,t);return 125<a.brightness&&500<a.color},h.mostReadable=function(e,t){for(var a=null,o=0,r=!1,n=0;n<t.length;n++){var s=h.readability(e,t[n]),i=125<s.brightness&&500<s.color,l=s.brightness/125*3+s.color/500;(i&&!r||i&&r&&o<l||!i&&!r&&o<l)&&(r=i,o=l,a=h(t[n]))}return a};var C=h.names={aliceblue:\"f0f8ff\",antiquewhite:\"faebd7\",aqua:\"0ff\",aquamarine:\"7fffd4\",azure:\"f0ffff\",beige:\"f5f5dc\",bisque:\"ffe4c4\",black:\"000\",blanchedalmond:\"ffebcd\",blue:\"00f\",blueviolet:\"8a2be2\",brown:\"a52a2a\",burlywood:\"deb887\",burntsienna:\"ea7e5d\",cadetblue:\"5f9ea0\",chartreuse:\"7fff00\",chocolate:\"d2691e\",coral:\"ff7f50\",cornflowerblue:\"6495ed\",cornsilk:\"fff8dc\",crimson:\"dc143c\",cyan:\"0ff\",darkblue:\"00008b\",darkcyan:\"008b8b\",darkgoldenrod:\"b8860b\",darkgray:\"a9a9a9\",darkgreen:\"006400\",darkgrey:\"a9a9a9\",darkkhaki:\"bdb76b\",darkmagenta:\"8b008b\",darkolivegreen:\"556b2f\",darkorange:\"ff8c00\",darkorchid:\"9932cc\",darkred:\"8b0000\",darksalmon:\"e9967a\",darkseagreen:\"8fbc8f\",darkslateblue:\"483d8b\",darkslategray:\"2f4f4f\",darkslategrey:\"2f4f4f\",darkturquoise:\"00ced1\",darkviolet:\"9400d3\",deeppink:\"ff1493\",deepskyblue:\"00bfff\",dimgray:\"696969\",dimgrey:\"696969\",dodgerblue:\"1e90ff\",firebrick:\"b22222\",floralwhite:\"fffaf0\",forestgreen:\"228b22\",fuchsia:\"f0f\",gainsboro:\"dcdcdc\",ghostwhite:\"f8f8ff\",gold:\"ffd700\",goldenrod:\"daa520\",gray:\"808080\",green:\"008000\",greenyellow:\"adff2f\",grey:\"808080\",honeydew:\"f0fff0\",hotpink:\"ff69b4\",indianred:\"cd5c5c\",indigo:\"4b0082\",ivory:\"fffff0\",khaki:\"f0e68c\",lavender:\"e6e6fa\",lavenderblush:\"fff0f5\",lawngreen:\"7cfc00\",lemonchiffon:\"fffacd\",lightblue:\"add8e6\",lightcoral:\"f08080\",lightcyan:\"e0ffff\",lightgoldenrodyellow:\"fafad2\",lightgray:\"d3d3d3\",lightgreen:\"90ee90\",lightgrey:\"d3d3d3\",lightpink:\"ffb6c1\",lightsalmon:\"ffa07a\",lightseagreen:\"20b2aa\",lightskyblue:\"87cefa\",lightslategray:\"789\",lightslategrey:\"789\",lightsteelblue:\"b0c4de\",lightyellow:\"ffffe0\",lime:\"0f0\",limegreen:\"32cd32\",linen:\"faf0e6\",magenta:\"f0f\",maroon:\"800000\",mediumaquamarine:\"66cdaa\",mediumblue:\"0000cd\",mediumorchid:\"ba55d3\",mediumpurple:\"9370db\",mediumseagreen:\"3cb371\",mediumslateblue:\"7b68ee\",mediumspringgreen:\"00fa9a\",mediumturquoise:\"48d1cc\",mediumvioletred:\"c71585\",midnightblue:\"191970\",mintcream:\"f5fffa\",mistyrose:\"ffe4e1\",moccasin:\"ffe4b5\",navajowhite:\"ffdead\",navy:\"000080\",oldlace:\"fdf5e6\",olive:\"808000\",olivedrab:\"6b8e23\",orange:\"ffa500\",orangered:\"ff4500\",orchid:\"da70d6\",palegoldenrod:\"eee8aa\",palegreen:\"98fb98\",paleturquoise:\"afeeee\",palevioletred:\"db7093\",papayawhip:\"ffefd5\",peachpuff:\"ffdab9\",peru:\"cd853f\",pink:\"ffc0cb\",plum:\"dda0dd\",powderblue:\"b0e0e6\",purple:\"800080\",rebeccapurple:\"663399\",red:\"f00\",rosybrown:\"bc8f8f\",royalblue:\"4169e1\",saddlebrown:\"8b4513\",salmon:\"fa8072\",sandybrown:\"f4a460\",seagreen:\"2e8b57\",seashell:\"fff5ee\",sienna:\"a0522d\",silver:\"c0c0c0\",skyblue:\"87ceeb\",slateblue:\"6a5acd\",slategray:\"708090\",slategrey:\"708090\",snow:\"fffafa\",springgreen:\"00ff7f\",steelblue:\"4682b4\",tan:\"d2b48c\",teal:\"008080\",thistle:\"d8bfd8\",tomato:\"ff6347\",turquoise:\"40e0d0\",violet:\"ee82ee\",wheat:\"f5deb3\",white:\"fff\",whitesmoke:\"f5f5f5\",yellow:\"ff0\",yellowgreen:\"9acd32\"},S=h.hexNames=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}(C);function M(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function z(e,t){var a;\"string\"==typeof(a=e)&&-1!=a.indexOf(\".\")&&1===parseFloat(a)&&(e=\"100%\");var o,r=\"string\"==typeof(o=e)&&-1!=o.indexOf(\"%\");return e=u(t,f(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),c.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function j(e){return u(1,f(0,e))}function A(e){return parseInt(e,16)}function R(e){return 1==e.length?\"0\"+e:\"\"+e}function F(e){return e<=1&&(e=100*e+\"%\"),e}var H,L,O,Q=(L=\"[\\\\s|\\\\(]+(\"+(H=\"(?:[-\\\\+]?\\\\d*\\\\.\\\\d+%?)|(?:[-\\\\+]?\\\\d+%?)\")+\")[,|\\\\s]+(\"+H+\")[,|\\\\s]+(\"+H+\")\\\\s*\\\\)?\",O=\"[\\\\s|\\\\(]+(\"+H+\")[,|\\\\s]+(\"+H+\")[,|\\\\s]+(\"+H+\")[,|\\\\s]+(\"+H+\")\\\\s*\\\\)?\",{rgb:new RegExp(\"rgb\"+L),rgba:new RegExp(\"rgba\"+O),hsl:new RegExp(\"hsl\"+L),hsla:new RegExp(\"hsla\"+O),hsv:new RegExp(\"hsv\"+L),hsva:new RegExp(\"hsva\"+O),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=h}(),Ne(function(){Ne.fn.spectrum.load&&Ne.fn.spectrum.processNativeColorInputs()})}),jQuery.spectrum.localization.ar={cancelText:\"إلغاء\",chooseText:\"إختار\",clearText:\"إرجاع الألوان على ما كانت\",noColorSelectedText:\"لم تختار أي لون\",togglePaletteMoreText:\"أكثر\",togglePaletteLessText:\"أقل\"},jQuery.spectrum.localization.ca={cancelText:\"Cancel·lar\",chooseText:\"Escollir\",clearText:\"Esborrar color seleccionat\",noColorSelectedText:\"Cap color seleccionat\",togglePaletteMoreText:\"Més\",togglePaletteLessText:\"Menys\"},jQuery.spectrum.localization.cs={cancelText:\"zrušit\",chooseText:\"vybrat\",clearText:\"Resetovat výběr barev\",noColorSelectedText:\"Žádná barva nebyla vybrána\",togglePaletteMoreText:\"více\",togglePaletteLessText:\"méně\"},jQuery.spectrum.localization.de={cancelText:\"Abbrechen\",chooseText:\"Wählen\",clearText:\"Farbauswahl zurücksetzen\",noColorSelectedText:\"Keine Farbe ausgewählt\",togglePaletteMoreText:\"Mehr\",togglePaletteLessText:\"Weniger\"},jQuery.spectrum.localization.dk={cancelText:\"annuller\",chooseText:\"Vælg\"},jQuery.spectrum.localization.es={cancelText:\"Cancelar\",chooseText:\"Elegir\",clearText:\"Borrar color seleccionado\",noColorSelectedText:\"Ningún color seleccionado\",togglePaletteMoreText:\"Más\",togglePaletteLessText:\"Menos\"},jQuery.spectrum.localization.et={cancelText:\"Katkesta\",chooseText:\"Vali\",clearText:\"Tühista värvivalik\",noColorSelectedText:\"Ühtki värvi pole valitud\",togglePaletteMoreText:\"Rohkem\",togglePaletteLessText:\"Vähem\"},jQuery.spectrum.localization.fa={cancelText:\"لغو\",chooseText:\"انتخاب\",clearText:\"تنظیم مجدد رنگ\",noColorSelectedText:\"هیچ رنگی انتخاب نشده است!\",togglePaletteMoreText:\"بیشتر\",togglePaletteLessText:\"کمتر\"},jQuery.spectrum.localization.fi={cancelText:\"Kumoa\",chooseText:\"Valitse\"},jQuery.spectrum.localization.fr={cancelText:\"Annuler\",chooseText:\"Valider\",clearText:\"Effacer couleur sélectionnée\",noColorSelectedText:\"Aucune couleur sélectionnée\",togglePaletteMoreText:\"Plus\",togglePaletteLessText:\"Moins\"},jQuery.spectrum.localization.gr={cancelText:\"Ακύρωση\",chooseText:\"Επιλογή\",clearText:\"Καθαρισμός επιλεγμένου χρώματος\",noColorSelectedText:\"Δεν έχει επιλεχθεί κάποιο χρώμα\",togglePaletteMoreText:\"Περισσότερα\",togglePaletteLessText:\"Λιγότερα\"},jQuery.spectrum.localization.he={cancelText:\"בטל בחירה\",chooseText:\"בחר צבע\",clearText:\"אפס בחירה\",noColorSelectedText:\"לא נבחר צבע\",togglePaletteMoreText:\"עוד צבעים\",togglePaletteLessText:\"פחות צבעים\"},jQuery.spectrum.localization.hr={cancelText:\"Odustani\",chooseText:\"Odaberi\",clearText:\"Poništi odabir\",noColorSelectedText:\"Niti jedna boja nije odabrana\",togglePaletteMoreText:\"Više\",togglePaletteLessText:\"Manje\"},jQuery.spectrum.localization.hu={cancelText:\"Mégsem\",chooseText:\"Mentés\",clearText:\"A színválasztás visszaállítása\",noColorSelectedText:\"Nincs szín kijelölve\",togglePaletteMoreText:\"Több\",togglePaletteLessText:\"Kevesebb\"},jQuery.spectrum.localization.id={cancelText:\"Batal\",chooseText:\"Pilih\",clearText:\"Hapus Pilihan Warna\",noColorSelectedText:\"Warna Tidak Dipilih\",togglePaletteMoreText:\"tambah\",togglePaletteLessText:\"kurangi\"},jQuery.spectrum.localization.it={cancelText:\"annulla\",chooseText:\"scegli\",clearText:\"Annulla selezione colore\",noColorSelectedText:\"Nessun colore selezionato\"},jQuery.spectrum.localization.ja={cancelText:\"中止\",chooseText:\"選択\"},jQuery.spectrum.localization.ko={cancelText:\"취소\",chooseText:\"선택\",clearText:\"선택 초기화\",noColorSelectedText:\"선택된 색상 없음\",togglePaletteMoreText:\"더보기\",togglePaletteLessText:\"줄이기\"},jQuery.spectrum.localization.lt={cancelText:\"Atšaukti\",chooseText:\"Pasirinkti\",clearText:\"Išvalyti pasirinkimą\",noColorSelectedText:\"Spalva nepasirinkta\",togglePaletteMoreText:\"Daugiau\",togglePaletteLessText:\"Mažiau\"},jQuery.spectrum.localization[\"nb-no\"]={cancelText:\"Avbryte\",chooseText:\"Velg\",clearText:\"Tilbakestill\",noColorSelectedText:\"Farge er ikke valgt\",togglePaletteMoreText:\"Mer\",togglePaletteLessText:\"Mindre\"},jQuery.spectrum.localization[\"nl-nl\"]={cancelText:\"Annuleer\",chooseText:\"Kies\",clearText:\"Wis kleur selectie\",togglePaletteMoreText:\"Meer\",togglePaletteLessText:\"Minder\"},jQuery.spectrum.localization.pl={cancelText:\"Anuluj\",chooseText:\"Wybierz\",clearText:\"Usuń wybór koloru\",noColorSelectedText:\"Nie wybrano koloru\",togglePaletteMoreText:\"Więcej\",togglePaletteLessText:\"Mniej\"},jQuery.spectrum.localization[\"pt-br\"]={cancelText:\"Cancelar\",chooseText:\"Escolher\",clearText:\"Limpar cor selecionada\",noColorSelectedText:\"Nenhuma cor selecionada\",togglePaletteMoreText:\"Mais\",togglePaletteLessText:\"Menos\"},jQuery.spectrum.localization[\"pt-pt\"]={cancelText:\"Cancelar\",chooseText:\"Escolher\",clearText:\"Limpar cor seleccionada\",noColorSelectedText:\"Nenhuma cor seleccionada\",togglePaletteMoreText:\"Mais\",togglePaletteLessText:\"Menos\"},jQuery.spectrum.localization.ru={cancelText:\"Отмена\",chooseText:\"Выбрать\",clearText:\"Сбросить\",noColorSelectedText:\"Цвет не выбран\",togglePaletteMoreText:\"Ещё\",togglePaletteLessText:\"Скрыть\"},jQuery.spectrum.localization.sv={cancelText:\"Avbryt\",chooseText:\"Välj\"},jQuery.spectrum.localization.tr={cancelText:\"iptal\",chooseText:\"tamam\"},jQuery.spectrum.localization[\"zh-cn\"]={cancelText:\"取消\",chooseText:\"选择\",clearText:\"清除\",togglePaletteMoreText:\"更多选项\",togglePaletteLessText:\"隐藏\",noColorSelectedText:\"尚未选择任何颜色\"},jQuery.spectrum.localization[\"zh-tw\"]={cancelText:\"取消\",chooseText:\"選擇\",clearText:\"清除\",togglePaletteMoreText:\"更多選項\",togglePaletteLessText:\"隱藏\",noColorSelectedText:\"尚未選擇任何顏色\"};</script>\n<script>/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function e(n,t){for(var r=null==n?0:n.length;r--&&t(n[r],r,n)!==!1;);return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return!1;\nreturn!0}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!!(null==n?0:n.length)&&y(n,t,0)>-1}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return!0;return!1}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);\nreturn r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function p(n){return n.split(\"\")}function _(n){return n.match($t)||[]}function v(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,!1}),e}function g(n,t,r,e){for(var u=n.length,i=r+(e?1:-1);e?i--:++i<u;)if(t(n[i],i,n))return i;return-1}function y(n,t,r){return t===t?Z(n,t,r):g(n,b,r)}function d(n,t,r,e){\nfor(var u=r-1,i=n.length;++u<i;)if(e(n[u],t))return u;return-1}function b(n){return n!==n}function w(n,t){var r=null==n?0:n.length;return r?k(n,t)/r:Cn}function m(n){return function(t){return null==t?X:t[n]}}function x(n){return function(t){return null==n?X:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=!1,n):t(r,n,u,i)}),r}function A(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function k(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==X&&(r=r===X?i:r+i);\n}return r}function O(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function I(n,t){return c(t,function(t){return[t,n[t]]})}function R(n){return n?n.slice(0,H(n)+1).replace(Lt,\"\"):n}function z(n){return function(t){return n(t)}}function E(n,t){return c(t,function(t){return n[t]})}function S(n,t){return n.has(t)}function W(n,t){for(var r=-1,e=n.length;++r<e&&y(t,n[r],0)>-1;);return r}function L(n,t){for(var r=n.length;r--&&y(t,n[r],0)>-1;);return r}function C(n,t){for(var r=n.length,e=0;r--;)n[r]===t&&++e;\nreturn e}function U(n){return\"\\\\\"+Yr[n]}function B(n,t){return null==n?X:n[t]}function T(n){return Nr.test(n)}function $(n){return Pr.test(n)}function D(n){for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}function M(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n]}),r}function F(n,t){return function(r){return n(t(r))}}function N(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&o!==cn||(n[r]=cn,i[u++]=r)}return i}function P(n){var t=-1,r=Array(n.size);\nreturn n.forEach(function(n){r[++t]=n}),r}function q(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function Z(n,t,r){for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function K(n,t,r){for(var e=r+1;e--;)if(n[e]===t)return e;return e}function V(n){return T(n)?J(n):_e(n)}function G(n){return T(n)?Y(n):p(n)}function H(n){for(var t=n.length;t--&&Ct.test(n.charAt(t)););return t}function J(n){for(var t=Mr.lastIndex=0;Mr.test(n);)++t;return t}function Y(n){return n.match(Mr)||[];\n}function Q(n){return n.match(Fr)||[]}var X,nn=\"4.17.21\",tn=200,rn=\"Unsupported core-js use. Try https://npms.io/search?q=ponyfill.\",en=\"Expected a function\",un=\"Invalid `variable` option passed into `_.template`\",on=\"__lodash_hash_undefined__\",fn=500,cn=\"__lodash_placeholder__\",an=1,ln=2,sn=4,hn=1,pn=2,_n=1,vn=2,gn=4,yn=8,dn=16,bn=32,wn=64,mn=128,xn=256,jn=512,An=30,kn=\"...\",On=800,In=16,Rn=1,zn=2,En=3,Sn=1/0,Wn=9007199254740991,Ln=1.7976931348623157e308,Cn=NaN,Un=4294967295,Bn=Un-1,Tn=Un>>>1,$n=[[\"ary\",mn],[\"bind\",_n],[\"bindKey\",vn],[\"curry\",yn],[\"curryRight\",dn],[\"flip\",jn],[\"partial\",bn],[\"partialRight\",wn],[\"rearg\",xn]],Dn=\"[object Arguments]\",Mn=\"[object Array]\",Fn=\"[object AsyncFunction]\",Nn=\"[object Boolean]\",Pn=\"[object Date]\",qn=\"[object DOMException]\",Zn=\"[object Error]\",Kn=\"[object Function]\",Vn=\"[object GeneratorFunction]\",Gn=\"[object Map]\",Hn=\"[object Number]\",Jn=\"[object Null]\",Yn=\"[object Object]\",Qn=\"[object Promise]\",Xn=\"[object Proxy]\",nt=\"[object RegExp]\",tt=\"[object Set]\",rt=\"[object String]\",et=\"[object Symbol]\",ut=\"[object Undefined]\",it=\"[object WeakMap]\",ot=\"[object WeakSet]\",ft=\"[object ArrayBuffer]\",ct=\"[object DataView]\",at=\"[object Float32Array]\",lt=\"[object Float64Array]\",st=\"[object Int8Array]\",ht=\"[object Int16Array]\",pt=\"[object Int32Array]\",_t=\"[object Uint8Array]\",vt=\"[object Uint8ClampedArray]\",gt=\"[object Uint16Array]\",yt=\"[object Uint32Array]\",dt=/\\b__p \\+= '';/g,bt=/\\b(__p \\+=) '' \\+/g,wt=/(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g,mt=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>\"']/g,jt=RegExp(mt.source),At=RegExp(xt.source),kt=/<%-([\\s\\S]+?)%>/g,Ot=/<%([\\s\\S]+?)%>/g,It=/<%=([\\s\\S]+?)%>/g,Rt=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,zt=/^\\w*$/,Et=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,St=/[\\\\^$.*+?()[\\]{}|]/g,Wt=RegExp(St.source),Lt=/^\\s+/,Ct=/\\s/,Ut=/\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,Bt=/\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,Tt=/,? & /,$t=/[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g,Dt=/[()=,{}\\[\\]\\/\\s]/,Mt=/\\\\(\\\\)?/g,Ft=/\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g,Nt=/\\w*$/,Pt=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Zt=/^\\[object .+?Constructor\\]$/,Kt=/^0o[0-7]+$/i,Vt=/^(?:0|[1-9]\\d*)$/,Gt=/[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g,Ht=/($^)/,Jt=/['\\n\\r\\u2028\\u2029\\\\]/g,Yt=\"\\\\ud800-\\\\udfff\",Qt=\"\\\\u0300-\\\\u036f\",Xt=\"\\\\ufe20-\\\\ufe2f\",nr=\"\\\\u20d0-\\\\u20ff\",tr=Qt+Xt+nr,rr=\"\\\\u2700-\\\\u27bf\",er=\"a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff\",ur=\"\\\\xac\\\\xb1\\\\xd7\\\\xf7\",ir=\"\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf\",or=\"\\\\u2000-\\\\u206f\",fr=\" \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000\",cr=\"A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde\",ar=\"\\\\ufe0e\\\\ufe0f\",lr=ur+ir+or+fr,sr=\"['\\u2019]\",hr=\"[\"+Yt+\"]\",pr=\"[\"+lr+\"]\",_r=\"[\"+tr+\"]\",vr=\"\\\\d+\",gr=\"[\"+rr+\"]\",yr=\"[\"+er+\"]\",dr=\"[^\"+Yt+lr+vr+rr+er+cr+\"]\",br=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",wr=\"(?:\"+_r+\"|\"+br+\")\",mr=\"[^\"+Yt+\"]\",xr=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",jr=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",Ar=\"[\"+cr+\"]\",kr=\"\\\\u200d\",Or=\"(?:\"+yr+\"|\"+dr+\")\",Ir=\"(?:\"+Ar+\"|\"+dr+\")\",Rr=\"(?:\"+sr+\"(?:d|ll|m|re|s|t|ve))?\",zr=\"(?:\"+sr+\"(?:D|LL|M|RE|S|T|VE))?\",Er=wr+\"?\",Sr=\"[\"+ar+\"]?\",Wr=\"(?:\"+kr+\"(?:\"+[mr,xr,jr].join(\"|\")+\")\"+Sr+Er+\")*\",Lr=\"\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])\",Cr=\"\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])\",Ur=Sr+Er+Wr,Br=\"(?:\"+[gr,xr,jr].join(\"|\")+\")\"+Ur,Tr=\"(?:\"+[mr+_r+\"?\",_r,xr,jr,hr].join(\"|\")+\")\",$r=RegExp(sr,\"g\"),Dr=RegExp(_r,\"g\"),Mr=RegExp(br+\"(?=\"+br+\")|\"+Tr+Ur,\"g\"),Fr=RegExp([Ar+\"?\"+yr+\"+\"+Rr+\"(?=\"+[pr,Ar,\"$\"].join(\"|\")+\")\",Ir+\"+\"+zr+\"(?=\"+[pr,Ar+Or,\"$\"].join(\"|\")+\")\",Ar+\"?\"+Or+\"+\"+Rr,Ar+\"+\"+zr,Cr,Lr,vr,Br].join(\"|\"),\"g\"),Nr=RegExp(\"[\"+kr+Yt+tr+ar+\"]\"),Pr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,qr=[\"Array\",\"Buffer\",\"DataView\",\"Date\",\"Error\",\"Float32Array\",\"Float64Array\",\"Function\",\"Int8Array\",\"Int16Array\",\"Int32Array\",\"Map\",\"Math\",\"Object\",\"Promise\",\"RegExp\",\"Set\",\"String\",\"Symbol\",\"TypeError\",\"Uint8Array\",\"Uint8ClampedArray\",\"Uint16Array\",\"Uint32Array\",\"WeakMap\",\"_\",\"clearTimeout\",\"isFinite\",\"parseInt\",\"setTimeout\"],Zr=-1,Kr={};\nKr[at]=Kr[lt]=Kr[st]=Kr[ht]=Kr[pt]=Kr[_t]=Kr[vt]=Kr[gt]=Kr[yt]=!0,Kr[Dn]=Kr[Mn]=Kr[ft]=Kr[Nn]=Kr[ct]=Kr[Pn]=Kr[Zn]=Kr[Kn]=Kr[Gn]=Kr[Hn]=Kr[Yn]=Kr[nt]=Kr[tt]=Kr[rt]=Kr[it]=!1;var Vr={};Vr[Dn]=Vr[Mn]=Vr[ft]=Vr[ct]=Vr[Nn]=Vr[Pn]=Vr[at]=Vr[lt]=Vr[st]=Vr[ht]=Vr[pt]=Vr[Gn]=Vr[Hn]=Vr[Yn]=Vr[nt]=Vr[tt]=Vr[rt]=Vr[et]=Vr[_t]=Vr[vt]=Vr[gt]=Vr[yt]=!0,Vr[Zn]=Vr[Kn]=Vr[it]=!1;var Gr={\"\\xc0\":\"A\",\"\\xc1\":\"A\",\"\\xc2\":\"A\",\"\\xc3\":\"A\",\"\\xc4\":\"A\",\"\\xc5\":\"A\",\"\\xe0\":\"a\",\"\\xe1\":\"a\",\"\\xe2\":\"a\",\"\\xe3\":\"a\",\"\\xe4\":\"a\",\"\\xe5\":\"a\",\n\"\\xc7\":\"C\",\"\\xe7\":\"c\",\"\\xd0\":\"D\",\"\\xf0\":\"d\",\"\\xc8\":\"E\",\"\\xc9\":\"E\",\"\\xca\":\"E\",\"\\xcb\":\"E\",\"\\xe8\":\"e\",\"\\xe9\":\"e\",\"\\xea\":\"e\",\"\\xeb\":\"e\",\"\\xcc\":\"I\",\"\\xcd\":\"I\",\"\\xce\":\"I\",\"\\xcf\":\"I\",\"\\xec\":\"i\",\"\\xed\":\"i\",\"\\xee\":\"i\",\"\\xef\":\"i\",\"\\xd1\":\"N\",\"\\xf1\":\"n\",\"\\xd2\":\"O\",\"\\xd3\":\"O\",\"\\xd4\":\"O\",\"\\xd5\":\"O\",\"\\xd6\":\"O\",\"\\xd8\":\"O\",\"\\xf2\":\"o\",\"\\xf3\":\"o\",\"\\xf4\":\"o\",\"\\xf5\":\"o\",\"\\xf6\":\"o\",\"\\xf8\":\"o\",\"\\xd9\":\"U\",\"\\xda\":\"U\",\"\\xdb\":\"U\",\"\\xdc\":\"U\",\"\\xf9\":\"u\",\"\\xfa\":\"u\",\"\\xfb\":\"u\",\"\\xfc\":\"u\",\"\\xdd\":\"Y\",\"\\xfd\":\"y\",\"\\xff\":\"y\",\"\\xc6\":\"Ae\",\n\"\\xe6\":\"ae\",\"\\xde\":\"Th\",\"\\xfe\":\"th\",\"\\xdf\":\"ss\",\"\\u0100\":\"A\",\"\\u0102\":\"A\",\"\\u0104\":\"A\",\"\\u0101\":\"a\",\"\\u0103\":\"a\",\"\\u0105\":\"a\",\"\\u0106\":\"C\",\"\\u0108\":\"C\",\"\\u010a\":\"C\",\"\\u010c\":\"C\",\"\\u0107\":\"c\",\"\\u0109\":\"c\",\"\\u010b\":\"c\",\"\\u010d\":\"c\",\"\\u010e\":\"D\",\"\\u0110\":\"D\",\"\\u010f\":\"d\",\"\\u0111\":\"d\",\"\\u0112\":\"E\",\"\\u0114\":\"E\",\"\\u0116\":\"E\",\"\\u0118\":\"E\",\"\\u011a\":\"E\",\"\\u0113\":\"e\",\"\\u0115\":\"e\",\"\\u0117\":\"e\",\"\\u0119\":\"e\",\"\\u011b\":\"e\",\"\\u011c\":\"G\",\"\\u011e\":\"G\",\"\\u0120\":\"G\",\"\\u0122\":\"G\",\"\\u011d\":\"g\",\"\\u011f\":\"g\",\"\\u0121\":\"g\",\n\"\\u0123\":\"g\",\"\\u0124\":\"H\",\"\\u0126\":\"H\",\"\\u0125\":\"h\",\"\\u0127\":\"h\",\"\\u0128\":\"I\",\"\\u012a\":\"I\",\"\\u012c\":\"I\",\"\\u012e\":\"I\",\"\\u0130\":\"I\",\"\\u0129\":\"i\",\"\\u012b\":\"i\",\"\\u012d\":\"i\",\"\\u012f\":\"i\",\"\\u0131\":\"i\",\"\\u0134\":\"J\",\"\\u0135\":\"j\",\"\\u0136\":\"K\",\"\\u0137\":\"k\",\"\\u0138\":\"k\",\"\\u0139\":\"L\",\"\\u013b\":\"L\",\"\\u013d\":\"L\",\"\\u013f\":\"L\",\"\\u0141\":\"L\",\"\\u013a\":\"l\",\"\\u013c\":\"l\",\"\\u013e\":\"l\",\"\\u0140\":\"l\",\"\\u0142\":\"l\",\"\\u0143\":\"N\",\"\\u0145\":\"N\",\"\\u0147\":\"N\",\"\\u014a\":\"N\",\"\\u0144\":\"n\",\"\\u0146\":\"n\",\"\\u0148\":\"n\",\"\\u014b\":\"n\",\"\\u014c\":\"O\",\n\"\\u014e\":\"O\",\"\\u0150\":\"O\",\"\\u014d\":\"o\",\"\\u014f\":\"o\",\"\\u0151\":\"o\",\"\\u0154\":\"R\",\"\\u0156\":\"R\",\"\\u0158\":\"R\",\"\\u0155\":\"r\",\"\\u0157\":\"r\",\"\\u0159\":\"r\",\"\\u015a\":\"S\",\"\\u015c\":\"S\",\"\\u015e\":\"S\",\"\\u0160\":\"S\",\"\\u015b\":\"s\",\"\\u015d\":\"s\",\"\\u015f\":\"s\",\"\\u0161\":\"s\",\"\\u0162\":\"T\",\"\\u0164\":\"T\",\"\\u0166\":\"T\",\"\\u0163\":\"t\",\"\\u0165\":\"t\",\"\\u0167\":\"t\",\"\\u0168\":\"U\",\"\\u016a\":\"U\",\"\\u016c\":\"U\",\"\\u016e\":\"U\",\"\\u0170\":\"U\",\"\\u0172\":\"U\",\"\\u0169\":\"u\",\"\\u016b\":\"u\",\"\\u016d\":\"u\",\"\\u016f\":\"u\",\"\\u0171\":\"u\",\"\\u0173\":\"u\",\"\\u0174\":\"W\",\"\\u0175\":\"w\",\n\"\\u0176\":\"Y\",\"\\u0177\":\"y\",\"\\u0178\":\"Y\",\"\\u0179\":\"Z\",\"\\u017b\":\"Z\",\"\\u017d\":\"Z\",\"\\u017a\":\"z\",\"\\u017c\":\"z\",\"\\u017e\":\"z\",\"\\u0132\":\"IJ\",\"\\u0133\":\"ij\",\"\\u0152\":\"Oe\",\"\\u0153\":\"oe\",\"\\u0149\":\"'n\",\"\\u017f\":\"s\"},Hr={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\"},Jr={\"&amp;\":\"&\",\"&lt;\":\"<\",\"&gt;\":\">\",\"&quot;\":'\"',\"&#39;\":\"'\"},Yr={\"\\\\\":\"\\\\\",\"'\":\"'\",\"\\n\":\"n\",\"\\r\":\"r\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},Qr=parseFloat,Xr=parseInt,ne=\"object\"==typeof global&&global&&global.Object===Object&&global,te=\"object\"==typeof self&&self&&self.Object===Object&&self,re=ne||te||Function(\"return this\")(),ee=\"object\"==typeof exports&&exports&&!exports.nodeType&&exports,ue=ee&&\"object\"==typeof module&&module&&!module.nodeType&&module,ie=ue&&ue.exports===ee,oe=ie&&ne.process,fe=function(){\ntry{var n=ue&&ue.require&&ue.require(\"util\").types;return n?n:oe&&oe.binding&&oe.binding(\"util\")}catch(n){}}(),ce=fe&&fe.isArrayBuffer,ae=fe&&fe.isDate,le=fe&&fe.isMap,se=fe&&fe.isRegExp,he=fe&&fe.isSet,pe=fe&&fe.isTypedArray,_e=m(\"length\"),ve=x(Gr),ge=x(Hr),ye=x(Jr),de=function p(x){function Z(n){if(cc(n)&&!bh(n)&&!(n instanceof Ct)){if(n instanceof Y)return n;if(bl.call(n,\"__wrapped__\"))return eo(n)}return new Y(n)}function J(){}function Y(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,\nthis.__index__=0,this.__values__=X}function Ct(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Un,this.__views__=[]}function $t(){var n=new Ct(this.__wrapped__);return n.__actions__=Tu(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Tu(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Tu(this.__views__),n}function Yt(){if(this.__filtered__){var n=new Ct(this);n.__dir__=-1,\nn.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Qt(){var n=this.__wrapped__.value(),t=this.__dir__,r=bh(n),e=t<0,u=r?n.length:0,i=Oi(0,u,this.__views__),o=i.start,f=i.end,c=f-o,a=e?f:o-1,l=this.__iteratees__,s=l.length,h=0,p=Hl(c,this.__takeCount__);if(!r||!e&&u==c&&p==c)return wu(n,this.__actions__);var _=[];n:for(;c--&&h<p;){a+=t;for(var v=-1,g=n[a];++v<s;){var y=l[v],d=y.iteratee,b=y.type,w=d(g);if(b==zn)g=w;else if(!w){if(b==Rn)continue n;break n}}_[h++]=g}return _}function Xt(n){\nvar t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function nr(){this.__data__=is?is(null):{},this.size=0}function tr(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}function rr(n){var t=this.__data__;if(is){var r=t[n];return r===on?X:r}return bl.call(t,n)?t[n]:X}function er(n){var t=this.__data__;return is?t[n]!==X:bl.call(t,n)}function ur(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=is&&t===X?on:t,this}function ir(n){\nvar t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function or(){this.__data__=[],this.size=0}function fr(n){var t=this.__data__,r=Wr(t,n);return!(r<0)&&(r==t.length-1?t.pop():Ll.call(t,r,1),--this.size,!0)}function cr(n){var t=this.__data__,r=Wr(t,n);return r<0?X:t[r][1]}function ar(n){return Wr(this.__data__,n)>-1}function lr(n,t){var r=this.__data__,e=Wr(r,n);return e<0?(++this.size,r.push([n,t])):r[e][1]=t,this}function sr(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){\nvar e=n[t];this.set(e[0],e[1])}}function hr(){this.size=0,this.__data__={hash:new Xt,map:new(ts||ir),string:new Xt}}function pr(n){var t=xi(this,n).delete(n);return this.size-=t?1:0,t}function _r(n){return xi(this,n).get(n)}function vr(n){return xi(this,n).has(n)}function gr(n,t){var r=xi(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this}function yr(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new sr;++t<r;)this.add(n[t])}function dr(n){return this.__data__.set(n,on),this}function br(n){\nreturn this.__data__.has(n)}function wr(n){this.size=(this.__data__=new ir(n)).size}function mr(){this.__data__=new ir,this.size=0}function xr(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r}function jr(n){return this.__data__.get(n)}function Ar(n){return this.__data__.has(n)}function kr(n,t){var r=this.__data__;if(r instanceof ir){var e=r.__data__;if(!ts||e.length<tn-1)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new sr(e)}return r.set(n,t),this.size=r.size,this}function Or(n,t){\nvar r=bh(n),e=!r&&dh(n),u=!r&&!e&&mh(n),i=!r&&!e&&!u&&Oh(n),o=r||e||u||i,f=o?O(n.length,hl):[],c=f.length;for(var a in n)!t&&!bl.call(n,a)||o&&(\"length\"==a||u&&(\"offset\"==a||\"parent\"==a)||i&&(\"buffer\"==a||\"byteLength\"==a||\"byteOffset\"==a)||Ci(a,c))||f.push(a);return f}function Ir(n){var t=n.length;return t?n[tu(0,t-1)]:X}function Rr(n,t){return Xi(Tu(n),Mr(t,0,n.length))}function zr(n){return Xi(Tu(n))}function Er(n,t,r){(r===X||Gf(n[t],r))&&(r!==X||t in n)||Br(n,t,r)}function Sr(n,t,r){var e=n[t];\nbl.call(n,t)&&Gf(e,r)&&(r!==X||t in n)||Br(n,t,r)}function Wr(n,t){for(var r=n.length;r--;)if(Gf(n[r][0],t))return r;return-1}function Lr(n,t,r,e){return ys(n,function(n,u,i){t(e,n,r(n),i)}),e}function Cr(n,t){return n&&$u(t,Pc(t),n)}function Ur(n,t){return n&&$u(t,qc(t),n)}function Br(n,t,r){\"__proto__\"==t&&Tl?Tl(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function Tr(n,t){for(var r=-1,e=t.length,u=il(e),i=null==n;++r<e;)u[r]=i?X:Mc(n,t[r]);return u}function Mr(n,t,r){return n===n&&(r!==X&&(n=n<=r?n:r),\nt!==X&&(n=n>=t?n:t)),n}function Fr(n,t,e,u,i,o){var f,c=t&an,a=t&ln,l=t&sn;if(e&&(f=i?e(n,u,i,o):e(n)),f!==X)return f;if(!fc(n))return n;var s=bh(n);if(s){if(f=zi(n),!c)return Tu(n,f)}else{var h=zs(n),p=h==Kn||h==Vn;if(mh(n))return Iu(n,c);if(h==Yn||h==Dn||p&&!i){if(f=a||p?{}:Ei(n),!c)return a?Mu(n,Ur(f,n)):Du(n,Cr(f,n))}else{if(!Vr[h])return i?n:{};f=Si(n,h,c)}}o||(o=new wr);var _=o.get(n);if(_)return _;o.set(n,f),kh(n)?n.forEach(function(r){f.add(Fr(r,t,e,r,n,o))}):jh(n)&&n.forEach(function(r,u){\nf.set(u,Fr(r,t,e,u,n,o))});var v=l?a?di:yi:a?qc:Pc,g=s?X:v(n);return r(g||n,function(r,u){g&&(u=r,r=n[u]),Sr(f,u,Fr(r,t,e,u,n,o))}),f}function Nr(n){var t=Pc(n);return function(r){return Pr(r,n,t)}}function Pr(n,t,r){var e=r.length;if(null==n)return!e;for(n=ll(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===X&&!(u in n)||!i(o))return!1}return!0}function Gr(n,t,r){if(\"function\"!=typeof n)throw new pl(en);return Ws(function(){n.apply(X,r)},t)}function Hr(n,t,r,e){var u=-1,i=o,a=!0,l=n.length,s=[],h=t.length;\nif(!l)return s;r&&(t=c(t,z(r))),e?(i=f,a=!1):t.length>=tn&&(i=S,a=!1,t=new yr(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p);if(p=e||0!==p?p:0,a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function Jr(n,t){var r=!0;return ys(n,function(n,e,u){return r=!!t(n,e,u)}),r}function Yr(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===X?o===o&&!bc(o):r(o,f)))var f=o,c=i}return c}function ne(n,t,r,e){var u=n.length;for(r=kc(r),r<0&&(r=-r>u?0:u+r),\ne=e===X||e>u?u:kc(e),e<0&&(e+=u),e=r>e?0:Oc(e);r<e;)n[r++]=t;return n}function te(n,t){var r=[];return ys(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function ee(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=Li),u||(u=[]);++i<o;){var f=n[i];t>0&&r(f)?t>1?ee(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function ue(n,t){return n&&bs(n,t,Pc)}function oe(n,t){return n&&ws(n,t,Pc)}function fe(n,t){return i(t,function(t){return uc(n[t])})}function _e(n,t){t=ku(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[no(t[r++])];\nreturn r&&r==e?n:X}function de(n,t,r){var e=t(n);return bh(n)?e:a(e,r(n))}function we(n){return null==n?n===X?ut:Jn:Bl&&Bl in ll(n)?ki(n):Ki(n)}function me(n,t){return n>t}function xe(n,t){return null!=n&&bl.call(n,t)}function je(n,t){return null!=n&&t in ll(n)}function Ae(n,t,r){return n>=Hl(t,r)&&n<Gl(t,r)}function ke(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=il(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,z(t))),s=Hl(p.length,s),l[a]=!r&&(t||u>=120&&p.length>=120)?new yr(a&&p):X}p=n[0];\nvar _=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],y=t?t(g):g;if(g=r||0!==g?g:0,!(v?S(v,y):e(h,y,r))){for(a=i;--a;){var d=l[a];if(!(d?S(d,y):e(n[a],y,r)))continue n}v&&v.push(y),h.push(g)}}return h}function Oe(n,t,r,e){return ue(n,function(n,u,i){t(e,r(n),u,i)}),e}function Ie(t,r,e){r=ku(r,t),t=Gi(t,r);var u=null==t?t:t[no(jo(r))];return null==u?X:n(u,t,e)}function Re(n){return cc(n)&&we(n)==Dn}function ze(n){return cc(n)&&we(n)==ft}function Ee(n){return cc(n)&&we(n)==Pn}function Se(n,t,r,e,u){\nreturn n===t||(null==n||null==t||!cc(n)&&!cc(t)?n!==n&&t!==t:We(n,t,r,e,Se,u))}function We(n,t,r,e,u,i){var o=bh(n),f=bh(t),c=o?Mn:zs(n),a=f?Mn:zs(t);c=c==Dn?Yn:c,a=a==Dn?Yn:a;var l=c==Yn,s=a==Yn,h=c==a;if(h&&mh(n)){if(!mh(t))return!1;o=!0,l=!1}if(h&&!l)return i||(i=new wr),o||Oh(n)?pi(n,t,r,e,u,i):_i(n,t,c,r,e,u,i);if(!(r&hn)){var p=l&&bl.call(n,\"__wrapped__\"),_=s&&bl.call(t,\"__wrapped__\");if(p||_){var v=p?n.value():n,g=_?t.value():t;return i||(i=new wr),u(v,g,r,e,i)}}return!!h&&(i||(i=new wr),vi(n,t,r,e,u,i));\n}function Le(n){return cc(n)&&zs(n)==Gn}function Ce(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=ll(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1}for(;++u<i;){f=r[u];var c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===X&&!(c in n))return!1}else{var s=new wr;if(e)var h=e(a,l,c,n,t,s);if(!(h===X?Se(l,a,hn|pn,e,s):h))return!1}}return!0}function Ue(n){return!(!fc(n)||Di(n))&&(uc(n)?kl:Zt).test(to(n))}function Be(n){return cc(n)&&we(n)==nt}function Te(n){return cc(n)&&zs(n)==tt;\n}function $e(n){return cc(n)&&oc(n.length)&&!!Kr[we(n)]}function De(n){return\"function\"==typeof n?n:null==n?La:\"object\"==typeof n?bh(n)?Ze(n[0],n[1]):qe(n):Fa(n)}function Me(n){if(!Mi(n))return Vl(n);var t=[];for(var r in ll(n))bl.call(n,r)&&\"constructor\"!=r&&t.push(r);return t}function Fe(n){if(!fc(n))return Zi(n);var t=Mi(n),r=[];for(var e in n)(\"constructor\"!=e||!t&&bl.call(n,e))&&r.push(e);return r}function Ne(n,t){return n<t}function Pe(n,t){var r=-1,e=Hf(n)?il(n.length):[];return ys(n,function(n,u,i){\ne[++r]=t(n,u,i)}),e}function qe(n){var t=ji(n);return 1==t.length&&t[0][2]?Ni(t[0][0],t[0][1]):function(r){return r===n||Ce(r,n,t)}}function Ze(n,t){return Bi(n)&&Fi(t)?Ni(no(n),t):function(r){var e=Mc(r,n);return e===X&&e===t?Nc(r,n):Se(t,e,hn|pn)}}function Ke(n,t,r,e,u){n!==t&&bs(t,function(i,o){if(u||(u=new wr),fc(i))Ve(n,t,o,r,Ke,e,u);else{var f=e?e(Ji(n,o),i,o+\"\",n,t,u):X;f===X&&(f=i),Er(n,o,f)}},qc)}function Ve(n,t,r,e,u,i,o){var f=Ji(n,r),c=Ji(t,r),a=o.get(c);if(a)return Er(n,r,a),X;var l=i?i(f,c,r+\"\",n,t,o):X,s=l===X;\nif(s){var h=bh(c),p=!h&&mh(c),_=!h&&!p&&Oh(c);l=c,h||p||_?bh(f)?l=f:Jf(f)?l=Tu(f):p?(s=!1,l=Iu(c,!0)):_?(s=!1,l=Wu(c,!0)):l=[]:gc(c)||dh(c)?(l=f,dh(f)?l=Rc(f):fc(f)&&!uc(f)||(l=Ei(c))):s=!1}s&&(o.set(c,l),u(l,c,e,i,o),o.delete(c)),Er(n,r,l)}function Ge(n,t){var r=n.length;if(r)return t+=t<0?r:0,Ci(t,r)?n[t]:X}function He(n,t,r){t=t.length?c(t,function(n){return bh(n)?function(t){return _e(t,1===n.length?n[0]:n)}:n}):[La];var e=-1;return t=c(t,z(mi())),A(Pe(n,function(n,r,u){return{criteria:c(t,function(t){\nreturn t(n)}),index:++e,value:n}}),function(n,t){return Cu(n,t,r)})}function Je(n,t){return Ye(n,t,function(t,r){return Nc(n,r)})}function Ye(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=_e(n,o);r(f,o)&&fu(i,ku(o,n),f)}return i}function Qe(n){return function(t){return _e(t,n)}}function Xe(n,t,r,e){var u=e?d:y,i=-1,o=t.length,f=n;for(n===t&&(t=Tu(t)),r&&(f=c(n,z(r)));++i<o;)for(var a=0,l=t[i],s=r?r(l):l;(a=u(f,s,a,e))>-1;)f!==n&&Ll.call(f,a,1),Ll.call(n,a,1);return n}function nu(n,t){for(var r=n?t.length:0,e=r-1;r--;){\nvar u=t[r];if(r==e||u!==i){var i=u;Ci(u)?Ll.call(n,u,1):yu(n,u)}}return n}function tu(n,t){return n+Nl(Ql()*(t-n+1))}function ru(n,t,r,e){for(var u=-1,i=Gl(Fl((t-n)/(r||1)),0),o=il(i);i--;)o[e?i:++u]=n,n+=r;return o}function eu(n,t){var r=\"\";if(!n||t<1||t>Wn)return r;do t%2&&(r+=n),t=Nl(t/2),t&&(n+=n);while(t);return r}function uu(n,t){return Ls(Vi(n,t,La),n+\"\")}function iu(n){return Ir(ra(n))}function ou(n,t){var r=ra(n);return Xi(r,Mr(t,0,r.length))}function fu(n,t,r,e){if(!fc(n))return n;t=ku(t,n);\nfor(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=no(t[u]),a=r;if(\"__proto__\"===c||\"constructor\"===c||\"prototype\"===c)return n;if(u!=o){var l=f[c];a=e?e(l,c,f):X,a===X&&(a=fc(l)?l:Ci(t[u+1])?[]:{})}Sr(f,c,a),f=f[c]}return n}function cu(n){return Xi(ra(n))}function au(n,t,r){var e=-1,u=n.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var i=il(u);++e<u;)i[e]=n[e+t];return i}function lu(n,t){var r;return ys(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function su(n,t,r){\nvar e=0,u=null==n?e:n.length;if(\"number\"==typeof t&&t===t&&u<=Tn){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!bc(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return hu(n,t,La,r)}function hu(n,t,r,e){var u=0,i=null==n?0:n.length;if(0===i)return 0;t=r(t);for(var o=t!==t,f=null===t,c=bc(t),a=t===X;u<i;){var l=Nl((u+i)/2),s=r(n[l]),h=s!==X,p=null===s,_=s===s,v=bc(s);if(o)var g=e||_;else g=a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):!p&&!v&&(e?s<=t:s<t);g?u=l+1:i=l}return Hl(i,Bn)}function pu(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){\nvar o=n[r],f=t?t(o):o;if(!r||!Gf(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function _u(n){return\"number\"==typeof n?n:bc(n)?Cn:+n}function vu(n){if(\"string\"==typeof n)return n;if(bh(n))return c(n,vu)+\"\";if(bc(n))return vs?vs.call(n):\"\";var t=n+\"\";return\"0\"==t&&1/n==-Sn?\"-0\":t}function gu(n,t,r){var e=-1,u=o,i=n.length,c=!0,a=[],l=a;if(r)c=!1,u=f;else if(i>=tn){var s=t?null:ks(n);if(s)return P(s);c=!1,u=S,l=new yr}else l=t?[]:a;n:for(;++e<i;){var h=n[e],p=t?t(h):h;if(h=r||0!==h?h:0,c&&p===p){for(var _=l.length;_--;)if(l[_]===p)continue n;\nt&&l.push(p),a.push(h)}else u(l,p,r)||(l!==a&&l.push(p),a.push(h))}return a}function yu(n,t){return t=ku(t,n),n=Gi(n,t),null==n||delete n[no(jo(t))]}function du(n,t,r,e){return fu(n,t,r(_e(n,t)),e)}function bu(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?au(n,e?0:i,e?i+1:u):au(n,e?i+1:0,e?u:i)}function wu(n,t){var r=n;return r instanceof Ct&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function mu(n,t,r){var e=n.length;if(e<2)return e?gu(n[0]):[];\nfor(var u=-1,i=il(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=Hr(i[u]||o,n[f],t,r));return gu(ee(i,1),t,r)}function xu(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;){r(o,n[e],e<i?t[e]:X)}return o}function ju(n){return Jf(n)?n:[]}function Au(n){return\"function\"==typeof n?n:La}function ku(n,t){return bh(n)?n:Bi(n,t)?[n]:Cs(Ec(n))}function Ou(n,t,r){var e=n.length;return r=r===X?e:r,!t&&r>=e?n:au(n,t,r)}function Iu(n,t){if(t)return n.slice();var r=n.length,e=zl?zl(r):new n.constructor(r);\nreturn n.copy(e),e}function Ru(n){var t=new n.constructor(n.byteLength);return new Rl(t).set(new Rl(n)),t}function zu(n,t){return new n.constructor(t?Ru(n.buffer):n.buffer,n.byteOffset,n.byteLength)}function Eu(n){var t=new n.constructor(n.source,Nt.exec(n));return t.lastIndex=n.lastIndex,t}function Su(n){return _s?ll(_s.call(n)):{}}function Wu(n,t){return new n.constructor(t?Ru(n.buffer):n.buffer,n.byteOffset,n.length)}function Lu(n,t){if(n!==t){var r=n!==X,e=null===n,u=n===n,i=bc(n),o=t!==X,f=null===t,c=t===t,a=bc(t);\nif(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Cu(n,t,r){for(var e=-1,u=n.criteria,i=t.criteria,o=u.length,f=r.length;++e<o;){var c=Lu(u[e],i[e]);if(c){if(e>=f)return c;return c*(\"desc\"==r[e]?-1:1)}}return n.index-t.index}function Uu(n,t,r,e){for(var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Gl(i-o,0),l=il(c+a),s=!e;++f<c;)l[f]=t[f];for(;++u<o;)(s||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];return l;\n}function Bu(n,t,r,e){for(var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Gl(i-f,0),s=il(l+a),h=!e;++u<l;)s[u]=n[u];for(var p=u;++c<a;)s[p+c]=t[c];for(;++o<f;)(h||u<i)&&(s[p+r[o]]=n[u++]);return s}function Tu(n,t){var r=-1,e=n.length;for(t||(t=il(e));++r<e;)t[r]=n[r];return t}function $u(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):X;c===X&&(c=n[f]),u?Br(r,f,c):Sr(r,f,c)}return r}function Du(n,t){return $u(n,Is(n),t)}function Mu(n,t){return $u(n,Rs(n),t);\n}function Fu(n,r){return function(e,u){var i=bh(e)?t:Lr,o=r?r():{};return i(e,n,mi(u,2),o)}}function Nu(n){return uu(function(t,r){var e=-1,u=r.length,i=u>1?r[u-1]:X,o=u>2?r[2]:X;for(i=n.length>3&&\"function\"==typeof i?(u--,i):X,o&&Ui(r[0],r[1],o)&&(i=u<3?X:i,u=1),t=ll(t);++e<u;){var f=r[e];f&&n(t,f,e,i)}return t})}function Pu(n,t){return function(r,e){if(null==r)return r;if(!Hf(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=ll(r);(t?i--:++i<u)&&e(o[i],i,o)!==!1;);return r}}function qu(n){return function(t,r,e){\nfor(var u=-1,i=ll(t),o=e(t),f=o.length;f--;){var c=o[n?f:++u];if(r(i[c],c,i)===!1)break}return t}}function Zu(n,t,r){function e(){return(this&&this!==re&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=t&_n,i=Gu(n);return e}function Ku(n){return function(t){t=Ec(t);var r=T(t)?G(t):X,e=r?r[0]:t.charAt(0),u=r?Ou(r,1).join(\"\"):t.slice(1);return e[n]()+u}}function Vu(n){return function(t){return l(Ra(ca(t).replace($r,\"\")),n,\"\")}}function Gu(n){return function(){var t=arguments;switch(t.length){\ncase 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=gs(n.prototype),e=n.apply(r,t);return fc(e)?e:r}}function Hu(t,r,e){function u(){for(var o=arguments.length,f=il(o),c=o,a=wi(u);c--;)f[c]=arguments[c];var l=o<3&&f[0]!==a&&f[o-1]!==a?[]:N(f,a);\nreturn o-=l.length,o<e?oi(t,r,Qu,u.placeholder,X,f,l,X,X,e-o):n(this&&this!==re&&this instanceof u?i:t,this,f)}var i=Gu(t);return u}function Ju(n){return function(t,r,e){var u=ll(t);if(!Hf(t)){var i=mi(r,3);t=Pc(t),r=function(n){return i(u[n],n,u)}}var o=n(t,r,e);return o>-1?u[i?t[o]:o]:X}}function Yu(n){return gi(function(t){var r=t.length,e=r,u=Y.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if(\"function\"!=typeof i)throw new pl(en);if(u&&!o&&\"wrapper\"==bi(i))var o=new Y([],!0)}for(e=o?e:r;++e<r;){\ni=t[e];var f=bi(i),c=\"wrapper\"==f?Os(i):X;o=c&&$i(c[0])&&c[1]==(mn|yn|bn|xn)&&!c[4].length&&1==c[9]?o[bi(c[0])].apply(o,c[3]):1==i.length&&$i(i)?o[f]():o.thru(i)}return function(){var n=arguments,e=n[0];if(o&&1==n.length&&bh(e))return o.plant(e).value();for(var u=0,i=r?t[u].apply(this,n):e;++u<r;)i=t[u].call(this,i);return i}})}function Qu(n,t,r,e,u,i,o,f,c,a){function l(){for(var y=arguments.length,d=il(y),b=y;b--;)d[b]=arguments[b];if(_)var w=wi(l),m=C(d,w);if(e&&(d=Uu(d,e,u,_)),i&&(d=Bu(d,i,o,_)),\ny-=m,_&&y<a){return oi(n,t,Qu,l.placeholder,r,d,N(d,w),f,c,a-y)}var x=h?r:this,j=p?x[n]:n;return y=d.length,f?d=Hi(d,f):v&&y>1&&d.reverse(),s&&c<y&&(d.length=c),this&&this!==re&&this instanceof l&&(j=g||Gu(j)),j.apply(x,d)}var s=t&mn,h=t&_n,p=t&vn,_=t&(yn|dn),v=t&jn,g=p?X:Gu(n);return l}function Xu(n,t){return function(r,e){return Oe(r,n,t(e),{})}}function ni(n,t){return function(r,e){var u;if(r===X&&e===X)return t;if(r!==X&&(u=r),e!==X){if(u===X)return e;\"string\"==typeof r||\"string\"==typeof e?(r=vu(r),\ne=vu(e)):(r=_u(r),e=_u(e)),u=n(r,e)}return u}}function ti(t){return gi(function(r){return r=c(r,z(mi())),uu(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ri(n,t){t=t===X?\" \":vu(t);var r=t.length;if(r<2)return r?eu(t,n):t;var e=eu(t,Fl(n/V(t)));return T(t)?Ou(G(e),0,n).join(\"\"):e.slice(0,n)}function ei(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=il(l+c),h=this&&this!==re&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];\nreturn n(h,o?e:this,s)}var o=r&_n,f=Gu(t);return i}function ui(n){return function(t,r,e){return e&&\"number\"!=typeof e&&Ui(t,r,e)&&(r=e=X),t=Ac(t),r===X?(r=t,t=0):r=Ac(r),e=e===X?t<r?1:-1:Ac(e),ru(t,r,e,n)}}function ii(n){return function(t,r){return\"string\"==typeof t&&\"string\"==typeof r||(t=Ic(t),r=Ic(r)),n(t,r)}}function oi(n,t,r,e,u,i,o,f,c,a){var l=t&yn,s=l?o:X,h=l?X:o,p=l?i:X,_=l?X:i;t|=l?bn:wn,t&=~(l?wn:bn),t&gn||(t&=~(_n|vn));var v=[n,t,u,p,s,_,h,f,c,a],g=r.apply(X,v);return $i(n)&&Ss(g,v),g.placeholder=e,\nYi(g,n,t)}function fi(n){var t=al[n];return function(n,r){if(n=Ic(n),r=null==r?0:Hl(kc(r),292),r&&Zl(n)){var e=(Ec(n)+\"e\").split(\"e\");return e=(Ec(t(e[0]+\"e\"+(+e[1]+r)))+\"e\").split(\"e\"),+(e[0]+\"e\"+(+e[1]-r))}return t(n)}}function ci(n){return function(t){var r=zs(t);return r==Gn?M(t):r==tt?q(t):I(t,n(t))}}function ai(n,t,r,e,u,i,o,f){var c=t&vn;if(!c&&\"function\"!=typeof n)throw new pl(en);var a=e?e.length:0;if(a||(t&=~(bn|wn),e=u=X),o=o===X?o:Gl(kc(o),0),f=f===X?f:kc(f),a-=u?u.length:0,t&wn){var l=e,s=u;\ne=u=X}var h=c?X:Os(n),p=[n,t,r,e,u,l,s,i,o,f];if(h&&qi(p,h),n=p[0],t=p[1],r=p[2],e=p[3],u=p[4],f=p[9]=p[9]===X?c?0:n.length:Gl(p[9]-a,0),!f&&t&(yn|dn)&&(t&=~(yn|dn)),t&&t!=_n)_=t==yn||t==dn?Hu(n,t,f):t!=bn&&t!=(_n|bn)||u.length?Qu.apply(X,p):ei(n,t,r,e);else var _=Zu(n,t,r);return Yi((h?ms:Ss)(_,p),n,t)}function li(n,t,r,e){return n===X||Gf(n,gl[r])&&!bl.call(e,r)?t:n}function si(n,t,r,e,u,i){return fc(n)&&fc(t)&&(i.set(t,n),Ke(n,t,X,si,i),i.delete(t)),n}function hi(n){return gc(n)?X:n}function pi(n,t,r,e,u,i){\nvar o=r&hn,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return!1;var a=i.get(n),l=i.get(t);if(a&&l)return a==t&&l==n;var s=-1,p=!0,_=r&pn?new yr:X;for(i.set(n,t),i.set(t,n);++s<f;){var v=n[s],g=t[s];if(e)var y=o?e(g,v,s,t,n,i):e(v,g,s,n,t,i);if(y!==X){if(y)continue;p=!1;break}if(_){if(!h(t,function(n,t){if(!S(_,t)&&(v===n||u(v,n,r,e,i)))return _.push(t)})){p=!1;break}}else if(v!==g&&!u(v,g,r,e,i)){p=!1;break}}return i.delete(n),i.delete(t),p}function _i(n,t,r,e,u,i,o){switch(r){case ct:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;\nn=n.buffer,t=t.buffer;case ft:return!(n.byteLength!=t.byteLength||!i(new Rl(n),new Rl(t)));case Nn:case Pn:case Hn:return Gf(+n,+t);case Zn:return n.name==t.name&&n.message==t.message;case nt:case rt:return n==t+\"\";case Gn:var f=M;case tt:var c=e&hn;if(f||(f=P),n.size!=t.size&&!c)return!1;var a=o.get(n);if(a)return a==t;e|=pn,o.set(n,t);var l=pi(f(n),f(t),e,u,i,o);return o.delete(n),l;case et:if(_s)return _s.call(n)==_s.call(t)}return!1}function vi(n,t,r,e,u,i){var o=r&hn,f=yi(n),c=f.length;if(c!=yi(t).length&&!o)return!1;\nfor(var a=c;a--;){var l=f[a];if(!(o?l in t:bl.call(t,l)))return!1}var s=i.get(n),h=i.get(t);if(s&&h)return s==t&&h==n;var p=!0;i.set(n,t),i.set(t,n);for(var _=o;++a<c;){l=f[a];var v=n[l],g=t[l];if(e)var y=o?e(g,v,l,t,n,i):e(v,g,l,n,t,i);if(!(y===X?v===g||u(v,g,r,e,i):y)){p=!1;break}_||(_=\"constructor\"==l)}if(p&&!_){var d=n.constructor,b=t.constructor;d!=b&&\"constructor\"in n&&\"constructor\"in t&&!(\"function\"==typeof d&&d instanceof d&&\"function\"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(n),\ni.delete(t),p}function gi(n){return Ls(Vi(n,X,_o),n+\"\")}function yi(n){return de(n,Pc,Is)}function di(n){return de(n,qc,Rs)}function bi(n){for(var t=n.name+\"\",r=fs[t],e=bl.call(fs,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function wi(n){return(bl.call(Z,\"placeholder\")?Z:n).placeholder}function mi(){var n=Z.iteratee||Ca;return n=n===Ca?De:n,arguments.length?n(arguments[0],arguments[1]):n}function xi(n,t){var r=n.__data__;return Ti(t)?r[\"string\"==typeof t?\"string\":\"hash\"]:r.map;\n}function ji(n){for(var t=Pc(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,Fi(u)]}return t}function Ai(n,t){var r=B(n,t);return Ue(r)?r:X}function ki(n){var t=bl.call(n,Bl),r=n[Bl];try{n[Bl]=X;var e=!0}catch(n){}var u=xl.call(n);return e&&(t?n[Bl]=r:delete n[Bl]),u}function Oi(n,t,r){for(var e=-1,u=r.length;++e<u;){var i=r[e],o=i.size;switch(i.type){case\"drop\":n+=o;break;case\"dropRight\":t-=o;break;case\"take\":t=Hl(t,n+o);break;case\"takeRight\":n=Gl(n,t-o)}}return{start:n,end:t}}function Ii(n){var t=n.match(Bt);\nreturn t?t[1].split(Tt):[]}function Ri(n,t,r){t=ku(t,n);for(var e=-1,u=t.length,i=!1;++e<u;){var o=no(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&oc(u)&&Ci(o,u)&&(bh(n)||dh(n)))}function zi(n){var t=n.length,r=new n.constructor(t);return t&&\"string\"==typeof n[0]&&bl.call(n,\"index\")&&(r.index=n.index,r.input=n.input),r}function Ei(n){return\"function\"!=typeof n.constructor||Mi(n)?{}:gs(El(n))}function Si(n,t,r){var e=n.constructor;switch(t){case ft:return Ru(n);\ncase Nn:case Pn:return new e(+n);case ct:return zu(n,r);case at:case lt:case st:case ht:case pt:case _t:case vt:case gt:case yt:return Wu(n,r);case Gn:return new e;case Hn:case rt:return new e(n);case nt:return Eu(n);case tt:return new e;case et:return Su(n)}}function Wi(n,t){var r=t.length;if(!r)return n;var e=r-1;return t[e]=(r>1?\"& \":\"\")+t[e],t=t.join(r>2?\", \":\" \"),n.replace(Ut,\"{\\n/* [wrapped with \"+t+\"] */\\n\")}function Li(n){return bh(n)||dh(n)||!!(Cl&&n&&n[Cl])}function Ci(n,t){var r=typeof n;\nreturn t=null==t?Wn:t,!!t&&(\"number\"==r||\"symbol\"!=r&&Vt.test(n))&&n>-1&&n%1==0&&n<t}function Ui(n,t,r){if(!fc(r))return!1;var e=typeof t;return!!(\"number\"==e?Hf(r)&&Ci(t,r.length):\"string\"==e&&t in r)&&Gf(r[t],n)}function Bi(n,t){if(bh(n))return!1;var r=typeof n;return!(\"number\"!=r&&\"symbol\"!=r&&\"boolean\"!=r&&null!=n&&!bc(n))||(zt.test(n)||!Rt.test(n)||null!=t&&n in ll(t))}function Ti(n){var t=typeof n;return\"string\"==t||\"number\"==t||\"symbol\"==t||\"boolean\"==t?\"__proto__\"!==n:null===n}function $i(n){\nvar t=bi(n),r=Z[t];if(\"function\"!=typeof r||!(t in Ct.prototype))return!1;if(n===r)return!0;var e=Os(r);return!!e&&n===e[0]}function Di(n){return!!ml&&ml in n}function Mi(n){var t=n&&n.constructor;return n===(\"function\"==typeof t&&t.prototype||gl)}function Fi(n){return n===n&&!fc(n)}function Ni(n,t){return function(r){return null!=r&&(r[n]===t&&(t!==X||n in ll(r)))}}function Pi(n){var t=Cf(n,function(n){return r.size===fn&&r.clear(),n}),r=t.cache;return t}function qi(n,t){var r=n[1],e=t[1],u=r|e,i=u<(_n|vn|mn),o=e==mn&&r==yn||e==mn&&r==xn&&n[7].length<=t[8]||e==(mn|xn)&&t[7].length<=t[8]&&r==yn;\nif(!i&&!o)return n;e&_n&&(n[2]=t[2],u|=r&_n?0:gn);var f=t[3];if(f){var c=n[3];n[3]=c?Uu(c,f,t[4]):f,n[4]=c?N(n[3],cn):t[4]}return f=t[5],f&&(c=n[5],n[5]=c?Bu(c,f,t[6]):f,n[6]=c?N(n[5],cn):t[6]),f=t[7],f&&(n[7]=f),e&mn&&(n[8]=null==n[8]?t[8]:Hl(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Zi(n){var t=[];if(null!=n)for(var r in ll(n))t.push(r);return t}function Ki(n){return xl.call(n)}function Vi(t,r,e){return r=Gl(r===X?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Gl(u.length-r,0),f=il(o);++i<o;)f[i]=u[r+i];\ni=-1;for(var c=il(r+1);++i<r;)c[i]=u[i];return c[r]=e(f),n(t,this,c)}}function Gi(n,t){return t.length<2?n:_e(n,au(t,0,-1))}function Hi(n,t){for(var r=n.length,e=Hl(t.length,r),u=Tu(n);e--;){var i=t[e];n[e]=Ci(i,r)?u[i]:X}return n}function Ji(n,t){if((\"constructor\"!==t||\"function\"!=typeof n[t])&&\"__proto__\"!=t)return n[t]}function Yi(n,t,r){var e=t+\"\";return Ls(n,Wi(e,ro(Ii(e),r)))}function Qi(n){var t=0,r=0;return function(){var e=Jl(),u=In-(e-r);if(r=e,u>0){if(++t>=On)return arguments[0]}else t=0;\nreturn n.apply(X,arguments)}}function Xi(n,t){var r=-1,e=n.length,u=e-1;for(t=t===X?e:t;++r<t;){var i=tu(r,u),o=n[i];n[i]=n[r],n[r]=o}return n.length=t,n}function no(n){if(\"string\"==typeof n||bc(n))return n;var t=n+\"\";return\"0\"==t&&1/n==-Sn?\"-0\":t}function to(n){if(null!=n){try{return dl.call(n)}catch(n){}try{return n+\"\"}catch(n){}}return\"\"}function ro(n,t){return r($n,function(r){var e=\"_.\"+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function eo(n){if(n instanceof Ct)return n.clone();var t=new Y(n.__wrapped__,n.__chain__);\nreturn t.__actions__=Tu(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function uo(n,t,r){t=(r?Ui(n,t,r):t===X)?1:Gl(kc(t),0);var e=null==n?0:n.length;if(!e||t<1)return[];for(var u=0,i=0,o=il(Fl(e/t));u<e;)o[i++]=au(n,u,u+=t);return o}function io(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){var i=n[t];i&&(u[e++]=i)}return u}function oo(){var n=arguments.length;if(!n)return[];for(var t=il(n-1),r=arguments[0],e=n;e--;)t[e-1]=arguments[e];return a(bh(r)?Tu(r):[r],ee(t,1));\n}function fo(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),au(n,t<0?0:t,e)):[]}function co(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),t=e-t,au(n,0,t<0?0:t)):[]}function ao(n,t){return n&&n.length?bu(n,mi(t,3),!0,!0):[]}function lo(n,t){return n&&n.length?bu(n,mi(t,3),!0):[]}function so(n,t,r,e){var u=null==n?0:n.length;return u?(r&&\"number\"!=typeof r&&Ui(n,t,r)&&(r=0,e=u),ne(n,t,r,e)):[]}function ho(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:kc(r);\nreturn u<0&&(u=Gl(e+u,0)),g(n,mi(t,3),u)}function po(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==X&&(u=kc(r),u=r<0?Gl(e+u,0):Hl(u,e-1)),g(n,mi(t,3),u,!0)}function _o(n){return(null==n?0:n.length)?ee(n,1):[]}function vo(n){return(null==n?0:n.length)?ee(n,Sn):[]}function go(n,t){return(null==n?0:n.length)?(t=t===X?1:kc(t),ee(n,t)):[]}function yo(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e}function bo(n){return n&&n.length?n[0]:X}function wo(n,t,r){\nvar e=null==n?0:n.length;if(!e)return-1;var u=null==r?0:kc(r);return u<0&&(u=Gl(e+u,0)),y(n,t,u)}function mo(n){return(null==n?0:n.length)?au(n,0,-1):[]}function xo(n,t){return null==n?\"\":Kl.call(n,t)}function jo(n){var t=null==n?0:n.length;return t?n[t-1]:X}function Ao(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;return r!==X&&(u=kc(r),u=u<0?Gl(e+u,0):Hl(u,e-1)),t===t?K(n,t,u):g(n,b,u,!0)}function ko(n,t){return n&&n.length?Ge(n,kc(t)):X}function Oo(n,t){return n&&n.length&&t&&t.length?Xe(n,t):n;\n}function Io(n,t,r){return n&&n.length&&t&&t.length?Xe(n,t,mi(r,2)):n}function Ro(n,t,r){return n&&n.length&&t&&t.length?Xe(n,t,X,r):n}function zo(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=mi(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),u.push(e))}return nu(n,u),r}function Eo(n){return null==n?n:Xl.call(n)}function So(n,t,r){var e=null==n?0:n.length;return e?(r&&\"number\"!=typeof r&&Ui(n,t,r)?(t=0,r=e):(t=null==t?0:kc(t),r=r===X?e:kc(r)),au(n,t,r)):[]}function Wo(n,t){\nreturn su(n,t)}function Lo(n,t,r){return hu(n,t,mi(r,2))}function Co(n,t){var r=null==n?0:n.length;if(r){var e=su(n,t);if(e<r&&Gf(n[e],t))return e}return-1}function Uo(n,t){return su(n,t,!0)}function Bo(n,t,r){return hu(n,t,mi(r,2),!0)}function To(n,t){if(null==n?0:n.length){var r=su(n,t,!0)-1;if(Gf(n[r],t))return r}return-1}function $o(n){return n&&n.length?pu(n):[]}function Do(n,t){return n&&n.length?pu(n,mi(t,2)):[]}function Mo(n){var t=null==n?0:n.length;return t?au(n,1,t):[]}function Fo(n,t,r){\nreturn n&&n.length?(t=r||t===X?1:kc(t),au(n,0,t<0?0:t)):[]}function No(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===X?1:kc(t),t=e-t,au(n,t<0?0:t,e)):[]}function Po(n,t){return n&&n.length?bu(n,mi(t,3),!1,!0):[]}function qo(n,t){return n&&n.length?bu(n,mi(t,3)):[]}function Zo(n){return n&&n.length?gu(n):[]}function Ko(n,t){return n&&n.length?gu(n,mi(t,2)):[]}function Vo(n,t){return t=\"function\"==typeof t?t:X,n&&n.length?gu(n,X,t):[]}function Go(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){\nif(Jf(n))return t=Gl(n.length,t),!0}),O(t,function(t){return c(n,m(t))})}function Ho(t,r){if(!t||!t.length)return[];var e=Go(t);return null==r?e:c(e,function(t){return n(r,X,t)})}function Jo(n,t){return xu(n||[],t||[],Sr)}function Yo(n,t){return xu(n||[],t||[],fu)}function Qo(n){var t=Z(n);return t.__chain__=!0,t}function Xo(n,t){return t(n),n}function nf(n,t){return t(n)}function tf(){return Qo(this)}function rf(){return new Y(this.value(),this.__chain__)}function ef(){this.__values__===X&&(this.__values__=jc(this.value()));\nvar n=this.__index__>=this.__values__.length;return{done:n,value:n?X:this.__values__[this.__index__++]}}function uf(){return this}function of(n){for(var t,r=this;r instanceof J;){var e=eo(r);e.__index__=0,e.__values__=X,t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function ff(){var n=this.__wrapped__;if(n instanceof Ct){var t=n;return this.__actions__.length&&(t=new Ct(this)),t=t.reverse(),t.__actions__.push({func:nf,args:[Eo],thisArg:X}),new Y(t,this.__chain__)}return this.thru(Eo);\n}function cf(){return wu(this.__wrapped__,this.__actions__)}function af(n,t,r){var e=bh(n)?u:Jr;return r&&Ui(n,t,r)&&(t=X),e(n,mi(t,3))}function lf(n,t){return(bh(n)?i:te)(n,mi(t,3))}function sf(n,t){return ee(yf(n,t),1)}function hf(n,t){return ee(yf(n,t),Sn)}function pf(n,t,r){return r=r===X?1:kc(r),ee(yf(n,t),r)}function _f(n,t){return(bh(n)?r:ys)(n,mi(t,3))}function vf(n,t){return(bh(n)?e:ds)(n,mi(t,3))}function gf(n,t,r,e){n=Hf(n)?n:ra(n),r=r&&!e?kc(r):0;var u=n.length;return r<0&&(r=Gl(u+r,0)),\ndc(n)?r<=u&&n.indexOf(t,r)>-1:!!u&&y(n,t,r)>-1}function yf(n,t){return(bh(n)?c:Pe)(n,mi(t,3))}function df(n,t,r,e){return null==n?[]:(bh(t)||(t=null==t?[]:[t]),r=e?X:r,bh(r)||(r=null==r?[]:[r]),He(n,t,r))}function bf(n,t,r){var e=bh(n)?l:j,u=arguments.length<3;return e(n,mi(t,4),r,u,ys)}function wf(n,t,r){var e=bh(n)?s:j,u=arguments.length<3;return e(n,mi(t,4),r,u,ds)}function mf(n,t){return(bh(n)?i:te)(n,Uf(mi(t,3)))}function xf(n){return(bh(n)?Ir:iu)(n)}function jf(n,t,r){return t=(r?Ui(n,t,r):t===X)?1:kc(t),\n(bh(n)?Rr:ou)(n,t)}function Af(n){return(bh(n)?zr:cu)(n)}function kf(n){if(null==n)return 0;if(Hf(n))return dc(n)?V(n):n.length;var t=zs(n);return t==Gn||t==tt?n.size:Me(n).length}function Of(n,t,r){var e=bh(n)?h:lu;return r&&Ui(n,t,r)&&(t=X),e(n,mi(t,3))}function If(n,t){if(\"function\"!=typeof t)throw new pl(en);return n=kc(n),function(){if(--n<1)return t.apply(this,arguments)}}function Rf(n,t,r){return t=r?X:t,t=n&&null==t?n.length:t,ai(n,mn,X,X,X,X,t)}function zf(n,t){var r;if(\"function\"!=typeof t)throw new pl(en);\nreturn n=kc(n),function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=X),r}}function Ef(n,t,r){t=r?X:t;var e=ai(n,yn,X,X,X,X,X,t);return e.placeholder=Ef.placeholder,e}function Sf(n,t,r){t=r?X:t;var e=ai(n,dn,X,X,X,X,X,t);return e.placeholder=Sf.placeholder,e}function Wf(n,t,r){function e(t){var r=h,e=p;return h=p=X,d=t,v=n.apply(e,r)}function u(n){return d=n,g=Ws(f,t),b?e(n):v}function i(n){var r=n-y,e=n-d,u=t-r;return w?Hl(u,_-e):u}function o(n){var r=n-y,e=n-d;return y===X||r>=t||r<0||w&&e>=_;\n}function f(){var n=fh();return o(n)?c(n):(g=Ws(f,i(n)),X)}function c(n){return g=X,m&&h?e(n):(h=p=X,v)}function a(){g!==X&&As(g),d=0,h=y=p=g=X}function l(){return g===X?v:c(fh())}function s(){var n=fh(),r=o(n);if(h=arguments,p=this,y=n,r){if(g===X)return u(y);if(w)return As(g),g=Ws(f,t),e(y)}return g===X&&(g=Ws(f,t)),v}var h,p,_,v,g,y,d=0,b=!1,w=!1,m=!0;if(\"function\"!=typeof n)throw new pl(en);return t=Ic(t)||0,fc(r)&&(b=!!r.leading,w=\"maxWait\"in r,_=w?Gl(Ic(r.maxWait)||0,t):_,m=\"trailing\"in r?!!r.trailing:m),\ns.cancel=a,s.flush=l,s}function Lf(n){return ai(n,jn)}function Cf(n,t){if(\"function\"!=typeof n||null!=t&&\"function\"!=typeof t)throw new pl(en);var r=function(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;if(i.has(u))return i.get(u);var o=n.apply(this,e);return r.cache=i.set(u,o)||i,o};return r.cache=new(Cf.Cache||sr),r}function Uf(n){if(\"function\"!=typeof n)throw new pl(en);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:\nreturn!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function Bf(n){return zf(2,n)}function Tf(n,t){if(\"function\"!=typeof n)throw new pl(en);return t=t===X?t:kc(t),uu(n,t)}function $f(t,r){if(\"function\"!=typeof t)throw new pl(en);return r=null==r?0:Gl(kc(r),0),uu(function(e){var u=e[r],i=Ou(e,0,r);return u&&a(i,u),n(t,this,i)})}function Df(n,t,r){var e=!0,u=!0;if(\"function\"!=typeof n)throw new pl(en);return fc(r)&&(e=\"leading\"in r?!!r.leading:e,u=\"trailing\"in r?!!r.trailing:u),\nWf(n,t,{leading:e,maxWait:t,trailing:u})}function Mf(n){return Rf(n,1)}function Ff(n,t){return ph(Au(t),n)}function Nf(){if(!arguments.length)return[];var n=arguments[0];return bh(n)?n:[n]}function Pf(n){return Fr(n,sn)}function qf(n,t){return t=\"function\"==typeof t?t:X,Fr(n,sn,t)}function Zf(n){return Fr(n,an|sn)}function Kf(n,t){return t=\"function\"==typeof t?t:X,Fr(n,an|sn,t)}function Vf(n,t){return null==t||Pr(n,t,Pc(t))}function Gf(n,t){return n===t||n!==n&&t!==t}function Hf(n){return null!=n&&oc(n.length)&&!uc(n);\n}function Jf(n){return cc(n)&&Hf(n)}function Yf(n){return n===!0||n===!1||cc(n)&&we(n)==Nn}function Qf(n){return cc(n)&&1===n.nodeType&&!gc(n)}function Xf(n){if(null==n)return!0;if(Hf(n)&&(bh(n)||\"string\"==typeof n||\"function\"==typeof n.splice||mh(n)||Oh(n)||dh(n)))return!n.length;var t=zs(n);if(t==Gn||t==tt)return!n.size;if(Mi(n))return!Me(n).length;for(var r in n)if(bl.call(n,r))return!1;return!0}function nc(n,t){return Se(n,t)}function tc(n,t,r){r=\"function\"==typeof r?r:X;var e=r?r(n,t):X;return e===X?Se(n,t,X,r):!!e;\n}function rc(n){if(!cc(n))return!1;var t=we(n);return t==Zn||t==qn||\"string\"==typeof n.message&&\"string\"==typeof n.name&&!gc(n)}function ec(n){return\"number\"==typeof n&&Zl(n)}function uc(n){if(!fc(n))return!1;var t=we(n);return t==Kn||t==Vn||t==Fn||t==Xn}function ic(n){return\"number\"==typeof n&&n==kc(n)}function oc(n){return\"number\"==typeof n&&n>-1&&n%1==0&&n<=Wn}function fc(n){var t=typeof n;return null!=n&&(\"object\"==t||\"function\"==t)}function cc(n){return null!=n&&\"object\"==typeof n}function ac(n,t){\nreturn n===t||Ce(n,t,ji(t))}function lc(n,t,r){return r=\"function\"==typeof r?r:X,Ce(n,t,ji(t),r)}function sc(n){return vc(n)&&n!=+n}function hc(n){if(Es(n))throw new fl(rn);return Ue(n)}function pc(n){return null===n}function _c(n){return null==n}function vc(n){return\"number\"==typeof n||cc(n)&&we(n)==Hn}function gc(n){if(!cc(n)||we(n)!=Yn)return!1;var t=El(n);if(null===t)return!0;var r=bl.call(t,\"constructor\")&&t.constructor;return\"function\"==typeof r&&r instanceof r&&dl.call(r)==jl}function yc(n){\nreturn ic(n)&&n>=-Wn&&n<=Wn}function dc(n){return\"string\"==typeof n||!bh(n)&&cc(n)&&we(n)==rt}function bc(n){return\"symbol\"==typeof n||cc(n)&&we(n)==et}function wc(n){return n===X}function mc(n){return cc(n)&&zs(n)==it}function xc(n){return cc(n)&&we(n)==ot}function jc(n){if(!n)return[];if(Hf(n))return dc(n)?G(n):Tu(n);if(Ul&&n[Ul])return D(n[Ul]());var t=zs(n);return(t==Gn?M:t==tt?P:ra)(n)}function Ac(n){if(!n)return 0===n?n:0;if(n=Ic(n),n===Sn||n===-Sn){return(n<0?-1:1)*Ln}return n===n?n:0}function kc(n){\nvar t=Ac(n),r=t%1;return t===t?r?t-r:t:0}function Oc(n){return n?Mr(kc(n),0,Un):0}function Ic(n){if(\"number\"==typeof n)return n;if(bc(n))return Cn;if(fc(n)){var t=\"function\"==typeof n.valueOf?n.valueOf():n;n=fc(t)?t+\"\":t}if(\"string\"!=typeof n)return 0===n?n:+n;n=R(n);var r=qt.test(n);return r||Kt.test(n)?Xr(n.slice(2),r?2:8):Pt.test(n)?Cn:+n}function Rc(n){return $u(n,qc(n))}function zc(n){return n?Mr(kc(n),-Wn,Wn):0===n?n:0}function Ec(n){return null==n?\"\":vu(n)}function Sc(n,t){var r=gs(n);return null==t?r:Cr(r,t);\n}function Wc(n,t){return v(n,mi(t,3),ue)}function Lc(n,t){return v(n,mi(t,3),oe)}function Cc(n,t){return null==n?n:bs(n,mi(t,3),qc)}function Uc(n,t){return null==n?n:ws(n,mi(t,3),qc)}function Bc(n,t){return n&&ue(n,mi(t,3))}function Tc(n,t){return n&&oe(n,mi(t,3))}function $c(n){return null==n?[]:fe(n,Pc(n))}function Dc(n){return null==n?[]:fe(n,qc(n))}function Mc(n,t,r){var e=null==n?X:_e(n,t);return e===X?r:e}function Fc(n,t){return null!=n&&Ri(n,t,xe)}function Nc(n,t){return null!=n&&Ri(n,t,je);\n}function Pc(n){return Hf(n)?Or(n):Me(n)}function qc(n){return Hf(n)?Or(n,!0):Fe(n)}function Zc(n,t){var r={};return t=mi(t,3),ue(n,function(n,e,u){Br(r,t(n,e,u),n)}),r}function Kc(n,t){var r={};return t=mi(t,3),ue(n,function(n,e,u){Br(r,e,t(n,e,u))}),r}function Vc(n,t){return Gc(n,Uf(mi(t)))}function Gc(n,t){if(null==n)return{};var r=c(di(n),function(n){return[n]});return t=mi(t),Ye(n,r,function(n,r){return t(n,r[0])})}function Hc(n,t,r){t=ku(t,n);var e=-1,u=t.length;for(u||(u=1,n=X);++e<u;){var i=null==n?X:n[no(t[e])];\ni===X&&(e=u,i=r),n=uc(i)?i.call(n):i}return n}function Jc(n,t,r){return null==n?n:fu(n,t,r)}function Yc(n,t,r,e){return e=\"function\"==typeof e?e:X,null==n?n:fu(n,t,r,e)}function Qc(n,t,e){var u=bh(n),i=u||mh(n)||Oh(n);if(t=mi(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:fc(n)&&uc(o)?gs(El(n)):{}}return(i?r:ue)(n,function(n,r,u){return t(e,n,r,u)}),e}function Xc(n,t){return null==n||yu(n,t)}function na(n,t,r){return null==n?n:du(n,t,Au(r))}function ta(n,t,r,e){return e=\"function\"==typeof e?e:X,\nnull==n?n:du(n,t,Au(r),e)}function ra(n){return null==n?[]:E(n,Pc(n))}function ea(n){return null==n?[]:E(n,qc(n))}function ua(n,t,r){return r===X&&(r=t,t=X),r!==X&&(r=Ic(r),r=r===r?r:0),t!==X&&(t=Ic(t),t=t===t?t:0),Mr(Ic(n),t,r)}function ia(n,t,r){return t=Ac(t),r===X?(r=t,t=0):r=Ac(r),n=Ic(n),Ae(n,t,r)}function oa(n,t,r){if(r&&\"boolean\"!=typeof r&&Ui(n,t,r)&&(t=r=X),r===X&&(\"boolean\"==typeof t?(r=t,t=X):\"boolean\"==typeof n&&(r=n,n=X)),n===X&&t===X?(n=0,t=1):(n=Ac(n),t===X?(t=n,n=0):t=Ac(t)),n>t){\nvar e=n;n=t,t=e}if(r||n%1||t%1){var u=Ql();return Hl(n+u*(t-n+Qr(\"1e-\"+((u+\"\").length-1))),t)}return tu(n,t)}function fa(n){return Qh(Ec(n).toLowerCase())}function ca(n){return n=Ec(n),n&&n.replace(Gt,ve).replace(Dr,\"\")}function aa(n,t,r){n=Ec(n),t=vu(t);var e=n.length;r=r===X?e:Mr(kc(r),0,e);var u=r;return r-=t.length,r>=0&&n.slice(r,u)==t}function la(n){return n=Ec(n),n&&At.test(n)?n.replace(xt,ge):n}function sa(n){return n=Ec(n),n&&Wt.test(n)?n.replace(St,\"\\\\$&\"):n}function ha(n,t,r){n=Ec(n),t=kc(t);\nvar e=t?V(n):0;if(!t||e>=t)return n;var u=(t-e)/2;return ri(Nl(u),r)+n+ri(Fl(u),r)}function pa(n,t,r){n=Ec(n),t=kc(t);var e=t?V(n):0;return t&&e<t?n+ri(t-e,r):n}function _a(n,t,r){n=Ec(n),t=kc(t);var e=t?V(n):0;return t&&e<t?ri(t-e,r)+n:n}function va(n,t,r){return r||null==t?t=0:t&&(t=+t),Yl(Ec(n).replace(Lt,\"\"),t||0)}function ga(n,t,r){return t=(r?Ui(n,t,r):t===X)?1:kc(t),eu(Ec(n),t)}function ya(){var n=arguments,t=Ec(n[0]);return n.length<3?t:t.replace(n[1],n[2])}function da(n,t,r){return r&&\"number\"!=typeof r&&Ui(n,t,r)&&(t=r=X),\n(r=r===X?Un:r>>>0)?(n=Ec(n),n&&(\"string\"==typeof t||null!=t&&!Ah(t))&&(t=vu(t),!t&&T(n))?Ou(G(n),0,r):n.split(t,r)):[]}function ba(n,t,r){return n=Ec(n),r=null==r?0:Mr(kc(r),0,n.length),t=vu(t),n.slice(r,r+t.length)==t}function wa(n,t,r){var e=Z.templateSettings;r&&Ui(n,t,r)&&(t=X),n=Ec(n),t=Sh({},t,e,li);var u,i,o=Sh({},t.imports,e.imports,li),f=Pc(o),c=E(o,f),a=0,l=t.interpolate||Ht,s=\"__p += '\",h=sl((t.escape||Ht).source+\"|\"+l.source+\"|\"+(l===It?Ft:Ht).source+\"|\"+(t.evaluate||Ht).source+\"|$\",\"g\"),p=\"//# sourceURL=\"+(bl.call(t,\"sourceURL\")?(t.sourceURL+\"\").replace(/\\s/g,\" \"):\"lodash.templateSources[\"+ ++Zr+\"]\")+\"\\n\";\nn.replace(h,function(t,r,e,o,f,c){return e||(e=o),s+=n.slice(a,c).replace(Jt,U),r&&(u=!0,s+=\"' +\\n__e(\"+r+\") +\\n'\"),f&&(i=!0,s+=\"';\\n\"+f+\";\\n__p += '\"),e&&(s+=\"' +\\n((__t = (\"+e+\")) == null ? '' : __t) +\\n'\"),a=c+t.length,t}),s+=\"';\\n\";var _=bl.call(t,\"variable\")&&t.variable;if(_){if(Dt.test(_))throw new fl(un)}else s=\"with (obj) {\\n\"+s+\"\\n}\\n\";s=(i?s.replace(dt,\"\"):s).replace(bt,\"$1\").replace(wt,\"$1;\"),s=\"function(\"+(_||\"obj\")+\") {\\n\"+(_?\"\":\"obj || (obj = {});\\n\")+\"var __t, __p = ''\"+(u?\", __e = _.escape\":\"\")+(i?\", __j = Array.prototype.join;\\nfunction print() { __p += __j.call(arguments, '') }\\n\":\";\\n\")+s+\"return __p\\n}\";\nvar v=Xh(function(){return cl(f,p+\"return \"+s).apply(X,c)});if(v.source=s,rc(v))throw v;return v}function ma(n){return Ec(n).toLowerCase()}function xa(n){return Ec(n).toUpperCase()}function ja(n,t,r){if(n=Ec(n),n&&(r||t===X))return R(n);if(!n||!(t=vu(t)))return n;var e=G(n),u=G(t);return Ou(e,W(e,u),L(e,u)+1).join(\"\")}function Aa(n,t,r){if(n=Ec(n),n&&(r||t===X))return n.slice(0,H(n)+1);if(!n||!(t=vu(t)))return n;var e=G(n);return Ou(e,0,L(e,G(t))+1).join(\"\")}function ka(n,t,r){if(n=Ec(n),n&&(r||t===X))return n.replace(Lt,\"\");\nif(!n||!(t=vu(t)))return n;var e=G(n);return Ou(e,W(e,G(t))).join(\"\")}function Oa(n,t){var r=An,e=kn;if(fc(t)){var u=\"separator\"in t?t.separator:u;r=\"length\"in t?kc(t.length):r,e=\"omission\"in t?vu(t.omission):e}n=Ec(n);var i=n.length;if(T(n)){var o=G(n);i=o.length}if(r>=i)return n;var f=r-V(e);if(f<1)return e;var c=o?Ou(o,0,f).join(\"\"):n.slice(0,f);if(u===X)return c+e;if(o&&(f+=c.length-f),Ah(u)){if(n.slice(f).search(u)){var a,l=c;for(u.global||(u=sl(u.source,Ec(Nt.exec(u))+\"g\")),u.lastIndex=0;a=u.exec(l);)var s=a.index;\nc=c.slice(0,s===X?f:s)}}else if(n.indexOf(vu(u),f)!=f){var h=c.lastIndexOf(u);h>-1&&(c=c.slice(0,h))}return c+e}function Ia(n){return n=Ec(n),n&&jt.test(n)?n.replace(mt,ye):n}function Ra(n,t,r){return n=Ec(n),t=r?X:t,t===X?$(n)?Q(n):_(n):n.match(t)||[]}function za(t){var r=null==t?0:t.length,e=mi();return t=r?c(t,function(n){if(\"function\"!=typeof n[1])throw new pl(en);return[e(n[0]),n[1]]}):[],uu(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e)}})}function Ea(n){\nreturn Nr(Fr(n,an))}function Sa(n){return function(){return n}}function Wa(n,t){return null==n||n!==n?t:n}function La(n){return n}function Ca(n){return De(\"function\"==typeof n?n:Fr(n,an))}function Ua(n){return qe(Fr(n,an))}function Ba(n,t){return Ze(n,Fr(t,an))}function Ta(n,t,e){var u=Pc(t),i=fe(t,u);null!=e||fc(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=fe(t,Pc(t)));var o=!(fc(e)&&\"chain\"in e&&!e.chain),f=uc(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;\nif(o||t){var r=n(this.__wrapped__);return(r.__actions__=Tu(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function $a(){return re._===this&&(re._=Al),this}function Da(){}function Ma(n){return n=kc(n),uu(function(t){return Ge(t,n)})}function Fa(n){return Bi(n)?m(no(n)):Qe(n)}function Na(n){return function(t){return null==n?X:_e(n,t)}}function Pa(){return[]}function qa(){return!1}function Za(){return{}}function Ka(){return\"\";\n}function Va(){return!0}function Ga(n,t){if(n=kc(n),n<1||n>Wn)return[];var r=Un,e=Hl(n,Un);t=mi(t),n-=Un;for(var u=O(e,t);++r<n;)t(r);return u}function Ha(n){return bh(n)?c(n,no):bc(n)?[n]:Tu(Cs(Ec(n)))}function Ja(n){var t=++wl;return Ec(n)+t}function Ya(n){return n&&n.length?Yr(n,La,me):X}function Qa(n,t){return n&&n.length?Yr(n,mi(t,2),me):X}function Xa(n){return w(n,La)}function nl(n,t){return w(n,mi(t,2))}function tl(n){return n&&n.length?Yr(n,La,Ne):X}function rl(n,t){return n&&n.length?Yr(n,mi(t,2),Ne):X;\n}function el(n){return n&&n.length?k(n,La):0}function ul(n,t){return n&&n.length?k(n,mi(t,2)):0}x=null==x?re:be.defaults(re.Object(),x,be.pick(re,qr));var il=x.Array,ol=x.Date,fl=x.Error,cl=x.Function,al=x.Math,ll=x.Object,sl=x.RegExp,hl=x.String,pl=x.TypeError,_l=il.prototype,vl=cl.prototype,gl=ll.prototype,yl=x[\"__core-js_shared__\"],dl=vl.toString,bl=gl.hasOwnProperty,wl=0,ml=function(){var n=/[^.]+$/.exec(yl&&yl.keys&&yl.keys.IE_PROTO||\"\");return n?\"Symbol(src)_1.\"+n:\"\"}(),xl=gl.toString,jl=dl.call(ll),Al=re._,kl=sl(\"^\"+dl.call(bl).replace(St,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),Ol=ie?x.Buffer:X,Il=x.Symbol,Rl=x.Uint8Array,zl=Ol?Ol.allocUnsafe:X,El=F(ll.getPrototypeOf,ll),Sl=ll.create,Wl=gl.propertyIsEnumerable,Ll=_l.splice,Cl=Il?Il.isConcatSpreadable:X,Ul=Il?Il.iterator:X,Bl=Il?Il.toStringTag:X,Tl=function(){\ntry{var n=Ai(ll,\"defineProperty\");return n({},\"\",{}),n}catch(n){}}(),$l=x.clearTimeout!==re.clearTimeout&&x.clearTimeout,Dl=ol&&ol.now!==re.Date.now&&ol.now,Ml=x.setTimeout!==re.setTimeout&&x.setTimeout,Fl=al.ceil,Nl=al.floor,Pl=ll.getOwnPropertySymbols,ql=Ol?Ol.isBuffer:X,Zl=x.isFinite,Kl=_l.join,Vl=F(ll.keys,ll),Gl=al.max,Hl=al.min,Jl=ol.now,Yl=x.parseInt,Ql=al.random,Xl=_l.reverse,ns=Ai(x,\"DataView\"),ts=Ai(x,\"Map\"),rs=Ai(x,\"Promise\"),es=Ai(x,\"Set\"),us=Ai(x,\"WeakMap\"),is=Ai(ll,\"create\"),os=us&&new us,fs={},cs=to(ns),as=to(ts),ls=to(rs),ss=to(es),hs=to(us),ps=Il?Il.prototype:X,_s=ps?ps.valueOf:X,vs=ps?ps.toString:X,gs=function(){\nfunction n(){}return function(t){if(!fc(t))return{};if(Sl)return Sl(t);n.prototype=t;var r=new n;return n.prototype=X,r}}();Z.templateSettings={escape:kt,evaluate:Ot,interpolate:It,variable:\"\",imports:{_:Z}},Z.prototype=J.prototype,Z.prototype.constructor=Z,Y.prototype=gs(J.prototype),Y.prototype.constructor=Y,Ct.prototype=gs(J.prototype),Ct.prototype.constructor=Ct,Xt.prototype.clear=nr,Xt.prototype.delete=tr,Xt.prototype.get=rr,Xt.prototype.has=er,Xt.prototype.set=ur,ir.prototype.clear=or,ir.prototype.delete=fr,\nir.prototype.get=cr,ir.prototype.has=ar,ir.prototype.set=lr,sr.prototype.clear=hr,sr.prototype.delete=pr,sr.prototype.get=_r,sr.prototype.has=vr,sr.prototype.set=gr,yr.prototype.add=yr.prototype.push=dr,yr.prototype.has=br,wr.prototype.clear=mr,wr.prototype.delete=xr,wr.prototype.get=jr,wr.prototype.has=Ar,wr.prototype.set=kr;var ys=Pu(ue),ds=Pu(oe,!0),bs=qu(),ws=qu(!0),ms=os?function(n,t){return os.set(n,t),n}:La,xs=Tl?function(n,t){return Tl(n,\"toString\",{configurable:!0,enumerable:!1,value:Sa(t),\nwritable:!0})}:La,js=uu,As=$l||function(n){return re.clearTimeout(n)},ks=es&&1/P(new es([,-0]))[1]==Sn?function(n){return new es(n)}:Da,Os=os?function(n){return os.get(n)}:Da,Is=Pl?function(n){return null==n?[]:(n=ll(n),i(Pl(n),function(t){return Wl.call(n,t)}))}:Pa,Rs=Pl?function(n){for(var t=[];n;)a(t,Is(n)),n=El(n);return t}:Pa,zs=we;(ns&&zs(new ns(new ArrayBuffer(1)))!=ct||ts&&zs(new ts)!=Gn||rs&&zs(rs.resolve())!=Qn||es&&zs(new es)!=tt||us&&zs(new us)!=it)&&(zs=function(n){var t=we(n),r=t==Yn?n.constructor:X,e=r?to(r):\"\";\nif(e)switch(e){case cs:return ct;case as:return Gn;case ls:return Qn;case ss:return tt;case hs:return it}return t});var Es=yl?uc:qa,Ss=Qi(ms),Ws=Ml||function(n,t){return re.setTimeout(n,t)},Ls=Qi(xs),Cs=Pi(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(\"\"),n.replace(Et,function(n,r,e,u){t.push(e?u.replace(Mt,\"$1\"):r||n)}),t}),Us=uu(function(n,t){return Jf(n)?Hr(n,ee(t,1,Jf,!0)):[]}),Bs=uu(function(n,t){var r=jo(t);return Jf(r)&&(r=X),Jf(n)?Hr(n,ee(t,1,Jf,!0),mi(r,2)):[]}),Ts=uu(function(n,t){\nvar r=jo(t);return Jf(r)&&(r=X),Jf(n)?Hr(n,ee(t,1,Jf,!0),X,r):[]}),$s=uu(function(n){var t=c(n,ju);return t.length&&t[0]===n[0]?ke(t):[]}),Ds=uu(function(n){var t=jo(n),r=c(n,ju);return t===jo(r)?t=X:r.pop(),r.length&&r[0]===n[0]?ke(r,mi(t,2)):[]}),Ms=uu(function(n){var t=jo(n),r=c(n,ju);return t=\"function\"==typeof t?t:X,t&&r.pop(),r.length&&r[0]===n[0]?ke(r,X,t):[]}),Fs=uu(Oo),Ns=gi(function(n,t){var r=null==n?0:n.length,e=Tr(n,t);return nu(n,c(t,function(n){return Ci(n,r)?+n:n}).sort(Lu)),e}),Ps=uu(function(n){\nreturn gu(ee(n,1,Jf,!0))}),qs=uu(function(n){var t=jo(n);return Jf(t)&&(t=X),gu(ee(n,1,Jf,!0),mi(t,2))}),Zs=uu(function(n){var t=jo(n);return t=\"function\"==typeof t?t:X,gu(ee(n,1,Jf,!0),X,t)}),Ks=uu(function(n,t){return Jf(n)?Hr(n,t):[]}),Vs=uu(function(n){return mu(i(n,Jf))}),Gs=uu(function(n){var t=jo(n);return Jf(t)&&(t=X),mu(i(n,Jf),mi(t,2))}),Hs=uu(function(n){var t=jo(n);return t=\"function\"==typeof t?t:X,mu(i(n,Jf),X,t)}),Js=uu(Go),Ys=uu(function(n){var t=n.length,r=t>1?n[t-1]:X;return r=\"function\"==typeof r?(n.pop(),\nr):X,Ho(n,r)}),Qs=gi(function(n){var t=n.length,r=t?n[0]:0,e=this.__wrapped__,u=function(t){return Tr(t,n)};return!(t>1||this.__actions__.length)&&e instanceof Ct&&Ci(r)?(e=e.slice(r,+r+(t?1:0)),e.__actions__.push({func:nf,args:[u],thisArg:X}),new Y(e,this.__chain__).thru(function(n){return t&&!n.length&&n.push(X),n})):this.thru(u)}),Xs=Fu(function(n,t,r){bl.call(n,r)?++n[r]:Br(n,r,1)}),nh=Ju(ho),th=Ju(po),rh=Fu(function(n,t,r){bl.call(n,r)?n[r].push(t):Br(n,r,[t])}),eh=uu(function(t,r,e){var u=-1,i=\"function\"==typeof r,o=Hf(t)?il(t.length):[];\nreturn ys(t,function(t){o[++u]=i?n(r,t,e):Ie(t,r,e)}),o}),uh=Fu(function(n,t,r){Br(n,r,t)}),ih=Fu(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),oh=uu(function(n,t){if(null==n)return[];var r=t.length;return r>1&&Ui(n,t[0],t[1])?t=[]:r>2&&Ui(t[0],t[1],t[2])&&(t=[t[0]]),He(n,ee(t,1),[])}),fh=Dl||function(){return re.Date.now()},ch=uu(function(n,t,r){var e=_n;if(r.length){var u=N(r,wi(ch));e|=bn}return ai(n,e,t,r,u)}),ah=uu(function(n,t,r){var e=_n|vn;if(r.length){var u=N(r,wi(ah));e|=bn;\n}return ai(t,e,n,r,u)}),lh=uu(function(n,t){return Gr(n,1,t)}),sh=uu(function(n,t,r){return Gr(n,Ic(t)||0,r)});Cf.Cache=sr;var hh=js(function(t,r){r=1==r.length&&bh(r[0])?c(r[0],z(mi())):c(ee(r,1),z(mi()));var e=r.length;return uu(function(u){for(var i=-1,o=Hl(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);return n(t,this,u)})}),ph=uu(function(n,t){return ai(n,bn,X,t,N(t,wi(ph)))}),_h=uu(function(n,t){return ai(n,wn,X,t,N(t,wi(_h)))}),vh=gi(function(n,t){return ai(n,xn,X,X,X,t)}),gh=ii(me),yh=ii(function(n,t){\nreturn n>=t}),dh=Re(function(){return arguments}())?Re:function(n){return cc(n)&&bl.call(n,\"callee\")&&!Wl.call(n,\"callee\")},bh=il.isArray,wh=ce?z(ce):ze,mh=ql||qa,xh=ae?z(ae):Ee,jh=le?z(le):Le,Ah=se?z(se):Be,kh=he?z(he):Te,Oh=pe?z(pe):$e,Ih=ii(Ne),Rh=ii(function(n,t){return n<=t}),zh=Nu(function(n,t){if(Mi(t)||Hf(t))return $u(t,Pc(t),n),X;for(var r in t)bl.call(t,r)&&Sr(n,r,t[r])}),Eh=Nu(function(n,t){$u(t,qc(t),n)}),Sh=Nu(function(n,t,r,e){$u(t,qc(t),n,e)}),Wh=Nu(function(n,t,r,e){$u(t,Pc(t),n,e);\n}),Lh=gi(Tr),Ch=uu(function(n,t){n=ll(n);var r=-1,e=t.length,u=e>2?t[2]:X;for(u&&Ui(t[0],t[1],u)&&(e=1);++r<e;)for(var i=t[r],o=qc(i),f=-1,c=o.length;++f<c;){var a=o[f],l=n[a];(l===X||Gf(l,gl[a])&&!bl.call(n,a))&&(n[a]=i[a])}return n}),Uh=uu(function(t){return t.push(X,si),n(Mh,X,t)}),Bh=Xu(function(n,t,r){null!=t&&\"function\"!=typeof t.toString&&(t=xl.call(t)),n[t]=r},Sa(La)),Th=Xu(function(n,t,r){null!=t&&\"function\"!=typeof t.toString&&(t=xl.call(t)),bl.call(n,t)?n[t].push(r):n[t]=[r]},mi),$h=uu(Ie),Dh=Nu(function(n,t,r){\nKe(n,t,r)}),Mh=Nu(function(n,t,r,e){Ke(n,t,r,e)}),Fh=gi(function(n,t){var r={};if(null==n)return r;var e=!1;t=c(t,function(t){return t=ku(t,n),e||(e=t.length>1),t}),$u(n,di(n),r),e&&(r=Fr(r,an|ln|sn,hi));for(var u=t.length;u--;)yu(r,t[u]);return r}),Nh=gi(function(n,t){return null==n?{}:Je(n,t)}),Ph=ci(Pc),qh=ci(qc),Zh=Vu(function(n,t,r){return t=t.toLowerCase(),n+(r?fa(t):t)}),Kh=Vu(function(n,t,r){return n+(r?\"-\":\"\")+t.toLowerCase()}),Vh=Vu(function(n,t,r){return n+(r?\" \":\"\")+t.toLowerCase()}),Gh=Ku(\"toLowerCase\"),Hh=Vu(function(n,t,r){\nreturn n+(r?\"_\":\"\")+t.toLowerCase()}),Jh=Vu(function(n,t,r){return n+(r?\" \":\"\")+Qh(t)}),Yh=Vu(function(n,t,r){return n+(r?\" \":\"\")+t.toUpperCase()}),Qh=Ku(\"toUpperCase\"),Xh=uu(function(t,r){try{return n(t,X,r)}catch(n){return rc(n)?n:new fl(n)}}),np=gi(function(n,t){return r(t,function(t){t=no(t),Br(n,t,ch(n[t],n))}),n}),tp=Yu(),rp=Yu(!0),ep=uu(function(n,t){return function(r){return Ie(r,n,t)}}),up=uu(function(n,t){return function(r){return Ie(n,r,t)}}),ip=ti(c),op=ti(u),fp=ti(h),cp=ui(),ap=ui(!0),lp=ni(function(n,t){\nreturn n+t},0),sp=fi(\"ceil\"),hp=ni(function(n,t){return n/t},1),pp=fi(\"floor\"),_p=ni(function(n,t){return n*t},1),vp=fi(\"round\"),gp=ni(function(n,t){return n-t},0);return Z.after=If,Z.ary=Rf,Z.assign=zh,Z.assignIn=Eh,Z.assignInWith=Sh,Z.assignWith=Wh,Z.at=Lh,Z.before=zf,Z.bind=ch,Z.bindAll=np,Z.bindKey=ah,Z.castArray=Nf,Z.chain=Qo,Z.chunk=uo,Z.compact=io,Z.concat=oo,Z.cond=za,Z.conforms=Ea,Z.constant=Sa,Z.countBy=Xs,Z.create=Sc,Z.curry=Ef,Z.curryRight=Sf,Z.debounce=Wf,Z.defaults=Ch,Z.defaultsDeep=Uh,\nZ.defer=lh,Z.delay=sh,Z.difference=Us,Z.differenceBy=Bs,Z.differenceWith=Ts,Z.drop=fo,Z.dropRight=co,Z.dropRightWhile=ao,Z.dropWhile=lo,Z.fill=so,Z.filter=lf,Z.flatMap=sf,Z.flatMapDeep=hf,Z.flatMapDepth=pf,Z.flatten=_o,Z.flattenDeep=vo,Z.flattenDepth=go,Z.flip=Lf,Z.flow=tp,Z.flowRight=rp,Z.fromPairs=yo,Z.functions=$c,Z.functionsIn=Dc,Z.groupBy=rh,Z.initial=mo,Z.intersection=$s,Z.intersectionBy=Ds,Z.intersectionWith=Ms,Z.invert=Bh,Z.invertBy=Th,Z.invokeMap=eh,Z.iteratee=Ca,Z.keyBy=uh,Z.keys=Pc,Z.keysIn=qc,\nZ.map=yf,Z.mapKeys=Zc,Z.mapValues=Kc,Z.matches=Ua,Z.matchesProperty=Ba,Z.memoize=Cf,Z.merge=Dh,Z.mergeWith=Mh,Z.method=ep,Z.methodOf=up,Z.mixin=Ta,Z.negate=Uf,Z.nthArg=Ma,Z.omit=Fh,Z.omitBy=Vc,Z.once=Bf,Z.orderBy=df,Z.over=ip,Z.overArgs=hh,Z.overEvery=op,Z.overSome=fp,Z.partial=ph,Z.partialRight=_h,Z.partition=ih,Z.pick=Nh,Z.pickBy=Gc,Z.property=Fa,Z.propertyOf=Na,Z.pull=Fs,Z.pullAll=Oo,Z.pullAllBy=Io,Z.pullAllWith=Ro,Z.pullAt=Ns,Z.range=cp,Z.rangeRight=ap,Z.rearg=vh,Z.reject=mf,Z.remove=zo,Z.rest=Tf,\nZ.reverse=Eo,Z.sampleSize=jf,Z.set=Jc,Z.setWith=Yc,Z.shuffle=Af,Z.slice=So,Z.sortBy=oh,Z.sortedUniq=$o,Z.sortedUniqBy=Do,Z.split=da,Z.spread=$f,Z.tail=Mo,Z.take=Fo,Z.takeRight=No,Z.takeRightWhile=Po,Z.takeWhile=qo,Z.tap=Xo,Z.throttle=Df,Z.thru=nf,Z.toArray=jc,Z.toPairs=Ph,Z.toPairsIn=qh,Z.toPath=Ha,Z.toPlainObject=Rc,Z.transform=Qc,Z.unary=Mf,Z.union=Ps,Z.unionBy=qs,Z.unionWith=Zs,Z.uniq=Zo,Z.uniqBy=Ko,Z.uniqWith=Vo,Z.unset=Xc,Z.unzip=Go,Z.unzipWith=Ho,Z.update=na,Z.updateWith=ta,Z.values=ra,Z.valuesIn=ea,\nZ.without=Ks,Z.words=Ra,Z.wrap=Ff,Z.xor=Vs,Z.xorBy=Gs,Z.xorWith=Hs,Z.zip=Js,Z.zipObject=Jo,Z.zipObjectDeep=Yo,Z.zipWith=Ys,Z.entries=Ph,Z.entriesIn=qh,Z.extend=Eh,Z.extendWith=Sh,Ta(Z,Z),Z.add=lp,Z.attempt=Xh,Z.camelCase=Zh,Z.capitalize=fa,Z.ceil=sp,Z.clamp=ua,Z.clone=Pf,Z.cloneDeep=Zf,Z.cloneDeepWith=Kf,Z.cloneWith=qf,Z.conformsTo=Vf,Z.deburr=ca,Z.defaultTo=Wa,Z.divide=hp,Z.endsWith=aa,Z.eq=Gf,Z.escape=la,Z.escapeRegExp=sa,Z.every=af,Z.find=nh,Z.findIndex=ho,Z.findKey=Wc,Z.findLast=th,Z.findLastIndex=po,\nZ.findLastKey=Lc,Z.floor=pp,Z.forEach=_f,Z.forEachRight=vf,Z.forIn=Cc,Z.forInRight=Uc,Z.forOwn=Bc,Z.forOwnRight=Tc,Z.get=Mc,Z.gt=gh,Z.gte=yh,Z.has=Fc,Z.hasIn=Nc,Z.head=bo,Z.identity=La,Z.includes=gf,Z.indexOf=wo,Z.inRange=ia,Z.invoke=$h,Z.isArguments=dh,Z.isArray=bh,Z.isArrayBuffer=wh,Z.isArrayLike=Hf,Z.isArrayLikeObject=Jf,Z.isBoolean=Yf,Z.isBuffer=mh,Z.isDate=xh,Z.isElement=Qf,Z.isEmpty=Xf,Z.isEqual=nc,Z.isEqualWith=tc,Z.isError=rc,Z.isFinite=ec,Z.isFunction=uc,Z.isInteger=ic,Z.isLength=oc,Z.isMap=jh,\nZ.isMatch=ac,Z.isMatchWith=lc,Z.isNaN=sc,Z.isNative=hc,Z.isNil=_c,Z.isNull=pc,Z.isNumber=vc,Z.isObject=fc,Z.isObjectLike=cc,Z.isPlainObject=gc,Z.isRegExp=Ah,Z.isSafeInteger=yc,Z.isSet=kh,Z.isString=dc,Z.isSymbol=bc,Z.isTypedArray=Oh,Z.isUndefined=wc,Z.isWeakMap=mc,Z.isWeakSet=xc,Z.join=xo,Z.kebabCase=Kh,Z.last=jo,Z.lastIndexOf=Ao,Z.lowerCase=Vh,Z.lowerFirst=Gh,Z.lt=Ih,Z.lte=Rh,Z.max=Ya,Z.maxBy=Qa,Z.mean=Xa,Z.meanBy=nl,Z.min=tl,Z.minBy=rl,Z.stubArray=Pa,Z.stubFalse=qa,Z.stubObject=Za,Z.stubString=Ka,\nZ.stubTrue=Va,Z.multiply=_p,Z.nth=ko,Z.noConflict=$a,Z.noop=Da,Z.now=fh,Z.pad=ha,Z.padEnd=pa,Z.padStart=_a,Z.parseInt=va,Z.random=oa,Z.reduce=bf,Z.reduceRight=wf,Z.repeat=ga,Z.replace=ya,Z.result=Hc,Z.round=vp,Z.runInContext=p,Z.sample=xf,Z.size=kf,Z.snakeCase=Hh,Z.some=Of,Z.sortedIndex=Wo,Z.sortedIndexBy=Lo,Z.sortedIndexOf=Co,Z.sortedLastIndex=Uo,Z.sortedLastIndexBy=Bo,Z.sortedLastIndexOf=To,Z.startCase=Jh,Z.startsWith=ba,Z.subtract=gp,Z.sum=el,Z.sumBy=ul,Z.template=wa,Z.times=Ga,Z.toFinite=Ac,Z.toInteger=kc,\nZ.toLength=Oc,Z.toLower=ma,Z.toNumber=Ic,Z.toSafeInteger=zc,Z.toString=Ec,Z.toUpper=xa,Z.trim=ja,Z.trimEnd=Aa,Z.trimStart=ka,Z.truncate=Oa,Z.unescape=Ia,Z.uniqueId=Ja,Z.upperCase=Yh,Z.upperFirst=Qh,Z.each=_f,Z.eachRight=vf,Z.first=bo,Ta(Z,function(){var n={};return ue(Z,function(t,r){bl.call(Z.prototype,r)||(n[r]=t)}),n}(),{chain:!1}),Z.VERSION=nn,r([\"bind\",\"bindKey\",\"curry\",\"curryRight\",\"partial\",\"partialRight\"],function(n){Z[n].placeholder=Z}),r([\"drop\",\"take\"],function(n,t){Ct.prototype[n]=function(r){\nr=r===X?1:Gl(kc(r),0);var e=this.__filtered__&&!t?new Ct(this):this.clone();return e.__filtered__?e.__takeCount__=Hl(r,e.__takeCount__):e.__views__.push({size:Hl(r,Un),type:n+(e.__dir__<0?\"Right\":\"\")}),e},Ct.prototype[n+\"Right\"]=function(t){return this.reverse()[n](t).reverse()}}),r([\"filter\",\"map\",\"takeWhile\"],function(n,t){var r=t+1,e=r==Rn||r==En;Ct.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:mi(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r([\"head\",\"last\"],function(n,t){\nvar r=\"take\"+(t?\"Right\":\"\");Ct.prototype[n]=function(){return this[r](1).value()[0]}}),r([\"initial\",\"tail\"],function(n,t){var r=\"drop\"+(t?\"\":\"Right\");Ct.prototype[n]=function(){return this.__filtered__?new Ct(this):this[r](1)}}),Ct.prototype.compact=function(){return this.filter(La)},Ct.prototype.find=function(n){return this.filter(n).head()},Ct.prototype.findLast=function(n){return this.reverse().find(n)},Ct.prototype.invokeMap=uu(function(n,t){return\"function\"==typeof n?new Ct(this):this.map(function(r){\nreturn Ie(r,n,t)})}),Ct.prototype.reject=function(n){return this.filter(Uf(mi(n)))},Ct.prototype.slice=function(n,t){n=kc(n);var r=this;return r.__filtered__&&(n>0||t<0)?new Ct(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==X&&(t=kc(t),r=t<0?r.dropRight(-t):r.take(t-n)),r)},Ct.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Ct.prototype.toArray=function(){return this.take(Un)},ue(Ct.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=Z[e?\"take\"+(\"last\"==t?\"Right\":\"\"):t],i=e||/^find/.test(t);\nu&&(Z.prototype[t]=function(){var t=this.__wrapped__,o=e?[1]:arguments,f=t instanceof Ct,c=o[0],l=f||bh(t),s=function(n){var t=u.apply(Z,a([n],o));return e&&h?t[0]:t};l&&r&&\"function\"==typeof c&&1!=c.length&&(f=l=!1);var h=this.__chain__,p=!!this.__actions__.length,_=i&&!h,v=f&&!p;if(!i&&l){t=v?t:new Ct(this);var g=n.apply(t,o);return g.__actions__.push({func:nf,args:[s],thisArg:X}),new Y(g,h)}return _&&v?n.apply(this,o):(g=this.thru(s),_?e?g.value()[0]:g.value():g)})}),r([\"pop\",\"push\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(n){\nvar t=_l[n],r=/^(?:push|sort|unshift)$/.test(n)?\"tap\":\"thru\",e=/^(?:pop|shift)$/.test(n);Z.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(bh(u)?u:[],n)}return this[r](function(r){return t.apply(bh(r)?r:[],n)})}}),ue(Ct.prototype,function(n,t){var r=Z[t];if(r){var e=r.name+\"\";bl.call(fs,e)||(fs[e]=[]),fs[e].push({name:t,func:r})}}),fs[Qu(X,vn).name]=[{name:\"wrapper\",func:X}],Ct.prototype.clone=$t,Ct.prototype.reverse=Yt,Ct.prototype.value=Qt,Z.prototype.at=Qs,\nZ.prototype.chain=tf,Z.prototype.commit=rf,Z.prototype.next=ef,Z.prototype.plant=of,Z.prototype.reverse=ff,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=cf,Z.prototype.first=Z.prototype.head,Ul&&(Z.prototype[Ul]=uf),Z},be=de();\"function\"==typeof define&&\"object\"==typeof define.amd&&define.amd?(re._=be,define(function(){return be})):ue?((ue.exports=be)._=be,ee._=be):re._=be}).call(this);</script>\n<script>/*! grapick - 0.1.7 */\n!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.Grapick=t():e.Grapick=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([function(e,t,n){\"use strict\";function i(e,t,n){t=t.split(/\\s+/);for(var i=0;i<t.length;++i)e.addEventListener(t[i],n)}function r(e,t,n){t=t.split(/\\s+/);for(var i=0;i<t.length;++i)e.removeEventListener(t[i],n)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.on=i,t.off=r},function(e,t,n){\"use strict\";var i=n(2),r=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=function(e){return new r.default(e)}},function(e,t,n){\"use strict\";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function l(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(3),u=i(c),h=n(4),d=i(h),f=n(0),v=function(e,t){return e.position-t.position},g=function(e){return e+\"-gradient(\"},p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e=Object.assign({},e);var i={pfx:\"grp\",el:\".grp\",colorEl:\"\",min:0,max:100,direction:\"90deg\",type:\"linear\",height:\"30px\",width:\"100%\"};for(var r in i)r in e||(e[r]=i[r]);var l=e.el;if(!((l=\"string\"==typeof l?document.querySelector(l):l)instanceof HTMLElement))throw\"Element not found, given \"+l;return n.el=l,n.handlers=[],n.options=e,n.on(\"handler:color:change\",function(e,t){return n.change(t)}),n.on(\"handler:position:change\",function(e,t){return n.change(t)}),n.on(\"handler:remove\",function(e){return n.change(1)}),n.on(\"handler:add\",function(e){return n.change(1)}),n.render(),n}return l(t,e),s(t,[{key:\"setColorPicker\",value:function(e){this.colorPicker=e}},{key:\"getValue\",value:function(e,t){var n=this.getColorValue(),i=e||this.getType(),r=t||this.getDirection();return n?i+\"-gradient(\"+r+\", \"+n+\")\":\"\"}},{key:\"getSafeValue\",value:function(e,t){var n=this.previewEl,i=this.getValue(e,t);if(!this.sandEl&&(this.sandEl=document.createElement(\"div\")),!n||!i)return\"\";for(var o=this.sandEl.style,a=[i].concat(r(this.getPrefixedValues(e,t))),l=void 0,s=0;s<a.length&&(l=a[s],o.backgroundImage=l,o.backgroundImage!=l);s++);return o.backgroundImage}},{key:\"setValue\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.type,r=this.direction,o=t.indexOf(\"(\")+1,a=t.lastIndexOf(\")\"),l=t.substring(o,a),s=l.split(/,(?![^(]*\\)) /);if(this.clear(n),!l)return void this.updatePreview();s.length>2&&(r=s.shift());var c=void 0;[\"repeating-linear\",\"repeating-radial\",\"linear\",\"radial\"].forEach(function(e){t.indexOf(g(e))>-1&&!c&&(c=1,i=e)}),this.setDirection(r,n),this.setType(i,n),s.forEach(function(t){var i=t.split(\" \"),r=parseFloat(i.pop()),o=i.join(\"\");e.addHandler(r,o,0,n)}),this.updatePreview()}},{key:\"getColorValue\",value:function(){var e=this.handlers;return e.sort(v),e=1==e.length?[e[0],e[0]]:e,e.map(function(e){return e.getValue()}).join(\", \")}},{key:\"getPrefixedValues\",value:function(e,t){var n=this.getValue(e,t);return[\"-moz-\",\"-webkit-\",\"-o-\",\"-ms-\"].map(function(e){return\"\"+e+n})}},{key:\"change\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updatePreview(),!t.silent&&this.emit(\"change\",e)}},{key:\"setDirection\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options.direction=e,this.change(1,t)}},{key:\"getDirection\",value:function(){return this.options.direction}},{key:\"setType\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options.type=e,this.change(1,t)}},{key:\"getType\",value:function(){return this.options.type}},{key:\"addHandler\",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=new d.default(this,e,t,n);return!i.silent&&this.emit(\"handler:add\",r),r}},{key:\"getHandler\",value:function(e){return this.handlers[e]}},{key:\"getHandlers\",value:function(){return this.handlers}},{key:\"clear\",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.handlers,n=t.length-1;n>=0;n--)t[n].remove(e)}},{key:\"getSelected\",value:function(){for(var e=this.getHandlers(),t=0;t<e.length;t++){var n=e[t];if(n.isSelected())return n}return null}},{key:\"updatePreview\",value:function(){var e=this.previewEl;e&&(e.style.backgroundImage=this.getSafeValue(\"linear\",\"to right\"))}},{key:\"initEvents\",value:function(){var e=this,t=this.options,n=t.min,i=t.max,r=this.previewEl,o=0,a={};r&&(0,f.on)(r,\"click\",function(t){a.w=r.clientWidth,a.h=r.clientHeight;var l=t.offsetX-r.clientLeft,s=t.offsetY-r.clientTop;if(!((o=l/a.w*100)>i||o<n)){var c=document.createElement(\"canvas\"),u=c.getContext(\"2d\");c.width=a.w,c.height=a.h;var h=u.createLinearGradient(0,0,a.w,a.h);e.getHandlers().forEach(function(e){return h.addColorStop(e.position/100,e.color)}),u.fillStyle=h,u.fillRect(0,0,c.width,c.height),c.style.background=\"black\";var d=c.getContext(\"2d\").getImageData(l,s,1,1).data,f=\"rgba(\"+d[0]+\", \"+d[1]+\", \"+d[2]+\", \"+d[3]+\")\";e.addHandler(o,f)}})}},{key:\"render\",value:function(){var e=this.options,t=this.el,n=e.pfx,i=e.height,r=e.width;if(t){var o=n+\"-wrapper\",a=n+\"-preview\";t.innerHTML='\\n      <div class=\"'+o+'\">\\n        <div class=\"'+a+'\"></div>\\n      </div>\\n    ';var l=t.querySelector(\".\"+o),s=t.querySelector(\".\"+a),c=l.style;c.position=\"relative\",this.wrapperEl=l,this.previewEl=s,i&&(c.height=i),r&&(c.width=r),this.initEvents(),this.updatePreview()}}}]),t}(u.default);t.default=p},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},e.exports=n},function(e,t,n){\"use strict\";function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"black\",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,e),t.getHandlers().push(this),this.gp=t,this.position=n,this.color=r,this.selected=0,this.render(),o&&this.select()}return r(e,[{key:\"toJSON\",value:function(){return{position:this.position,selected:this.selected,color:this.color}}},{key:\"setColor\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.color=e,this.emit(\"handler:color:change\",this,t)}},{key:\"setPosition\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getEl();this.position=e,n&&(n.style.left=e+\"%\"),this.emit(\"handler:position:change\",this,t)}},{key:\"getColor\",value:function(){return this.color}},{key:\"getPosition\",value:function(){return this.position}},{key:\"isSelected\",value:function(){return!!this.selected}},{key:\"getValue\",value:function(){return this.getColor()+\" \"+this.getPosition()+\"%\"}},{key:\"select\",value:function(){var e=this.getEl();this.gp.getHandlers().forEach(function(e){return e.deselect()}),this.selected=1;var t=this.getSelectedCls();e&&(e.className+=\" \"+t),this.emit(\"handler:select\",this)}},{key:\"deselect\",value:function(){var e=this.getEl();this.selected=0;var t=this.getSelectedCls();e&&(e.className=e.className.replace(t,\"\").trim()),this.emit(\"handler:deselect\",this)}},{key:\"getSelectedCls\",value:function(){return this.gp.options.pfx+\"-handler-selected\"}},{key:\"remove\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getEl(),n=this.gp.getHandlers(),i=n.splice(n.indexOf(this),1)[0];return t&&t.parentNode.removeChild(t),!e.silent&&this.emit(\"handler:remove\",i),i}},{key:\"getEl\",value:function(){return this.el}},{key:\"initEvents\",value:function(){var e=this,t=this.getEl(),n=this.gp.previewEl,i=this.gp.options,r=i.min,a=i.max,l=t.querySelector(\"[data-toggle=handler-close]\"),s=t.querySelector(\"[data-toggle=handler-color-c]\"),c=t.querySelector(\"[data-toggle=handler-color-wrap]\"),u=t.querySelector(\"[data-toggle=handler-color]\"),h=t.querySelector(\"[data-toggle=handler-drag]\");if(s&&(0,o.on)(s,\"click\",function(e){return e.stopPropagation()}),l&&(0,o.on)(l,\"click\",function(t){t.stopPropagation(),e.remove()}),u&&(0,o.on)(u,\"change\",function(t){var n=t.target,i=n.value;e.setColor(i),c&&(c.style.backgroundColor=i)}),h){var d=0,f=0,v=0,g={},p={},y={},m=function(t){v=1,y.x=t.clientX-p.x,y.y=t.clientY-p.y,d=100*y.x,d/=g.w,d=f+d,d=d<r?r:d,d=d>a?a:d,e.setPosition(d,0),e.emit(\"handler:drag\",e,d),0===t.which&&k(t)},k=function t(n){v&&(v=0,e.setPosition(d),(0,o.off)(document,\"touchmove mousemove\",m),(0,o.off)(document,\"touchend mouseup\",t),e.emit(\"handler:drag:end\",e,d))},b=function(t){0===t.button&&(e.select(),f=e.position,g.w=n.clientWidth,g.h=n.clientHeight,p.x=t.clientX,p.y=t.clientY,(0,o.on)(document,\"touchmove mousemove\",m),(0,o.on)(document,\"touchend mouseup\",k),e.emit(\"handler:drag:start\",e))};(0,o.on)(h,\"touchstart mousedown\",b),(0,o.on)(h,\"click\",function(e){return e.stopPropagation()})}}},{key:\"emit\",value:function(){var e;(e=this.gp).emit.apply(e,arguments)}},{key:\"render\",value:function(){var e=this.gp,t=e.options,n=e.previewEl,i=e.colorPicker,r=t.pfx,o=t.colorEl,a=this.getColor();if(n){var l=document.createElement(\"div\"),s=l.style,c=r+\"-handler\";return l.className=c,l.innerHTML='\\n      <div class=\"'+c+'-close-c\">\\n        <div class=\"'+c+'-close\" data-toggle=\"handler-close\">&Cross;</div>\\n      </div>\\n      <div class=\"'+c+'-drag\" data-toggle=\"handler-drag\"></div>\\n      <div class=\"'+c+'-cp-c\" data-toggle=\"handler-color-c\">\\n        '+(o||'\\n          <div class=\"'+c+'-cp-wrap\" data-toggle=\"handler-color-wrap\" style=\"background-color: '+a+'\">\\n            <input type=\"color\" data-toggle=\"handler-color\" value=\"'+a+'\">\\n          </div>')+\"\\n      </div>\\n    \",s.position=\"absolute\",s.top=0,s.left=this.position+\"%\",n.appendChild(l),this.el=l,this.initEvents(),i&&i(this),l}}}]),e}();t.default=a}])});</script>\n<script>(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.UndoRedoStack = factory());\n}(this, (function () {\n  'use strict';\n\n  const push$1 = state =>\n    val => state.push(val);\n\n  const pop = state => () =>\n    state.pop();\n\n  const isEmpty = state => () =>\n    state.length < 1;\n\n  const clear$1 = state => () =>\n    state.splice(0);\n\n  const current = state => () =>\n    state[state.length - 1];\n\n  const getValues$1 = state => () => [...state];\n\n  function main$1(state) {\n    return {\n      push: push$1(state),\n      pop: pop(state),\n      isEmpty: isEmpty(state),\n      clear: clear$1(state),\n      current: current(state),\n      getValues: getValues$1(state)\n    }\n  }\n\n  function stack(state = false) {\n    return main$1(state || [])\n  }\n\n  /**\n   * An undo/redo history manager implemented as two stacks\n   */\n  var push = function push(undoStack) {\n    return function (val) {\n      return undoStack.push(val);\n    };\n  };\n\n  var undo = function undo(undoStack, redoStack) {\n    return function () {\n      if (!undoStack.isEmpty()) {\n        redoStack.push(undoStack.pop());\n      }\n    };\n  };\n\n  var redo = function redo(undoStack, redoStack) {\n    return function () {\n      if (!redoStack.isEmpty()) {\n        undoStack.push(redoStack.pop());\n      }\n    };\n  };\n\n  var clear = function clear(undoStack, redoStack) {\n    return function () {\n      undoStack.clear();\n      redoStack.clear();\n    };\n  };\n\n  var latest = function latest(undoStack) {\n    return function () {\n      return undoStack.current();\n    };\n  };\n\n  var getValues = function getValues(undoStack, redoStack) {\n    return function () {\n      return {\n        undo: undoStack.getValues(),\n        redo: redoStack.getValues()\n      };\n    };\n  };\n\n  function main(undoStack, redoStack) {\n    return {\n      push: push(undoStack),\n      undo: undo(undoStack, redoStack),\n      redo: redo(undoStack, redoStack),\n      clear: clear(undoStack, redoStack),\n      latest: latest(undoStack),\n      getValues: getValues(undoStack, redoStack)\n    };\n  }\n\n  function undoRedo() {\n    var undoStack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var redoStack = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    return undoStack && redoStack ? main(undoStack, redoStack) : main(stack(), stack());\n  }\n\n  return undoRedo;\n\n})));</script>\n<script>const instances = [];\nlet nextId = 0;\n\n// Tiny polyfill for Element.matches() for IE\nif (!Element.prototype.matches) {\n  Element.prototype.matches = Element.prototype.msMatchesSelector;\n}\n\n// Gets an element's next/previous sibling that matches the given selector\nfunction getSibling(el, selector, direction = 1) {\n  const sibling =\n    direction > 0 ? el.nextElementSibling : el.previousElementSibling;\n  if (!sibling || sibling.matches(selector)) {\n    return sibling;\n  }\n  return getSibling(sibling, selector, direction);\n}\n\n// Fires custom event on given element\nfunction emit(el, type, data = {}) {\n  const event = document.createEvent('Event');\n\n  Object.keys(data).forEach((key) => {\n    event[key] = data[key];\n  });\n\n  event.initEvent(type, true, true);\n  el.dispatchEvent(event);\n}\n\nclass ContextMenu {\n  constructor(\n    selector,\n    items,\n    options = {\n      className: '',\n      minimalStyling: false,\n    },\n  ) {\n    this.selector = selector;\n    this.items = items;\n    this.options = options;\n    this.id = nextId++;\n    this.target = null;\n\n    this.create();\n    instances.push(this);\n  }\n\n  // Creates DOM elements, sets up event listeners\n  create() {\n    // Create root <ul>\n    this.menu = document.createElement('ul');\n    this.menu.className = 'ContextMenu';\n    this.menu.setAttribute('data-contextmenu', this.id);\n    this.menu.setAttribute('tabindex', -1);\n    this.menu.addEventListener('keyup', (e) => {\n      switch (e.which) {\n        case 38:\n          this.moveFocus(-1);\n          break;\n        case 40:\n          this.moveFocus(1);\n          break;\n        case 27:\n          this.hide();\n          break;\n        default:\n        // do nothing\n      }\n    });\n\n    if (!this.options.minimalStyling) {\n      this.menu.classList.add('ContextMenu--theme-default');\n    }\n    if (this.options.className) {\n      this.options.className\n        .split(' ')\n        .forEach((cls) => this.menu.classList.add(cls));\n    }\n\n    // Create <li>'s for each menu item\n    this.items.forEach((item, index) => {\n      const li = document.createElement('li');\n\n      if (!('name' in item)) {\n        // Insert a divider\n        li.className = 'ContextMenu-divider';\n      } else {\n        li.className = 'ContextMenu-item';\n        li.textContent = item.name;\n        li.setAttribute('data-contextmenuitem', index);\n        li.setAttribute('tabindex', 0);\n        li.addEventListener('click', this.select.bind(this, li));\n        li.addEventListener('keyup', (e) => {\n          if (e.which === 13) {\n            this.select(li);\n          }\n        });\n      }\n\n      this.menu.appendChild(li);\n    });\n\n    // Add root element to the <body>\n    document.body.appendChild(this.menu);\n\n    emit(this.menu, 'created');\n  }\n\n  // Shows context menu\n  show(e) {\n    this.menu.style.left = `${e.pageX}px`;\n    this.menu.style.top = `${e.pageY}px`;\n    this.menu.classList.add('is-open');\n    this.target = e.target;\n    // Give context menu focus\n    this.menu.focus();\n    // Disable native context menu\n    e.preventDefault();\n\n    emit(this.menu, 'shown');\n  }\n\n  // Hides context menu\n  hide() {\n    this.menu.classList.remove('is-open');\n    this.target = null;\n    emit(this.menu, 'hidden');\n  }\n\n  // Selects the given item and calls its handler\n  select(item) {\n    const itemId = item.getAttribute('data-contextmenuitem');\n    if (this.items[itemId]) {\n      // Call item handler with target element as parameter\n      this.items[itemId].fn(this.target);\n    }\n    this.hide();\n    emit(this.menu, 'itemselected');\n  }\n\n  // Moves focus to the next/previous menu item\n  moveFocus(direction = 1) {\n    const focused = this.menu.querySelector('[data-contextmenuitem]:focus');\n    let next;\n\n    if (focused) {\n      next = getSibling(focused, '[data-contextmenuitem]', direction);\n    }\n\n    if (!next) {\n      next =\n        direction > 0\n          ? this.menu.querySelector('[data-contextmenuitem]:first-child')\n          : this.menu.querySelector('[data-contextmenuitem]:last-child');\n    }\n\n    if (next) next.focus();\n  }\n\n  // Convenience method for adding an event listener\n  on(type, fn) {\n    this.menu.addEventListener(type, fn);\n  }\n\n  // Convenience method for removing an event listener\n  off(type, fn) {\n    this.menu.removeEventListener(type, fn);\n  }\n\n  // Removes DOM elements, stop listeners\n  destroy() {\n    this.menu.parentElement.removeChild(this.menu);\n    this.menu = null;\n    instances.splice(instances.indexOf(this), 1);\n  }\n}\n\n// Listen for contextmenu event to show menu\ndocument.addEventListener('contextmenu', (e) => { \n  instances.forEach((menu) => {\n    if (e.target.matches(menu.selector) || e.target.closest(menu.selector)) {\n      menu.show(e);\n    }\n  });\n});\n\n// Listen for click event to hide menu\ndocument.addEventListener('click', (e) => {  \n  instances.forEach((menu) => {\n    if (\n      !e.target.matches(\n        `[data-contextmenu=\"${menu.id}\"], [data-contextmenu=\"${menu.id}\"] *`,\n      )\n    ) {\n      menu.hide();\n    }\n  });\n});\n</script>\n<script>!function(){\"use strict\";var e=function(e,t){const{buttons:n,shapes:i,images:a,dimensions:o,api:s,templates:l,canvasSizeBlock:r=!1,fonts:c=[],fixedCanvas:d=!1,layers:h=!1}=t;this.containerSelector=e,this.containerEl=$(e),this.dimensions={width:o&&o.width>0?o.width:800,height:o&&o.height>0?o.height:600},this.buttons=n,this.shapes=i,this.images=a,this.templates=l,this.fonts=c,this.fixedCanvas=d,this.layers=h,this.api={upload:s&&s.upload?s.upload:null},this.containerEl.addClass(\"default-container\"),this.canvas=null,this.activeTool=null,this.activeSelection=null,this.canvasSizeBlock=!0===r,this.loadCustomFonts=async()=>{const e=this.fonts.map((e=>new FontFace(e.name,`url(${e.path})`,{style:e.style||\"normal\",weight:e.weight||\"normal\"}).load().then((e=>(document.fonts.add(e),e)))));try{await Promise.all(e)}catch(e){console.error(\"Error loading custom fonts:\",e)}},this.getCanvasJSON=()=>this.canvas.toJSON(),this.setCanvasJSON=e=>{e&&this.canvas.loadFromJSON(JSON.parse(e),this.canvas.renderAll.bind(this.canvas))},this.setActiveTool=(t,n={})=>{const{forceOpen:i=!1}=n,a=`${e} .toolpanel#${t}-panel`,o=$(a).hasClass(\"visible\"),s=this.activeTool===t,l=()=>{this.canvas.isDrawingLineMode=!1,this.canvas.isDrawingPathMode=!1,this.canvas.isDrawingMode=!1,this.canvas.isDrawingTextMode=!1,this.canvas.isDrawingRectMode=!1,this.canvas.isDrawingCircleMode=!1,this.canvas.isDrawingTriangleMode=!1,this.canvas.defaultCursor=\"default\",this.canvas.selection=!0,this.canvas.forEachObject((e=>{e.selectable=!0,e.evented=!0}))};if(!i&&s&&o)return $(a).removeClass(\"visible\"),l(),\"select\"!==t&&(this.canvas.discardActiveObject(),this.canvas.renderAll(),this.activeSelection=null),void(this.activeTool=null);if($(`${e} .toolpanel`).removeClass(\"visible\"),this.activeSelection&&this.activeSelection.metadata&&(this.activeSelection.metadata.isGuide||this.activeSelection.metadata.isRuler||this.activeSelection.metadata.isMargin))return this.activeTool=null,void(this.activeSelection=null);switch(this.activeTool=t,\"select\"===t&&this.activeSelection?($(`${e} .toolbar .active`).removeClass(\"active\"),$(`${e} .toolpanel#${t}-panel`).attr(\"class\",`toolpanel visible type-${this.activeSelection.type}`).addClass(\"visible\"),this.setSelectionValues()):($(`${e} .toolpanel#${t}-panel`).addClass(\"visible\"),this.canvas.discardActiveObject(),this.canvas.renderAll(),this.activeSelection=null),l(),t){case\"draw\":this.canvas.isDrawingMode=!0;break;case\"rect\":this.canvas.isDrawingRectMode=!0,this.canvas.defaultCursor=\"crosshair\",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case\"ellipse\":this.canvas.isDrawingCircleMode=!0,this.canvas.defaultCursor=\"crosshair\",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case\"triangle\":this.canvas.isDrawingTriangleMode=!0,this.canvas.defaultCursor=\"crosshair\",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case\"line\":this.canvas.isDrawingLineMode=!0,this.canvas.defaultCursor=\"crosshair\",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case\"path\":this.canvas.isDrawingPathMode=!0,this.canvas.defaultCursor=\"crosshair\",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1})),this.updateTip(\"Tip: click to place points, press and pull for curves! Click outside or press Esc to cancel!\");break;case\"textbox\":this.canvas.isDrawingTextMode=!0,this.canvas.defaultCursor=\"crosshair\",this.canvas.selection=!1,this.canvas.forEachObject((e=>{e.selectable=!1,e.evented=!1}));break;case\"upload\":this.openDragDropPanel();break;default:this.updateTipRandom()}},this.undo=()=>{try{if(this.history.getValues().undo.length>1){this.history.undo();const e=this.history.getValues().undo,t=e[e.length-1];t&&this.canvas.loadFromJSON(JSON.parse(t),(()=>{this.canvas.renderAll(),\"function\"==typeof this.canvas.fire&&this.canvas.fire(\"history:undo\")}))}}catch(e){console.error(\"undo failed\",e)}},this.redo=()=>{try{const e=this.history.getValues().redo;if(e.length){const t=e[e.length-1];this.history.redo(),t&&this.canvas.loadFromJSON(JSON.parse(t),(()=>{this.canvas.renderAll(),\"function\"==typeof this.canvas.fire&&this.canvas.fire(\"history:redo\")}))}}catch(e){console.error(\"redo failed\",e)}},this.setActiveSelection=e=>{this.activeSelection=e&&e[0]?e[0]:e,this.activeSelection&&this.setActiveTool(\"select\",{forceOpen:!0})},this.configUndoRedoStack=()=>{this.history=window.UndoRedoStack(),document.addEventListener(\"keydown\",(e=>{const t=e.which||e.keyCode;e.ctrlKey&&0===document.querySelectorAll(\"textarea:focus, input:focus\").length&&(90===t&&this.undo(),89===t&&this.redo())}))},this.init=async()=>{await this.loadCustomFonts(),this.initializeRuler(),this.configUndoRedoStack(),this.initializeToolbar(),this.initializeMainPanel(),this.initializeShapes(),this.initializeImages();try{this.initializeTemplates()}catch(e){console.error(\"can't initialize templates\",e)}this.initializeFreeDrawSettings(),this.initializeCanvasSettingPanel(),this.initializeSelectionSettings(),this.canvas=this.initializeCanvas(),this.initializeAligningGuidelines(this.canvas),this.initializeCenteringGuidelines(this.canvas),this.initializeCanvasActionsMenu(this.canvas),this.fixedCanvas&&$(`${this.containerSelector} #canvas-holder`).addClass(\"fixed-canvas\"),this.layers&&$(`${this.containerSelector} #canvas-holder`).addClass(\"canvas-layers\"),this.initializeLineDrawing(this.canvas),this.initializePathDrawing(this.canvas),this.initializeTextBoxDrawing(this.canvas),this.initializeRectDrawing(this.canvas),this.initializeCircleDrawing(this.canvas),this.initializeTriangleDrawing(this.canvas),this.initializeUpload(this.canvas),this.initializeCopyPaste(this.canvas),this.initializeAnimations(this.canvas),this.initializeTipSection(),this.initializeUtilsEvents(),this.initializeZoomEvents(),this.initializeLayers(),this.initializeFullscreenEvents(),this.initializeNotification();try{this.initializeConfirmationDialog()}catch(e){console.error(\"can't initialize confirmation dialog\",e)}this.extendHideShowToolPanel(),this.extendNumberInput(),this.fitZoom()},this.initializeMainPanel=()=>{$(`${e}`).append('<div class=\"main-panel\"></div>')},this.extendHideShowToolPanel=()=>{$(`${this.containerSelector} .toolpanel`).each((function(){$(this).append('<div class=\"hide-show-handler\"></div>')})),$(`${this.containerSelector} .toolpanel  .hide-show-handler`).click((function(){$(this).closest(\".toolpanel\").toggleClass(\"closed\")}))},this.extendNumberInput=()=>{$(`${e} .decrease`).click((function(){let e=$(this).closest(\".custom-number-input\").find(\"input[type=number]\"),t=e.attr(\"step\");t=t?parseFloat(t):1;let n=parseFloat(e.val());e.val((n-t).toFixed(t.countDecimals())),e.change()})),$(`${e} .increase`).click((function(){let e=$(this).closest(\".custom-number-input\").find(\"input[type=number]\"),t=e.attr(\"step\");t=t?parseFloat(t):1;let n=parseFloat(e.val());e.val((n+t).toFixed(t.countDecimals())),e.change()}))},this.deleteObject=(e,t)=>{var n=t.target,i=n.canvas;i.remove(n),i.requestRenderAll()},this.cloneObject=(e,t)=>{var n=t.target,i=n.canvas;n.clone((function(e){e.left+=10,e.top+=10,i.add(e)}))},this.renderIcon=e=>{var t=document.createElement(\"img\");return t.src=e,function(e,n,i,a,o){var s=t,l=s.naturalWidth,r=s.naturalHeight,c=this.cornerSize,d=l/r,h=c,p=h/d;p>c&&(h=(p=c)*d),e.save(),e.translate(n,i),e.rotate(fabric.util.degreesToRadians(o.angle)),e.drawImage(s,-h/2,-p/2,h,p),e.restore()}},this.init()};e.prototype.destroy=function(){$(document).off(\"keydown\",this.ctrZY),$(this.containerSelector).empty(),this.canvas=null,this.activeTool=null,this.activeSelection=null},window.ImageEditor=e}(),function(){\"use strict\";window.ImageEditor.prototype.initializeUtilsEvents=function(){this.generateFabricGradientFromColorStops=(e,t,n,i,a)=>{let o={},s=[];for(var l in e)s.push({id:l,color:e[l].color,offset:e[l].position/100});if(\"linear\"===i){let e=(e=>{let t=-parseInt(e,10)*(Math.PI/180);return{x1:Math.round(50+50*Math.sin(t))/100,y1:Math.round(50+50*Math.cos(t))/100,x2:Math.round(50+50*Math.sin(t+Math.PI))/100,y2:Math.round(50+50*Math.cos(t+Math.PI))/100}})(a);o=new fabric.Gradient({type:\"linear\",coords:{x1:e.x1*t,y1:e.y1*n,x2:e.x2*t,y2:e.y2*n},colorStops:s})}else\"radial\"===i&&(o=new fabric.Gradient({type:\"radial\",coords:{x1:t/2,y1:n/2,r1:0,x2:t/2,y2:n/2,r2:t/2},colorStops:s}));return o},this.getRealBBox=async e=>{let t,n,i,a;var o;return(e=>{var t,n,o,s,l=new Uint32Array(e),r=i,c=0;for(n=0;n<a;n++)for(t=0;t<i;t++)if(4278190080&l[n*i+t]){o=n,n=a;break}for(n=a-1;n>o;n--)for(t=0;t<i;t++)if(4278190080&l[n*i+t]){s=n,n=0;break}for(n=o;n<s;n++)for(t=0;t<i;t++)if(t<r&&4278190080&l[n*i+t]){r=t;break}for(n=o;n<s;n++)for(t=i-1;t>r;t--)if(t>c&&4278190080&l[n*i+t]){c=t;break}return{x1:r,x2:c,y1:o,y2:s,width:c-r,height:s-o}})(await(o=e.toDataURL(),null==t&&(t=document.createElement(\"canvas\"),t.style.border=\"1px solid blue\",t.style.position=\"absolute\",t.style.top=\"-100%\",t.style.visibility=\"hidden\",n=t.getContext(\"2d\"),document.body.appendChild(t)),new Promise((function(e,s){if(null==o)return s();var l=new Image;l.addEventListener(\"load\",(()=>{i=l.width,a=l.height,t.width=i,t.height=a,n.drawImage(l,0,0,i,a);var o=n.getImageData(0,0,i,a).data.buffer;e(o,!1)})),l.src=o}))))},this.alignObject=(e,t,n)=>{switch(n){case\"left\":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set(\"left\",t.left-n.left-i.x1),t.setCoords(),e.renderAll(),e.fire(\"object:modified\")})();break;case\"center-h\":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set(\"left\",t.left-n.left-i.x1+e.width/2-i.width/2),t.setCoords(),e.renderAll(),e.fire(\"object:modified\")})();break;case\"right\":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set(\"left\",t.left-n.left-i.x1+e.width-i.width),t.setCoords(),e.renderAll(),e.fire(\"object:modified\")})();break;case\"top\":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set(\"top\",t.top-n.top-i.y1),t.setCoords(),e.renderAll(),e.fire(\"object:modified\")})();break;case\"center-v\":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set(\"top\",t.top-n.top-i.y1+e.height/2-i.height/2),t.setCoords(),e.renderAll(),e.fire(\"object:modified\")})();break;case\"bottom\":(async()=>{let n=t.getBoundingRect(),i=await this.getRealBBox(t);t.set(\"top\",t.top-n.top-i.y1+(e.height-i.height)),t.setCoords(),e.renderAll(),e.fire(\"object:modified\")})()}},this.getCurrentEffect=e=>{let t={opacity:100,blur:0,brightness:50,saturation:50,gamma:{r:45,g:45,b:45}};t.opacity=100*e.opacity;let n=e.filters.find((e=>e.blur));n&&(t.blur=100*n.blur);let i=e.filters.find((e=>e.brightness));i&&(t.brightness=(i.brightness+1)/2*100);let a=e.filters.find((e=>e.saturation));a&&(t.saturation=(a.saturation+1)/2*100);let o=e.filters.find((e=>e.gamma));return o&&(t.gamma.r=Math.round(o.gamma[0]/.022),t.gamma.g=Math.round(o.gamma[1]/.022),t.gamma.b=Math.round(o.gamma[2]/.022)),t},this.getUpdatedFilter=(e,t,n)=>{let i={...e};switch(t){case\"gamma.r\":i.gamma.r=n;break;case\"gamma.g\":i.gamma.g=n;break;case\"gamma.b\":i.gamma.b=n;break;default:i[t]=n}let a=[];return(e=i).blur>0&&a.push(new fabric.Image.filters.Blur({blur:e.blur/100})),50!==e.brightness&&a.push(new fabric.Image.filters.Brightness({brightness:e.brightness/100*2-1})),50!==e.saturation&&a.push(new fabric.Image.filters.Saturation({saturation:e.saturation/100*2-1})),45===e.gamma.r&&45===e.gamma.g&&45===e.gamma.b||a.push(new fabric.Image.filters.Gamma({gamma:[Math.round(.022*e.gamma.r*10)/10,Math.round(.022*e.gamma.g*10)/10,Math.round(.022*e.gamma.b*10)/10]})),a},this.getActiveFontStyle=(e,t)=>{if(e.getSelectionStyles&&e.isEditing){let n=e.getSelectionStyles();return n.find((e=>\"\"===e[t]))?\"\":n[0][t]}return e[t]||\"\"},this.setActiveFontStyle=(e,t,n)=>{if(e.setSelectionStyles&&e.isEditing){let i={};i[t]=n,e.setSelectionStyles(i),e.setCoords()}else e.set(t,n)},this.downloadImage=(e,t=\"png\",n=\"image/png\")=>{const i=e.toString().replace(/^data:image\\/(png|jpeg|jpg|webp);base64,/,\"\"),a=atob(i),o=new Array(a.length);for(let e=0;e<a.length;e+=1)o[e]=a.charCodeAt(e);const s=new Uint8Array(o),l=new Blob([s],{type:n+\";base64\"}),r=window.URL.createObjectURL(l);if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(l);const c=document.createElement(\"a\");c.href=r,c.download=\"image.\"+t,c.dispatchEvent(new MouseEvent(\"click\")),setTimeout((()=>{window.URL.revokeObjectURL(r)}),60)},this.downloadSVG=e=>{const t=\"data:image/svg+xml;charset=utf-8,\"+encodeURIComponent(e),n=document.createElement(\"a\");n.href=t,n.download=\"image.svg\",n.dispatchEvent(new MouseEvent(\"click\")),setTimeout((()=>{window.URL.revokeObjectURL(t)}),60)},this.downloadJSON=e=>{var t=JSON.stringify(e),n=document.createElement(\"a\");n.href=\"data:text/json;charset=utf-8,\"+encodeURIComponent(t),n.download=\"canvas.json\",n.click()},this.addImageFromUrl=e=>{const t=this,n=new Image;n.crossOrigin=\"anonymous\",n.src=e,n.onload=function(){fabric.Image.fromURL(e,(e=>{const n=.9*t.canvas.originalH,i=.9*t.canvas.originalW,a=e.height,o=e.width;(a>=n||o>=i)&&(a>=o?e.scaleToHeight(n):e.scaleToWidth(i));const s=t.canvas.originalW/2,l=t.canvas.originalH/2;e.set({left:s-e.getScaledWidth()/2,top:l-e.getScaledHeight()/2}),t.canvas.add(e),t.canvas.setActiveObject(e),t.canvas.renderAll(),t.canvas.fire(\"object:modified\"),$(`${t.containerSelector} #toolbar button`).removeClass(\"active\")}),{crossOrigin:\"anonymous\"})},n.onerror=function(){console.error(\"Error loading image. Check that the URL is correct and that the image allows CORS.\")}},this.setCanvasStatus=e=>{const t=this;e&&t.canvas.loadFromJSON(e,t.canvas.renderAll.bind(t.canvas))},this.animateObject=e=>{const t=this.canvas;if(e.animation){const n=fabric.util.ease?.[e.animation.easing]||fabric.util.ease.linear||(e=>e);let i=e.left+100;e.set({opacity:1,left:i}),e.animate(\"left\",e.animation.to,{duration:800,onChange:t.renderAll.bind(t),easing:n,onComplete:function(){console.log(\"Animação concluída!\")}})}},this.clearGuidesline=e=>{e.getObjects().forEach((t=>{(t.id&&t.id.startsWith(\"vertical-\")||t.id&&t.id.startsWith(\"horizontal-\"))&&e.remove(t)})),e.renderAll()},this.guidelines=[],this.setGuidelines=e=>{this.guidelines.forEach((t=>{e.add(t)}))},this.handleObjectMoving=(e,t)=>{const n=10,i=e.getZoom(),a=e.width/i,o=e.height/i,s=t.left-t.width*t.scaleX/2,l=t.top-t.height*t.scaleY/2,r=s+t.width*t.scaleX,c=l+t.height*t.scaleY,d=t.left,h=t.top;let p=[];this.clearGuidesline(e);let u=!1;if(Math.abs(s)<n){if(t.set({left:t.width*t.scaleX/2}),!this.guidelineExists(e,\"vertical-left\")){const t=this.createVerticalGuideline(e,0,\"vertical-left\");p.push(t),e.add(t)}u=!0}if(Math.abs(l)<n){if(t.set({top:t.height*t.scaleY/2}),!this.guidelineExists(e,\"horizontal-top\")){const t=this.createHorizontalGuideline(e,0,\"horizontal-top\");p.push(t),e.add(t)}u=!0}if(Math.abs(r-a)<n){if(t.set({left:a-t.width*t.scaleX/2}),!this.guidelineExists(e,\"vertical-right\")){const t=this.createVerticalGuideline(e,a-1,\"vertical-right\");p.push(t),e.add(t)}u=!0}if(Math.abs(c-o)<n){if(t.set({top:o-t.height*t.scaleY/2}),!this.guidelineExists(e,\"horizontal-bottom\")){const t=this.createHorizontalGuideline(e,o,\"horizontal-bottom\");p.push(t),e.add(t)}u=!0}if(Math.abs(d-a/2)<n){if(t.set({left:a/2}),!this.guidelineExists(e,\"vertical-center\")){const t=this.createVerticalGuideline(e,a/2,\"vertical-center\");p.push(t),e.add(t)}u=!0}if(Math.abs(h-o/2)<n){if(t.set({top:o/2}),!this.guidelineExists(e,\"horizontal-center\")){const t=this.createHorizontalGuideline(e,o/2,\"horizontal-center\");p.push(t),e.add(t)}u=!0}u?this.setGuidelines(p):this.clearGuidesline(e),e.renderAll()},this.createVerticalGuideline=(e,t,n)=>new fabric.Line([t,0,t,e.height],{stroke:\"red\",strokeWidth:1,selectable:!1,evented:!1,name:n,id:n,opacity:.8,strokeDashArray:[5,5]}),this.createHorizontalGuideline=(e,t,n)=>new fabric.Line([0,t,e.width,t],{stroke:\"red\",strokeWidth:1,selectable:!1,evented:!1,name:n,id:n,opacity:.8,strokeDashArray:[5,5]}),this.guidelineExists=(e,t)=>e.getObjects().some((e=>e.name===t||e.id===t)),this.onObjectMoving=(e,t)=>{}}}(),window.saveInBrowser={save:(e,t)=>{t instanceof Object&&(t=JSON.stringify(t)),localStorage.setItem(e,t);const n=new CustomEvent(\"ImageEditor.storageSave\",{detail:{name:e,value:t}});window.dispatchEvent(n)},load:e=>{let t=localStorage.getItem(e);return t=JSON.parse(t),t},remove:e=>{localStorage.removeItem(e)}},function(){\"use strict\";var e=[{name:\"select\",title:\"Select/move object (V)\",icon:'<svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" xml:space=\"preserve\"><g><g><path d=\"M423.547,323.115l-320-320c-3.051-3.051-7.637-3.947-11.627-2.304s-6.592,5.547-6.592,9.856V480 c0,4.501,2.837,8.533,7.083,10.048c4.224,1.536,8.981,0.192,11.84-3.285l85.205-104.128l56.853,123.179 c1.792,3.883,5.653,6.187,9.685,6.187c1.408,0,2.837-0.277,4.203-0.875l74.667-32c2.645-1.131,4.736-3.285,5.76-5.973 c1.024-2.688,0.939-5.675-0.277-8.299l-57.024-123.52h132.672c4.309,0,8.213-2.603,9.856-6.592 C427.515,330.752,426.598,326.187,423.547,323.115z\"></path></g></g></svg>'},{name:\"shapes\",title:\"Shapes\",icon:'<svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 490.927 490.927\" xml:space=\"preserve\"><path d=\"M336.738,178.502c-12.645,0-24.852,1.693-36.627,4.582L202.57,11.786c-5.869-10.321-22.84-10.321-28.709,0L2.163,313.311 c-2.906,5.105-2.889,11.385,0.078,16.466c2.953,5.088,8.389,8.216,14.275,8.216l166.314,0.009 c2.818,82.551,70.688,148.88,153.906,148.88c85.012,0,154.19-69.167,154.19-154.186S421.749,178.502,336.738,178.502z  M44.917,304.964l143.299-251.63L331.515,304.97L44.917,304.964z\"></path></svg>'},{name:\"images\",title:\"Images\",icon:'<svg viewBox=\"0 0 576 512\"><path d=\"M160 80H512c8.8 0 16 7.2 16 16V320c0 8.8-7.2 16-16 16H490.8L388.1 178.9c-4.4-6.8-12-10.9-20.1-10.9s-15.7 4.1-20.1 10.9l-52.2 79.8-12.4-16.9c-4.5-6.2-11.7-9.8-19.4-9.8s-14.8 3.6-19.4 9.8L175.6 336H160c-8.8 0-16-7.2-16-16V96c0-8.8 7.2-16 16-16zM96 96V320c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H160c-35.3 0-64 28.7-64 64zM48 120c0-13.3-10.7-24-24-24S0 106.7 0 120V344c0 75.1 60.9 136 136 136H456c13.3 0 24-10.7 24-24s-10.7-24-24-24H136c-48.6 0-88-39.4-88-88V120zm208 24a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z\"/></svg>'},{name:\"draw\",title:\"Free draw\",icon:'<svg height=\"512pt\" viewBox=\"0 -3 512 512\" width=\"512pt\"><g id=\"surface1\"><path d=\"M 497.171875 86.429688 C 506.734375 76.867188 512 64.152344 512 50.628906 C 512 37.105469 506.734375 24.390625 497.171875 14.828125 C 487.609375 5.265625 474.894531 0 461.371094 0 C 447.847656 0 435.132812 5.265625 425.570312 14.828125 L 198.296875 242.105469 L 269.894531 313.703125 Z M 497.171875 86.429688 \" style=\"stroke: none; fill-rule: nonzero; fill: rgb(0, 0, 0); fill-opacity: 1;\"></path><path d=\"M 65.839844 506.65625 C 92.171875 507.21875 130.371094 496.695312 162.925781 459.074219 C 164.984375 456.691406 166.894531 454.285156 168.664062 451.855469 C 179.460938 435.875 184.695312 418.210938 183.855469 400.152344 C 182.945312 380.5625 174.992188 362.324219 161.460938 348.796875 C 150.28125 337.613281 134.722656 331.457031 117.648438 331.457031 C 95.800781 331.457031 73.429688 341.296875 56.277344 358.449219 C 31.574219 383.152344 31.789062 404.234375 31.976562 422.839844 C 32.15625 440.921875 32.316406 456.539062 11.101562 480.644531 L 0 493.257812 C 0 493.257812 26.828125 505.820312 65.839844 506.65625 Z M 65.839844 506.65625 \" style=\"stroke: none; fill-rule: nonzero; fill: rgb(0, 0, 0); fill-opacity: 1;\"></path><path d=\"M 209.980469 373.621094 L 248.496094 335.101562 L 176.894531 263.503906 L 137.238281 303.160156 C 154.691406 306.710938 170.464844 315 182.859375 327.394531 C 195.746094 340.285156 205.003906 356.1875 209.980469 373.621094 Z M 209.980469 373.621094 \" style=\"stroke: none; fill-rule: nonzero; fill: rgb(0, 0, 0); fill-opacity: 1;\"></path></g></svg>'},{name:\"rect\",title:\"Rectangle\",icon:'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2z\"/></svg>'},{name:\"ellipse\",title:\"Ellipse\",icon:'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><circle cx=\"8\" cy=\"8\" r=\"8\"/></svg>'},{name:\"triangle\",title:\"Triangle\",icon:'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M7.022 1.566a1.13 1.13 0 0 1 1.96 0l6.857 11.667c.457.778-.092 1.767-.98 1.767H1.144c-.889 0-1.437-.99-.98-1.767z\"/></svg>'},{name:\"line\",title:\"Line\",icon:'<svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" xml:space=\"preserve\"><path d=\"M349.091,0v124.516L124.516,349.091H0V512h162.909V387.484l224.574-224.574H512V0H349.091z M54.303,457.696v-54.303 h54.303v54.303H54.303z M457.696,108.605h-54.303V54.303h54.303V108.605z\"></path></svg>'},{name:\"path\",title:\"Connectable lines & curves\",icon:'<svg id=\"svg8\" viewBox=\"28 55 140 140\"><path d=\"m 28.386086,150.01543 v 43.10301 H 71.489092 V 178.7505 H 120.75466 V 164.38283 H 71.355237 L 71.488872,150.0086 H 57.121421 c 0,-49.247 14.367449,-63.614929 63.633239,-63.614929 v -14.36768 c -63.633239,0 -78.000906,28.735609 -78.000906,77.982609 l -14.367888,0.007 z m 14.367669,28.73507 v -14.36767 h 14.367668 v 14.36767 z\" id=\"path840\" style=\"stroke-width: 0.264583;\"></path><path d=\"m 120.74975,150.00843 v 43.10301 h 43.10301 V 150.0016 l -43.10301,0.007 z m 14.36767,28.73507 v -14.36767 h 14.36767 v 14.36767 z\" id=\"path840-1\" style=\"stroke-width: 0.264583;\"></path><path d=\"m 120.74975,57.658601 v 43.103009 h 43.10301 V 57.651771 l -43.10301,0.007 z m 14.36767,28.73507 v -14.36767 h 14.36767 v 14.36767 z\" id=\"path840-1-0\" style=\"stroke-width: 0.264583;\"></path></svg>'},{name:\"textbox\",title:\"Text box\",icon:'<svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" xml:space=\"preserve\"><g><g><path d=\"M497,90c8.291,0,15-6.709,15-15V15c0-8.291-6.709-15-15-15h-60c-8.291,0-15,6.709-15,15v15H90V15c0-8.401-6.599-15-15-15 H15C6.599,0,0,6.599,0,15v60c0,8.399,6.599,15,15,15h15v332H15c-8.291,0-15,6.709-15,15v60c0,8.291,6.709,15,15,15h60 c8.291,0,15-6.709,15-15v-15h332v15c0,8.399,6.599,15,15,15h60c8.401,0,15-6.601,15-15v-60c0-8.401-6.599-15-15-15h-15V90H497z  M452,422h-15c-8.401,0-15,6.599-15,15v15H90v-15c0-8.291-6.709-15-15-15H60V90h15c8.401,0,15-6.601,15-15V60h332v15 c0,8.291,6.709,15,15,15h15V422z\"></path></g></g><g><g><path d=\"M361,105H151c-8.291,0-15,6.709-15,15v60c0,6.064,3.647,11.543,9.258,13.857c5.625,2.329,12.056,1.04,16.348-3.252 L187.211,165H226v176.459l-27.48,42.221c-3.062,4.6-3.354,10.518-0.747,15.396S205.463,407,211,407h90 c5.537,0,10.62-3.047,13.228-7.925c2.608-4.878,2.314-10.796-0.747-15.396L286,341.459V165h38.789l25.605,25.605 c4.307,4.307,10.781,5.596,16.348,3.252c5.61-2.314,9.258-7.793,9.258-13.857v-60C376,111.709,369.291,105,361,105z\"></path></g></g></svg>'},{name:\"upload\",title:\"Upload image\",icon:'<svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" xml:space=\"preserve\"><path d=\"M412.907,214.08C398.4,140.693,333.653,85.333,256,85.333c-61.653,0-115.093,34.987-141.867,86.08 C50.027,178.347,0,232.64,0,298.667c0,70.72,57.28,128,128,128h277.333C464.213,426.667,512,378.88,512,320 C512,263.68,468.16,218.027,412.907,214.08z M298.667,277.333v85.333h-85.333v-85.333h-64L256,170.667l106.667,106.667H298.667z\"></path></svg>'},{name:\"background\",title:\"Canvas option\",icon:'<svg viewBox=\"0 0 512 512\"><path d=\"M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z\"/></svg>'},{name:\"ruler\",title:\"Mostrar réguas e guias (Shift+R)\",icon:'<svg viewBox=\"0 0 512 512\"><path d=\"M177.9 494.1c-18.7 18.7-49.1 18.7-67.9 0L17.9 401.9c-18.7-18.7-18.7-49.1 0-67.9l50.7-50.7 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 41.4-41.4 48 48c6.2 6.2 16.4 6.2 22.6 0s6.2-16.4 0-22.6l-48-48 50.7-50.7c18.7-18.7 49.1-18.7 67.9 0l92.1 92.1c18.7 18.7 18.7 49.1 0 67.9L177.9 494.1z\"/></svg>'},{name:\"templates\",title:\"Tempaltes\",icon:'<svg viewBox=\"0 0 24 24\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M12.675 3h.825v18h-2.175c-3.59 0-5.385 0-6.61-.966a4.497 4.497 0 0 1-.749-.748C3 18.06 3 16.266 3 12.675v-1.35c0-3.59 0-5.385.966-6.61a4.5 4.5 0 0 1 .748-.749C5.94 3 7.734 3 11.325 3h1.35Zm6.61 17.034c-.926.73-2.178.909-4.285.952v-9.968h6v1.657c0 3.59 0 5.386-.966 6.61-.22.279-.47.53-.748.749Zm1.709-10.516H15V3.014c2.107.044 3.36.222 4.286.952.278.22.529.47.748.748.788 1 .933 2.38.96 4.804Z\" fill=\"currentColor\"></path></svg>'}];const t=[{name:\"animation\",title:\"Play animation\",icon:'<svg viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\" >  <path d=\"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393\"/></svg>'},{name:\"clear\",title:\"Clear\",icon:'<svg  fill=\"currentColor\" class=\"bi bi-eraser-fill\" viewBox=\"0 0 16 16\"><path d=\"M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z\"/></svg>'},{name:\"undo\",title:\"Undo\",icon:'<svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512.011 512.011\" xml:space=\"preserve\"><path d=\"M511.136,286.255C502.08,194.863,419.84,128.015,328,128.015H192v-80c0-6.144-3.52-11.744-9.056-14.432             c-5.568-2.656-12.128-1.952-16.928,1.92l-160,128C2.208,166.575,0,171.151,0,176.015s2.208,9.44,5.984,12.512l160,128             c2.912,2.304,6.464,3.488,10.016,3.488c2.368,0,4.736-0.512,6.944-1.568c5.536-2.688,9.056-8.288,9.056-14.432v-80h139.392             c41.856,0,80,30.08,84.192,71.712c4.832,47.872-32.704,88.288-79.584,88.288H208c-8.832,0-16,7.168-16,16v64             c0,8.832,7.168,16,16,16h128C438.816,480.015,521.472,391.151,511.136,286.255z\"></path></svg>'},{name:\"redo\",title:\"Redo\",icon:'<svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512.011 512.011\" xml:space=\"preserve\" style=\"transform: scale(-1, 1);\"><path d=\"M511.136,286.255C502.08,194.863,419.84,128.015,328,128.015H192v-80c0-6.144-3.52-11.744-9.056-14.432             c-5.568-2.656-12.128-1.952-16.928,1.92l-160,128C2.208,166.575,0,171.151,0,176.015s2.208,9.44,5.984,12.512l160,128             c2.912,2.304,6.464,3.488,10.016,3.488c2.368,0,4.736-0.512,6.944-1.568c5.536-2.688,9.056-8.288,9.056-14.432v-80h139.392             c41.856,0,80,30.08,84.192,71.712c4.832,47.872-32.704,88.288-79.584,88.288H208c-8.832,0-16,7.168-16,16v64             c0,8.832,7.168,16,16,16h128C438.816,480.015,521.472,391.151,511.136,286.255z\"></path></svg>'},{name:\"save\",title:\"Save\",icon:'<svg viewBox=\"0 0 448 512\"><path d=\"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V173.3c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32H64zm0 96c0-17.7 14.3-32 32-32H288c17.7 0 32 14.3 32 32v64c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V128zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z\"/></svg>'},{name:\"download\",title:\"Download\",icon:'<svg viewBox=\"0 0 512 512\"><path d=\"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V274.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V416c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z\"/></svg>'},{name:\"fullscreen\",title:\"Fullscreen\",icon:'<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\\x3e<path d=\"M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z\"/></svg>'}];window.ImageEditor.prototype.initializeToolbar=function(){const n=this;let i=[],a=[];Array.isArray(this.buttons)&&this.buttons.length?(e.forEach((e=>{this.buttons.includes(e.name)&&i.push(e)})),t.forEach((e=>{this.buttons.includes(e.name)&&a.push(e)}))):(i=e,a=t),this.getCanvasJSON=function(){const e=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))),t=e.map((e=>({obj:e,excludeFromExport:e.excludeFromExport})));e.forEach((e=>{e.excludeFromExport=!1}));const n=JSON.stringify(this.canvas.toJSON([\"metadata\",\"excludeFromExport\"]));return t.forEach((e=>{e.obj.excludeFromExport=e.excludeFromExport})),n},this.toJSONWithGuides=function(){const e=this.canvas.toJSON([\"metadata\"]),t=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))).map((e=>e.toObject([\"metadata\"])));return 0===t.length||(e.objects||(e.objects=[]),e.objects=e.objects.concat(t)),e},this.saveToBrowser=function(){const e=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))),t=e.map((e=>({obj:e,excludeFromExport:e.excludeFromExport})));e.forEach((e=>{e.excludeFromExport=!1})),saveInBrowser.save(\"canvasEditor\",this.canvas.toJSON([\"metadata\",\"excludeFromExport\"])),t.forEach((e=>{e.obj.excludeFromExport=e.excludeFromExport}))},this.checkSnapping=function(e){if(!this.canvas||!e)return!1;if(e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))return!1;const t=10/this.canvas.getZoom(),n=e.getBoundingRect(),i=n.left,a=n.top,o=n.left+n.width,s=n.top+n.height,l=i+n.width/2,r=a+n.height/2,c=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin)));let d=null,h=t;if(c.forEach((e=>{if(e.metadata.isGuide&&e.metadata.isHorizontal||e.metadata.isMargin&&(\"marginTop\"===e.metadata.id||\"marginBottom\"===e.metadata.id)){const t=e.y1,n=Math.abs(t-a);n<h&&(h=n,d={axis:\"y\",target:a,value:t,guide:e});const i=Math.abs(t-r);i<h&&(h=i,d={axis:\"y\",target:r,value:t,guide:e});const o=Math.abs(t-s);o<h&&(h=o,d={axis:\"y\",target:s,value:t,guide:e})}else if(e.metadata.isGuide&&!e.metadata.isHorizontal||e.metadata.isMargin&&(\"marginLeft\"===e.metadata.id||\"marginRight\"===e.metadata.id)){const t=e.x1,n=Math.abs(t-i);n<h&&(h=n,d={axis:\"x\",target:i,value:t,guide:e});const a=Math.abs(t-l);a<h&&(h=a,d={axis:\"x\",target:l,value:t,guide:e});const s=Math.abs(t-o);s<h&&(h=s,d={axis:\"x\",target:o,value:t,guide:e})}})),d){if(d.guide.metadata.isGuide&&d.guide.set({stroke:\"#ff3860\",strokeWidth:2,opacity:1}),\"y\"===d.axis){const t=d.value-d.target;e.set({top:e.top+t})}else{const t=d.value-d.target;e.set({left:e.left+t})}const t=this;return setTimeout((()=>{d.guide&&d.guide.metadata&&d.guide.metadata.isGuide&&(d.guide.active||d.guide.set({stroke:\"#00a8ff\",strokeWidth:2,opacity:.7}),t.canvas.renderAll())}),300),!0}return!1},this.forceGuidesMovable=function(){if(!this.canvas)return;const e=this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide));0!==e.length&&(e.forEach(((e,t)=>{try{const t=e.metadata.isHorizontal;e.set({selectable:!0,evented:!0,lockMovementX:t,lockMovementY:!t,hasControls:!1,hasBorders:!0,padding:8,strokeWidth:2,hoverCursor:t?\"ns-resize\":\"ew-resize\",moveCursor:t?\"ns-resize\":\"ew-resize\",excludeFromExport:!0,opacity:e.active?1:.7})}catch(e){console.error(`Erro ao configurar guia ${t+1}:`,e)}})),this.canvas.renderAll())};try{const e='<div id=\"tinyartist-logo\">\\n            <img width=\"40\" height=\"35\" src=\"https://uat.marascott.ai/wp-content/uploads/mascotte-remotedsi-tinyartistgradient-square-150x150.png\">\\n            <span>TinyArtist Editor</span>\\n        </div>';this.containerEl.append(`<div class=\"toolbar\" id=\"toolbar\"><div class=\"main-buttons\"></div>${e}<div class=\"extended-buttons\"></div></div>`);const t=window.matchMedia?window.matchMedia(\"(orientation: portrait)\"):null,o=()=>{const e=t?t.matches:window.innerHeight>window.innerWidth;n.containerEl.toggleClass(\"vertical-toolbar-layout\",e),$(`${n.containerSelector} #toolbar`).toggleClass(\"vertical\",e)};o(),window.addEventListener(\"resize\",o),t&&(t.addEventListener?t.addEventListener(\"change\",o):t.addListener&&t.addListener(o)),(()=>{i.forEach((e=>{$(`${this.containerSelector} #toolbar .main-buttons`).append(`<button id=\"${e.name}\">${e.icon}</button>`)})),$(`${this.containerSelector} #toolbar .main-buttons button`).click((function(){let e=$(this).attr(\"id\");if(\"ruler\"===e)return n.toggleRulers(),void $(this).toggleClass(\"active\");const t=$(this),i=`${n.containerSelector} .toolpanel#${e}-panel`,a=$(i).hasClass(\"visible\");if(t.hasClass(\"active\")&&a)return t.removeClass(\"active\"),void n.setActiveTool(e);$(`${n.containerSelector} #toolbar button`).removeClass(\"active\"),t.addClass(\"active\"),n.setActiveTool(e)}))})(),(()=>{a.forEach((e=>{$(`${this.containerSelector} #toolbar .extended-buttons`).append(`<button id=\"${e.name}\">${e.icon}</button>`)})),$(`${this.containerSelector} #toolbar .extended-buttons button`).click((async function(){let e=$(this).attr(\"id\");\"save\"===e?(console.log(n.canvas),console.log(n.canvas.toJSON()),console.log(n.canvas.toJSON([\"metadata\",\"excludeFromExport\"])),n.saveToBrowser(),n.toast(\"Success\")):\"clear\"===e?await((e,t={})=>\"function\"==typeof n.confirm?n.confirm(e,t):Promise.resolve(!0))(\"This will clear the canvas! Are you sure?\",{confirmLabel:\"Clear\",cancelLabel:\"Cancel\"})&&(n.canvas.clear(),saveInBrowser.remove(\"canvasEditor\")):\"download\"===e?($(n.containerSelector).append('<div class=\"custom-modal-container\">\\n              <div class=\"custom-modal-content\">\\n                <div class=\"button-download\" id=\"svg\">Download as SVG</div>\\n                <div class=\"button-download\" id=\"png\">Download as PNG</div>\\n                <div class=\"button-download\" id=\"jpg\">Download as JPG</div>\\n                <div class=\"button-download\" id=\"webp\">Download as WEBP</div>\\n                <div class=\"button-download\" id=\"json\">Download as JSON</div>\\n              </div>\\n            </div>'),$(\".custom-modal-container\").click((function(){$(this).remove()})),$(\".custom-modal-container .button-download\").click((function(e){let t=$(this).attr(\"id\"),i=n.canvas;i.setBackgroundColor(\"#FFFFFF\");const a=i.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin)));if(a.forEach((e=>{e.visible=!1})),i.renderAll(),\"svg\"===t)n.downloadSVG(i.toSVG({suppressPreamble:!0}));else if(\"png\"===t)n.downloadImage(i.toDataURL());else if(\"jpg\"===t)n.downloadImage(i.toDataURL({format:\"jpeg\"}),\"jpg\",\"image/jpeg\");else if(\"webp\"===t)n.downloadImage(i.toDataURL({format:\"webp\"}),\"webp\",\"image/webp\");else if(\"json\"===t){const e=n.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))),t={};e.forEach(((e,n)=>{t[n]=e.excludeFromExport,e.excludeFromExport=!1}));const i=JSON.stringify(n.canvas.toJSON([\"metadata\",\"excludeFromExport\"]));n.downloadJSON(i),e.forEach(((e,n)=>{e.excludeFromExport=t[n]}))}a.forEach((e=>{e.visible=!0})),i.renderAll()}))):\"undo\"===e?n.undo():\"redo\"===e?n.redo():\"animation\"===e&&n.animations.runAnimation()}))})(),$(`${this.containerSelector}`).append('<div id=\"footerbar\" class=\"toolbar\"></div>')}catch(e){console.error(\"can't create toolbar\")}}}(),window.ImageEditor.prototype.initializeAligningGuidelines=function(e){var t,n=e.getSelectionContext(),i=1,a=\"rgb(0,255,0)\",o=1;function s(e){l(e.x1>e.x2?e.x2:e.x1,e.y+.5,e.x2>e.x1?e.x2:e.x1,e.y+.5)}function l(e,s,l,r){n.save(),n.lineWidth=i,n.strokeStyle=a,n.beginPath(),n.moveTo(e*o+t[4],s*o+t[5]),n.lineTo(l*o+t[4],r*o+t[5]),n.stroke(),n.restore()}function r(e,t){e=Math.round(e),t=Math.round(t);for(var n=e-4,i=e+4;n<=i;n++)if(n===t)return!0;return!1}var c=[],d=[];e.on(\"mouse:down\",(function(){t=e.viewportTransform,o=e.getZoom()})),e.on(\"object:moving\",(function(n){var i=n.target,a=e.getObjects(),o=i.getCenterPoint(),s=o.x,l=o.y,h=i.getBoundingRect(),p=h.height/t[3],u=h.width/t[0],v=!1,g=!1;if(e._currentTransform){for(var m=a.length;m--;)if(a[m]!==i){var f=a[m].getCenterPoint(),b=f.x,y=f.y,w=a[m].getBoundingRect(),k=w.height/t[3],x=w.width/t[0];r(s+u/2,b-x/2)&&(g=!0,c.push({x:b-x/2,y1:y<l?y-k/2-5:y+k/2+5,y2:l>y?l+p/2+5:l-p/2-5}),i.setPositionByOrigin(new fabric.Point(b-x/2-u/2,l),\"center\",\"center\")),r(s-u/2,b+x/2)&&(g=!0,c.push({x:b+x/2,y1:y<l?y-k/2-5:y+k/2+5,y2:l>y?l+p/2+5:l-p/2-5}),i.setPositionByOrigin(new fabric.Point(b+x/2+u/2,l),\"center\",\"center\")),r(y+k/2,l-p/2)&&(v=!0,d.push({y:y+k/2,x1:b<s?b-x/2-5:b+x/2+5,x2:s>b?s+u/2+5:s-u/2-5}),i.setPositionByOrigin(new fabric.Point(s,y+k/2+p/2),\"center\",\"center\")),r(y-k/2,l+p/2)&&(v=!0,d.push({y:y-k/2,x1:b<s?b-x/2-5:b+x/2+5,x2:s>b?s+u/2+5:s-u/2-5}),i.setPositionByOrigin(new fabric.Point(s,y-k/2-p/2),\"center\",\"center\")),r(b,s)&&(g=!0,c.push({x:b,y1:y<l?y-k/2-5:y+k/2+5,y2:l>y?l+p/2+5:l-p/2-5}),i.setPositionByOrigin(new fabric.Point(b,l),\"center\",\"center\")),r(b-x/2,s-u/2)&&(g=!0,c.push({x:b-x/2,y1:y<l?y-k/2-5:y+k/2+5,y2:l>y?l+p/2+5:l-p/2-5}),i.setPositionByOrigin(new fabric.Point(b-x/2+u/2,l),\"center\",\"center\")),r(b+x/2,s+u/2)&&(g=!0,c.push({x:b+x/2,y1:y<l?y-k/2-5:y+k/2+5,y2:l>y?l+p/2+5:l-p/2-5}),i.setPositionByOrigin(new fabric.Point(b+x/2-u/2,l),\"center\",\"center\")),r(y,l)&&(v=!0,d.push({y,x1:b<s?b-x/2-5:b+x/2+5,x2:s>b?s+u/2+5:s-u/2-5}),i.setPositionByOrigin(new fabric.Point(s,y),\"center\",\"center\")),r(y-k/2,l-p/2)&&(v=!0,d.push({y:y-k/2,x1:b<s?b-x/2-5:b+x/2+5,x2:s>b?s+u/2+5:s-u/2-5}),i.setPositionByOrigin(new fabric.Point(s,y-k/2+p/2),\"center\",\"center\")),r(y+k/2,l+p/2)&&(v=!0,d.push({y:y+k/2,x1:b<s?b-x/2-5:b+x/2+5,x2:s>b?s+u/2+5:s-u/2-5}),i.setPositionByOrigin(new fabric.Point(s,y+k/2-p/2),\"center\",\"center\"))}v||(d.length=0),g||(c.length=0)}})),e.on(\"before:render\",(function(){e.contextTop&&e.clearContext(e.contextTop)})),e.on(\"after:render\",(function(){for(var e=c.length;e--;)l((t=c[e]).x+.5,t.y1>t.y2?t.y2:t.y1,t.x+.5,t.y2>t.y1?t.y2:t.y1);var t;for(e=d.length;e--;)s(d[e]);c.length=d.length=0})),e.on(\"mouse:up\",(function(){c.length=d.length=0,e.renderAll()}))},window.ImageEditor.prototype.initializeCenteringGuidelines=function(e){for(var t,n=e.getWidth(),i=e.getHeight(),a=n/2,o=i/2,s={},l={},r=e.getSelectionContext(),c=a-4,d=a+4;c<=d;c++)s[Math.round(c)]=!0;for(c=o-4,d=o+4;c<=d;c++)l[Math.round(c)]=!0;function h(e,n,i,a){r.save(),r.strokeStyle=\"rgba(255,0,241,0.5)\",r.lineWidth=1,r.beginPath(),r.moveTo(e*t[0],n*t[3]),r.lineTo(i*t[0],a*t[3]),r.stroke(),r.restore()}var p,u;e.on(\"mouse:down\",(function(){t=e.viewportTransform})),e.on(\"object:moving\",(function(t){var n=t.target,i=n.getCenterPoint();e._currentTransform&&(p=Math.round(i.x)in s,((u=Math.round(i.y)in l)||p)&&n.setPositionByOrigin(new fabric.Point(p?a:i.x,u?o:i.y),\"center\",\"center\"))})),e.on(\"before:render\",(function(){e.contextTop&&e.clearContext(e.contextTop)})),e.on(\"after:render\",(function(){p&&h(a+.5,0,a+.5,i),u&&h(0,o+.5,n,o+.5)})),e.on(\"mouse:up\",(function(){p=u=null,e.renderAll()}))},function(){\"use strict\";window.ImageEditor.prototype.initializeCanvas=function(){try{$(`${this.containerSelector} .main-panel`).append('<div class=\"canvas-holder\" id=\"canvas-holder\"><div class=\"content\"><canvas id=\"c\"></canvas></div></div>'),fabric.Object.prototype.toObject=(t=fabric.Object.prototype.toObject,function(e){var n=t.call(this,e);return n.animation=this.animation,n}),fabric.Object.prototype.initialize=(e=fabric.Object.prototype.initialize,function(t){e.call(this,t),this.animation=t.animation||null}),fabric.Object.prototype.originX=\"center\",fabric.Object.prototype.originY=\"center\";const n={renderOnAddRemove:!1},i=new fabric.Canvas(\"c\",n).setDimensions(this.dimensions);i.originalW=i.width,i.originalH=i.height,fabric.Object.prototype.transparentCorners=!1,fabric.Object.prototype.cornerStyle=\"circle\",fabric.Object.prototype.borderColor=\"#8b3dff\",fabric.Object.prototype.cornerColor=\"#ffffff\",fabric.Object.prototype.cornerStrokeColor=\"#6d6d6d\",fabric.Object.prototype.padding=0;const a=`data:image/svg+xml;utf8,${encodeURIComponent('\\n        <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\\n          <g filter=\"url(#filter0_d)\">\\n            <circle cx=\"9\" cy=\"9\" r=\"5\" fill=\"white\"/>\\n            <circle cx=\"9\" cy=\"9\" r=\"4.75\" stroke=\"black\" stroke-opacity=\"0.3\" stroke-width=\"0.5\"/>\\n          </g>\\n            <path d=\"M10.8047 11.1242L9.49934 11.1242L9.49934 9.81885\" stroke=\"black\" stroke-width=\"0.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\\n            <path d=\"M6.94856 6.72607L8.25391 6.72607L8.25391 8.03142\" stroke=\"black\" stroke-width=\"0.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\\n            <path d=\"M9.69517 6.92267C10.007 7.03301 10.2858 7.22054 10.5055 7.46776C10.7252 7.71497 10.8787 8.01382 10.9517 8.33642C11.0247 8.65902 11.0148 8.99485 10.9229 9.31258C10.831 9.63031 10.6601 9.91958 10.4262 10.1534L9.49701 11.0421M8.25792 6.72607L7.30937 7.73554C7.07543 7.96936 6.90454 8.25863 6.81264 8.57636C6.72073 8.89408 6.71081 9.22992 6.78381 9.55251C6.8568 9.87511 7.01032 10.174 7.23005 10.4212C7.44978 10.6684 7.72855 10.8559 8.04036 10.9663\" stroke=\"black\" stroke-width=\"0.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\\n          <defs>\\n          <filter id=\"filter0_d\" x=\"0\" y=\"0\" width=\"18\" height=\"18\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\\n            <feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/>\\n            <feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"/>\\n            <feOffset/>\\n            <feGaussianBlur stdDeviation=\"2\"/>\\n            <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0.137674 0 0 0 0 0.190937 0 0 0 0 0.270833 0 0 0 0.15 0\"/>\\n            <feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow\"/>\\n            <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"effect1_dropShadow\" result=\"shape\"/>\\n          </filter>\\n          </defs>\\n        </svg>\\n        ')}`,o=document.createElement(\"img\");function s(e,t,n,i,a){var s=this.cornerSize;e.save(),e.translate(t,n),e.rotate(fabric.util.degreesToRadians(a.angle)),e.drawImage(o,-s/2,-s/2,s,s),e.restore()}o.src=a,fabric.Object.prototype.controls.mtr=new fabric.Control({x:0,y:.5,offsetX:0,offsetY:40,actionHandler:fabric.controlsUtils.rotationWithSnapping,actionName:\"rotate\",render:s,cornerSize:38,withConnection:!0}),i.preserveObjectStacking=!0,i.on(\"selection:created\",(e=>this.setActiveSelection(e.selected))),i.on(\"selection:updated\",(e=>this.setActiveSelection(e.selected))),i.on(\"selection:cleared\",(e=>this.setActiveSelection(null))),i.on(\"object:rotating\",(e=>{e.e.shiftKey?e.target.snapAngle=15:e.target.snapAngle=!1})),i.on(\"object:rotating\",(e=>{var t=e.target,n=Math.round(t.angle);if(t.angleText)a=t.angleText.item(1),o=t.angleText.item(0),a.set(\"text\",n+\"°\"),o.set({width:a.width+20,height:a.height+20}),t.angleText.setCoords();else{var a=new fabric.Text(n+\"°\",{fontSize:18,fill:\"white\",fontFamily:\"sans-serif\",originX:\"center\",originY:\"center\"}),o=new fabric.Rect({fill:\"#333333\",width:a.width+20,height:a.height+20,rx:5,ry:5,stroke:\"white\",strokeWidth:1,originX:\"center\",originY:\"center\"});t.angleText=new fabric.Group([o,a],{originX:\"center\",originY:\"center\"}),i.on(\"mouse:move\",(function(e){if(t.angleText){const n=i.getPointer(e.e);t.angleText.set({left:n.x+50,top:n.y+50}),i.renderAll()}})),i.add(t.angleText)}t.angleText.set({left:t.left,top:t.top-10}),t.set({hasControls:!1}),i.renderAll()})),i.on(\"mouse:up\",(function(e){i.getActiveObject()&&i.getActiveObject().angleText&&(i.remove(i.getActiveObject().angleText),i.getActiveObject().angleText=null,i.renderAll())})),i.on(\"object:moving\",(e=>{var t=e.target;this.handleObjectMoving(i,t),t.set({hasControls:!1})})),i.on(\"object:scaling\",(e=>{e.target.set({hasControls:!1})})),i.on(\"object:modified\",(e=>{if(this.canvas){let e=this.canvas.toJSON();this.history?this.history.push(JSON.stringify(e)):console.error(\"History (this.history) is not defined.\")}else console.error(\"Canvas (this.canvas) is not defined.\");this.clearGuidesline(i);var t=e.target;!t||t.metadata||t.metadata?.isGuide||t.metadata?.isMargin||t.set({hasControls:!0})}));let l=null;if(window.saveInBrowser)try{l=window.saveInBrowser.load(\"canvasEditor\"),l&&(console.log(\"loading canvas from local storage\",l),i.loadFromJSON(l,(()=>{i.getObjects().forEach((e=>{e.locked&&(e.lockMovementX=!0,e.lockMovementY=!0,e.lockScalingX=!0,e.lockScalingY=!0,e.lockRotation=!0,e.lockUniScaling=!0,e.lockSkewingX=!0,e.lockSkewingY=!0,e.selectable=!0,e.hasControls=!0,e.hasRotatingPoint=!0)})),i.renderAll()})))}catch(r){console.error(\"Erro ao carregar canvas salvo:\",r)}else console.warn(\"saveInBrowser não está disponível. O canvas não será carregado do armazenamento local.\");return document.addEventListener(\"keydown\",(e=>{const t=e.which||e.keyCode;let n;document.querySelectorAll(\"textarea:focus, input:focus\").length>0||(37!==t&&38!==t&&39!==t&&40!==t||(e.preventDefault(),n=i.getActiveObject(),n))&&(37===t?n.left-=1:39===t?n.left+=1:38===t?n.top-=1:40===t&&(n.top+=1),37!==t&&38!==t&&39!==t&&40!==t||(n.setCoords(),i.renderAll(),i.fire(\"object:modified\")))})),document.addEventListener(\"keydown\",(e=>{46===(e.which||e.keyCode)&&0===document.querySelectorAll(\"textarea:focus, input:focus\").length&&(i.getActiveObjects().forEach((e=>{i.remove(e)})),i.discardActiveObject().requestRenderAll(),i.fire(\"object:modified\"))})),document.addEventListener(\"mousedown\",(e=>{document.getElementById(\"canvas-holder\")==e.target&&(i.discardActiveObject(),i.renderAll())})),setTimeout((()=>{let e=i.toJSON();this.history&&this.history.push(JSON.stringify(e))}),1e3),this.canvas=i,this.initRulerComponent?this.initRulerComponent():console.warn(\"initRulerComponent não está disponível\"),setTimeout((()=>{this.setupRulerAfterCanvasReady?this.setupRulerAfterCanvasReady():console.warn(\"setupRulerAfterCanvasReady não está disponível\")}),500),i}catch(c){return console.error(\"can't create canvas instance\",c),null}var e,t}}(),function(){\"use strict\";const e=['<svg viewBox=\"-10 -10 120 120\"><polygon points=\"0 0, 0 100, 100 100, 100 0\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></polygon></svg>','<svg viewBox=\"-8 -8 120 120\"><polygon fill=\"none\" stroke-width=\"8\" stroke=\"black\" points=\"50 0, 85 50, 50 100, 15 50\"></polygon></svg>','<svg viewBox=\"-10 -10 120 120\"><polygon points=\"25 0, 0 100, 75 100, 100 0\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></polygon></svg>','<svg viewBox=\"-8 -8 120 120\"><polygon points=\"0,100 30,10 70,10 100,100\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></polygon></svg>','<svg viewBox=\"-10 -10 120 120\"><path d=\"M 80,80 V 20 H 20 v 60 z m 20,20 V 0 H 0 v 100 z\" stroke-width=\"8\" stroke=\"#000\" fill-rule=\"evenodd\" fill=\"none\"></path></svg>','<svg viewBox=\"0 0 100 100\"><polygon points=\"26,86 11.2,40.4 50,12.2 88.8,40.4 74,86 \" stroke=\"#000\" stroke-width=\"8\" fill=\"none\"></polygon></svg>','<svg viewBox=\"0 0 100 100\"><polygon points=\"30.1,84.5 10.2,50 30.1,15.5 69.9,15.5 89.8,50 69.9,84.5\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></polygon></svg>','<svg viewBox=\"0 0 100 100\"><polygon points=\"34.2,87.4 12.3,65.5 12.3,34.5 34.2,12.6 65.2,12.6 87.1,34.5 87.1,65.5 65.2,87.4\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></polygon></svg>','<svg viewBox=\"0 0 100 100\"><polygon points=\"11.2,70 11.2,40 50,12.2 88.8,40 88.8,70\" stroke=\"#000\" stroke-width=\"8\" fill=\"none\"></polygon></svg>','<svg viewBox=\"0 0 100 100\"><polygon points=\"10.2,70 10.2,35 30.1,15 69.9,15 89.8,35 89.8,70\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></polygon></svg>','<svg viewBox=\"-10 -10 120 120\"><polygon points=\"50 15, 100 100, 0 100\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></polygon></svg>','<svg viewBox=\"-10 -10 120 120\"><polygon points=\"0 0, 100 100, 0 100\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></polygon></svg>','<svg viewBox=\"-10 -10 120 120\"><path d=\"M 26,85 50,45 74,85 Z m -26,15 50,-85 50,85 z\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\"></path></svg>','<svg viewBox=\"8 50 100 100\"><path d=\"M 62.68234,131.5107 H 26.75771 V 96.075507 Z M 11.572401,146.76255 V 59.66782 l 87.983665,87.09473 z\" stroke-width=\"8\" stroke=\"#000\" fill=\"none\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-2 -2 100 100\"><circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"#000\" stroke-width=\"8\" fill=\"none\"></circle></svg>','<svg x=\"0px\" y=\"0px\" viewBox=\"0 0 96 120\" xml:space=\"preserve\"><path stroke=\"#000\" stroke-width=\"8\" fill=\"none\" d=\"M9.113,65.022C11.683,45.575,28.302,30.978,48,30.978c19.696,0,36.316,14.598,38.887,34.045H9.113z\"></path></svg>','<svg viewBox=\"-15 -15 152 136\"><path stroke=\"#000000\" stroke-width=\"8\" d=\"m0 0l57.952755 0l0 0c32.006428 -1.4055393E-14 57.952755 23.203636 57.952755 51.82677c0 28.623135 -25.946327 51.82677 -57.952755 51.82677l-57.952755 0z\" fill=\"none\"></path></svg>','<svg viewBox=\"-5 -50 140 140\"><path stroke=\"#000000\" stroke-width=\"8\" d=\"m20.013628 0l84.37401 0l0 0c11.053215 -1.04756605E-14 20.013626 9.282301 20.013626 20.7326c0 11.450296 -8.960411 20.7326 -20.013626 20.7326l-84.37401 0l0 0c-11.053222 0 -20.013628 -9.282303 -20.013628 -20.7326c-5.2380687E-15 -11.450298 8.960406 -20.7326 20.013628 -20.7326z\" fill=\"none\"></path></svg>','<svg viewBox=\"-8 -8 136 136\"><path stroke=\"#000000\" stroke-width=\"8\" d=\"m0 51.82677l0 0c0 -28.623135 23.203636 -51.82677 51.82677 -51.82677l0 0c13.745312 0 26.927654 5.4603047 36.64706 15.17971c9.719406 9.719404 15.17971 22.901749 15.17971 36.64706l0 0c0 28.623135 -23.203636 51.82677 -51.82677 51.82677l0 0c-28.623135 0 -51.82677 -23.203636 -51.82677 -51.82677zm25.913385 0l0 0c0 14.311565 11.60182 25.913387 25.913385 25.913387c14.311565 0 25.913387 -11.601822 25.913387 -25.913387c0 -14.311565 -11.601822 -25.913385 -25.913387 -25.913385l0 0c-14.311565 0 -25.913385 11.60182 -25.913385 25.913385z\" fill=\"none\"></path></svg>','<svg viewBox=\"-7 -35 133 105\"><path stroke=\"#000000\" stroke-width=\"8\" d=\"m0 57.952755l0 0c0 -32.006424 25.946333 -57.952755 57.952755 -57.952755c32.006428 0 57.952755 25.946333 57.952755 57.952755l-28.97638 0c0 -16.003212 -12.97316 -28.976377 -28.976376 -28.976377c-16.003212 0 -28.976377 12.9731655 -28.976377 28.976377z\" fill=\"none\"></path></svg>','<svg viewBox=\"-10 -10 150 150\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linejoin=\"round\" stroke-linecap=\"butt\" d=\"m0 51.82677l42.665005 -9.161766l9.161766 -42.665005l9.161766 42.665005l42.665005 9.161766l-42.665005 9.161766l-9.161766 42.665005l-9.161766 -42.665005z\" fill-rule=\"evenodd\" fill=\"none\"></path></svg>','<svg viewBox=\"-15 -15 137 130\"><path stroke=\"#000000\" stroke-width=\"8\" d=\"m1.09633125E-4 37.631077l39.59224 2.632141E-4l12.234421 -37.63134l12.234425 37.63134l39.59224 -2.632141E-4l-32.030952 23.257183l12.234924 37.631172l-32.030636 -23.257607l-32.03064 23.257607l12.234926 -37.631172z\" fill=\"none\"></path></svg>','<svg viewBox=\"-10 -10 150 150\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linejoin=\"round\" stroke-linecap=\"butt\" d=\"m0 59.82677l27.527777 -8.654488l-19.512508 -21.258898l28.167 6.268881l-6.268881 -28.167l21.258898 19.512508l8.654488 -27.527777l8.654491 27.527777l21.258896 -19.512508l-6.2688828 28.167l28.167 -6.268881l-19.512512 21.258898l27.527779 8.654488l-27.527779 8.654491l19.512512 21.258896l-28.167 -6.2688828l6.2688828 28.167l-21.258896 -19.512512l-8.654491 27.527779l-8.654488 -27.527779l-21.258898 19.512512l6.268881 -28.167l-28.167 6.2688828l19.512508 -21.258896z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -10 150 150\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linejoin=\"round\" stroke-linecap=\"butt\" d=\"m0 59.82677l33.496998 -3.4664993l-31.45845 -12.017807l33.252647 5.321434l-27.275928 -19.750513l30.742428 13.746485l-21.234838 -26.137014l26.137014 21.234838l-13.746485 -30.742428l19.750513 27.275928l-5.321434 -33.252647l12.017807 31.45845l3.4664993 -33.496998l3.4664993 33.496998l12.017811 -31.45845l-5.321434 33.252647l19.750511 -27.275928l-13.746483 30.742428l26.137009 -21.234838l-21.234833 26.137014l30.742424 -13.746485l-27.275925 19.750513l33.252647 -5.321434l-31.45845 12.017807l33.496994 3.4664993l-33.496994 3.4664993l31.45845 12.017811l-33.252647 -5.321434l27.275925 19.750511l-30.742424 -13.746483l21.234833 26.137009l-26.137009 -21.234833l13.746483 30.742424l-19.750511 -27.275925l5.321434 33.252647l-12.017811 -31.45845l-3.4664993 33.496994l-3.4664993 -33.496994l-12.017807 31.45845l5.321434 -33.252647l-19.750513 27.275925l13.746485 -30.742424l-26.137014 21.234833l21.234838 -26.137009l-30.742428 13.746483l27.275928 -19.750511l-33.252647 5.321434l31.45845 -12.017811z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -10 150 150\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linejoin=\"round\" stroke-linecap=\"butt\" d=\"m0 59.82677l9.952638 -6.5662766l-7.91409 -8.91803l11.312678 -3.7663116l-5.3359585 -10.662767l11.902236 -0.7101288l-2.3946476 -11.680401l11.680401 2.3946476l0.7101288 -11.902236l10.662767 5.3359585l3.7663116 -11.312678l8.91803 7.91409l6.5662766 -9.952638l6.5662804 9.952638l8.91803 -7.91409l3.7663116 11.312678l10.6627655 -5.3359585l0.7101288 11.902236l11.680397 -2.3946476l-2.3946457 11.680401l11.902237 0.7101288l-5.3359604 10.662767l11.312683 3.7663116l-7.914093 8.91803l9.952637 6.5662766l-9.952637 6.5662804l7.914093 8.91803l-11.312683 3.7663116l5.3359604 10.6627655l-11.902237 0.7101288l2.3946457 11.680397l-11.680397 -2.3946457l-0.7101288 11.902237l-10.6627655 -5.3359604l-3.7663116 11.312683l-8.91803 -7.914093l-6.5662804 9.952637l-6.5662766 -9.952637l-8.91803 7.914093l-3.7663116 -11.312683l-10.662767 5.3359604l-0.7101288 -11.902237l-11.680401 2.3946457l2.3946476 -11.680397l-11.902236 -0.7101288l5.3359585 -10.6627655l-11.312678 -3.7663116l7.91409 -8.91803z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -40 140 140\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linejoin=\"round\" stroke-linecap=\"butt\" d=\"m0 14.960629l89.732285 0l0 -14.960629l29.921257 29.921259l-29.921257 29.921259l0 -14.9606285l-89.732285 0z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -60 180 180\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linecap=\"butt\" d=\"m0 32.238846l27.590551 -27.590551l0 13.795275l82.80315 0l0 -13.795275l27.590553 27.590551l-27.590553 27.59055l0 -13.795273l-82.80315 0l0 13.795273z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -10 150 150\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linecap=\"butt\" d=\"m0.005249344 89.74016l29.913385 -29.913387l0 14.956692l44.87008 0l0 -44.87008l-14.956692 0l29.913387 -29.913385l29.913383 29.913385l-14.956688 0l0 74.78347l-74.78347 0l0 14.956688z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -20 200 200\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linecap=\"butt\" d=\"m0.005249344 89.74016l29.913385 -29.913387l0 14.956692l40.35827 0l0 -44.87008l-14.956692 0l29.913387 -29.913385l29.913383 29.913385l-14.956688 0l0 44.87008l40.35826 0l0 -14.956692l29.913391 29.913387l-29.913391 29.913383l0 -14.956688l-110.62992 0l0 14.956688z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -10 150 150\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linecap=\"butt\" d=\"m0.005249344 59.82677l26.922047 -19.30849l0 9.424511l23.020744 0l0 -23.020744l-9.424511 0l19.30849 -26.922047l19.30849 26.922047l-9.424507 0l0 23.020744l23.020744 0l0 -9.424511l26.922043 19.30849l-26.922043 19.30849l0 -9.424507l-23.020744 0l0 23.020744l9.424507 0l-19.30849 26.922043l-19.30849 -26.922043l9.424511 0l0 -23.020744l-23.020744 0l0 9.424507z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -10 158 136\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linecap=\"butt\" d=\"m0 77.22078l81.043304 0l0 -51.480316l-12.870079 0l25.740158 -25.740158l25.740158 25.740158l-12.870079 0l0 77.220474l-106.78346 0z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -10 136 136\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linecap=\"butt\" d=\"m0 102.96063l0 -57.915356l0 0c0 -24.87782 20.167458 -45.045277 45.045277 -45.045277l0 0l0 0c11.946751 0 23.404194 4.7458277 31.851818 13.193456c8.447632 8.447627 13.193459 19.905071 13.193459 31.851822l0 6.4350395l12.870079 0l-25.740158 25.740158l-25.740158 -25.740158l12.870079 0l0 -6.4350395c0 -10.661922 -8.643196 -19.305119 -19.305119 -19.305119l0 0l0 0c-10.661922 0 -19.305119 8.643196 -19.305119 19.305119l0 57.915356z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -10 180 180\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linecap=\"butt\" d=\"m0 0l25.742783 0l0 0l38.614174 0l90.09974 0l0 52.74803l0 0l0 22.6063l0 15.070862l-90.09974 0l-61.5304 52.813744l22.916225 -52.813744l-25.742783 0l0 -15.070862l0 -22.6063l0 0z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"-10 -10 180 180\" fill=\"none\" stroke=\"none\" stroke-linecap=\"square\" stroke-miterlimit=\"10\"><path stroke=\"#000000\" stroke-width=\"8\" stroke-linejoin=\"round\" stroke-linecap=\"butt\" d=\"m1.0425826 140.35696l25.78009 -49.87359l0 0c-30.142242 -17.309525 -35.62507 -47.05113 -12.666686 -68.71045c22.958385 -21.65932 66.84442 -28.147947 101.387596 -14.990329c34.543175 13.1576185 48.438576 41.655407 32.10183 65.83693c-16.336761 24.181526 -57.559166 36.132935 -95.233955 27.61071z\" fill-rule=\"evenodd\"></path></svg>','<svg viewBox=\"0 -5 100 100\" x=\"0px\" y=\"0px\"><path fill=\"none\" stroke=\"#000\" stroke-width=\"6\" d=\"M55.2785222,56.3408313 C51.3476874,61.3645942 45.2375557,64.5921788 38.3756345,64.5921788 C31.4568191,64.5921788 25.3023114,61.3108505 21.3754218,56.215501 C10.6371566,55.0276798 2.28426396,45.8997866 2.28426396,34.8156425 C2.28426396,27.0769445 6.35589452,20.2918241 12.4682429,16.4967409 C14.7287467,7.0339786 23.2203008,0 33.3502538,0 C38.667844,0 43.5339584,1.93827732 47.284264,5.14868458 C51.0345695,1.93827732 55.9006839,0 61.2182741,0 C73.0769771,0 82.6903553,9.6396345 82.6903553,21.5307263 C82.6903553,22.0787821 82.6699341,22.6220553 82.629813,23.1598225 C87.1459866,27.1069477 90,32.9175923 90,39.396648 C90,51.2877398 80.3866218,60.9273743 68.5279188,60.9273743 C63.5283115,60.9273743 58.9277995,59.2139774 55.2785222,56.3408313 L55.2785222,56.3408313 Z M4.79695431,82 C7.44623903,82 9.59390863,80.6668591 9.59390863,79.0223464 C9.59390863,77.3778337 7.44623903,76.0446927 4.79695431,76.0446927 C2.1476696,76.0446927 0,77.3778337 0,79.0223464 C0,80.6668591 2.1476696,82 4.79695431,82 Z M13.7055838,71.9217877 C18.4995275,71.9217877 22.3857868,69.4606044 22.3857868,66.424581 C22.3857868,63.3885576 18.4995275,60.9273743 13.7055838,60.9273743 C8.91163999,60.9273743 5.02538071,63.3885576 5.02538071,66.424581 C5.02538071,69.4606044 8.91163999,71.9217877 13.7055838,71.9217877 Z\"></path></svg>','<svg viewBox=\"-25 -25 550 550\" x=\"0px\" y=\"0px\"><path d=\"M369.214 159.814c-91.389-55.601-48.533-134.078-46.693-137.34A14.999 14.999 0 0 0 309.515 0c-47.043 0-83.881 13.366-109.49 39.729-43.759 45.044-41.729 115.151-40.862 145.088.097 3.317.179 6.182.179 8.311 0 22.228 3.566 42.748 6.713 60.854 2.028 11.668 3.779 21.744 4.091 29.664.333 8.482-1.216 10.424-1.281 10.503-.221.263-2.062 1.241-7.036 1.241-5.674 0-9.856-1.854-13.563-6.009-14.476-16.233-15.477-60.554-12.709-84.667a14.999 14.999 0 0 0-14.898-16.732c-38.945 0-68.047 63.688-68.047 120.632 0 26.769 5.385 52.991 16.004 77.94 10.266 24.119 24.904 45.885 43.512 64.696C150.877 490.425 201.97 512 255.993 512c54.242 0 105.321-21.27 143.831-59.889 38.41-38.521 59.564-89.482 59.564-143.499 0-68.921-53.927-126.746-90.174-148.798z\" fill=\"#000000\" stroke-width=\"0\" stroke=\"transparent\"></path></svg>','<svg  viewBox=\"0 -28 512 512\"><path d=\"M471.383 44.578C444.879 15.832 408.512 0 368.973 0c-29.555 0-56.621 9.344-80.45 27.77C276.5 37.07 265.605 48.45 256 61.73c-9.602-13.277-20.5-24.66-32.527-33.96C199.648 9.344 172.582 0 143.027 0c-39.539 0-75.91 15.832-102.414 44.578C14.426 72.988 0 111.801 0 153.871c0 43.3 16.137 82.938 50.781 124.742 30.992 37.395 75.535 75.356 127.117 119.313 17.614 15.012 37.579 32.027 58.309 50.152A30.023 30.023 0 0 0 256 455.516a30.03 30.03 0 0 0 19.785-7.43c20.73-18.129 40.707-35.152 58.328-50.172 51.575-43.95 96.117-81.906 127.11-119.305C495.867 236.81 512 197.172 512 153.867c0-42.066-14.426-80.879-40.617-109.289zm0 0\" fill=\"#000000\" stroke-width=\"0\" stroke=\"transparent\"></path></svg>','<svg viewBox=\"0 0 24 24\"><path d=\"M6 0H1a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1zm0 8.5H1a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1zm9.5 6v-5a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1zm0-8.5V1a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1zM23 0h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1zm-5 15.5h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1zm0 8.5h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1zM0 18v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1zm8.5 0v5a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1h-5a1 1 0 0 0-1 1z\" fill=\"#00000\" stroke-width=\"0\" stroke=\"transparent\"></path></svg>','<svg viewBox=\"0 0 511.999 511.999\" ><path d=\"M498.523 246.291c37.941-67.923-8.514-149.499-85.88-157.204l-28.232-2.813c-20.59-2.053-38.982-10.974-54.263-28.128-53.185-59.695-152.219-44.954-184.82 26.764-7.94 17.466-22.298 31.438-40.428 39.344l-39.773 17.34c-63.399 27.64-84.894 104.334-44.848 159.183l25.236 34.563c5.481 7.508 9.482 15.807 11.893 24.666l12.532 46.073c17.167 63.115 88.755 97.22 151.241 70.693l5.35-2.271c15.901-6.751 33.992-8.387 50.932-4.616l82.048 18.269c79.933 17.798 150.39-51.574 132.54-127.825l-10.384-44.351c-4.203-17.953-1.524-36.78 7.544-53.012l9.312-16.675z\" fill=\"#00000\" stroke-width=\"0\" stroke=\"transparent\"></path></svg>','<svg  viewBox=\"0 0 200 200\" ><path  d=\"M170 129.496C170 168.434 138.66 200 100 200s-70-31.566-70-70.504c0-36.857 35.84-81.29 65.113-122.542 2.4-3.381 7.425-3.415 9.861-.06C135.351 48.737 170 92.591 170 129.496Z\" fill=\"#00000\" stroke-width=\"0\" stroke=\"transparent\"></path></svg>'];window.ImageEditor.prototype.initializeShapes=function(){const t=this;let n=e;Array.isArray(this.shapes)&&this.shapes.length&&n.push(...this.shapes),$(`${this.containerSelector} .main-panel`).append('<div class=\"toolpanel\" id=\"shapes-panel\"><div class=\"content\"><p class=\"title\">Shapes</p></div></div>'),n.forEach((e=>{$(`${this.containerSelector} .toolpanel#shapes-panel .content`).append(`<div class=\"button\">${e}</div>`)})),$(`${this.containerSelector} .toolpanel#shapes-panel .content .button`).click((function(){let e=$(this).html();try{fabric.loadSVGFromString(e,((e,n)=>{var i=fabric.util.groupSVGElements(e,n);i.scaleToWidth(300),i.scaleToHeight(300),i.set({left:100,top:100,strokeUniform:!0,strokeLineJoin:\"miter\",strokeWidth:0,fill:\"#000000\"}),t.canvas.add(i).setActiveObject(i).renderAll(),t.canvas.fire(\"object:modified\")}))}catch(e){console.error(\"can't add shape\")}}))}}(),function(){\"use strict\";const e=[];window.ImageEditor.prototype.initializeImages=function(){const t=this;let n=e;Array.isArray(this.images)&&this.images.length&&(n=this.images),$(`${this.containerSelector} .main-panel`).append('<div class=\"toolpanel\" id=\"images-panel\"><div class=\"content\"><p class=\"title\">Images</p></div></div>'),$(`${this.containerSelector} .toolpanel#images-panel .content`).append('<div class=\"drag-drop-input\"><div>Drag & drop files<br>or click to browse.<br>JPG, PNG, WEBP or SVG only!</div></div>'),$(`${this.containerSelector} .toolpanel#images-panel .content`).append('<div class=\"list-images\"></div>'),n.forEach((e=>{$(`${this.containerSelector} .toolpanel#images-panel .content .list-images`).append(`<div class=\"button\"><img src=\"${e}\" alt=\"\" loading=\"lazy\" /></div>`)})),$(`${this.containerSelector} .toolpanel#images-panel .content .list-images`).on(\"click\",\".button\",(function(){let e=$(this).find(\"img\").attr(\"src\");try{t.addImageFromUrl(e)}catch(e){console.error(\"can't add image\",e)}}))}}(),function(){\"use strict\";const e=[];window.ImageEditor.prototype.initializeTemplates=function(){const t=this;let n=[...e];Array.isArray(this.templates)&&this.templates.length&&n.push(...this.templates),$(`${this.containerSelector} .main-panel`).append('<div class=\"toolpanel\" id=\"templates-panel\"><div class=\"content\"><p class=\"title\">Templates</p></div></div>');const i=(e,t)=>{const n=JSON.stringify(e.toJSON());return{uuid:t,preview:e.toDataURL({format:\"png\",multiplier:.2}),data:n,timestamp:(new Date).getTime()}},a=(e,t)=>{const n=document.querySelector(`${e} .toolpanel#templates-panel .content .list-templates`);n.innerHTML=\"\",t.forEach(((e,t)=>{const i=document.createElement(\"div\");i.className=\"button list-templates-item\",i.setAttribute(\"data-index\",t);const a=document.createElement(\"img\");a.src=e.preview,a.setAttribute(\"data-index\",t),i.appendChild(a),n.appendChild(i)}))},o=(e,t)=>{const n=new CustomEvent(\"ImageEditor.\"+t,{detail:e});window.dispatchEvent(n)},s=(e,n={})=>\"function\"==typeof t.confirm?t.confirm(e,n):Promise.resolve(!0),l=e=>{const t=this,i=n[e],a=JSON.parse(i.data);t.canvas.loadFromJSON(a,(()=>{t.canvas.renderAll()}))},r=document.createElement(\"button\");r.className=\"button btn\",r.innerHTML=\"Add Template\",r.onclick=()=>{const e=crypto.randomUUID(),s=i(t.canvas,e);n.push(s),t.templates=n,t.toast(\"Template added successfully\"),o(s,\"newTemplate\"),a(t.containerSelector,n)};const c=document.createElement(\"div\");c.className=\"tab-content\",c.append(r),$(`${this.containerSelector} .toolpanel#templates-panel .content`).append(c),$(`${this.containerSelector} .toolpanel#templates-panel .content`).append('<div class=\"list-templates\"></div>'),a(t.containerSelector,n),new ContextMenu(\".list-templates-item\",[{name:\"Preview\",fn:function(e){console.log(\"Preview\",e);try{t.toast(\"Preview coming soon\")}catch(e){console.warn(\"Preview coming soon\")}}},{name:\"Salvar\",fn:function(e){const l=e.getAttribute(\"data-index\");(async e=>{if(e>=0&&e<n.length){if(!await s(\"Are you sure you want to save and replace this template?\",{confirmLabel:\"Save\",cancelLabel:\"Cancel\"}))return;const l=n[e].uuid,r=i(t.canvas,l);n[e]=r,t.templates=n,o(r,\"saveTemplate\"),a(t.containerSelector,n),t.toast(\"Template salvo com sucesso\")}})(parseInt(l))}},{name:\"Clone\",fn:function(e){const i=e.getAttribute(\"data-index\");(e=>{if(e>=0&&e<n.length){const i=n[e],s={...i,timestamp:(new Date).getTime(),uuid:crypto.randomUUID(),preview:i.preview};n.push(s),t.templates=n,o(s,\"newTemplate\"),a(t.containerSelector,n),t.toast(\"Template cloned successfully\")}})(parseInt(i))}},{},{name:\"Delete\",fn:function(e){const i=e.getAttribute(\"data-index\");(async e=>{if(e>=0&&e<n.length){if(!await s(\"Are you sure you want to delete this template?\",{confirmLabel:\"Delete\",cancelLabel:\"Cancel\"}))return;const i=n[e];n.splice(e,1),t.templates=n,o(i,\"deleteTemplate\"),a(t.containerSelector,n),t.toast(\"Template excluído com sucesso\")}})(parseInt(i))}}]),$(`${this.containerSelector} .toolpanel#templates-panel .content .list-templates`).on(\"click\",\".button\",(function(){try{let e=$(this).data(\"index\");l(e)}catch(e){console.error(\"can't add template\",e)}}))}}(),function(){\"use strict\";window.ImageEditor.prototype.initializeFreeDrawSettings=function(){let e=1,t=\"pencil\",n=\"black\";const i=this;$(`${this.containerSelector} .main-panel`).append('<div class=\"toolpanel\" id=\"draw-panel\"><div class=\"content\"><p class=\"title\">Free Draw</p></div></div>'),$(`${this.containerSelector} .toolpanel#draw-panel .content`).append('\\n      <div>\\n        <div class=\"input-container\">\\n          <label>Brush Width</label>\\n          <div class=\"custom-number-input\">\\n          <button class=\"decrease\">-</button>\\n          <input type=\"number\" min=\"1\" value=\"1\" id=\"input-brush-width\"/>\\n          <button class=\"increase\">+</button>\\n          </div>\\n        </div>\\n        <div class=\"input-container\">\\n          <label>Brush Type</label>\\n          <select id=\"input-brush-type\">\\n            <option value=\"pencil\" selected>Pencil</option>\\n            <option value=\"circle\">Circle</option>\\n            <option value=\"spray\">Spray</option>\\n          </select>\\n        </div>\\n        <div class=\"input-container\">\\n          <label>Brush Color</label>\\n          <input id=\"color-picker\" value=\\'black\\'/>\\n        </div>\\n      </div>\\n    ');let a=()=>{try{switch(t){case\"circle\":i.canvas.freeDrawingBrush=new fabric.CircleBrush(i.canvas);break;case\"spray\":i.canvas.freeDrawingBrush=new fabric.SprayBrush(i.canvas);break;default:i.canvas.freeDrawingBrush=new fabric.PencilBrush(i.canvas)}i.canvas.freeDrawingBrush.width=e,i.canvas.freeDrawingBrush.color=n}catch(e){}};$(`${this.containerSelector} .toolpanel#draw-panel .content #input-brush-width`).change((function(){try{e=parseInt($(this).val()),a()}catch(e){}})),$(`${this.containerSelector} .toolpanel#draw-panel .content #input-brush-type`).change((function(){t=$(this).val(),a()})),$(`${this.containerSelector} .toolpanel#draw-panel .content #color-picker`).spectrum({type:\"color\",showInput:\"true\",showInitial:\"true\",allowEmpty:\"false\"}),$(`${this.containerSelector} .toolpanel#draw-panel .content #color-picker`).change((function(){try{n=$(this).val(),a()}catch(e){}}))}}(),function(){\"use strict\";window.ImageEditor.prototype.initializeCanvasSettingPanel=function(){const e=this;$(`${this.containerSelector} .main-panel`).append('<div class=\"toolpanel\" id=\"background-panel\"><div class=\"content\"><p class=\"title\">Canvas Settings</p></div></div>');const t=(e,t,n)=>{if(window.EyeDropper)$(`${e} .eyedropper-btn[data-target=\"${t}\"]`).click((async function(){try{$(this).addClass(\"active\"),$(\"body\").css(\"cursor\",\"crosshair\");const i=new EyeDropper,a=await i.open();a&&a.sRGBHex&&($(`${e} #${t}`).spectrum(\"set\",a.sRGBHex),$(`${e} #${t}`).trigger(\"change\"),n&&\"function\"==typeof n&&n(a.sRGBHex),console.log(\"Cor de fundo selecionada:\",a.sRGBHex))}catch(e){\"AbortError\"!==e.name&&(console.error(\"Erro ao usar EyeDropper:\",e),alert(\"Ocorreu um erro ao selecionar a cor. Tente novamente.\"))}finally{$(this).removeClass(\"active\"),$(\"body\").css(\"cursor\",\"default\")}}));else{console.warn(\"EyeDropper API não é suportada neste navegador\");const t=$(`${e} .eyedropper-not-supported`);t.length&&t.show()}};!1===e.canvasSizeBlock&&(()=>{$(`${this.containerSelector} .toolpanel#background-panel .content`).append('\\n        <div class=\"canvas-size-setting\">\\n          <p>Canvas Size</p>\\n          <div class=\"input-container\">\\n            <label>Width</label>\\n            <div class=\"custom-number-input\">\\n            <button class=\"decrease\">-</button>\\n            <input type=\"number\" min=\"100\" id=\"input-width\" value=\"1360\"/>\\n            <button class=\"increase\">+</button>\\n            </div>\\n          </div>\\n          <div class=\"input-container\">\\n            <label>Height</label>\\n            <div class=\"custom-number-input\">\\n            <button class=\"decrease\">-</button>\\n            <input type=\"number\" min=\"100\" id=\"input-height\" value=\"768\"/>\\n            <button class=\"increase\">+</button>\\n            </div>\\n          </div>\\n        </div>\\n      ');var t=()=>{try{let t=$(`${this.containerSelector} .toolpanel#background-panel .content #input-width`).val(),n=$(`${this.containerSelector} .toolpanel#background-panel .content #input-height`).val();e.canvas.setWidth(t),e.canvas.originalW=t,e.canvas.setHeight(n),e.canvas.originalH=n,e.canvas.renderAll(),e.canvas.fire(\"object:modified\")}catch(e){}};$(`${this.containerSelector} .toolpanel#background-panel .content #input-width`).change(t),$(`${this.containerSelector} .toolpanel#background-panel .content #input-height`).change(t)})(),(()=>{$(`${this.containerSelector} .toolpanel#background-panel .content`).append(`\\n      <div class=\"color-settings\">\\n        <p>Background Color</p>\\n        <div class=\"tab-container\">\\n          <div class=\"tabs\">\\n            <div class=\"tab-label\" data-value=\"color-fill\">Color Fill</div>\\n            <div class=\"tab-label\" data-value=\"gradient-fill\">Gradient Fill</div>\\n          </div>\\n          <div class=\"tab-content\" data-value=\"color-fill\">\\n            <div class=\"color-picker-container\">\\n              <input id=\"color-picker\" value=''/>\\n              ${window.EyeDropper?'<button type=\"button\" class=\"eyedropper-btn\" data-target=\"color-picker\" title=\"Conta-gotas (selecionar cor da tela)\">\\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-eyedropper\" viewBox=\"0 0 16 16\">\\n          <path d=\"M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708zM2 12.707l7-7L10.293 7l-7 7H2z\"/>\\n        </svg>\\n      </button>':\"\"}\\n            </div>\\n            ${window.EyeDropper?\"\":'<div class=\"eyedropper-not-supported\">Conta-gotas não suportado neste navegador</div>'}\\n            <br>\\n          </div>\\n          <div class=\"tab-content\" data-value=\"gradient-fill\">\\n            <div id=\"gradient-picker\"></div>\\n\\n            <div class=\"gradient-orientation-container\">\\n              <div class=\"input-container\">\\n                <label>Orientation</label>\\n                <select id=\"select-orientation\">\\n                  <option value=\"linear\">Linear</option>\\n                  <option value=\"radial\">Radial</option>\\n                </select>\\n              </div>\\n              <div id=\"angle-input-container\" class=\"input-container\">\\n                <label>Angle</label>\\n                <div class=\"custom-number-input\">\\n                  <button class=\"decrease\">-</button>\\n                  <input type=\"number\" min=\"0\" max=\"360\" value=\"0\" id=\"input-angle\">\\n                  <button class=\"increase\">+</button>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    `),$(`${this.containerSelector} .toolpanel#background-panel .content .tab-label`).click((function(){$(`${e.containerSelector} .toolpanel#background-panel .content .tab-label`).removeClass(\"active\"),$(this).addClass(\"active\");let t=$(this).data(\"value\");if($(this).closest(\".tab-container\").find(\".tab-content\").hide(),$(this).closest(\".tab-container\").find(`.tab-content[data-value=${t}]`).show(),\"color-fill\"===t){let t=$(`${e.containerSelector} .toolpanel#background-panel .content #color-picker`).val();try{e.canvas.backgroundColor=t,e.canvas.renderAll()}catch(e){console.log(\"can't update background color\")}}else i()})),$(`${this.containerSelector} .toolpanel#background-panel .content .tab-label[data-value=color-fill]`).click(),$(`${this.containerSelector} .toolpanel#background-panel .content #color-picker`).spectrum({showPalette:!0,showButtons:!1,type:\"color\",showInput:\"true\",allowEmpty:\"false\",move:function(t){let n=\"transparent\";t&&(n=t.toHexString()),e.canvas.backgroundColor=n,e.canvas.renderAll()}}),t(this.containerSelector+\" .toolpanel#background-panel .content\",\"color-picker\",(t=>{e.canvas.backgroundColor=t,e.canvas.renderAll()}));const n=new Grapick({el:`${this.containerSelector} .toolpanel#background-panel .content #gradient-picker`,colorEl:'<input id=\"colorpicker\"/>'});n.setColorPicker((e=>{const t=e.getEl().querySelector(\"#colorpicker\");$(t).spectrum({showPalette:!1,showButtons:!1,type:\"color\",showInput:\"true\",allowEmpty:\"false\",color:e.getColor(),showAlpha:!0,change(t){e.setColor(t.toRgbString())},move(t){e.setColor(t.toRgbString(),0)}})})),n.addHandler(0,\"red\"),n.addHandler(100,\"blue\");const i=()=>{let t=n.getHandlers(),i=$(`${this.containerSelector} .toolpanel#background-panel .content .gradient-orientation-container #select-orientation`).val(),a=parseInt($(`${this.containerSelector} .toolpanel#background-panel .content .gradient-orientation-container #input-angle`).val()),o=e.generateFabricGradientFromColorStops(t,e.canvas.width,e.canvas.height,i,a);e.canvas.setBackgroundColor(o),e.canvas.renderAll()};n.on(\"change\",(e=>{i()})),$(`${this.containerSelector} .toolpanel#background-panel .content .gradient-orientation-container #select-orientation`).change((function(){\"radial\"===$(this).val()?$(this).closest(\".gradient-orientation-container\").find(\"#angle-input-container\").hide():$(this).closest(\".gradient-orientation-container\").find(\"#angle-input-container\").show(),i()})),$(`${this.containerSelector} .toolpanel#background-panel .content .gradient-orientation-container #input-angle`).change((function(){i()}))})()}}(),function(){\"use strict\";const e=[{value:{strokeDashArray:[],strokeLineCap:\"butt\"},label:\"Stroke\"},{value:{strokeDashArray:[1,10],strokeLineCap:\"butt\"},label:\"Dash-1\"},{value:{strokeDashArray:[1,10],strokeLineCap:\"round\"},label:\"Dash-2\"},{value:{strokeDashArray:[15,15],strokeLineCap:\"square\"},label:\"Dash-3\"},{value:{strokeDashArray:[15,15],strokeLineCap:\"round\"},label:\"Dash-4\"},{value:{strokeDashArray:[25,25],strokeLineCap:\"square\"},label:\"Dash-5\"},{value:{strokeDashArray:[25,25],strokeLineCap:\"round\"},label:\"Dash-6\"},{value:{strokeDashArray:[1,8,16,8,1,20],strokeLineCap:\"square\"},label:\"Dash-7\"},{value:{strokeDashArray:[1,8,16,8,1,20],strokeLineCap:\"round\"},label:\"Dash-8\"}];window.ImageEditor.prototype.initializeSelectionSettings=function(){const t=this;$(`${this.containerSelector} .main-panel`).append('<div class=\"toolpanel\" id=\"select-panel\"><div class=\"content\"><p class=\"title\">Selection Settings</p></div></div>');const n=(e,t)=>window.EyeDropper?`<button type=\"button\" class=\"eyedropper-btn\" data-target=\"${t}\" title=\"Conta-gotas (selecionar cor da tela)\">\\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-eyedropper\" viewBox=\"0 0 16 16\">\\n          <path d=\"M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708zM2 12.707l7-7L10.293 7l-7 7H2z\"/>\\n        </svg>\\n      </button>`:\"\",i=(e,t,n)=>{if(window.EyeDropper)$(`${e} .eyedropper-btn[data-target=\"${t}\"]`).click((async function(){try{$(this).addClass(\"active\"),$(\"body\").css(\"cursor\",\"crosshair\");const i=new EyeDropper,a=await i.open();a&&a.sRGBHex&&($(`${e} #${t}`).spectrum(\"set\",a.sRGBHex),$(`${e} #${t}`).trigger(\"change\"),n&&\"function\"==typeof n&&n(a.sRGBHex),console.log(\"Cor selecionada:\",a.sRGBHex))}catch(e){\"AbortError\"!==e.name&&(console.error(\"Erro ao usar EyeDropper:\",e),alert(\"Ocorreu um erro ao selecionar a cor. Tente novamente.\"))}finally{$(this).removeClass(\"active\"),$(\"body\").css(\"cursor\",\"default\")}}));else{console.warn(\"EyeDropper API não é suportada neste navegador\");const t=$(`${e} .eyedropper-not-supported`);t.length&&t.show()}};(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append(`\\n        <div class=\"text-section\">\\n          <h4>Font Style</h4>\\n          <div class=\"style\">\\n            <button id=\"bold\"><svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"-70 -70 450 450\" xml:space=\"preserve\"><path d=\"M218.133,144.853c20.587-14.4,35.2-37.653,35.2-59.52C253.333,37.227,216.107,0,168,0H34.667v298.667h150.187 c44.693,0,79.147-36.267,79.147-80.853C264,185.387,245.547,157.76,218.133,144.853z M98.667,53.333h64c17.707,0,32,14.293,32,32 s-14.293,32-32,32h-64V53.333z M173.333,245.333H98.667v-64h74.667c17.707,0,32,14.293,32,32S191.04,245.333,173.333,245.333z\"></path></svg></button>\\n            <button id=\"italic\"><svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"-70 -70 450 450\" xml:space=\"preserve\"><polygon points=\"106.667,0 106.667,64 153.92,64 80.747,234.667 21.333,234.667 21.333,298.667 192,298.667 192,234.667 144.747,234.667 217.92,64 277.333,64 277.333,0  \"></polygon></svg></button>\\n            <button id=\"underline\"><svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"-70 -70 450 450\" xml:space=\"preserve\"><path d=\"M192,298.667c70.72,0,128-57.28,128-128V0h-53.333v170.667c0,41.28-33.387,74.667-74.667,74.667 s-74.667-33.387-74.667-74.667V0H64v170.667C64,241.387,121.28,298.667,192,298.667z\"></path><rect x=\"42.667\" y=\"341.333\" width=\"298.667\" height=\"42.667\"></rect></svg></button>\\n            <button id=\"linethrough\"><svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"-70 -70 450 450\" xml:space=\"preserve\"><polygon points=\"149.333,160 234.667,160 234.667,96 341.333,96 341.333,32 42.667,32 42.667,96 149.333,96\"></polygon><rect x=\"149.333\" y=\"288\" width=\"85.333\" height=\"64\"></rect><rect x=\"0\" y=\"202.667\" width=\"384\" height=\"42.667\"></rect></svg></button>\\n            <button id=\"subscript\"><svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" xml:space=\"preserve\"><path d=\"M248.257,256l103.986-103.758c2.777-2.771,4.337-6.532,4.337-10.455c0-3.923-1.561-7.684-4.337-10.455l-49.057-48.948 c-5.765-5.753-15.098-5.753-20.863,0L178.29,186.188L74.258,82.384c-5.764-5.751-15.098-5.752-20.863,0L4.337,131.333 C1.561,134.103,0,137.865,0,141.788c0,3.923,1.561,7.684,4.337,10.455L108.324,256L4.337,359.758 C1.561,362.528,0,366.29,0,370.212c0,3.923,1.561,7.684,4.337,10.455l49.057,48.948c5.765,5.753,15.098,5.753,20.863,0 l104.033-103.804l104.032,103.804c2.883,2.876,6.657,4.315,10.432,4.315s7.549-1.438,10.432-4.315l49.056-48.948 c2.777-2.771,4.337-6.532,4.337-10.455c0-3.923-1.561-7.684-4.337-10.455L248.257,256z\"></path><path d=\"M497.231,384.331h-44.973l35.508-31.887c14.878-13.36,20.056-34.18,13.192-53.04 c-6.874-18.89-23.565-31.044-43.561-31.717c-0.639-0.021-1.283-0.032-1.928-0.032c-31.171,0-56.531,25.318-56.531,56.439 c0,8.157,6.613,14.769,14.769,14.769c8.156,0,14.769-6.613,14.769-14.769c0-14.833,12.109-26.901,26.992-26.901 c0.316,0,0.631,0.005,0.937,0.016c11.573,0.39,15.78,9.511,16.795,12.297c2.163,5.946,1.942,14.574-5.171,20.962l-64.19,57.643 c-4.552,4.088-6.112,10.56-3.923,16.273c2.189,5.714,7.673,9.486,13.792,9.486h83.523c8.157,0,14.769-6.613,14.769-14.769 S505.387,384.331,497.231,384.331z\"></path></svg></button>\\n            <button id=\"superscript\"><svg id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" xml:space=\"preserve\"><path d=\"M248.257,259.854l103.986-103.758c2.777-2.771,4.337-6.532,4.337-10.455c0-3.923-1.561-7.684-4.337-10.455l-49.057-48.948 c-5.765-5.753-15.098-5.753-20.863,0L178.29,190.042L74.258,86.238c-5.764-5.751-15.099-5.752-20.863,0L4.337,135.187 C1.561,137.958,0,141.719,0,145.642s1.561,7.684,4.337,10.455l103.986,103.758L4.337,363.612C1.561,366.383,0,370.145,0,374.067 c0,3.922,1.561,7.684,4.337,10.455l49.057,48.948c5.765,5.753,15.098,5.753,20.863,0l104.033-103.804l104.032,103.804 c2.883,2.876,6.657,4.315,10.432,4.315s7.549-1.438,10.432-4.315l49.056-48.948c2.777-2.771,4.337-6.532,4.337-10.455 s-1.561-7.684-4.337-10.455L248.257,259.854z\"></path><path d=\"M497.231,190.893h-44.973l35.508-31.887c14.878-13.36,20.056-34.18,13.192-53.04 c-6.874-18.89-23.565-31.044-43.561-31.717c-0.639-0.021-1.283-0.032-1.928-0.032c-31.171,0-56.531,25.318-56.531,56.439 c0,8.157,6.613,14.769,14.769,14.769c8.156,0,14.769-6.613,14.769-14.769c0-14.833,12.109-26.901,26.992-26.901 c0.316,0,0.631,0.005,0.937,0.016c11.573,0.39,15.78,9.511,16.795,12.297c2.163,5.946,1.942,14.574-5.171,20.962l-64.19,57.643 c-4.552,4.088-6.112,10.56-3.923,16.273c2.189,5.714,7.673,9.486,13.792,9.486h83.523c8.157,0,14.769-6.613,14.769-14.769 S505.387,190.893,497.231,190.893z\"></path></svg></button>\\n          </div>\\n          <div class=\"family\">\\n            <div class=\"input-container\">\\n            <label>Font Family</label>\\n            <select id=\"font-family\">\\n              <option value=\"\"></option>\\n              ${this.fonts&&this.fonts.length>0?`\\n                <optgroup label=\"Fontes Personalizadas\">\\n                  ${[...new Set(this.fonts.map((e=>e.name)))].map((e=>`<option value=\"'${e}', sans-serif\">${e}</option>`)).join(\"\")}\\n                </optgroup>\\n              `:\"\"}\\n              <optgroup label=\"Fontes do Sistema\">\\n                <option value=\"'Open Sans', sans-serif\">Open Sans</option>                \\n                <option value=\"'Oswald', sans-serif\">Oswald</option>\\n                <option value=\"'Playfair Display', serif\">Playfair Display</option>\\n                <option value=\"'Cormorant Garamond', serif\">Cormorant Garamond</option>\\n                <option value=\"Impact, Charcoal, sans-serif\">Impact</option>\\n                <option value=\"'Lucida Console', Monaco, monospace\">Lucida Console</option>\\n                <option value=\"'Comic Sans MS', 'Comic Sans', cursive, sans-serif\">Comic Sans</option>\\n                <option value=\"'Dancing Script', cursive\">Dancing Script</option>\\n                <option value=\"'Indie Flower', cursive\">Indie Flower</option>\\n                <option value=\"'Amatic SC', cursive\">Amatic SC</option>\\n                <option value=\"'Permanent Marker', cursive\">Permanent Marker</option>\\n              </optgroup>\\n            </select>\\n            </div>\\n          </div>\\n          <div class=\"sizes\">\\n            <div class=\"input-container\"><label>Font Size</label>\\n              <div class=\"custom-number-input\">\\n              <button class=\"decrease\">-</button>\\n              <input type=\"number\" min=\"1\" value=\"20\" id=\"fontSize\">\\n              <button class=\"increase\">+</button>\\n              </div>\\n            </div>\\n            <div class=\"input-container\"><label>Line Height</label>\\n              <div class=\"custom-number-input\">\\n              <button class=\"decrease\">-</button>\\n              <input type=\"number\" min=\"0\" max=\"3\" value=\"1\" step=\"0.1\" id=\"lineHeight\">\\n              <button class=\"increase\">+</button>\\n              </div>\\n            </div>\\n            <div class=\"input-container\"><label>Letter Spacing</label>\\n              <div class=\"custom-number-input\">\\n              <button class=\"decrease\">-</button>\\n              <input type=\"number\" min=\"0\" max=\"2000\" step=\"100\" value=\"0\" id=\"charSpacing\">\\n              <button class=\"increase\">+</button>\\n              </div>\\n            </div>\\n            </p>\\n          </div>\\n          <div class=\"align\">\\n            <div class=\"input-container\">\\n            <label>Text Alignment</label>\\n            <select id=\"text-align\">\\n              <option value=\"left\">Left</option>\\n              <option value=\"center\">Center</option>\\n              <option value=\"right\">Right</option>\\n              <option value=\"justify\">Justify</option>\\n            </select>\\n            </div>\\n          </div>\\n          <div class=\"color\">\\n            <div class=\"input-container\">\\n            <label>Text Color</label>\\n            <div class=\"color-picker-container\">\\n              <input id=\"color-picker\" value=\"black\">\\n              ${n(0,\"color-picker\")}\\n            </div>\\n            ${window.EyeDropper?\"\":'<div class=\"eyedropper-not-supported\">Conta-gotas não suportado neste navegador</div>'}\\n            </div>\\n          </div>\\n          <hr>\\n        </div>\\n      `),$(`${this.containerSelector} .toolpanel#select-panel .style button`).click((function(){switch($(this).attr(\"id\")){case\"bold\":t.setActiveFontStyle(t.activeSelection,\"fontWeight\",\"bold\"===t.getActiveFontStyle(t.activeSelection,\"fontWeight\")?\"\":\"bold\");break;case\"italic\":t.setActiveFontStyle(t.activeSelection,\"fontStyle\",\"italic\"===t.getActiveFontStyle(t.activeSelection,\"fontStyle\")?\"\":\"italic\");break;case\"underline\":t.setActiveFontStyle(t.activeSelection,\"underline\",!t.getActiveFontStyle(t.activeSelection,\"underline\"));break;case\"linethrough\":t.setActiveFontStyle(t.activeSelection,\"linethrough\",!t.getActiveFontStyle(t.activeSelection,\"linethrough\"));break;case\"subscript\":t.getActiveFontStyle(t.activeSelection,\"deltaY\")>0?(t.setActiveFontStyle(t.activeSelection,\"fontSize\",void 0),t.setActiveFontStyle(t.activeSelection,\"deltaY\",void 0)):(t.activeSelection.setSubscript(),t.canvas.renderAll());break;case\"superscript\":t.getActiveFontStyle(t.activeSelection,\"deltaY\")<0?(t.setActiveFontStyle(t.activeSelection,\"fontSize\",void 0),t.setActiveFontStyle(t.activeSelection,\"deltaY\",void 0)):(t.activeSelection.setSuperscript(),t.canvas.renderAll())}t.canvas.renderAll(),t.canvas.fire(\"object:modified\")})),$(`${this.containerSelector} .toolpanel#select-panel .family #font-family`).change((function(){let e=$(this).val();t.setActiveFontStyle(t.activeSelection,\"fontFamily\",e),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")})),$(`${this.containerSelector} .toolpanel#select-panel .sizes input`).change((function(){let e=parseFloat($(this).val()),n=$(this).attr(\"id\");t.setActiveFontStyle(t.activeSelection,n,e),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")})),$(`${this.containerSelector} .toolpanel#select-panel .align #text-align`).change((function(){let e=$(this).val();t.setActiveFontStyle(t.activeSelection,\"textAlign\",e),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")})),$(`${this.containerSelector} .toolpanel#select-panel .color #color-picker`).spectrum({type:\"color\",showInput:\"true\",allowEmpty:\"false\"}),i(this.containerSelector+\" .toolpanel#select-panel .text-section\",\"color-picker\",(e=>{t.setActiveFontStyle(t.activeSelection,\"fill\",e),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")})),$(`${this.containerSelector} .toolpanel#select-panel .color #color-picker`).change((function(){let e=$(this).val();t.setActiveFontStyle(t.activeSelection,\"fill\",e),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")}))})(),(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append(`\\n        <div class=\"fill-section\">\\n          <div class=\"tab-container\">\\n            <div class=\"input-container\">\\n              <label>\\n                <h4>Fill</h4>\\n              </label>\\n              <label>\\n                <div class=\"tabs\">\\n                  <div class=\"tab-label\" data-value=\"color-fill\">\\n                    <button type=\"\">Color</button>\\n                  </div>\\n                  <div class=\"tab-label\" data-value=\"gradient-fill\">\\n                    <button type=\"\">Gradient</button>\\n                  </div>\\n                </div>\\n              </label>\\n            </div>\\n            <div class=\"tab-content\" data-value=\"color-fill\">\\n              <div class=\"input-container\">\\n                <label>Color</label>\\n                <div class=\"color-picker-container\">\\n                  <input id=\"color-picker\" value=\"${t.activeSelection?t.activeSelection.fill:\"#000000\"}\">\\n                  ${n(0,\"color-picker\")}\\n                </div>\\n                ${window.EyeDropper?\"\":'<div class=\"eyedropper-not-supported\">Conta-gotas não suportado neste navegador</div>'}\\n              </div>\\n            </div>\\n            <div class=\"tab-content\" data-value=\"gradient-fill\">\\n              <div id=\"gradient-picker\"></div>\\n              <div class=\"gradient-orientation-container\">\\n                <div class=\"input-container\">\\n                  <label>Orientation</label>\\n                  <select id=\"select-orientation\">\\n                    <option value=\"linear\">Linear</option>\\n                    <option value=\"radial\">Radial</option>\\n                  </select>\\n                </div>\\n                <div id=\"angle-input-container\" class=\"input-container\">\\n                  <label>Angle</label>\\n                  <div class=\"custom-number-input\">\\n                    <button class=\"decrease\">-</button>\\n                    <input type=\"number\" min=\"0\" max=\"360\" value=\"0\" id=\"input-angle\">\\n                    <button class=\"increase\">+</button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n          <hr>\\n        </div>\\n      `),$(`${this.containerSelector} .toolpanel#select-panel .content .tab-label`).click((function(){$(`${t.containerSelector} .toolpanel#select-panel .content .tab-label`).removeClass(\"active\"),$(this).addClass(\"active\");let e=$(this).data(\"value\");if($(this).closest(\".tab-container\").find(\".tab-content\").hide(),$(this).closest(\".tab-container\").find(`.tab-content[data-value=${e}]`).show(),\"color-fill\"===e){let e=$(`${t.containerSelector} .toolpanel#select-panel .fill-section #color-picker`).val();try{t.canvas.getActiveObjects().forEach((t=>t.set(\"fill\",e))),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")}catch(e){console.log(\"can't update background color\")}}else a()})),$(`${t.containerSelector} .toolpanel#select-panel .content .tab-label[data-value=color-fill]`).click(),$(`${this.containerSelector} .toolpanel#select-panel .fill-section #color-picker`).spectrum({showButtons:!1,type:\"color\",showInput:\"true\",allowEmpty:\"false\",move:function(e){let n=\"transparent\";e&&(n=e.toRgbString()),t.canvas.getActiveObjects().forEach((e=>e.set(\"fill\",n))),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")}}),i(this.containerSelector+\" .toolpanel#select-panel .fill-section\",\"color-picker\",(e=>{t.canvas.getActiveObjects().forEach((t=>t.set(\"fill\",e))),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")}));const e=new Grapick({el:`${this.containerSelector} .toolpanel#select-panel .fill-section #gradient-picker`,colorEl:'<input id=\"colorpicker\"/>'});e.setColorPicker((e=>{const t=e.getEl().querySelector(\"#colorpicker\");$(t).spectrum({showPalette:!0,showButtons:!1,type:\"color\",color:e.getColor(),showAlpha:!0,change(t){e.setColor(t.toRgbString())},move(t){e.setColor(t.toRgbString(),0)}})})),e.addHandler(0,\"red\"),e.addHandler(100,\"blue\");const a=()=>{let n=e.getHandlers(),i=$(`${this.containerSelector} .toolpanel#select-panel .content .gradient-orientation-container #select-orientation`).val(),a=parseInt($(`${this.containerSelector} .toolpanel#select-panel .content .gradient-orientation-container #input-angle`).val()),o=t.generateFabricGradientFromColorStops(n,t.activeSelection.width,t.activeSelection.height,i,a);t.activeSelection.set(\"fill\",o),t.canvas.renderAll()};e.on(\"change\",(e=>{a()})),$(`${this.containerSelector} .toolpanel#select-panel .content .gradient-orientation-container #select-orientation`).change((function(){let e=$(this).val();console.log(\"orientation\",e),\"radial\"===e?$(this).closest(\".gradient-orientation-container\").find(\"#angle-input-container\").hide():$(this).closest(\".gradient-orientation-container\").find(\"#angle-input-container\").show(),a()})),$(`${this.containerSelector} .toolpanel#select-panel .content .gradient-orientation-container #input-angle`).change((function(){a()}))})(),(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append(`\\n        <div class=\"border-section\">\\n          <h4>Border</h4>\\n          <div class=\"input-container\"><label>Width</label>\\n            <div class=\"custom-number-input\">\\n            <button class=\"decrease\">-</button>\\n            <input type=\"number\" min=\"0\" value=\"0\" id=\"input-border-width\">\\n            <button class=\"increase\">+</button>\\n            </div>\\n          </div>\\n          <div class=\"input-container\"><label>Style</label><select id=\"input-border-style\">${e.map((e=>`<option value='${JSON.stringify(e.value)}'>${e.label}</option>`))}</select></div>\\n          <div class=\"input-container\"><label>Corner Type</label><select id=\"input-corner-type\"><option value=\"miter\" selected>Square</option><option value=\"round\">Round</option><option value=\"circle\">Circle</option></select></div>\\n          <div class=\"input-container\">\\n            <label>Color</label>\\n            <div class=\"color-picker-container\">\\n              <input id=\"color-picker\" value=\"black\">\\n              ${n(0,\"color-picker\")}\\n            </div>\\n            ${window.EyeDropper?\"\":'<div class=\"eyedropper-not-supported\">Conta-gotas não suportado neste navegador</div>'}\\n          </div>\\n          <hr>\\n        </div>\\n      `),$(`${this.containerSelector} .toolpanel#select-panel .border-section #color-picker`).spectrum({showButtons:!1,type:\"color\",showInput:\"true\",allowEmpty:\"false\",move:function(e){let n=\"transparent\";e&&(n=e.toRgbString()),t.canvas.getActiveObjects().forEach((e=>e.set(\"stroke\",n))),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")}}),i(this.containerSelector+\" .toolpanel#select-panel .border-section\",\"color-picker\",(e=>{t.canvas.getActiveObjects().forEach((t=>t.set(\"stroke\",e))),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")})),$(`${this.containerSelector} .toolpanel#select-panel .border-section #input-border-width`).change((function(){let e=parseInt($(this).val());t.canvas.getActiveObjects().forEach((t=>t.set({strokeUniform:!0,strokeWidth:e}))),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")})),$(`${this.containerSelector} .toolpanel#select-panel .border-section #input-border-style`).change((function(){try{let e=JSON.parse($(this).val());t.canvas.getActiveObjects().forEach((t=>t.set({strokeUniform:!0,strokeDashArray:e.strokeDashArray,strokeLineCap:e.strokeLineCap}))),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")}catch(e){}})),$(`${this.containerSelector} .toolpanel#select-panel .border-section #input-corner-type`).change((function(){let e=$(this).val();t.canvas.getActiveObjects().forEach((t=>t.set(\"strokeLineJoin\",e))),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")}))})(),(()=>{$(`${this.containerSelector} .toolpanel#select-panel .content`).append('\\n        <div class=\"effect-section\">\\n          <h4>Effect</h4>\\n          <div class=\"input-container\"><label>Opacity</label><input id=\"opacity\" type=\"range\" min=\"0\" max=\"1\" value=\"1\" step=\"0.01\"></div>\\n          <div class=\"input-container\"><label>Blur</label><input class=\"effect\" id=\"blur\" type=\"range\" min=\"0\" max=\"100\" value=\"50\"></div>\\n          <div class=\"input-container\"><label>Brightness</label><input class=\"effect\" id=\"brightness\" type=\"range\" min=\"0\" max=\"100\" value=\"50\"></div>\\n          <div class=\"input-container\"><label>Saturation</label><input class=\"effect\" id=\"saturation\" type=\"range\" min=\"0\" max=\"100\" value=\"50\"></div>\\n          <h5>Gamma</h5>\\n          <div class=\"input-container\"><label>Red</label><input class=\"effect\" id=\"gamma.r\" type=\"range\" min=\"0\" max=\"100\" value=\"50\"></div>\\n          <div class=\"input-container\"><label>Green</label><input class=\"effect\" id=\"gamma.g\" type=\"range\" min=\"0\" max=\"100\" value=\"50\"></div>\\n          <div class=\"input-container\"><label>Blue</label><input class=\"effect\" id=\"gamma.b\" type=\"range\" min=\"0\" max=\"100\" value=\"50\"></div>\\n          <hr>\\n        </div>\\n      '),$(`${this.containerSelector} .toolpanel#select-panel .effect-section #opacity`).change((function(){let e=parseFloat($(this).val());t.activeSelection.set(\"opacity\",e),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")})),$(`${this.containerSelector} .toolpanel#select-panel .effect-section .effect`).change((function(){let e=$(this).attr(\"id\"),n=parseFloat($(this).val()),i=t.getCurrentEffect(t.activeSelection);t.activeSelection.filters=t.getUpdatedFilter(i,e,n),t.activeSelection.applyFilters(),t.canvas.renderAll(),t.canvas.fire(\"object:modified\")}))})(),this.setSelectionValues=()=>{const e=this;if(1==e.canvas.getActiveObjects().length){let t=e.activeSelection;if(t){const{strokeWidth:n,stroke:i,strokeLineCap:a,cornerStyle:o,fill:s,fontFamily:l,fontSize:r,lineHeight:c,charSpacing:d,textAlign:h,type:p,animation:u}=t,v=(t,n)=>{null!=n&&$(`${e.containerSelector} .toolpanel#select-panel ${t}`).val(n).trigger(\"change\")};v(\".fill-section #color-picker\",s),v(\".border-section #color-picker\",i),v(\".border-section #input-border-width\",n),null!=a&&v(\".border-section #input-border-style\",JSON.stringify({strokeDashArray:t.strokeDashArray??[],strokeLineCap:a})),v(\".border-section #input-corner-type\",o),\"textbox\"!==p&&\"i-text\"!==p||(v(\".text-section #font-family\",l),v(\".text-section #fontSize\",r),v(\".text-section #lineHeight\",c),v(\".text-section #charSpacing\",d),v(\".text-section #text-align\",h),v(\".text-section #color-picker\",s)),u&&v(\".animate-section #animate-type\",u.type)}}}}}(),function(){\"use strict\";let e;window.ImageEditor.prototype.initializeShortcuts=function(){const t=this;function n(t){return Object.values(e).find((e=>e.name===t))}function i(){document.querySelectorAll(\".menu .item[data-action]\").forEach((e=>{const t=n(e.getAttribute(\"data-action\"));if(t){const n=e.querySelector(\".shortcutkey\");n&&(n.textContent=t.shortcut)}}))}e=t.getAllActions(),document.addEventListener(\"keydown\",(async n=>{const i=n.key.toUpperCase(),a=n.ctrlKey,o=n.altKey,s=n.shiftKey;let l=i;\"ª\"===i?l=\"[\":\"º\"===i&&(l=\"]\");let r=[];a&&r.push(\"Ctrl\"),o&&r.push(\"Alt\"),s&&r.push(\"Shift\"),r.push(l);const c=r.join(\"+\"),d=Object.values(e).find((e=>e.shortcut===c&&e.enabled));if(d)return n.preventDefault(),void t.executeAction(d.name)})),i(),this.getShortcutByAction=n,this.updateMenuShortcuts=i}}(),function(){\"use strict\";let e=null;const t={copy:{name:\"copy\",icon:\"uil-copy\",label:\"Copiar\",shortcut:\"Ctrl+C\",enabled:!0,handler:async t=>{e=null;const n=t.getActiveObject();if(n&&(\"i-text\"===n.type||\"textbox\"===n.type)){const e=n.getSelectedText();if(e)return void await navigator.clipboard.writeText(e)}n?n.clone((n=>{e=n,t.fire(\"copy\",{id:n.id,type:n.type})}),[\"id\"]):t.fire(\"copy:failed\",{message:\"Nenhum objeto selecionado\"})}},paste:{name:\"paste\",icon:\"uil-clipboard\",label:\"Colar\",shortcut:\"Ctrl+V\",enabled:!0,handler:async t=>{console.log(\"copiedObject\",e),e?e.clone((e=>{t.discardActiveObject(),e.set({left:e.left+20,top:e.top+20,id:`${e.id}_copia_${Date.now()}`}),t.add(e),t.setActiveObject(e),t.renderAll(),t.fire(\"paste\",{id:e.id,type:e.type})}),[\"id\"]):t.fire(\"paste:failed\",{message:\"Nenhum objeto copiado\"})}},duplicate:{name:\"duplicate\",icon:\"uil-minus-path\",label:\"Duplicar\",shortcut:\"Ctrl+D\",enabled:!0,handler:function(e){const t=e.getActiveObjects();if(t.locked)return void alert(\"Objeto bloqueado\");const n=[];if(t.forEach((i=>{i.clone((a=>{e.add(a.set({strokeUniform:!0,left:i.aCoords.tl.x+20,top:i.aCoords.tl.y+20})),1===t.length&&e.setActiveObject(a),n.push(a)}))})),n.length>1){let t=new fabric.ActiveSelection(n,{canvas:e});e.setActiveObject(t)}e.requestRenderAll(),e.fire(\"object:modified\")}},delete:{name:\"delete\",icon:\"uil-trash-alt\",label:\"Excluir\",shortcut:\"DELETE\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(e.remove(t),e.requestRenderAll(),e.fire(\"object:modified\"))}},group:{name:\"group\",icon:\"uil-object-group\",label:\"Agrupar\",shortcut:\"Ctrl+G\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&\"activeSelection\"===t.type&&t.getObjects().length>1&&(t.toGroup(),e.requestRenderAll(),e.fire(\"object:modified\"),e.fire(\"group:added\"))}},ungroup:{name:\"ungroup\",icon:\"uil-object-ungroup\",label:\"Desagrupar\",shortcut:\"Ctrl+Shift+G\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&\"group\"===t.type&&(t.toActiveSelection(),e.requestRenderAll(),e.fire(\"object:modified\"),e.fire(\"group:removed\"))}},moveForward:{name:\"move-forward\",icon:\"uil-top-arrow-to-top\",label:\"Mover para frente\",shortcut:\"Ctrl+]\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.bringForward(),e.requestRenderAll(),e.fire(\"object:modified\"))}},moveFullForward:{name:\"move-full-forward\",icon:\"uil-top-arrow-to-top\",label:\"Trazer para frente\",shortcut:\"Ctrl+Alt+]\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.bringToFront(),e.requestRenderAll(),e.fire(\"object:modified\"))}},moveBackward:{name:\"move-backward\",icon:\"uil-arrow-to-bottom\",label:\"Mover para trás\",shortcut:\"Ctrl+[\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.sendBackwards(),e.requestRenderAll(),e.fire(\"object:modified\"))}},moveFullBackward:{name:\"move-full-backward\",icon:\"uil-arrow-to-bottom\",label:\"Enviar para trás\",shortcut:\"Ctrl+Alt+[\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.sendToBack(),e.requestRenderAll(),e.fire(\"object:modified\"))}},showLayers:{name:\"show-layers\",icon:\"uil-layers\",label:\"Mostrar camadas\",shortcut:\"Alt+1\",enabled:!1,handler:function(e){document.querySelector(\".image-editor-layers\").style.display=\"block\"}},comment:{name:\"comment\",icon:\"uil-comment-plus\",label:\"Comentar\",shortcut:\"Ctrl+Alt+N\",enabled:!1,handler:function(e){alert(\"coming soon\")}},addLink:{name:\"add-link\",icon:\"uil-link\",label:\"Adicionar link\",shortcut:\"Ctrl+K\",enabled:!1,handler:function(e){alert(\"coming soon\")}},flipHorizontal:{name:\"flip-horizontal\",icon:\"uil-flip-h\",label:\"Inverter horizontalmente\",shortcut:\"Ctrl+H\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.set(\"flipX\",!t.flipX),e.requestRenderAll(),e.fire(\"object:modified\"))}},flipVertical:{name:\"flip-vertical\",icon:\"uil-flip-v\",label:\"Inverter verticalmente\",shortcut:\"Ctrl+V\",enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.set(\"flipY\",!t.flipY),e.requestRenderAll(),e.fire(\"object:modified\"))}},lock:{name:\"lock\",icon:\"uil-lock-open-alt\",label:\"Bloquear\",shortcut:!1,enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.lockMovementX=!0,t.lockMovementY=!0,t.lockScalingX=!0,t.lockScalingY=!0,t.lockRotation=!0,t.lockUniScaling=!0,t.lockSkewingX=!0,t.lockSkewingY=!0,t.hasControls=!0,t.hasRotatingPoint=!0,t.locked=!0,e.requestRenderAll(),e.fire(\"object:modified\"),e.setActiveObject(t))}},unlock:{name:\"unlock\",icon:\"uil-lock-alt\",label:\"Desbloquear\",shortcut:!1,enabled:!0,handler:function(e){const t=e.getActiveObject();t&&(t.lockMovementX=!1,t.lockMovementY=!1,t.lockScalingX=!1,t.lockScalingY=!1,t.lockRotation=!1,t.evented=!0,t.locked=!1,e.requestRenderAll(),e.fire(\"object:modified\"))}},showDuration:{name:\"show-duration\",icon:\"uil-clock\",label:\"Show duration\",shortcut:!1,enabled:!1,handler:function(e){alert(\"coming soon\")}},addLink:{name:\"add-link\",icon:\"uil-link\",label:\"Add link\",shortcut:\"Ctrl+K\",enabled:!1,handler:function(e){alert(\"coming soon\")}},removeLink:{name:\"remove-link\",icon:\"uil-link-broken\",label:\"Remove link\",shortcut:\"Ctrl+Shift+K\",enabled:!1,handler:function(e){alert(\"coming soon\")}},editLink:{name:\"edit-link\",icon:\"uil-link\",label:\"Edit link\",shortcut:\"Ctrl+K\",enabled:!1,handler:function(e){alert(\"coming soon\")}}};window.ImageEditor.prototype.initializeCanvasActions=function(){const e=this.canvas;let n=null;this.executeAction=function(i){const a=t[i];a&&a.handler&&(a.handler(e),n&&n())},this.getAction=function(e){return t[e]},this.getAllActions=function(){return t},this.registerMenuUpdateFunction=function(e){n=e}}}(),function(){\"use strict\";const e='\\n      <div class=\"actions\">\\n        <div class=\"actions-item\" data-action=\"group\" title=\"Group\">\\n          <span>Group</span>\\n        </div>\\n        <div class=\"actions-item\" data-action=\"ungroup\" title=\"Ungroup\">\\n          <span>Ungroup</span>\\n        </div>\\n        <div class=\"actions-item\" data-action=\"comment\" title=\"Comment\">\\n          <i class=\"uil uil-comment-plus\"></i>\\n        </div>\\n        <div class=\"actions-item\" data-action=\"lock\" title=\"Lock\">\\n          <i class=\"uil uil-lock-open-alt\"></i>\\n        </div>\\n        <div class=\"actions-item\" data-action=\"unlock\" title=\"Unlock\">\\n          <i class=\"uil uil-lock-alt\"></i>\\n        </div>        \\n        <div class=\"actions-item\" data-action=\"duplicate\" title=\"Duplicate\">\\n          <i class=\"uil uil-minus-path\"></i>\\n        </div>\\n        <div class=\"actions-item\" data-action=\"delete\" title=\"Delete\">\\n          <i class=\"uil uil-trash-alt\"></i>\\n        </div>\\n        <div class=\"actions-item\" id=\"action-menu\" title=\"Actions\">\\n          <i class=\"uil uil-ellipsis-h\"></i>\\n        </div>\\n      </div>\\n    ',t='\\n      <div class=\"menu-wrapper\" style=\"visibility: hidden;\">\\n        <div class=\"content\">\\n          <ul class=\"menu\">\\n            <li class=\"item\" data-action=\"copy\">\\n              <i class=\"uil uil-copy\"></i>\\n              <span>Copy</span>\\n              <span class=\"shortcutkey\">Ctrl+C</span>\\n            </li>\\n            <li class=\"item\" data-action=\"paste\">\\n              <i class=\"uil uil-clipboard\"></i>\\n              <span>Paste</span>\\n              <span class=\"shortcutkey\">Ctrl+V</span>\\n            </li>\\n            <li class=\"item\" data-action=\"duplicate\">\\n              <i class=\"uil uil-minus-path\"></i>\\n              <span>Duplicate</span>\\n              <span class=\"shortcutkey\">Ctrl+D</span>\\n            </li>\\n            <li class=\"item\" data-action=\"delete\">\\n              <i class=\"uil uil-trash-alt\"></i>\\n              <span>Delete</span>\\n              <span class=\"shortcutkey\">DELETE</span>\\n            </li>\\n\\n            <div class=\"divisor\"></div>\\n            <li class=\"item sub-nivel\">\\n              <div>\\n                <i class=\"uil uil-layers\"></i>\\n                <span>Layers</span>\\n              </div>\\n              <i class=\"uil uil-angle-right\"></i>\\n              <ul class=\"sub-nivel-menu\">\\n                <li class=\"item\" data-action=\"moveForward\">\\n                  <i class=\"uil uil-top-arrow-to-top\"></i>\\n                  <span>Forward</span>\\n                  <span class=\"shortcutkey\">Ctrl+]</span>\\n                </li>\\n                <li class=\"item\" data-action=\"moveFullForward\">\\n                  <i class=\"uil uil-top-arrow-to-top\"></i>\\n                  <span>Bring to Front</span>\\n                  <span class=\"shortcutkey\">Ctrl+]</span>\\n                </li>\\n                <li class=\"item\" data-action=\"moveBackward\">\\n                  <i class=\"uil uil-arrow-to-bottom\"></i>\\n                  <span>Backward</span>\\n                  <span class=\"shortcutkey\">Ctrl+Alt+[</span>\\n                </li>\\n                <li class=\"item\" data-action=\"moveFullBackward\">\\n                  <i class=\"uil uil-arrow-to-bottom\"></i>\\n                  <span>Send Backward</span>\\n                  <span class=\"shortcutkey\">Ctrl+Alt[</span>\\n                </li>\\n                <div class=\"divisor\"></div>\\n                <li class=\"item\" data-action=\"showLayers\">\\n                  <i class=\"uil uil-layers\"></i>\\n                  <span>Show Layers</span>\\n                  <span class=\"shortcutkey\">Alt+1</span>\\n                </li>\\n              </ul>\\n            </li>\\n            <li class=\"item sub-nivel\">\\n              <div>\\n                <i class=\"uil uil-horizontal-align-left\"></i>\\n                <span>Align to Page</span>\\n              </div>\\n              <i class=\"uil uil-angle-right\"></i>\\n              <ul class=\"sub-nivel-menu\">\\n                <li class=\"item\" data-action=\"alignLeft\">\\n                  <i class=\"uil uil-horizontal-align-left\"></i>\\n                  <span>Align Left</span>\\n                </li>\\n                <li class=\"item\" data-action=\"alignCenter\">\\n                  <i class=\"uil uil-horizontal-align-center\"></i>\\n                  <span>Align Center</span>\\n                </li>\\n                <li class=\"item\" data-action=\"alignRight\">\\n                  <i class=\"uil uil-horizontal-align-right\"></i>\\n                  <span>Align Right</span>\\n                </li>\\n                <div class=\"divisor\"></div>\\n\\n                <li class=\"item\" data-action=\"alignTop\">\\n                  <i class=\"uil uil-vertical-align-top\"></i>\\n                  <span>Align Top</span>\\n                </li>\\n                <li class=\"item\" data-action=\"alignCenterVertical\">\\n                  <i class=\"uil uil-vertical-align-center\"></i>\\n                  <span>Align Center</span>\\n                </li>\\n                <li class=\"item\" data-action=\"alignBottom\">\\n                  <i class=\"uil uil-vertical-align-bottom\"></i>\\n                  <span>Align Bottom</span>\\n                </li>\\n              </ul>\\n            </li>\\n            <li class=\"item sub-nivel\">\\n              <div>\\n                <i class=\"uil uil-flip-v-alt\"></i>\\n                <span>Flip</span>\\n              </div>\\n              <i class=\"uil uil-angle-right\"></i>\\n              <ul class=\"sub-nivel-menu\">\\n                <li class=\"item\" data-action=\"flipHorizontal\">\\n                  <i class=\"uil uil-flip-h\"></i>\\n                  <span>Flip Horizontal</span>\\n                </li>\\n                <li class=\"item\" data-action=\"flipVertical\">\\n                  <i class=\"uil uil-flip-v\"></i>\\n                  <span>Flip Vertical</span>\\n                </li>                \\n              </ul>\\n            </li>\\n            <div class=\"divisor\"></div>\\n            <li class=\"item\" data-action=\"group\">\\n              <i class=\"uil uil-object-group\"></i>\\n              <span>Group</span>\\n              <span class=\"shortcutkey\">Ctrl+G</span>\\n            </li>\\n            <li class=\"item\" data-action=\"ungroup\">\\n              <i class=\"uil uil-object-ungroup\"></i>\\n              <span>Ungroup</span>\\n              <span class=\"shortcutkey\">Ctrl+Shift+G</span>\\n            </li>\\n            <li class=\"item\" data-action=\"lock\">\\n              <i class=\"uil uil-lock-open-alt\"></i>\\n              <span>Lock</span>\\n            </li>\\n            <li class=\"item\" data-action=\"unlock\">\\n              <i class=\"uil uil-lock-alt\"></i>\\n              <span>Unlock</span>\\n            </li>\\n            <li class=\"item\" data-action=\"showDuration\">\\n              <i class=\"uil uil-clock\"></i>\\n              <span>Show Duration</span>\\n            </li>\\n            <li class=\"item\" data-action=\"comment\">\\n              <i class=\"uil uil-comment-plus\"></i>\\n              <span>Comment</span>\\n              <span class=\"shortcutkey\">Ctrl+Alt+N</span>\\n            </li>\\n            <li class=\"item\" data-action=\"addLink\">\\n              <i class=\"uil uil-link-add\"></i>\\n              <span>Add Link</span>\\n              <span class=\"shortcutkey\">Ctrl+K</span>\\n            </li>\\n            <li class=\"item\" data-action=\"removeLink\">\\n              <i class=\"uil uil-link-broken\"></i>\\n              <span>Remove Link</span>\\n              <span class=\"shortcutkey\">Ctrl+Shift+K</span>\\n            </li>\\n            <li class=\"item\" data-action=\"editLink\">\\n              <i class=\"uil uil-link\"></i>\\n              <span>Edit Link</span>\\n              <span class=\"shortcutkey\">Ctrl+K</span>\\n            </li>\\n          </ul>\\n        </div>\\n      </div>\\n    ';window.ImageEditor.prototype.initializeCanvasActionsMenu=function(){const n=this,i=this.canvas;this.containerEl[0];let a=document.querySelector(\"#obj-menu\"),o=document.querySelector(\".canvas-container\"),s=null;this.initializeCanvasActions(),this.registerMenuUpdateFunction(v),a||(a=document.createElement(\"div\"),a.id=\"obj-menu\",a.innerHTML=e,o.appendChild(a));const l=document.createElement(\"div\");l.innerHTML=t,document.body.appendChild(l);const r=document.querySelector(\"#obj-menu\"),c=document.querySelector(\".menu-wrapper\"),d=document.querySelectorAll(\".sub-nivel\"),h=document.querySelector(\"#action-menu\");function p(){const e=document.querySelectorAll(\"[data-action]\");if(!s)return r.style.display=\"none\",e.forEach((e=>{\"paste\"===e.getAttribute(\"data-action\")||\"comment\"===e.getAttribute(\"data-action\")?e.style.display=\"\":e.style.display=\"none\"})),void u();r.style.display=\"block\",h.style.display=\"block\",s.locked&&(h.style.display=\"none\"),e.forEach((e=>{const t=e.getAttribute(\"data-action\");if(s.locked&&\"unlock\"!==t)e.style.display=\"none\";else switch(t){case\"group\":e.style.display=!s.isType(\"group\")&&i.getActiveObjects().length>1?\"\":\"none\";break;case\"ungroup\":e.style.display=s.isType(\"group\")?\"\":\"none\";break;case\"lock\":case\"delete\":e.style.display=s.locked?\"none\":\"\";break;case\"unlock\":e.style.display=s.locked?\"\":\"none\";break;case\"moveForward\":case\"moveFullForward\":case\"moveBackward\":case\"moveFullBackward\":const t=!s.isType(\"group\")||s.isType(\"group\")&&!s.locked;e.style.display=t?\"\":\"none\";break;case\"addLink\":e.style.display=s.link?\"none\":\"\";break;case\"removeLink\":case\"editLink\":e.style.display=s.link?\"\":\"none\";break;case\"showDuration\":case\"comment\":case\"addLink\":case\"removeLink\":case\"editLink\":e.style.display=\"function\"==typeof s.getObjects&&s.getObjects().length>1&&!s.isType(\"group\")?\"none\":\"\";break;default:e.style.display=\"\"}})),u()}function u(){const e=document.querySelectorAll(\".sub-nivel\"),t=document.querySelectorAll(\".divisor\");let n=!0;e.forEach((e=>{const t=e.querySelectorAll(\".sub-nivel-menu .item\");let i=!0;t.forEach((e=>{\"none\"!==e.style.display&&(i=!1)})),i?e.style.display=\"none\":(e.style.display=\"\",n=!1)})),n?t.forEach((e=>{e.style.display=\"none\"})):t.forEach((e=>{e.style.display=\"\"}))}function v(){if(!s)return;if(s.metadata&&(s.metadata.isMargin||s.metadata.isGuide))return void(s=null);const e=i.getActiveObject();e&&\"activeSelection\"===e.type&&e.getObjects().length>1&&(s=e),p();const t=s.getBoundingRect(),n=i.getZoom();i._offset;let o=s.left*n,l=s.top*n;\"left\"===s.originX&&\"top\"===s.originY?(o=o+t.width/2-a.offsetWidth/2,l=l-a.offsetHeight-10):(o-=a.offsetWidth/2,l=l-t.height/2-a.offsetHeight-10),a.style.left=`${o}px`,a.style.top=`${l}px`,a.style.display=\"block\"}function g(e){if(e.preventDefault(),\"contextmenu\"===e.type&&(r.style.display=\"none\",i.discardActiveObject(),i.renderAll(),s=null),\"contextmenu\"===e.type){i.getPointer(e);const t=i.findTarget(e,!1);t&&(i.setActiveObject(t),i.renderAll(),s=t)}if(p(),d.forEach((e=>e.classList.remove(\"active\"))),e.target.closest(\"#action-menu\")&&\"visible\"===c.style.visibility)return void(c.style.visibility=\"hidden\");c.querySelector(\".content\");const{clientX:t,clientY:n}=e,a=window.innerWidth,o=window.innerHeight,l=c.offsetWidth,h=c.offsetHeight;let u=t>a-l?a-l-5:t,v=n>o-h?o-h-5:n;c.style.left=`${u}px`,c.style.top=`${v}px`,c.style.visibility=\"visible\",c.querySelectorAll(\".sub-nivel-menu\").forEach((e=>{const n=e.getBoundingClientRect();e.style.transform=t>a-l-n.width?`translateX(-${l+15}px)`:`translateX(${l-5}px)`,n.top+n.height>o?e.style.top=`-${n.height-(o-n.top)+5}px`:e.style.top=\"0\"}))}i.on(\"layer:locked\",(e=>{console.log(\"layer:locked\",e),v()})),i.on(\"selection:created\",(e=>{s=e.selected[0],v()})),i.on(\"selection:updated\",(e=>{s=e.selected[0],v()})),i.on(\"selection:cleared\",(()=>{s=null,a.style.display=\"none\"})),i.on(\"object:scaling\",(()=>{s&&(r.style.display=\"none\")})),i.on(\"object:modified\",(e=>{s&&\"activeSelection\"===s.type&&(s=i.getActiveObject(),v()),!s||\"rotate\"!==e.action&&\"scale\"!==e.action&&\"drag\"!==e.action||(r.style.display=\"\",v())})),i.on(\"object:moving\",(()=>{s&&(r.style.display=\"none\")})),i.on(\"object:rotating\",(()=>{s&&(r.style.display=\"none\")})),i.on(\"group:added\",(e=>{console.log(\"group:added\",s),s=i.getActiveObject(),s&&v()})),i.on(\"group:removed\",(e=>{console.log(\"group:removed\",e),s=i.getActiveObject(),s&&v()})),o.addEventListener(\"contextmenu\",g),r.addEventListener(\"click\",g),document.querySelectorAll(\"[data-action]\").forEach((e=>{e.addEventListener(\"click\",(e=>{const t=e.target.closest(\"[data-action]\").getAttribute(\"data-action\");n.executeAction(t),c.style.visibility=\"hidden\"}))})),document.addEventListener(\"click\",(e=>{e.target.closest(\"#action-menu\")||e.target.closest(\".sub-nivel\")||(c.style.visibility=\"hidden\"),e.target.closest(\".sub-nivel.active\")||document.querySelectorAll(\".sub-nivel\").forEach((e=>e.classList.remove(\"active\"))),e.target.closest(\".sub-nivel\")&&e.target.closest(\".sub-nivel\").classList.toggle(\"active\")})),o.querySelector(\"#obj-menu\").addEventListener(\"contextmenu\",(e=>{e.preventDefault(),e.stopPropagation()})),o.querySelectorAll(\"#obj-menu *\").forEach((e=>{e.addEventListener(\"contextmenu\",(e=>{e.preventDefault(),e.stopPropagation()}))})),this.initializeShortcuts()}}(),window.ImageEditor.prototype.initializeLineDrawing=function(e){let t,n,i,a=!1;e.on(\"mouse:down\",(o=>{e.isDrawingLineMode&&(a=!0,n=e.getPointer(o.e),i=[n.x,n.y,n.x,n.y],t=new fabric.Line(i,{strokeWidth:2,stroke:\"#000000\"}),t.selectable=!1,t.evented=!1,t.strokeUniform=!0,e.add(t))})),e.on(\"mouse:move\",(o=>{if(a){if(n=e.getPointer(o.e),o.e.shiftKey){let e=i[0],a=i[1],o=n.x-e,s=n.y-a,l=Math.sqrt(o*o+s*s),r=Math.atan2(s,o)/Math.PI*180;r=15*parseInt((r+7.5)%360/15);let c=l*Math.cos(r*Math.PI/180),d=l*Math.sin(r*Math.PI/180);t.set({x2:c+e,y2:d+a})}else t.set({x2:n.x,y2:n.y});e.renderAll()}})),e.on(\"mouse:up\",(()=>{a&&(t.setCoords(),a=!1,e.fire(\"object:modified\"))}))},function(){const e=(e,t,n,i,a)=>Math.abs(t-i)<=e&&Math.abs(n-a)<=e;window.ImageEditor.prototype.initializePathDrawing=t=>{let n,i,a,o,s,l=!1,r=!1,c=!1;t.on(\"mouse:down\",(e=>{if(t.isDrawingPathMode){if(r=!0,l=!0,i=t.getPointer(e.e),!n)return n=new fabric.Path(`M${i.x} ${i.y} L${i.x} ${i.y}`,{strokeWidth:2,stroke:\"#000000\",fill:!1}),n.selectable=!1,n.evented=!1,n.strokeUniform=!0,void t.add(n);if(n){n.path.push([\"L\",i.x,i.y]);let e=n._calcDimensions();return n.set({width:e.width,height:e.height,left:e.left,top:e.top,pathOffset:{x:e.width/2+e.left,y:e.height/2+e.top},dirty:!0}),n.setCoords(),void t.renderAll()}}})),t.on(\"mouse:move\",(d=>{if(!t.isDrawingPathMode)return;if(!l)return;if(i=t.getPointer(d.e),c||(a=[\"L\",i.x,i.y]),n.path.pop(),d.e.shiftKey&&!c){let e=[...n.path].pop(),t=e[1],o=e[2],s=i.x-t,l=i.y-o,r=Math.sqrt(s*s+l*l),c=Math.atan2(l,s)/Math.PI*180;c=15*parseInt((c+7.5)%360/15);let d=r*Math.cos(c*Math.PI/180),h=r*Math.sin(c*Math.PI/180);a[1]=d+t,a[2]=h+o}if(n.path.length>1&&!c){let t=[...n.path];t.pop();for(let n of t){if((\"L\"===n[0]||\"M\"===n[0])&&e(10,i.x,i.y,n[1],n[2])){a[1]=n[1],a[2]=n[2];break}if(\"Q\"===n[0]&&e(10,i.x,i.y,n[3],n[4])){a[1]=n[3],a[2]=n[4];break}}}if(r)if(!c&&n.path.length>1){c=!0;let e=n.path.pop();\"Q\"===e[0]?(a=[\"Q\",e[3],e[4],e[3],e[4]],o=e[3],s=e[4]):(a=[\"Q\",e[1],e[2],e[1],e[2]],o=e[1],s=e[2])}else if(c){let e=i.x-a[3],t=i.y-a[4];a=[\"Q\",o-e,s-t,o,s]}n.path.push(a);let h=n._calcDimensions();n.set({width:h.width,height:h.height,left:h.left,top:h.top,pathOffset:{x:h.width/2+h.left,y:h.height/2+h.top},dirty:!0}),t.renderAll()})),t.on(\"mouse:up\",(e=>{if(!t.isDrawingPathMode)return r=!1,void(c=!1);if(r=!1,c){i=t.getPointer(e.e),n.path.push([\"L\",i.x,i.y]);let a=n._calcDimensions();n.set({width:a.width,height:a.height,left:a.left,top:a.top,pathOffset:{x:a.width/2+a.left,y:a.height/2+a.top},dirty:!0}),n.setCoords(),t.renderAll()}c=!1}));const d=()=>{if(n.path.pop(),n.path.length>1){let e=n._calcDimensions();n.set({width:e.width,height:e.height,left:e.left,top:e.top,pathOffset:{x:e.width/2+e.left,y:e.height/2+e.top},dirty:!0})}else t.remove(n);t.renderAll(),t.fire(\"object:modified\"),n=null,l=!1};document.addEventListener(\"keydown\",(e=>{l&&27===(e.which||e.keyCode)&&d()})),document.addEventListener(\"mousedown\",(e=>{l&&(document.querySelector(\".canvas-container\").contains(e.target)||d())}))}}(),window.ImageEditor.prototype.initializeRectDrawing=function(e){let t,n,i,a=!1;e.on(\"mouse:down\",(o=>{e.isDrawingRectMode&&(a=!0,i=e.getPointer(o.e),t=i.x,n=i.y,boxRect=new fabric.Rect({left:t,top:n,width:i.x-t,height:i.y-n,strokeWidth:1,stroke:\"#C00000\",fill:\"rgba(192, 0, 0, 0.2)\",transparentCorners:!1,originX:\"left\",originY:\"top\",isTemporary:!0}),e.add(boxRect))})),e.on(\"mouse:move\",(o=>{if(!a)return;i=e.getPointer(o.e);const s=o.e.shiftKey;t>i.x&&boxRect.set({left:Math.abs(i.x)}),n>i.y&&boxRect.set({top:Math.abs(i.y)});let l=Math.abs(t-i.x),r=Math.abs(n-i.y);if(s){const e=Math.max(l,r);l=e,r=e}boxRect.set({width:l,height:r}),e.renderAll()})),e.on(\"mouse:up\",(()=>{if(!a)return;let t;const n={left:boxRect.left,top:boxRect.top,width:boxRect.width<80?80:boxRect.width,height:boxRect.height<80?80:boxRect.height,fill:\"#000000\",strokeWidth:0,stroke:\"transparent\",selectable:!0,originX:\"left\",originY:\"top\"};a=!1,t=new fabric.Rect(n),e.remove(boxRect),e.add(t).setActiveObject(t),t.set({originX:\"center\",originY:\"center\",left:t.left+t.width/2,top:t.top+t.height/2}),e.fire(\"object:modified\")}))},window.ImageEditor.prototype.initializeCircleDrawing=function(e){let t,n,i,a=!1;e.on(\"mouse:down\",(o=>{e.isDrawingCircleMode&&(a=!0,i=e.getPointer(o.e),t=i.x,n=i.y,boxRect=new fabric.Ellipse({left:t,top:n,rx:i.x-t,ry:i.y-n,strokeWidth:1,stroke:\"#C00000\",fill:\"rgba(192, 0, 0, 0.2)\",transparentCorners:!1,originX:\"left\",originY:\"top\",isTemporary:!0}),e.add(boxRect))})),e.on(\"mouse:move\",(o=>{if(!a)return;i=e.getPointer(o.e);const s=o.e.shiftKey;t>i.x&&boxRect.set({left:Math.abs(i.x)}),n>i.y&&boxRect.set({top:Math.abs(i.y)});let l=Math.abs(t-i.x),r=Math.abs(n-i.y);if(s){const e=Math.max(l,r);l=e,r=e}boxRect.set({rx:l/2,ry:r/2}),e.renderAll()})),e.on(\"mouse:up\",(()=>{if(!a)return;if(boxRect.width<20||boxRect.height<20)return e.remove(boxRect),void(a=!1);let t;const n={left:boxRect.left,top:boxRect.top,rx:boxRect.width/2,ry:boxRect.height/2,originX:\"left\",originY:\"top\",fill:\"#000000\",stroke:\"transparent\",strokeWidth:0,selectable:!0};t=new fabric.Ellipse(n),a=!1,e.remove(boxRect),e.add(t).setActiveObject(t),t.set({originX:\"center\",originY:\"center\",left:t.left+t.rx,top:t.top+t.ry}),e.fire(\"object:modified\")}))},window.ImageEditor.prototype.initializeTriangleDrawing=function(e){let t,n,i,a=!1;e.on(\"mouse:down\",(o=>{e.isDrawingTriangleMode&&(a=!0,i=e.getPointer(o.e),t=i.x,n=i.y,boxTriangle=new fabric.Triangle({left:t,top:n,width:i.x-t,height:i.y-n,strokeWidth:1,stroke:\"#C00000\",fill:\"rgba(192, 0, 0, 0.2)\",transparentCorners:!1,originX:\"left\",originY:\"top\",isTemporary:!0}),e.add(boxTriangle))})),e.on(\"mouse:move\",(o=>{if(!a)return;i=e.getPointer(o.e);const s=o.e.shiftKey;t>i.x&&boxTriangle.set({left:Math.abs(i.x)}),n>i.y&&boxTriangle.set({top:Math.abs(i.y)});let l=Math.abs(t-i.x),r=Math.abs(n-i.y);if(s){const e=Math.max(l,r);l=e,r=e}boxTriangle.set({width:l,height:r}),e.renderAll()})),e.on(\"mouse:up\",(()=>{if(!a)return;let t;const n={left:boxTriangle.left,top:boxTriangle.top,width:boxTriangle.width<80?80:boxTriangle.width,height:boxTriangle.height<80?80:boxTriangle.height,fill:\"#000000\",strokeWidth:0,stroke:\"transparent\",selectable:!0,originX:\"left\",originY:\"top\"};a=!1,t=new fabric.Triangle(n),e.remove(boxTriangle),e.add(t).setActiveObject(t),t.set({originX:\"center\",originY:\"center\",left:t.left+t.width/2,top:t.top+t.height/2}),e.fire(\"object:modified\")}))},window.ImageEditor.prototype.initializeTextBoxDrawing=function(e){let t,n,i,a,o=!1;e.on(\"mouse:down\",(s=>{e.isDrawingTextMode&&(o=!0,a=e.getPointer(s.e),n=a.x,i=a.y,t=new fabric.Rect({left:n,top:i,width:a.x-n,height:a.y-i,strokeWidth:1,stroke:\"#C00000\",fill:\"rgba(192, 0, 0, 0.2)\",transparentCorners:!1,originX:\"left\",originY:\"top\"}),e.add(t))})),e.on(\"mouse:move\",(s=>{o&&(a=e.getPointer(s.e),n>a.x&&t.set({left:Math.abs(a.x)}),i>a.y&&t.set({top:Math.abs(a.y)}),t.set({width:Math.abs(n-a.x)}),t.set({height:Math.abs(i-a.y)}),e.renderAll())})),e.on(\"mouse:up\",(()=>{if(!o)return;let n;const i={left:t.left,top:t.top,width:t.width<80?80:t.width,fontSize:30,fontFamily:\"'Open Sans', sans-serif\",lineHeight:1.2,letterSpacing:0};o=!1,n=t.width>80?new fabric.Textbox(\"Your text goes here...\",i):new fabric.IText(\"Your text goes here...\",i),e.remove(t),e.add(n).setActiveObject(n),e.fire(\"object:modified\")}))},function(){\"use strict\";window.ImageEditor.prototype.initializeTipSection=function(){const e=[\"Tip: use arrows to move a selected object by 1 pixel!\",\"Tip: Shift + Click to select and modify multiple objects!\",\"Tip: hold Shift when rotating an object for 15° angle jumps!\",\"Tip: hold Shift when drawing a line for 15° angle jumps!\",\"Tip: Ctrl +/-, Ctrl + wheel to zoom in and zoom out!\",\"Tip: Shift + R to toggle rulers!\",\"Tip: hold Shift when drawing a circle or rectangle to keep the 1:1 ratio!\"],t=this;$(`${this.containerSelector} #footerbar`).prepend(`\\n    <div id=\"tip-container\">${e[parseInt(Math.random()*e.length)]}</div>`),this.hideTip=function(){$(`${t.containerSelector} #footerbar #tip-container`).hide()},this.showTip=function(){$(`${t.containerSelector} #footerbar #tip-container`).show()},this.updateTip=function(e){\"string\"==typeof e&&$(`${t.containerSelector} #footerbar #tip-container`).html(e)},this.updateTipRandom=function(){const t=e[parseInt(Math.random()*e.length)];this.updateTip(t)}}}(),window.ImageEditor.prototype.initializeUpload=function(){const e=this,t=$(e.containerSelector).find(\".canvas-holder\"),n=$(e.containerSelector);n.on(\"click\",\".drag-drop-input\",(function(){console.log(\"click drag drop\"),$(`${e.containerSelector} #btn-image-upload`).click()})),t.on(\"dragover\",\".canvas-container\",(function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass(\"dragging\")})),t.on(\"dragleave\",\".canvas-container\",(function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass(\"dragging\")})),t.on(\"drop\",\".canvas-container\",(function(e){if(e.preventDefault(),e.stopPropagation(),$(this).removeClass(\"dragging\"),e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files.length){let t=e.originalEvent.dataTransfer.files;i(t),$(\".custom-modal-container\").remove()}})),n.on(\"dragover\",\".drag-drop-input\",(function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass(\"dragging\")})),n.on(\"dragleave\",\".drag-drop-input\",(function(e){e.preventDefault(),e.stopPropagation(),$(this).removeClass(\"dragging\")})),n.on(\"drop\",\".drag-drop-input\",(function(e){if(e.preventDefault(),e.stopPropagation(),$(this).removeClass(\"dragging\"),e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files.length){let t=e.originalEvent.dataTransfer.files;i(t),$(\".custom-modal-container\").remove()}})),this.openDragDropPanel=function(){console.log(\"open drag drop panel\"),n.append('<div class=\"custom-modal-container\">\\n        <div class=\"custom-modal-content\">\\n          <div class=\"drag-drop-input\">\\n            <div>Drag & drop files<br>or click to browse.<br>JPG, PNG, WEBP or SVG only!</div>\\n          </div>\\n        </div>\\n      </div>'),n.on(\"click\",\".custom-modal-container\",(function(){$(this).remove()}))};const i=t=>{if(0===t.length)return;const n=[\"image/jpeg\",\"image/png\",\"image/svg+xml\",\"image/webp\"];for(let i of t){if(!n.includes(i.type))continue;if(\"image/svg+xml\"!==i.type&&void 0!==e.api.upload&&null!==e.api.upload){a(i);continue}let t=new FileReader;\"image/svg+xml\"!==i.type?(t.onload=t=>{e.addImageFromUrl(t.target.result)},t.readAsDataURL(i)):(t.onload=t=>{fabric.loadSVGFromString(t.target.result,((t,n)=>{let i=fabric.util.groupSVGElements(t,n);i.set({left:0,top:0}).setCoords(),e.canvas.add(i),e.canvas.renderAll(),e.canvas.fire(\"object:modified\")}))},t.readAsText(i))}},a=t=>{var n=new FormData;n.append(\"file\",t),fetch(e.api.upload,{method:\"POST\",body:n}).then((e=>e.json())).then((t=>{t.success?(e.images.push(t.url),$(`${e.containerSelector} .toolpanel#Images-panel .content .list-images`).prepend(`<div class=\"button\"><img src=\"${t.url}\" /></div>`),e.addImageFromUrl(t.url)):console.error(\"Failed uploading file\")})).catch((e=>{console.error(\"Error uploading file:\",e)}))};this.containerEl.append('<input id=\"btn-image-upload\" type=\"file\" accept=\"image/*\" multiple hidden>'),document.querySelector(`${this.containerSelector} #btn-image-upload`).addEventListener(\"change\",(function(e){0!==e.target.files.length&&i(e.target.files)}))},function(){\"use strict\";window.ImageEditor.prototype.initializeCopyPaste=e=>{document.addEventListener(\"copy\",(t=>{e.getActiveObject()&&(\"image\"===e.getActiveObject().type&&(t.preventDefault(),t.clipboardData.setData(\"text/plain\",e.getActiveObject().toDataURL())),\"image\"!==e.getActiveObject().type&&(t.preventDefault(),e.getActiveObject().clone((e=>{t.clipboardData.setData(\"text/plain\",JSON.stringify(e.toJSON()))}))))})),document.addEventListener(\"paste\",(t=>{let n=t.clipboardData.getData(\"text\");if(n&&(e=>{try{return e=e.split(\"base64,\").pop(),window.atob(e),!0}catch(e){return!1}})(n))return void fabric.Image.fromURL(n,(t=>{t.set({left:0,top:0,crossOrigin:\"anonymous\"}),t.scaleToHeight(100),t.scaleToWidth(100),e.add(t),e.setActiveObject(t),e.fire(\"object:modified\")}),{crossorigin:\"anonymous\"});if(t.clipboardData.items.length>0)for(let n=0;n<t.clipboardData.items.length;n++)if(0===t.clipboardData.items[n].type.indexOf(\"image\")){let i=t.clipboardData.items[n].getAsFile();if(null!==i){let t=new FileReader;t.onload=t=>{fabric.Image.fromURL(t.target.result,(t=>{t.set({left:0,top:0,crossOrigin:\"anonymous\"}),t.scaleToHeight(100),t.scaleToWidth(100),e.add(t),e.setActiveObject(t),e.fire(\"object:modified\")}),{crossorigin:\"anonymous\"})},t.readAsDataURL(i)}}let i=[\"rect\",\"circle\",\"line\",\"path\",\"polygon\",\"polyline\",\"textbox\",\"group\"];if((e=>{try{const t=JSON.parse(e);return!!t&&\"object\"==typeof t&&!Array.isArray(t)}catch{return!1}})(n)){let t=JSON.parse(n);if(!i.includes(t.type))return;fabric.util.enlivenObjects([t],(function(t){t.forEach((function(t){t.set({left:0,top:0}),e.add(t),t.setCoords(),e.setActiveObject(t)})),e.renderAll(),e.fire(\"object:modified\")}))}}))}}(),function(){\"use strict\";window.ImageEditor.prototype.initializeZoomEvents=function(){const e=this;$(`${this.containerSelector} #footerbar`).append('<div class=\"zoom-level-container\"></div>'),$(`${this.containerSelector} #footerbar .zoom-level-container`).append(`\\n          <button id=\"zoom-fit\">\\n           <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\\x3e<path d=\"M344 0H488c13.3 0 24 10.7 24 24V168c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-39-39-87 87c-9.4 9.4-24.6 9.4-33.9 0l-32-32c-9.4-9.4-9.4-24.6 0-33.9l87-87L327 41c-6.9-6.9-8.9-17.2-5.2-26.2S334.3 0 344 0zM168 512H24c-13.3 0-24-10.7-24-24V344c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2l39 39 87-87c9.4-9.4 24.6-9.4 33.9 0l32 32c9.4 9.4 9.4 24.6 0 33.9l-87 87 39 39c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8z\"/></svg> \\n          </button>\\n          <input type=\"range\" id=\"input-zoom-level\" min=\"0.1\" max=\"3\" step=\"0.05\" value=\"1\" oninput=\"updateZoomValue(this.value)\">\\n          <div id=\"zoom-value\">${Math.round(100)}%</div>\\n        `),$(`${this.containerSelector} #footerbar .zoom-level-container button`).click((function(){\"function\"==typeof e.fitZoom&&e.fitZoom()})),window.updateZoomValue=function(t){if(\"fit\"===t)\"function\"==typeof e.fitZoom&&e.fitZoom();else{let n=parseFloat(t);\"function\"==typeof e.applyZoom&&e.applyZoom(n)}},\"function\"==typeof e.applyZoom&&e.applyZoom(1);const t=.05;this.applyZoom=e=>{this.canvas.setZoom(e),this.canvas.setWidth(this.canvas.originalW*this.canvas.getZoom()),this.canvas.setHeight(this.canvas.originalH*this.canvas.getZoom()),this.inputZoomLevel(e)},this.fitZoom=()=>{const e=document.querySelector(this.containerSelector+\" .canvas-holder\"),n=e.clientWidth,i=e.clientHeight,a=n/this.canvas.originalW,o=i/this.canvas.originalH,s=Math.min(a,o)-.05,l=Math.max(t,Math.min(3,s)).toFixed(2);this.applyZoom(l)},document.addEventListener(\"keydown\",(e=>{const n=e.which||e.keyCode;if(189===n&&e.ctrlKey){if(e.preventDefault(),this.canvas.getZoom()===t)return;let n=parseInt(100*this.canvas.getZoom());if(n%25!=0)for(;n%25!=0;)n-=1;else n-=25;n/=100,n=n<=0?t:n,this.applyZoom(n)}if(187===n&&e.ctrlKey){if(e.preventDefault(),3===this.canvas.getZoom())return;let t=parseInt(100*this.canvas.getZoom());if(t%25!=0)for(;t%25!=0;)t+=1;else t+=25;t/=100,t=t>3?3:t,this.applyZoom(t)}96!==n&&48!==n&&192!==n||!e.ctrlKey||(e.preventDefault(),this.applyZoom(1))})),document.addEventListener(\"wheel\",(e=>{if(!e.ctrlKey)return;e.preventDefault();let n=this.canvas.getZoom();n=(100*n+(e.deltaY>0?-5:5))/100,n<t||n>3||this.applyZoom(n)}),{passive:!1}),this.inputZoomLevel=e=>{const t=document.querySelector(this.containerSelector+\" #input-zoom-level\");t&&(t.value=e,document.getElementById(\"zoom-value\").textContent=Math.round(100*e)+\"%\")}}}(),function(){\"use strict\";window.ImageEditor&&(window.ImageEditor.prototype.initializeLayers=function(){const e=this,t=document.createElement(\"div\");t.className=\"image-editor-layers\";const n=document.createElement(\"div\");n.className=\"layers-header\",n.innerHTML='<p>Layers</p><button class=\"layers-header-button layers-header-button-minus\"><i class=\"uil uil-minus\"></i></button><button class=\"layers-header-button layers-header-button-times\"><i class=\"uil uil-times\"></i></button>',n.style.display=\"flex\",t.appendChild(n),n.querySelector(\".layers-header-button-minus\").addEventListener(\"click\",(e=>{t.toggleAttribute(\"closed\")})),n.querySelector(\".layers-header-button-times\").addEventListener(\"click\",(e=>{t.style.display=\"none\"}));const i=document.createElement(\"div\");i.className=\"layers-list\",t.appendChild(i),e.containerEl.find(\".main-panel\").append(t);let a=null,o=null;function s(){e.canvas.getObjects().forEach(((e,t)=>{!function(e){if(!e.id){const t=(new Date).getTime();e.id=`${e.type}-${t}`}}(e),e.zIndex=t})),i.innerHTML=\"\",e.canvas.getObjects().filter((e=>!(e.metadata&&(e.metadata.isGuide||e.metadata.isMargin)||e.id&&(e.id.startsWith(\"vertical-\")||e.id.startsWith(\"horizontal-\"))||e.isTemporary))).reverse().slice().reverse().forEach((t=>{const n=function(t){const n=document.createElement(\"div\");n.className=\"layer-item\",n.dataset.objectId=t.id,n.draggable=!0,\"group\"===t.type&&(console.log(\"group\",t),t.getObjects().forEach((e=>{})));let s='<i class=\"uil uil-file-alt\"></i>';\"image\"===t.type?s='<i class=\"uil uil-image\"></i>':\"text\"===t.type||\"textbox\"===t.type||\"i-text\"===t.type?s='<i class=\"uil uil-font\"></i>':\"rect\"===t.type?s='<i class=\"uil uil-square\"></i>':\"circle\"===t.type||\"ellipse\"===t.type?s='<i class=\"uil uil-circle\"></i>':\"triangle\"===t.type?s='<i class=\"uil uil-triangle\"></i>':\"path\"===t.type?s='<i class=\"uil uil-pathfinder \"></i>':\"group\"===t.type&&(s='<i class=\"uil uil-layer-group\"></i>');let l=t.type?t.type.charAt(0).toUpperCase()+t.type.slice(1):\"Object\";return n.innerHTML=`\\n        <div class=\"layer-info\">\\n          <span class=\"layer-icon\">${s}</span> <span class=\"layer-name\">${l}</span>\\n        </div>\\n        <div class=\"layer-controls\">\\n          <button class=\"layer-lock\" style=\"opacity: ${t.locked?\"1\":\"0.3\"}; \"><i class=\"uil ${t.locked?\"uil-lock-alt\":\"uil-lock-open-alt\"}\"></i></button>\\n          <button class=\"layer-visibility\" style=\"opacity: ${t.visible?\"1\":\"0.5\"}; \"><i class=\"uil ${t.visible?\"uil-eye\":\"uil-eye-slash\"}\"></i></button>\\n          <button class=\"layer-delete\"><i class=\"uil uil-trash-alt\"></i></button>\\n        </div>\\n      `,n.addEventListener(\"dragstart\",(e=>{a=n,n.style.opacity=\"0.5\",e.dataTransfer.effectAllowed=\"move\",o=document.createElement(\"div\"),o.className=\"layer-item-placeholder\",o.style.cssText=`height: ${n.offsetHeight}px;`})),n.addEventListener(\"dragend\",(()=>{n.style.opacity=\"1\",o&&o.parentNode&&o.parentNode.removeChild(o),a=null,o=null})),n.addEventListener(\"dragover\",(e=>{if(e.preventDefault(),a!==n){const t=n.getBoundingClientRect(),i=t.top+t.height/2;e.clientY<i?n.parentNode.insertBefore(o,n):n.parentNode.insertBefore(o,n.nextSibling)}})),n.querySelector(\".layer-visibility\").addEventListener(\"click\",(n=>{n.stopPropagation(),t.visible=!t.visible,n.target.style.opacity=t.visible?\"1\":\"0.5\",e.canvas.fire(\"object:modified\"),e.canvas.renderAll()})),n.querySelector(\".layer-lock\").addEventListener(\"click\",(n=>{n.stopPropagation(),t.lockMovementX=!t.lockMovementX,t.lockMovementY=!t.lockMovementY,t.lockScalingX=!t.lockScalingX,t.lockScalingY=!t.lockScalingY,t.lockRotation=!t.lockRotation,t.lockUniScaling=!t.lockUniScaling,t.lockSkewingX=!t.lockSkewingX,t.lockSkewingY=!t.lockSkewingY,t.hasControls=!t.hasControls,t.hasRotatingPoint=!t.hasRotatingPoint,t.locked=!t.locked,n.target.style.opacity=t.locked?\"1\":\"0.5\",e.canvas.fire(\"layer:locked\"),e.canvas.fire(\"object:modified\"),e.canvas.renderAll()})),n.querySelector(\".layer-delete\").addEventListener(\"click\",(i=>{i.stopPropagation(),e.canvas.remove(t),n.remove(),e.canvas.renderAll()})),n.addEventListener(\"click\",(()=>{e.canvas.setActiveObject(t),e.canvas.renderAll()})),i.appendChild(n),n}(t);e.canvas.getActiveObject()===t&&(n.style.background=\"#e4e4e4\")}))}i.addEventListener(\"dragover\",(e=>{e.preventDefault(),e.dataTransfer.dropEffect=\"move\"})),i.addEventListener(\"drop\",(t=>{if(t.preventDefault(),console.log(\"drop in container\",a),a){const t=Array.from(i.children),n=t.indexOf(o);if(t.indexOf(a),-1!==n){const t=e.canvas.getObjects().filter((e=>!e.id||!e.id.startsWith(\"vertical-\")&&!e.id.startsWith(\"horizontal-\"))),i=a.dataset.objectId,o=t.find((e=>e.id===i));if(o){console.log(\"Object to move:\",o),e.canvas.remove(o);const i=fabric.util.object.clone(o);e.canvas.insertAt(i,t.length-1-n),e.canvas.renderAll(),s()}else console.warn(\"Object to be moved not found in canvas with ID:\",i)}}})),e.canvas.on(\"object:added\",s),e.canvas.on(\"object:removed\",s),e.canvas.on(\"object:modified\",s),e.canvas.on(\"selection:created\",s),e.canvas.on(\"selection:updated\",s),e.canvas.on(\"selection:cleared\",s),s()})}(),function(){\"use strict\";window.ImageEditor.prototype.initializeRuler=function(){const e=this,t=20,n=\"rgba(0, 162, 255, 0.5)\",i=\"rgba(0, 162, 255, 0.8)\",a=\"rgba(255, 0, 0, 0.5)\",o=\"imageEditor_rulersVisible\",s=\"imageEditor_marginsConfig\";this.margins={show:!1,top:70,right:70,bottom:70,left:70},this.saveRulerSettings=function(){if(window.saveInBrowser)try{window.saveInBrowser.save(o,this.isRulersVisible),window.saveInBrowser.save(s,this.margins)}catch(e){console.error(\"Erro ao salvar configurações de réguas:\",e)}},this.loadRulerSettings=function(){if(window.saveInBrowser)try{const e=window.saveInBrowser.load(o);null!=e&&(this.isRulersVisible=e);const t=window.saveInBrowser.load(s);t&&(this.margins=t)}catch(e){console.error(\"Erro ao carregar configurações de réguas:\",e)}},this.initRulers=function(){$(`${this.containerSelector}  .canvas-holder .content`).append('<canvas id=\"ruler-horizontal\" class=\"ruler horizontal-ruler\"></canvas>\\n         <canvas id=\"ruler-vertical\" class=\"ruler vertical-ruler\"></canvas>\\n         <div id=\"ruler-corner\" class=\"ruler-corner\"></div>\\n         <div id=\"ruler-menu\" class=\"ruler-menu\" style=\"display: none;\">\\n           <button id=\"toggle-margins\">Mostrar margens</button>\\n           <button id=\"clear-guides\">Limpar guias</button>\\n         </div>'),$(`${this.containerSelector} .horizontal-ruler`).css({position:\"absolute\",top:\"0\",left:\"20px\",height:\"20px\",right:\"0\",\"background-color\":\"#f0f0f0\",\"border-bottom\":\"1px solid #ccc\",display:\"none\"}),$(`${this.containerSelector} .vertical-ruler`).css({position:\"absolute\",top:\"20px\",left:\"0\",width:\"20px\",bottom:\"0\",\"background-color\":\"#f0f0f0\",\"border-right\":\"1px solid #ccc\",display:\"none\"}),$(`${this.containerSelector} .ruler-corner`).css({position:\"absolute\",top:\"0\",left:\"0\",width:\"20px\",height:\"20px\",\"background-color\":\"#f0f0f0\",\"border-right\":\"1px solid #ccc\",\"border-bottom\":\"1px solid #ccc\",display:\"none\",cursor:\"pointer\"}),$(`${this.containerSelector} .ruler-menu`).css({position:\"absolute\",top:\"25px\",left:\"25px\",padding:\"5px\",\"background-color\":\"#fff\",border:\"1px solid #ccc\",\"border-radius\":\"4px\",\"box-shadow\":\"0px 2px 5px rgba(0,0,0,0.2)\",\"z-index\":\"1000\"}),$(`${this.containerSelector} .ruler-menu button`).css({display:\"block\",margin:\"5px 0\",padding:\"5px 10px\",width:\"100%\",\"text-align\":\"left\",background:\"none\",border:\"none\",cursor:\"pointer\"}),$(`${this.containerSelector} .ruler-menu button:hover`).css({\"background-color\":\"#f0f0f0\"}),this.horizontalRuler=document.getElementById(\"ruler-horizontal\"),this.verticalRuler=document.getElementById(\"ruler-vertical\"),this.horizontalRuler&&this.verticalRuler&&(this.ctxH=this.horizontalRuler.getContext(\"2d\"),this.ctxV=this.verticalRuler.getContext(\"2d\")),$(`${this.containerSelector} .ruler-corner`).click((function(t){const n=$(`${e.containerSelector} .ruler-menu`);n.is(\":visible\")?n.hide():n.show(),t.stopPropagation()})),$(document).click((function(t){$(t.target).closest(\".ruler-corner, .ruler-menu\").length||$(`${e.containerSelector} .ruler-menu`).hide()})),$(`${this.containerSelector} #toggle-margins`).click((function(){e.margins.show=!e.margins.show,$(this).text(e.margins.show?\"Ocultar margens\":\"Mostrar margens\"),e.drawCanvasElements(),$(`${e.containerSelector} .ruler-menu`).hide(),e.saveRulerSettings()})),$(`${this.containerSelector} #clear-guides`).click((function(){e.clearGuides(),$(`${e.containerSelector} .ruler-menu`).hide()}))},this.resizeRulers=function(){if(this.canvas)try{const e=document.querySelector(this.containerSelector+\"  .canvas-holder .content\"),n=e.clientWidth,i=e.clientHeight,a=document.querySelector(this.containerSelector+\" .canvas-container\"),o=a?a.getBoundingClientRect():null;o&&o.left,this.horizontalRuler.width=n-t,this.horizontalRuler.height=t,this.verticalRuler.width=t,this.verticalRuler.height=i-t,this.horizontalRuler.style.left=\"20px\",this.horizontalRuler.style.top=\"0\",this.verticalRuler.style.left=\"0\",this.verticalRuler.style.top=\"20px\",this.drawRulers()}catch(e){console.error(\"Erro ao redimensionar réguas:\",e)}},this.drawMargins=function(){if(!this.margins.show||!this.canvas)return;this.logCanvasDimensions(\"drawMargins\");const e=this.dimensions?this.dimensions.width:this.canvas.width||1e3,t=this.dimensions?this.dimensions.height:this.canvas.height||1e3;console.log(\"Dimensões do canvas para margens:\",e,\"x\",t);const n=this.margins.left,i=e-this.margins.right,a=this.margins.top,o=t-this.margins.bottom;this.updateOrCreateMargin(\"marginTop\",[0,a,e,a]),this.updateOrCreateMargin(\"marginRight\",[i,0,i,t]),this.updateOrCreateMargin(\"marginBottom\",[0,o,e,o]),this.updateOrCreateMargin(\"marginLeft\",[n,0,n,t])},this.updateOrCreateMargin=function(e,t){if(!this.canvas)return null;let n=this.canvas.getObjects().find((t=>t.metadata&&t.metadata.isMargin&&t.metadata.id===e));return n?n.set({x1:t[0],y1:t[1],x2:t[2],y2:t[3],excludeFromExport:!0}):(n=\"marginTop\"===e||\"marginBottom\"===e?new fabric.Line(t,{stroke:a,strokeWidth:2,strokeDashArray:[5,5],selectable:!0,evented:!0,lockMovementX:!0,lockMovementY:!1,hasControls:!1,hasBorders:!0,hoverCursor:\"ns-resize\",moveCursor:\"ns-resize\",padding:5,originX:\"center\",originY:\"center\",excludeFromExport:!0,metadata:{isMargin:!0,id:e,isHorizontal:!0}}):new fabric.Line(t,{stroke:a,strokeWidth:2,strokeDashArray:[5,5],selectable:!0,evented:!0,lockMovementX:!1,lockMovementY:!0,hasControls:!1,hasBorders:!0,hoverCursor:\"ew-resize\",moveCursor:\"ew-resize\",padding:5,originX:\"center\",originY:\"center\",excludeFromExport:!0,metadata:{isMargin:!0,id:e,isHorizontal:!1}}),this.canvas.add(n)),n},this.clearGuides=function(){this.canvas&&(this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide)).forEach((e=>{this.canvas.remove(e)})),this.canvas.renderAll())},this.clearMargins=function(){this.canvas&&(this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isMargin)).forEach((e=>{this.canvas.remove(e)})),this.canvas.renderAll())},this.drawRulers=function(){if(this.ctxH&&this.ctxV&&this.canvas)try{const e=this.canvas.getZoom(),n=this.canvas.viewportTransform;this.ctxH.clearRect(0,0,this.horizontalRuler.width,this.horizontalRuler.height),this.ctxV.clearRect(0,0,this.verticalRuler.width,this.verticalRuler.height),this.ctxH.font=\"9px Arial\",this.ctxH.fillStyle=\"#666\",this.ctxH.strokeStyle=\"#666\",this.ctxV.font=\"9px Arial\",this.ctxV.fillStyle=\"#666\",this.ctxV.strokeStyle=\"#666\";const i=e>=1?10:50,a=document.querySelector(this.containerSelector+\" .canvas-container\"),o=a?a.getBoundingClientRect():null,s=(o&&o.left,Math.floor(-n[4]/e/i)*i),l=Math.floor(-n[5]/e/i)*i;for(let a=s;a<=s+this.horizontalRuler.width/e;a+=i){const i=(a-s)*e+n[4],o=a%100==0,l=o?15:10;this.ctxH.beginPath(),this.ctxH.moveTo(i,t),this.ctxH.lineTo(i,t-l),this.ctxH.stroke(),o&&this.ctxH.fillText(a.toString(),i+2,10)}for(let a=l;a<=l+this.verticalRuler.height/e;a+=i){const i=(a-l)*e+n[5],o=a%100==0,s=o?15:10;this.ctxV.beginPath(),this.ctxV.moveTo(t,i),this.ctxV.lineTo(t-s,i),this.ctxV.stroke(),o&&(this.ctxV.save(),this.ctxV.translate(10,i+10),this.ctxV.rotate(-Math.PI/2),this.ctxV.fillText(a.toString(),0,0),this.ctxV.restore())}this.lastMousePosition&&this.drawCursorOnly(this.lastMousePosition.x,this.lastMousePosition.y)}catch(e){console.error(\"Erro ao desenhar réguas:\",e)}},this.drawCursorOnly=function(e,n){if(this.isRulersVisible&&this.ctxH&&this.ctxV)try{const i=document.querySelector(`${this.containerSelector}  .canvas-holder .content`);if(!i)return;const a=i.getBoundingClientRect(),o=e-a.left,s=n-a.top;o>t&&(this.ctxH.fillStyle=\"rgba(255, 0, 0, 0.5)\",this.ctxH.fillRect(o-t,0,1,t)),s>t&&(this.ctxV.fillStyle=\"rgba(255, 0, 0, 0.5)\",this.ctxV.fillRect(0,s-t,t,1))}catch(e){console.error(\"Erro ao desenhar cursor nas réguas:\",e)}},this.drawCanvasElements=function(){this.canvas&&(this.margins.show?this.drawMargins():this.clearMargins(),this.canvas.renderAll())},this.addGuide=function(e,t){if(!this.canvas)return console.error(\"Canvas não está disponível para adicionar guia\"),null;try{this.logCanvasDimensions(\"addGuide início\");const i=this.dimensions?this.dimensions.width:this.canvas.width||1e3,a=this.dimensions?this.dimensions.height:this.canvas.height||1e3,o=this.canvas.getElement().getBoundingClientRect(),s=this.canvas.getZoom(),l=this.canvas.viewportTransform;let r,c;return e?(r=(t-o.top)/s-l[5]/s,r<0&&(r=0),r>a&&(r=a)):(r=(t-o.left)/s-l[4]/s,r<0&&(r=0),r>i&&(r=i)),c=e?new fabric.Line([0,r,i,r],{stroke:n,strokeWidth:3,selectable:!0,evented:!0,lockMovementX:!0,lockMovementY:!1,hasControls:!1,hasBorders:!0,hoverCursor:\"ns-resize\",moveCursor:\"ns-resize\",padding:5,originX:\"center\",originY:\"center\",opacity:.7,excludeFromExport:!0,metadata:{isGuide:!0,isHorizontal:!0}}):new fabric.Line([r,0,r,a],{stroke:n,strokeWidth:3,selectable:!0,evented:!0,lockMovementX:!1,lockMovementY:!0,hasControls:!1,hasBorders:!0,hoverCursor:\"ew-resize\",moveCursor:\"ew-resize\",padding:5,originX:\"center\",originY:\"center\",opacity:.7,excludeFromExport:!0,metadata:{isGuide:!0,isHorizontal:!1}}),c.active=!1,this.canvas.add(c),c.bringToFront(),this.canvas.renderAll(),this.canvas.setActiveObject(c),c}catch(e){return console.error(\"Erro ao adicionar guia:\",e),null}},this.checkSnapping=function(e){if(!this.canvas||!e)return!1;if(e.metadata&&(e.metadata.isGuide||e.metadata.isMargin))return!1;try{const t=10/this.canvas.getZoom(),a=e.getBoundingRect(),o=a.left,s=a.top,l=a.left+a.width,r=a.top+a.height,c=o+a.width/2,d=s+a.height/2,h=this.canvas.getObjects().filter((e=>e.metadata&&(e.metadata.isGuide||e.metadata.isMargin)));let p=null,u=t;if(h.forEach((e=>{if(e.metadata.isGuide&&e.metadata.isHorizontal||e.metadata.isMargin&&(\"marginTop\"===e.metadata.id||\"marginBottom\"===e.metadata.id)){const t=e.y1,n=Math.abs(t-s);n<u&&(u=n,p={axis:\"y\",target:s,value:t,guide:e});const i=Math.abs(t-d);i<u&&(u=i,p={axis:\"y\",target:d,value:t,guide:e});const a=Math.abs(t-r);a<u&&(u=a,p={axis:\"y\",target:r,value:t,guide:e})}else if(e.metadata.isGuide&&!e.metadata.isHorizontal||e.metadata.isMargin&&(\"marginLeft\"===e.metadata.id||\"marginRight\"===e.metadata.id)){const t=e.x1,n=Math.abs(t-o);n<u&&(u=n,p={axis:\"x\",target:o,value:t,guide:e});const i=Math.abs(t-c);i<u&&(u=i,p={axis:\"x\",target:c,value:t,guide:e});const a=Math.abs(t-l);a<u&&(u=a,p={axis:\"x\",target:l,value:t,guide:e})}})),p){if(p.guide.metadata.isGuide&&(p.guide.stroke,p.guide.strokeWidth,p.guide.opacity,p.guide.set({stroke:i,strokeWidth:2,opacity:1})),\"y\"===p.axis){const t=p.value-p.target;e.set({top:e.top+t})}else{const t=p.value-p.target;e.set({left:e.left+t})}return setTimeout((()=>{p.guide&&p.guide.metadata&&p.guide.metadata.isGuide&&(p.guide.active||p.guide.set({stroke:n,strokeWidth:3,opacity:.7}),this.canvas.renderAll())}),300),!0}}catch(e){console.error(\"Erro ao verificar snapping:\",e)}return!1},this.toggleRulers=function(){this.isRulersVisible=!this.isRulersVisible;const e=this.isRulersVisible?\"block\":\"none\";$(`${this.containerSelector} .ruler`).css(\"display\",e),$(`${this.containerSelector} .ruler-corner`).css(\"display\",e),$(`${this.containerSelector} .ruler-menu`).hide(),this.isRulersVisible?($(`${this.containerSelector}  .canvas-holder .content .content`).css({\"padding-top\":\"20px\",\"padding-left\":\"20px\"}),this.logCanvasDimensions(\"toggleRulers - mostrar\"),setTimeout((()=>this.forceGuidesMovable()),100)):($(`${this.containerSelector}  .canvas-holder .content .content`).css({\"padding-top\":\"0\",\"padding-left\":\"0\"}),this.margins&&this.margins.show&&(this.margins.show=!1,this.clearMargins())),this.isRulersVisible&&this.canvas&&(this.resizeRulers(),this.drawCanvasElements(),this.updateGuidesAfterCanvasChange()),this.saveRulerSettings(),this.fitZoom()},this.setupRulerInteractions=function(){const e=this;$(`${this.containerSelector}  .canvas-holder .content`).mousemove((function(t){if(!e.isRulersVisible||!e.canvas)return;this.getBoundingClientRect();const n=t.clientX,i=t.clientY;e.drawRulerCursors(n,i)})),$(`${this.containerSelector} .horizontal-ruler`).mousedown((function(t){if(!e.canvas)return;const n=t.clientY;this.getBoundingClientRect(),e.addGuide(!0,n)?console.log(\"Horizontal guide added at Y:\",n):console.error(\"Failed to add horizontal guide\")})),$(`${this.containerSelector} .vertical-ruler`).mousedown((function(t){if(!e.canvas)return;const n=t.clientX;this.getBoundingClientRect(),e.addGuide(!1,n)?console.log(\"Vertical guide added at X:\",n):console.error(\"Failed to add vertical guide\")})),this.canvas&&(this.canvas.on(\"object:moving\",(function(t){if(t.target)if(t.target.metadata&&t.target.metadata.isGuide)try{const n=e.dimensions?e.dimensions.width:e.canvas.width||1e3,i=e.dimensions?e.dimensions.height:e.canvas.height||1e3;t.target.metadata.isHorizontal?(t.target.top<0&&(t.target.top=0),t.target.top>i&&(t.target.top=i),t.target.set({x1:0,y1:t.target.top,x2:n,y2:t.target.top,opacity:1})):(t.target.left<0&&(t.target.left=0),t.target.left>n&&(t.target.left=n),t.target.set({x1:t.target.left,y1:0,x2:t.target.left,y2:i,opacity:1}))}catch(e){console.error(\"Erro ao mover guia:\",e)}else e.isRulersVisible&&e.checkSnapping(t.target)})),this.canvas.on(\"mouse:dblclick\",(function(t){t.target&&t.target.metadata&&t.target.metadata.isGuide&&(e.canvas.remove(t.target),e.canvas.renderAll())})),this.canvas.on(\"mouse:wheel\",(function(){e.isRulersVisible&&(e.drawRulers(),e.updateGuidesAfterCanvasChange())})),this.canvas.on(\"mouse:down\",(function(t){(t.e.altKey||t.e.metaKey)&&(e.isPanning=!0)})),this.canvas.on(\"mouse:up\",(function(){e.isPanning&&(e.isPanning=!1,e.isRulersVisible&&e.updateGuidesAfterCanvasChange())})),this.canvas.on(\"object:modified\",(function(t){const n=t.target;n&&n.metadata&&n.metadata.isGuide&&(n.active||n.set({opacity:.7}),setTimeout((()=>e.forceGuidesMovable()),100),e.canvas.renderAll())}))),$(document).keydown((function(t){t.shiftKey&&\"R\"===t.key&&(e.toggleRulers(),$(`${e.containerSelector} #toolbar button#ruler`).toggleClass(\"active\"),t.preventDefault())})),this.canvas.on(\"selection:created\",(function(t){if(t.selected&&1===t.selected.length&&t.selected[0].metadata&&t.selected[0].metadata.isGuide){const n=t.selected[0];n.set({stroke:i,strokeWidth:2,opacity:1}),n.active=!0,e.canvas.renderAll()}})),this.canvas.on(\"selection:updated\",(function(t){if(e.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide)).forEach((e=>{e.active=!1,e.set({stroke:n,strokeWidth:3,opacity:.7})})),t.selected&&1===t.selected.length&&t.selected[0].metadata&&t.selected[0].metadata.isGuide){const n=t.selected[0];n.set({stroke:i,strokeWidth:2,opacity:1}),n.active=!0,e.canvas.renderAll()}})),this.canvas.on(\"selection:cleared\",(function(){const t=e.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide));t.length>0&&(t.forEach((e=>{e.active=!1,e.set({stroke:n,strokeWidth:3,opacity:.7})})),e.canvas.renderAll())})),this.canvas.on(\"mouse:down\",(function(t){if(t.target&&!t.target.metadata?.isGuide){const n=e.canvas.getActiveObject();n&&n.metadata&&n.metadata.isGuide&&(e.canvas.discardActiveObject(),setTimeout((()=>{e.canvas.setActiveObject(t.target),e.canvas.renderAll()}),50))}}))},this.initRulerComponent=function(){this.isRulersVisible=!1,this.loadRulerSettings(),this.initRulers()},this.setupRulerAfterCanvasReady=function(){if(this.canvas){if(this.setupRulerInteractions(),this.resizeRulers(),this.logCanvasDimensions(\"setupRulerAfterCanvasReady\"),this.forceGuidesMovable(),this.canvas.on(\"after:render\",(function(){e.calcOffset&&e.calcOffset()})),this.forceGuidesMovable(),this.canvas.on(\"mouse:up\",(function(){e.isRulersVisible&&setTimeout((()=>e.forceGuidesMovable()),100)})),this.isRulersVisible){const e=\"block\";$(`${this.containerSelector} .ruler`).css(\"display\",e),$(`${this.containerSelector} .ruler-corner`).css(\"display\",e),$(`${this.containerSelector}  .canvas-holder .content .content`).css({\"padding-top\":\"20px\",\"padding-left\":\"20px\"}),$(`${this.containerSelector} #toggle-margins`).text(this.margins.show?\"Ocultar margens\":\"Mostrar margens\"),this.margins.show&&this.drawCanvasElements()}}else console.error(\"Canvas ainda não está pronto para configurar réguas\")},this.drawRulerCursors=function(e,t){if(this.isRulersVisible)try{this.lastMousePosition={x:e,y:t},this.drawRulers()}catch(e){console.error(\"Erro ao desenhar cursores nas réguas:\",e)}},this.logCanvasDimensions=function(e){if(!this.canvas)return;const t=this.dimensions?this.dimensions.width:this.canvas.width||1e3,n=this.dimensions?this.dimensions.height:this.canvas.height||1e3,i=this.canvas.getZoom(),a=this.canvas.viewportTransform;console.log(`--- Dimensões do Canvas (${e}) ---`),console.log(\"Dimensões:\",t,\"x\",n),console.log(\"this.dimensions:\",this.dimensions),console.log(\"this.canvas.width/height:\",this.canvas.width,\"x\",this.canvas.height),console.log(\"Zoom atual:\",i),console.log(\"ViewportTransform:\",a),console.log(\"---------------------------------------\")},this.updateGuidesAfterCanvasChange=function(){if(!this.canvas)return;const e=this.dimensions?this.dimensions.width:this.canvas.width||1e3,t=this.dimensions?this.dimensions.height:this.canvas.height||1e3,n=this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide));0!==n.length&&(n.forEach((n=>{try{if(n.metadata.isHorizontal){const t=void 0!==n.top?n.top:void 0!==n.y1?n.y1:0;n.set({x1:0,y1:t,x2:e,y2:t})}else{const e=void 0!==n.left?n.left:void 0!==n.x1?n.x1:0;n.set({x1:e,y1:0,x2:e,y2:t})}}catch(e){console.error(\"Erro ao atualizar guia:\",e)}})),this.canvas.renderAll(),setTimeout((()=>this.forceGuidesMovable()),100))},this.forceGuidesMovable=function(){if(!this.canvas)return;const e=this.canvas.getObjects().filter((e=>e.metadata&&e.metadata.isGuide));0!==e.length?(e.forEach(((t,n)=>{try{const i=t.metadata.isHorizontal;console.log(`Configurando guia ${n+1}/${e.length} (${i?\"horizontal\":\"vertical\"})`),console.log(\"Propriedades atuais:\",{selectable:t.selectable,lockMovementX:t.lockMovementX,lockMovementY:t.lockMovementY}),t.set({selectable:!0,evented:!0,lockMovementX:i,lockMovementY:!i,hasControls:!1,hasBorders:!0,padding:8,strokeWidth:2,hoverCursor:i?\"ns-resize\":\"ew-resize\",moveCursor:i?\"ns-resize\":\"ew-resize\",excludeFromExport:!0,opacity:t.active?1:.7})}catch(e){console.error(`Erro ao configurar guia ${n+1}:`,e)}})),this.canvas.renderAll()):console.log(\"Nenhuma guia encontrada para tornar movível\")}},window.addEventListener(\"resize\",(function(){window.app&&window.app.ruler&&window.app.ruler.resizeRulers()})),window.app?window.app.setupRulerAfterCanvasReady=function(){try{if(!window.app.canvas)return void console.error(\"Canvas ainda não está inicializado\");if(!window.app.ruler)return void console.error(\"Objeto ruler não foi inicializado\");window.app.ruler.setupRulerAfterCanvasReady()}catch(e){console.error(\"Erro ao configurar réguas após inicialização do canvas:\",e)}}:console.warn(\"window.app não está disponível para configurar setupRulerAfterCanvasReady\")}(),function(){\"use strict\";window.ImageEditor.prototype.initializeFullscreenEvents=function(){const e=document.querySelector(`${this.containerSelector}`),t=document.querySelector(`${this.containerSelector} #fullscreen`),n='<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\\x3e<path d=\"M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V64zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32H96v64c0 17.7 14.3 32 32 32s32-14.3 32-32V352c0-17.7-14.3-32-32-32H32zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V64zM320 320c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V384h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320z\"/></svg>';t&&t.addEventListener(\"click\",(()=>{document.fullscreenElement?document.exitFullscreen().then((()=>t.innerHTML='<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\\x3e<path d=\"M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z\"/></svg>')):e.webkitSupportsFullscreen?e.webkitEnterFullscreen().then((()=>t.innerHTML=n)):e.requestFullscreen().then((()=>t.innerHTML=n))}))}}(),function(){\"use strict\";window.ImageEditor.prototype.initializeNotification=function(){try{const e=document.querySelector(`${this.containerSelector} .main-panel`),t=e=>{switch(e){case\"Danger\":return\"#eb3b5a\";case\"Warning\":return\"#fdcb6e\";default:return\"#00b894\"}};class n{constructor(t,n,i){this.message=t,this.color=n,this.time=i,this.element=null;var a=document.createElement(\"div\");a.className=\"toast-notification\",this.element=a;var o=document.getElementsByClassName(\"toast-notification\");a.style.opacity=.8,a.style.marginTop=55*o.length+\"px\",a.style.backgroundColor=this.color,(t=document.createElement(\"div\")).className=\"message-container\",t.textContent=this.message,a.appendChild(t);var s=document.createElement(\"div\");s.className=\"close-notification\",s.innerHTML='<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 384 512\"><path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\"/></svg>',a.append(s),e.appendChild(a),setTimeout((function(){a.remove()}),this.time),s.addEventListener(\"click\",(()=>{a.remove()}))}}this.toast=(e,i,a)=>{a=null!=a?a:5e3,i=t(i),new n(e,i,a)}}catch(e){console.error(e)}}}(),function(){\"use strict\";window.ImageEditor.prototype.initializeConfirmationDialog=function(){const e=this;this.confirm=(t,n={})=>{const i=\"string\"==typeof t?t:\"\",{confirmLabel:a=\"Confirm\",cancelLabel:o=\"Cancel\"}=n||{};return new Promise((t=>{(()=>{const e=document.querySelector(\".image-editor-confirm\");e&&e.parentNode&&e.parentNode.removeChild(e)})();const n=e.containerEl&&e.containerEl[0]instanceof HTMLElement?e.containerEl[0]:document.body,s=document.createElement(\"div\");s.className=\"image-editor-confirm\",s.setAttribute(\"role\",\"alertdialog\"),s.setAttribute(\"aria-modal\",\"true\"),i&&s.setAttribute(\"aria-label\",i);const l=document.createElement(\"div\");if(l.className=\"image-editor-confirm__content\",i){const e=document.createElement(\"p\");e.className=\"image-editor-confirm__message\",e.textContent=i,l.appendChild(e)}const r=document.createElement(\"div\");r.className=\"image-editor-confirm__actions\";const c=document.createElement(\"button\");c.type=\"button\",c.className=\"image-editor-confirm__button image-editor-confirm__button--confirm\",c.textContent=a;const d=document.createElement(\"button\");d.type=\"button\",d.className=\"image-editor-confirm__button image-editor-confirm__button--cancel\",d.textContent=o,r.appendChild(c),r.appendChild(d),l.appendChild(r),s.appendChild(l),n.appendChild(s);let h=!1;const p=e=>{h||(h=!0,document.removeEventListener(\"keydown\",m,!0),s.removeEventListener(\"click\",g),c.removeEventListener(\"click\",u),d.removeEventListener(\"click\",v),s.parentNode&&s.parentNode.removeChild(s),t(e))},u=e=>{e.preventDefault(),p(!0)},v=e=>{e.preventDefault(),p(!1)},g=e=>{e.target===s&&(e.preventDefault(),p(!1))},m=e=>{if(\"Escape\"===e.key)return e.preventDefault(),void p(!1);\"Enter\"!==e.key&&\"Return\"!==e.key||document.activeElement!==c||(e.preventDefault(),p(!0))};c.addEventListener(\"click\",u),d.addEventListener(\"click\",v),s.addEventListener(\"click\",g),document.addEventListener(\"keydown\",m,!0),requestAnimationFrame((()=>(e=>{try{e.focus({preventScroll:!0})}catch(t){try{e.focus()}catch(e){}}})(c)))}))}}}(),window.ImageEditor.prototype.initializeAnimations=function(e){this.animations=new class{constructor(e){this.canvas=e,this.animations={slideInLeft:e=>this.slideIn(e,\"left\",this.canvas),slideInRight:e=>this.slideIn(e,\"right\",this.canvas),slideInTop:e=>this.slideIn(e,\"top\",this.canvas),slideInBottom:e=>this.slideIn(e,\"bottom\",this.canvas),fade:e=>this.fade(e,1,this.canvas),zoom:e=>this.zoom(e,1,this.canvas),spin:e=>this.spin(e,360,this.canvas),swing:e=>this.swing(e,this.canvas),float:e=>this.float(e,30,this.canvas),typewriter:e=>this.typewriter(e,this.canvas)}}runAnimation(){this.canvas.renderAll.bind(this.canvas),this.canvas.getObjects().forEach((e=>{if(e.animation){const{type:t,duration:n,easing:i}=e.animation;this.animations[t]&&setTimeout((()=>{this.animations[t](e),console.log(\"Animação carregada:\",e.animation)}),0)}}))}slideIn(e,t=\"left\"){const n={left:e.left,top:e.top};\"left\"===t&&(e.left=-e.width),\"right\"===t&&(e.left=this.canvas.width+e.width),\"top\"===t&&(e.top=-e.height),\"bottom\"===t&&(e.top=this.canvas.height+e.height),e.animate({left:n.left,top:n.top},{duration:1e3,easing:fabric.util.ease.easeOutCubic,onChange:this.canvas.renderAll.bind(this.canvas)})}fade(e,t=1,n=1e3){e.opacity=1===t?0:e.opacity,e.animate(\"opacity\",t,{duration:n,easing:fabric.util.ease.easeInOutQuad,onChange:this.canvas.renderAll.bind(this.canvas)})}zoom(e,t=2){const n=e.scaleX,i=e.getCenterPoint();e.set({originX:\"center\",originY:\"center\",left:i.x,top:i.y}),e.animate({scaleX:t,scaleY:t},{duration:1e3,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:()=>{e.animate({scaleX:n,scaleY:n},{duration:1e3,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas)})}})}spin(e,t=360){const n=e.angle,i=e.getCenterPoint();e.set({originX:\"center\",originY:\"center\",left:i.x,top:i.y}),e.animate(\"angle\",n+t,{duration:1e3,easing:fabric.util.ease.easeOutBack,onChange:this.canvas.renderAll.bind(this.canvas)})}swing(e){const t=e.angle,n=e.getCenterPoint();e.set({originX:\"center\",originY:\"center\",left:n.x,top:n.y}),e.animate(\"angle\",t+10,{duration:300,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:()=>{e.animate(\"angle\",t-10,{duration:300,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:()=>{e.animate(\"angle\",t,{duration:300,easing:fabric.util.ease.easeInOutCubic,onChange:this.canvas.renderAll.bind(this.canvas)})}})}})}float(e,t=20){const n=e.top;e.animate(\"top\",n-t,{duration:1e3,easing:fabric.util.ease.easeInOutQuad,onChange:this.canvas.renderAll.bind(this.canvas),onComplete:()=>{e.animate(\"top\",n,{duration:1e3,easing:fabric.util.ease.easeInOutQuad,onChange:this.canvas.renderAll.bind(this.canvas)})}})}typewriter(e){const t=e.text;e.text=\"\";let n=0;const i=setInterval((()=>{n<t.length?(e.text+=t[n],n++,this.canvas.renderAll()):clearInterval(i)}),100)}}(e)},function(){\"use strict\";if(void 0!==window.ImageEditor&&void 0!==window.ImageEditor.prototype.initializeToolbar){const e={name:\"frames\",title:\"Molduras\",icon:'<svg viewBox=\"0 0 512 512\"><path d=\"M448 128v288H64V128h384m0-64H64C28.65 64 0 92.65 0 128v288c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V128c0-35.35-28.65-64-64-64z\"/><path d=\"M128 384h256v-32H128zM128 288h256v-32H128zM128 192h256v-32H128z\"/></svg>'};window.ImageEditor.prototype.initializeToolbar.defaultButtons||(window.ImageEditor.prototype.initializeToolbar.defaultButtons=[]);let t=!1;for(let e=0;e<window.ImageEditor.prototype.initializeToolbar.defaultButtons.length;e++)if(\"frames\"===window.ImageEditor.prototype.initializeToolbar.defaultButtons[e].name){t=!0;break}t||window.ImageEditor.prototype.initializeToolbar.defaultButtons.push(e)}const e={rectangle:function(e){return new fabric.Rect({width:e,height:e,originX:\"center\",originY:\"center\"})},circle:function(e){return new fabric.Circle({radius:e/2,originX:\"center\",originY:\"center\"})},triangle:function(e){return new fabric.Triangle({width:e,height:e,originX:\"center\",originY:\"center\"})},ellipse:function(e){return new fabric.Ellipse({rx:e/2,ry:e/3,originX:\"center\",originY:\"center\"})},diamond:function(e){const t=[{x:0,y:-e/2},{x:e/2,y:0},{x:0,y:e/2},{x:-e/2,y:0}];return new fabric.Polygon(t,{originX:\"center\",originY:\"center\"})},heart:function(e){const t=e/100,n=[{x:0,y:-25*t},{x:-25*t,y:-10*t},{x:-40*t,y:10*t},{x:-25*t,y:30*t},{x:0,y:50*t},{x:25*t,y:30*t},{x:40*t,y:10*t},{x:25*t,y:-10*t}];return new fabric.Polygon(n,{originX:\"center\",originY:\"center\"})},star:function(e){const t=[],n=e/2,i=e/5;for(let e=0;e<10;e++){const a=e%2==0?n:i,o=Math.PI/5*e+Math.PI/2;t.push({x:Math.cos(o)*a,y:Math.sin(o)*a})}return new fabric.Polygon(t,{originX:\"center\",originY:\"center\"})},hexagon:function(e){const t=[],n=e/2;for(let e=0;e<6;e++){const i=2*Math.PI*e/6;t.push({x:n*Math.cos(i),y:n*Math.sin(i)})}return new fabric.Polygon(t,{originX:\"center\",originY:\"center\"})},cloud:function(e){return new fabric.Path(\"M25,60 a20,20 0 0,1 0,-40 a20,20 0 0,1 35,-15 a25,25 0 0,1 45,0 a20,20 0 0,1 0,40 a20,20 0 0,1 -35,15 a25,25 0 0,1 -45,0 z\",{originX:\"center\",originY:\"center\",scaleX:e/100,scaleY:e/100})},speech:function(e){return new fabric.Path(\"M10,80 C10,50 30,20 60,20 C90,20 110,50 110,80 C110,110 90,140 60,140 C50,140 30,140 25,150 C20,160 20,170 15,170 C11,170 10,160 15,150 C20,140 10,110 10,80 z\",{originX:\"center\",originY:\"center\",scaleX:e/120,scaleY:e/170})},octagon:function(e){const t=[],n=e/2;for(let e=0;e<8;e++){const i=2*Math.PI*e/8;t.push({x:n*Math.cos(i),y:n*Math.sin(i)})}return new fabric.Polygon(t,{originX:\"center\",originY:\"center\"})},flowerFrame:function(e){return new fabric.Path(\"M50,0 C60,30 90,40 100,50 C90,60 60,70 50,100 C40,70 10,60 0,50 C10,40 40,30 50,0 Z\",{originX:\"center\",originY:\"center\",scaleX:e/100,scaleY:e/100})},drop:function(e){return new fabric.Path(\"M50,0 C80,40 100,80 100,110 C100,150 80,180 50,180 C20,180 0,150 0,110 C0,80 20,40 50,0 Z\",{originX:\"center\",originY:\"center\",scaleX:e/180,scaleY:e/180})},cross:function(e){return new fabric.Path(\"M35,0 L65,0 L65,35 L100,35 L100,65 L65,65 L65,100 L35,100 L35,65 L0,65 L0,35 L35,35 Z\",{originX:\"center\",originY:\"center\",scaleX:e/100,scaleY:e/100})}};function t(e,t){const n=e.getActiveObject();n&&n.clipPath&&(n.clipPath.set({stroke:t.stroke||n.clipPath.stroke,strokeWidth:t.strokeWidth||n.clipPath.strokeWidth,strokeDashArray:t.strokeDashArray||n.clipPath.strokeDashArray}),n.frameOptions={...n.frameOptions,...t},e.fire&&e.fire(\"object:modified\",{target:n}),e.renderAll())}window.ImageEditor.prototype.initializeFrames=function(){const n=this;function i(e){if(e&&\"image\"===e.type&&e.clipPath){$(`${n.containerSelector} .frame-properties`).show(),$(`${n.containerSelector} #frame-border-color`).spectrum(\"set\",e.clipPath.stroke||\"#000000\"),$(`${n.containerSelector} #frame-border-width`).val(e.clipPath.strokeWidth||0);let t=\"\";e.clipPath.strokeDashArray&&(t=e.clipPath.strokeDashArray.join(\",\")),$(`${n.containerSelector} #frame-border-style`).val(t)}else $(`${n.containerSelector} .frame-properties`).hide()}$(`${this.containerSelector} .main-panel`).append('\\n      <div class=\"toolpanel\" id=\"frames-panel\">\\n        <div class=\"content\">\\n          <p class=\"title\">Molduras</p>\\n          <div class=\"frames-container\">\\n            <div class=\"frames-list\"></div>\\n          </div>\\n          <div class=\"frame-properties\" style=\"display: none;\">\\n            <h4>Propriedades da Moldura</h4>\\n            <div class=\"input-container\">\\n              <label>Cor da Borda</label>\\n              <input id=\"frame-border-color\" type=\"text\" value=\"#000000\">\\n            </div>\\n            <div class=\"input-container\">\\n              <label>Espessura da Borda</label>\\n              <div class=\"custom-number-input\">\\n                <button class=\"decrease\">-</button>\\n                <input type=\"number\" min=\"0\" max=\"20\" value=\"0\" step=\"1\" id=\"frame-border-width\">\\n                <button class=\"increase\">+</button>\\n              </div>\\n            </div>\\n            <div class=\"input-container\">\\n              <label>Estilo da Borda</label>\\n              <select id=\"frame-border-style\">\\n                <option value=\"\">Sólida</option>\\n                <option value=\"5,5\">Tracejada</option>\\n                <option value=\"10,10\">Pontilhada</option>\\n                <option value=\"15,10,5,10\">Traço-Ponto</option>\\n              </select>\\n            </div>\\n          </div>\\n          <hr>\\n          <div class=\"toolpanel-item frames-actions\">\\n            <button id=\"remove-frame\" class=\"btn btn-danger btn-sm btn-block\">Remover Moldura</button>\\n          </div>\\n        </div>\\n        <div class=\"hide-show-handler\"></div>\\n      </div>\\n    '),$(`${this.containerSelector} #frame-border-color`).spectrum({color:\"#000000\",showInput:!0,preferredFormat:\"hex\",change:function(e){t(n.canvas,{stroke:e.toHexString()})}}),$(`${this.containerSelector} #frame-border-width`).on(\"change\",(function(){t(n.canvas,{strokeWidth:parseFloat($(this).val())})})),$(`${this.containerSelector} #frame-border-style`).on(\"change\",(function(){const e=$(this).val();let i=null;e&&(i=e.split(\",\").map(Number)),t(n.canvas,{strokeDashArray:i})})),this.canvas.on(\"selection:created\",(function(e){i(e.selected[0])})),this.canvas.on(\"selection:updated\",(function(e){i(e.selected[0])})),this.canvas.on(\"selection:cleared\",(function(){$(`${n.containerSelector} .frame-properties`).hide()}));const a=$(`${this.containerSelector} .frames-list`);Object.keys(e).forEach((t=>{const i=$(`<div class=\"frame-item\" data-shape=\"${t}\">\\n        <div class=\"frame-preview\">\\n          <canvas width=\"60\" height=\"60\"></canvas>\\n        </div>\\n        <div class=\"frame-name\">${t.charAt(0).toUpperCase()+t.slice(1)}</div>\\n      </div>`);a.append(i);const o=i.find(\"canvas\")[0],s=new fabric.StaticCanvas(o),l=e[t](40);l.set({left:30,top:30,fill:\"rgba(0, 0, 0, 0.1)\",stroke:\"#666\",strokeWidth:1}),s.add(l),s.renderAll(),i.on(\"click\",(function(){!function(t,n,i={}){const a=t.getActiveObject();if(!a||!a.type||\"image\"!==a.type)return void(t.fire?t.fire(\"notification:show\",{message:\"Por favor, selecione uma imagem primeiro\",type:\"error\"}):alert(\"Por favor, selecione uma imagem primeiro\"));if(!e[n])return void(t.fire?t.fire(\"notification:show\",{message:\"Erro: forma não encontrada\",type:\"error\"}):alert(\"Erro: forma não encontrada\"));const o=e[n](200),s=a.width*a.scaleX,l=a.height*a.scaleY,r=a.angle;a.scaleX,a.scaleY,a.set({angle:0});const c={left:0,top:0,scaleX:1,scaleY:1,originX:\"center\",originY:\"center\",fill:\"transparent\",stroke:i.stroke||\"#000000\",strokeWidth:i.strokeWidth||0,strokeDashArray:i.strokeDashArray||null};o.set(c);const d=o.width/o.height;d>s/l?(o.scaleToHeight(l),o.scaleToWidth(l*d)):(o.scaleToWidth(s),o.scaleToHeight(s/d)),a.clipPath=o,a.clipPath.set({originX:\"center\",originY:\"center\",left:0,top:0}),a.set({angle:r}),a.frameType=n,a.frameOptions=c,t.fire&&t.fire(\"object:modified\",{target:a}),t.renderAll(),t.fire&&t.fire(\"notification:show\",{message:\"Moldura aplicada com sucesso\",type:\"success\"})}(n.canvas,t,{stroke:$(`${n.containerSelector} #frame-border-color`).spectrum(\"get\").toHexString(),strokeWidth:parseFloat($(`${n.containerSelector} #frame-border-width`).val()),strokeDashArray:$(`${n.containerSelector} #frame-border-style`).val()?$(`${n.containerSelector} #frame-border-style`).val().split(\",\").map(Number):null})}))})),$(`${this.containerSelector} #remove-frame`).on(\"click\",(function(){!function(e){const t=e.getActiveObject();t&&t.type&&\"image\"===t.type&&t.clipPath?(t.clipPath=null,t.frameType=null,t.frameOptions=null,e.fire&&e.fire(\"object:modified\",{target:t}),e.renderAll(),e.fire&&e.fire(\"notification:show\",{message:\"Moldura removida com sucesso\",type:\"success\"})):e.fire?e.fire(\"notification:show\",{message:\"Selecione uma imagem com moldura para remover\",type:\"warning\"}):alert(\"Selecione uma imagem com moldura para remover\")}(n.canvas)})),$(\"head\").append(\"\\n      <style>\\n        .frames-container {\\n          padding: 10px 0;\\n          max-height: 400px;\\n          overflow-y: auto;\\n        }\\n        .frames-list {\\n          display: grid;\\n          grid-template-columns: repeat(3, 1fr);\\n          gap: 10px;\\n        }\\n        .frame-item {\\n          display: flex;\\n          flex-direction: column;\\n          align-items: center;\\n          cursor: pointer;\\n          padding: 5px;\\n          border-radius: 4px;\\n          transition: background-color 0.2s;\\n        }\\n        .frame-item:hover {\\n          background-color: #f0f0f0;\\n        }\\n        .frame-preview {\\n          width: 60px;\\n          height: 60px;\\n          border: 1px solid #ddd;\\n          margin-bottom: 5px;\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          background-color: #fff;\\n          border-radius: 4px;\\n          overflow: hidden;\\n        }\\n        .frame-name {\\n          font-size: 12px;\\n          text-align: center;\\n        }\\n        .frame-properties h4 {\\n          margin-top: 15px;\\n          margin-bottom: 10px;\\n          font-size: 16px;\\n        }\\n        #remove-frame {\\n          width: 100%;\\n          background-color: #ff3860;\\n          color: white;\\n          border: none;\\n          padding: 8px 15px;\\n          border-radius: 4px;\\n          cursor: pointer;\\n          transition: background-color 0.3s;\\n          margin-top: 15px;\\n        }\\n        #remove-frame:hover {\\n          background-color: #e71a48;\\n        }\\n      </style>\\n    \")};const n=window.ImageEditor.prototype.init;window.ImageEditor.prototype.init=function(){n&&\"function\"==typeof n&&n.call(this),this.initializeFrames()}}();</script>\n<script>(function () {\n    'use strict';\n\n    const JSON_PROPS = ['metadata', 'excludeFromExport'];\n\n    const defaultButtons = [\n        'select',\n        'draw',\n        'textbox',\n        'background',\n        'undo',\n        'redo',\n        'save',\n        'clear',\n        'images',\n        'fullscreen',\n        'templates',\n        'frames'\n    ];\n\n    const defaultShapes = [];\n    const defaultImages = [];\n    const defaultTemplates = [];\n    const defaultFonts = [];\n\n    const defaultOptions = {\n        buttons: defaultButtons,\n        shapes: defaultShapes,\n        images: defaultImages,\n        templates: defaultTemplates,\n        fonts: defaultFonts,\n        dimensions: {\n            width: 1360,\n            height: 768\n        },\n        canvasSizeBlock: true,\n        fixedCanvas: true,\n        layers: true\n    };\n\n    const state = {\n        editor: null,\n        ready: false,\n        queue: [],\n        canvasListeners: [],\n        lastDesign: null,\n        currentOptions: defaultOptions\n    };\n\n    function waitForElm(selector, timeout = 8000) {\n        return new Promise((resolve, reject) => {\n            const immediate = document.querySelector(selector);\n            if (immediate) return resolve(immediate);\n\n            const root = document.querySelector('#image-editor-container') || document.body;\n            const obs = new MutationObserver(() => {\n                const el = document.querySelector(selector);\n                if (el) {\n                    obs.disconnect();\n                    resolve(el);\n                }\n            });\n\n            obs.observe(root, { childList: true, subtree: true });\n\n            if (timeout) {\n                setTimeout(() => {\n                    obs.disconnect();\n                    reject(new Error(`Timeout waiting for ${selector}`));\n                }, timeout);\n            }\n        });\n    }\n\n    function debounce(fn, wait = 250) {\n        let timeout;\n        return function debounced() {\n            clearTimeout(timeout);\n            const args = arguments;\n            timeout = setTimeout(() => fn.apply(null, args), wait);\n        };\n    }\n\n    function toJSONString(value) {\n        if (value == null) return value;\n        return typeof value === 'string' ? value : JSON.stringify(value);\n    }\n\n    function postMessage(type, payload) {\n        const message = JSON.stringify({ type, payload });\n        if (window.ReactNativeWebView && typeof window.ReactNativeWebView.postMessage === 'function') {\n            window.ReactNativeWebView.postMessage(message);\n        } else if (window.parent && window.parent !== window && typeof window.parent.postMessage === 'function') {\n            window.parent.postMessage(message, '*');\n        } else {\n            console.log('[Editor]', type, payload);\n        }\n    }\n\n    function removeCanvasListeners() {\n        if (!state.editor || !state.editor.canvas || !state.canvasListeners.length) return;\n        state.canvasListeners.forEach(({ event, handler }) => {\n            try {\n                state.editor.canvas.off(event, handler);\n            } catch (error) {\n                console.warn('Unable to detach canvas listener', event, error);\n            }\n        });\n        state.canvasListeners = [];\n    }\n\n    function destroyEditor() {\n        removeCanvasListeners();\n        if (state.editor && typeof state.editor.destroy === 'function') {\n            try {\n                state.editor.destroy();\n            } catch (error) {\n                console.warn('Unable to destroy editor cleanly', error);\n            }\n        }\n        state.editor = null;\n        state.ready = false;\n    }\n\n    const notifyChange = debounce(() => {\n        if (!state.editor || !state.editor.canvas) return;\n        try {\n            const json = JSON.stringify(state.editor.canvas.toJSON(JSON_PROPS));\n            state.lastDesign = json;\n            postMessage('change', { json });\n        } catch (error) {\n            postMessage('error', { message: error.message, phase: 'serialize-change' });\n        }\n    }, 300);\n\n    function attachCanvasListeners(editor) {\n        if (!editor || !editor.canvas) return;\n        const canvas = editor.canvas;\n        const events = [\n            'object:added',\n            'object:modified',\n            'object:removed',\n            'object:skewing',\n            'object:scaling',\n            'object:rotated',\n            'path:created',\n            'text:changed',\n            'selection:cleared',\n            'canvas:cleared'\n        ];\n\n        events.forEach((event) => {\n            const handler = notifyChange;\n            canvas.on(event, handler);\n            state.canvasListeners.push({ event, handler });\n        });\n\n        if (canvas.fire) {\n            const historyEvents = ['history:undo', 'history:redo'];\n            historyEvents.forEach((event) => {\n                const handler = notifyChange;\n                canvas.on(event, handler);\n                state.canvasListeners.push({ event, handler });\n            });\n        }\n    }\n\n    function wrapMethod(instance, methodName, wrapper) {\n        if (!instance || typeof instance[methodName] !== 'function') return;\n        const original = instance[methodName].bind(instance);\n        instance[methodName] = function wrapped() {\n            wrapper.apply(instance, arguments);\n            return original.apply(instance, arguments);\n        };\n    }\n\n    function wrapEditorExports(editor) {\n        wrapMethod(editor, 'saveToBrowser', function () {\n            try {\n                const json = JSON.stringify(editor.canvas.toJSON(JSON_PROPS));\n                postMessage('save', { json });\n            } catch (error) {\n                postMessage('error', { message: error.message, phase: 'save' });\n            }\n        });\n\n        wrapMethod(editor, 'downloadImage', function (data, extension) {\n            postMessage('export', {\n                format: extension || 'png',\n                dataUrl: data\n            });\n        });\n\n        wrapMethod(editor, 'downloadSVG', function (markup) {\n            postMessage('export', {\n                format: 'svg',\n                svg: markup\n            });\n        });\n\n        wrapMethod(editor, 'downloadJSON', function (json) {\n            postMessage('export', {\n                format: 'json',\n                json: toJSONString(json)\n            });\n        });\n    }\n\n    function autoActivateDrawTool() {\n        waitForElm('#image-editor-container #draw')\n            .then((btn) => {\n                if (!btn.disabled) btn.click();\n                postMessage('log', { message: 'Draw tool activated' });\n            })\n            .catch(() => {\n                /* ignore */\n            });\n    }\n\n    function mergeOptions(partial) {\n        if (!partial) return { ...defaultOptions };\n        const merged = {\n            ...defaultOptions,\n            ...partial,\n            dimensions: {\n                ...defaultOptions.dimensions,\n                ...(partial.dimensions || {})\n            }\n        };\n\n        if (Array.isArray(partial.buttons)) merged.buttons = partial.buttons;\n        if (Array.isArray(partial.shapes)) merged.shapes = partial.shapes;\n        if (Array.isArray(partial.images)) merged.images = partial.images;\n        if (Array.isArray(partial.templates)) merged.templates = partial.templates;\n        if (Array.isArray(partial.fonts)) merged.fonts = partial.fonts;\n\n        return merged;\n    }\n\n    function initializeEditor(options, initialJson) {\n        const mergedOptions = mergeOptions(options);\n        state.currentOptions = mergedOptions;\n\n        const startEditor = () => {\n            destroyEditor();\n            try {\n                state.editor = new ImageEditor('#image-editor-container', mergedOptions);\n                wrapEditorExports(state.editor);\n                attachCanvasListeners(state.editor);\n                autoActivateDrawTool();\n                state.ready = true;\n                postMessage('ready', { options: mergedOptions });\n                if (initialJson) {\n                    applyCanvasJSON(initialJson);\n                } else if (state.lastDesign) {\n                    // keep the previous state after reconfiguration\n                    applyCanvasJSON(state.lastDesign);\n                }\n                flushQueue();\n            } catch (error) {\n                console.error('Failed to initialize image editor', error);\n                postMessage('error', { message: error.message, phase: 'init' });\n            }\n        };\n\n        if (document.fonts && document.fonts.ready) {\n            document.fonts.ready.then(startEditor).catch(startEditor);\n        } else {\n            startEditor();\n        }\n    }\n\n    function applyCanvasJSON(json) {\n        if (!state.editor || !state.editor.setCanvasJSON || !json) return;\n        try {\n            state.editor.setCanvasJSON(json);\n            state.lastDesign = json;\n            notifyChange();\n        } catch (error) {\n            postMessage('error', { message: error.message, phase: 'apply-json' });\n        }\n    }\n\n    function handleExportRequest(payload) {\n        if (!state.editor || !state.editor.canvas) return;\n        const format = (payload && payload.format ? payload.format : 'json').toLowerCase();\n\n        try {\n            if (format === 'json') {\n                const json = JSON.stringify(state.editor.canvas.toJSON(JSON_PROPS));\n                postMessage('export', { format: 'json', json });\n                return;\n            }\n\n            if (format === 'svg') {\n                const svg = state.editor.canvas.toSVG({ suppressPreamble: true });\n                postMessage('export', { format: 'svg', svg });\n                return;\n            }\n\n            const dataUrl = state.editor.canvas.toDataURL({\n                format: format === 'jpg' ? 'jpeg' : format\n            });\n            postMessage('export', { format, dataUrl });\n        } catch (error) {\n            postMessage('error', { message: error.message, phase: 'request-export' });\n        }\n    }\n\n    function handleMessage(message) {\n        if (!message || typeof message !== 'object') return;\n        const { type, payload } = message;\n\n        if (type === 'configure') {\n            initializeEditor(payload && payload.options, payload && payload.initialJson);\n            return;\n        }\n\n        if (!state.ready || !state.editor) {\n            state.queue.push(message);\n            return;\n        }\n\n        switch (type) {\n            case 'set-design':\n                if (payload && payload.json) {\n                    applyCanvasJSON(payload.json);\n                }\n                break;\n            case 'request-json':\n                notifyChange();\n                break;\n            case 'request-export':\n                handleExportRequest(payload || {});\n                break;\n            case 'focus-tool':\n                if (payload && payload.tool && state.editor && typeof state.editor.setActiveTool === 'function') {\n                    try {\n                        state.editor.setActiveTool(payload.tool, { forceOpen: true });\n                    } catch (error) {\n                        postMessage('error', { message: error.message, phase: 'focus-tool' });\n                    }\n                }\n                break;\n            case 'undo':\n                if (state.editor && typeof state.editor.undo === 'function') {\n                    try {\n                        state.editor.undo();\n                    } catch (error) {\n                        postMessage('error', { message: error.message, phase: 'undo' });\n                    }\n                }\n                break;\n            case 'redo':\n                if (state.editor && typeof state.editor.redo === 'function') {\n                    try {\n                        state.editor.redo();\n                    } catch (error) {\n                        postMessage('error', { message: error.message, phase: 'redo' });\n                    }\n                }\n                break;\n            default:\n                postMessage('log', { message: `Unhandled message type: ${type}` });\n                break;\n        }\n    }\n\n    function flushQueue() {\n        if (!state.ready || !state.editor || !state.queue.length) return;\n        const pending = [...state.queue];\n        state.queue = [];\n        pending.forEach(handleMessage);\n    }\n\n    function parseMessage(event) {\n        if (!event || typeof event.data !== 'string') return null;\n        try {\n            return JSON.parse(event.data);\n        } catch (error) {\n            postMessage('error', { message: error.message, phase: 'parse-message' });\n            return null;\n        }\n    }\n\n    function handleNativeEvent(event) {\n        const message = parseMessage(event);\n        if (!message) return;\n        handleMessage(message);\n    }\n\n    const bootstrap = window.__FABRIC_EDITOR_BOOTSTRAP__ || {};\n    initializeEditor(bootstrap.options, bootstrap.initialJson);\n\n    document.addEventListener('message', handleNativeEvent);\n    window.addEventListener('message', handleNativeEvent);\n})();\n</script>\n</body>\n</html>\n";
export default editorHtml;
export { editorHtml };
